<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>VibeTerm - Mobile Terminal</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&s(x)}).observe(document,{childList:!0,subtree:!0});function r(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(d){if(d.ep)return;d.ep=!0;const g=r(d);fetch(d.href,g)}})();var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}),r}var Dh={exports:{}},Tn={},Ah={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cs=Symbol.for("react.element"),mf=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),yf=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),wf=Symbol.for("react.provider"),xf=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),Ef=Symbol.for("react.memo"),kf=Symbol.for("react.lazy"),Wl=Symbol.iterator;function Rf(e){return e===null||typeof e!="object"?null:(e=Wl&&e[Wl]||e["@@iterator"],typeof e=="function"?e:null)}var Th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bh=Object.assign,Ph={};function di(e,t,r){this.props=e,this.context=t,this.refs=Ph,this.updater=r||Th}di.prototype.isReactComponent={};di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Oh(){}Oh.prototype=di.prototype;function Fa(e,t,r){this.props=e,this.context=t,this.refs=Ph,this.updater=r||Th}var Na=Fa.prototype=new Oh;Na.constructor=Fa;Bh(Na,di.prototype);Na.isPureReactComponent=!0;var zl=Array.isArray,Ih=Object.prototype.hasOwnProperty,Ha={current:null},Fh={key:!0,ref:!0,__self:!0,__source:!0};function Nh(e,t,r){var s,d={},g=null,x=null;if(t!=null)for(s in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(g=""+t.key),t)Ih.call(t,s)&&!Fh.hasOwnProperty(s)&&(d[s]=t[s]);var i=arguments.length-2;if(i===1)d.children=r;else if(1<i){for(var o=Array(i),f=0;f<i;f++)o[f]=arguments[f+2];d.children=o}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)d[s]===void 0&&(d[s]=i[s]);return{$$typeof:cs,type:e,key:g,ref:x,props:d,_owner:Ha.current}}function Mf(e,t){return{$$typeof:cs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $a(e){return typeof e=="object"&&e!==null&&e.$$typeof===cs}function Df(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ul=/\/+/g;function oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Df(""+e.key):t.toString(36)}function js(e,t,r,s,d){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(g){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case cs:case mf:x=!0}}if(x)return x=e,d=d(x),e=s===""?"."+oo(x,0):s,zl(d)?(r="",e!=null&&(r=e.replace(Ul,"$&/")+"/"),js(d,t,r,"",function(f){return f})):d!=null&&($a(d)&&(d=Mf(d,r+(!d.key||x&&x.key===d.key?"":(""+d.key).replace(Ul,"$&/")+"/")+e)),t.push(d)),1;if(x=0,s=s===""?".":s+":",zl(e))for(var i=0;i<e.length;i++){g=e[i];var o=s+oo(g,i);x+=js(g,t,r,o,d)}else if(o=Rf(e),typeof o=="function")for(e=o.call(e),i=0;!(g=e.next()).done;)g=g.value,o=s+oo(g,i++),x+=js(g,t,r,o,d);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return x}function Ss(e,t,r){if(e==null)return e;var s=[],d=0;return js(e,s,"","",function(g){return t.call(r,g,d++)}),s}function Af(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ye={current:null},Ws={transition:null},Tf={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Ws,ReactCurrentOwner:Ha};function Hh(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Ss,forEach:function(e,t,r){Ss(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ss(e,function(){t++}),t},toArray:function(e){return Ss(e,function(t){return t})||[]},only:function(e){if(!$a(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=di;he.Fragment=Cf;he.Profiler=Sf;he.PureComponent=Fa;he.StrictMode=yf;he.Suspense=Lf;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tf;he.act=Hh;he.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Bh({},e.props),d=e.key,g=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,x=Ha.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(o in t)Ih.call(t,o)&&!Fh.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&i!==void 0?i[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){i=Array(o);for(var f=0;f<o;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:cs,type:e.type,key:d,ref:g,props:s,_owner:x}};he.createContext=function(e){return e={$$typeof:xf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wf,_context:e},e.Consumer=e};he.createElement=Nh;he.createFactory=function(e){var t=Nh.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:bf,render:e}};he.isValidElement=$a;he.lazy=function(e){return{$$typeof:kf,_payload:{_status:-1,_result:e},_init:Af}};he.memo=function(e,t){return{$$typeof:Ef,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Ws.transition;Ws.transition={};try{e()}finally{Ws.transition=t}};he.unstable_act=Hh;he.useCallback=function(e,t){return Ye.current.useCallback(e,t)};he.useContext=function(e){return Ye.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return Ye.current.useDeferredValue(e)};he.useEffect=function(e,t){return Ye.current.useEffect(e,t)};he.useId=function(){return Ye.current.useId()};he.useImperativeHandle=function(e,t,r){return Ye.current.useImperativeHandle(e,t,r)};he.useInsertionEffect=function(e,t){return Ye.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return Ye.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return Ye.current.useMemo(e,t)};he.useReducer=function(e,t,r){return Ye.current.useReducer(e,t,r)};he.useRef=function(e){return Ye.current.useRef(e)};he.useState=function(e){return Ye.current.useState(e)};he.useSyncExternalStore=function(e,t,r){return Ye.current.useSyncExternalStore(e,t,r)};he.useTransition=function(){return Ye.current.useTransition()};he.version="18.3.1";Ah.exports=he;var K=Ah.exports;const Bf=Rh(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=K,Of=Symbol.for("react.element"),If=Symbol.for("react.fragment"),Ff=Object.prototype.hasOwnProperty,Nf=Pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hf={key:!0,ref:!0,__self:!0,__source:!0};function $h(e,t,r){var s,d={},g=null,x=null;r!==void 0&&(g=""+r),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(x=t.ref);for(s in t)Ff.call(t,s)&&!Hf.hasOwnProperty(s)&&(d[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)d[s]===void 0&&(d[s]=t[s]);return{$$typeof:Of,type:e,key:g,ref:x,props:d,_owner:Nf.current}}Tn.Fragment=If;Tn.jsx=$h;Tn.jsxs=$h;Dh.exports=Tn;var H=Dh.exports,No={},jh={exports:{}},ct={},Wh={exports:{}},zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,M){var A=B.length;B.push(M);e:for(;0<A;){var O=A-1>>>1,I=B[O];if(0<d(I,M))B[O]=M,B[A]=I,A=O;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var M=B[0],A=B.pop();if(A!==M){B[0]=A;e:for(var O=0,I=B.length,z=I>>>1;O<z;){var U=2*(O+1)-1,Q=B[U],Y=U+1,j=B[Y];if(0>d(Q,A))Y<I&&0>d(j,Q)?(B[O]=j,B[Y]=A,O=Y):(B[O]=Q,B[U]=A,O=U);else if(Y<I&&0>d(j,A))B[O]=j,B[Y]=A,O=Y;else break e}}return M}function d(B,M){var A=B.sortIndex-M.sortIndex;return A!==0?A:B.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var x=Date,i=x.now();e.unstable_now=function(){return x.now()-i}}var o=[],f=[],_=1,h=null,p=3,S=!1,y=!1,u=!1,n=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(B){for(var M=r(f);M!==null;){if(M.callback===null)s(f);else if(M.startTime<=B)s(f),M.sortIndex=M.expirationTime,t(o,M);else break;M=r(f)}}function m(B){if(u=!1,c(B),!y)if(r(o)!==null)y=!0,$(w);else{var M=r(f);M!==null&&F(m,M.startTime-B)}}function w(B,M){y=!1,u&&(u=!1,a(C),C=-1),S=!0;var A=p;try{for(c(M),h=r(o);h!==null&&(!(h.expirationTime>M)||B&&!R());){var O=h.callback;if(typeof O=="function"){h.callback=null,p=h.priorityLevel;var I=O(h.expirationTime<=M);M=e.unstable_now(),typeof I=="function"?h.callback=I:h===r(o)&&s(o),c(M)}else s(o);h=r(o)}if(h!==null)var z=!0;else{var U=r(f);U!==null&&F(m,U.startTime-M),z=!1}return z}finally{h=null,p=A,S=!1}}var v=!1,b=null,C=-1,L=5,E=-1;function R(){return!(e.unstable_now()-E<L)}function k(){if(b!==null){var B=e.unstable_now();E=B;var M=!0;try{M=b(!0,B)}finally{M?D():(v=!1,b=null)}}else v=!1}var D;if(typeof l=="function")D=function(){l(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,N=T.port2;T.port1.onmessage=k,D=function(){N.postMessage(null)}}else D=function(){n(k,0)};function $(B){b=B,v||(v=!0,D())}function F(B,M){C=n(function(){B(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){y||S||(y=!0,$(w))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var A=p;p=M;try{return B()}finally{p=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,M){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var A=p;p=B;try{return M()}finally{p=A}},e.unstable_scheduleCallback=function(B,M,A){var O=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?O+A:O):A=O,B){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=A+I,B={id:_++,callback:M,priorityLevel:B,startTime:A,expirationTime:I,sortIndex:-1},A>O?(B.sortIndex=A,t(f,B),r(o)===null&&B===r(f)&&(u?(a(C),C=-1):u=!0,F(m,A-O))):(B.sortIndex=I,t(o,B),y||S||(y=!0,$(w))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var M=p;return function(){var A=p;p=M;try{return B.apply(this,arguments)}finally{p=A}}}})(zh);Wh.exports=zh;var $f=Wh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=K,lt=$f;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uh=new Set,zi={};function Pr(e,t){si(e,t),si(e+"Capture",t)}function si(e,t){for(zi[e]=t,e=0;e<t.length;e++)Uh.add(t[e])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ho=Object.prototype.hasOwnProperty,Wf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vl={},Gl={};function zf(e){return Ho.call(Gl,e)?!0:Ho.call(Vl,e)?!1:Wf.test(e)?Gl[e]=!0:(Vl[e]=!0,!1)}function Uf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vf(e,t,r,s){if(t===null||typeof t>"u"||Uf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Je(e,t,r,s,d,g,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=x}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new Je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new Je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new Je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new Je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new Je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new Je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new Je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new Je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new Je(e,5,!1,e.toLowerCase(),null,!1,!1)});var ja=/[\-:]([a-z])/g;function Wa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ja,Wa);$e[t]=new Je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ja,Wa);$e[t]=new Je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ja,Wa);$e[t]=new Je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new Je(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new Je(e,1,!1,e.toLowerCase(),null,!0,!0)});function za(e,t,r,s){var d=$e.hasOwnProperty(t)?$e[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vf(t,r,d,s)&&(r=null),s||d===null?zf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var qt=jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ws=Symbol.for("react.element"),Nr=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),Ua=Symbol.for("react.strict_mode"),$o=Symbol.for("react.profiler"),Vh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),Va=Symbol.for("react.forward_ref"),jo=Symbol.for("react.suspense"),Wo=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),qh=Symbol.for("react.offscreen"),ql=Symbol.iterator;function Si(e){return e===null||typeof e!="object"?null:(e=ql&&e[ql]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,ao;function Di(e){if(ao===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ao=t&&t[1]||""}return`
`+ao+e}var lo=!1;function co(e,t){if(!e||lo)return"";lo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var d=f.stack.split(`
`),g=s.stack.split(`
`),x=d.length-1,i=g.length-1;1<=x&&0<=i&&d[x]!==g[i];)i--;for(;1<=x&&0<=i;x--,i--)if(d[x]!==g[i]){if(x!==1||i!==1)do if(x--,i--,0>i||d[x]!==g[i]){var o=`
`+d[x].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=x&&0<=i);break}}}finally{lo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Di(e):""}function Gf(e){switch(e.tag){case 5:return Di(e.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 2:case 15:return e=co(e.type,!1),e;case 11:return e=co(e.type.render,!1),e;case 1:return e=co(e.type,!0),e;default:return""}}function zo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hr:return"Fragment";case Nr:return"Portal";case $o:return"Profiler";case Ua:return"StrictMode";case jo:return"Suspense";case Wo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gh:return(e.displayName||"Context")+".Consumer";case Vh:return(e._context.displayName||"Context")+".Provider";case Va:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return t=e.displayName||null,t!==null?t:zo(e.type)||"Memo";case Yt:t=e._payload,e=e._init;try{return zo(e(t))}catch{}}return null}function qf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zo(t);case 8:return t===Ua?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Kf(e){var t=Kh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,g=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(x){s=""+x,g.call(this,x)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(x){s=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xs(e){e._valueTracker||(e._valueTracker=Kf(e))}function Xh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Kh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function sn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Uo(e,t){var r=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=dr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yh(e,t){t=t.checked,t!=null&&za(e,"checked",t,!1)}function Vo(e,t){Yh(e,t);var r=dr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Go(e,t.type,r):t.hasOwnProperty("defaultValue")&&Go(e,t.type,dr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Go(e,t,r){(t!=="number"||sn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ai=Array.isArray;function Yr(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+dr(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function qo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(q(92));if(Ai(r)){if(1<r.length)throw Error(q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:dr(r)}}function Jh(e,t){var r=dr(t.value),s=dr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Jl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ko(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bs,Zh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bs=bs||document.createElement("div"),bs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ui(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xf=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(e){Xf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pi[t]=Pi[e]})});function eu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pi.hasOwnProperty(e)&&Pi[e]?(""+t).trim():t+"px"}function tu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=eu(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var Yf=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xo(e,t){if(t){if(Yf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Yo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function qa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,Jr=null,Qr=null;function Ql(e){if(e=ds(e)){if(typeof Qo!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Fn(t),Qo(e.stateNode,e.type,t))}}function ru(e){Jr?Qr?Qr.push(e):Qr=[e]:Jr=e}function iu(){if(Jr){var e=Jr,t=Qr;if(Qr=Jr=null,Ql(e),t)for(e=0;e<t.length;e++)Ql(t[e])}}function su(e,t){return e(t)}function nu(){}var ho=!1;function ou(e,t,r){if(ho)return e(t,r);ho=!0;try{return su(e,t,r)}finally{ho=!1,(Jr!==null||Qr!==null)&&(nu(),iu())}}function Vi(e,t){var r=e.stateNode;if(r===null)return null;var s=Fn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(q(231,t,typeof r));return r}var Zo=!1;if(zt)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{Zo=!1}function Jf(e,t,r,s,d,g,x,i,o){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(_){this.onError(_)}}var Oi=!1,nn=null,on=!1,ea=null,Qf={onError:function(e){Oi=!0,nn=e}};function Zf(e,t,r,s,d,g,x,i,o){Oi=!1,nn=null,Jf.apply(Qf,arguments)}function e_(e,t,r,s,d,g,x,i,o){if(Zf.apply(this,arguments),Oi){if(Oi){var f=nn;Oi=!1,nn=null}else throw Error(q(198));on||(on=!0,ea=f)}}function Or(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function au(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zl(e){if(Or(e)!==e)throw Error(q(188))}function t_(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(q(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var g=d.alternate;if(g===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===r)return Zl(d),e;if(g===s)return Zl(d),t;g=g.sibling}throw Error(q(188))}if(r.return!==s.return)r=d,s=g;else{for(var x=!1,i=d.child;i;){if(i===r){x=!0,r=d,s=g;break}if(i===s){x=!0,s=d,r=g;break}i=i.sibling}if(!x){for(i=g.child;i;){if(i===r){x=!0,r=g,s=d;break}if(i===s){x=!0,s=g,r=d;break}i=i.sibling}if(!x)throw Error(q(189))}}if(r.alternate!==s)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?e:t}function lu(e){return e=t_(e),e!==null?cu(e):null}function cu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cu(e);if(t!==null)return t;e=e.sibling}return null}var hu=lt.unstable_scheduleCallback,ec=lt.unstable_cancelCallback,r_=lt.unstable_shouldYield,i_=lt.unstable_requestPaint,ke=lt.unstable_now,s_=lt.unstable_getCurrentPriorityLevel,Ka=lt.unstable_ImmediatePriority,uu=lt.unstable_UserBlockingPriority,an=lt.unstable_NormalPriority,n_=lt.unstable_LowPriority,du=lt.unstable_IdlePriority,Bn=null,Mt=null;function o_(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Bn,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:c_,a_=Math.log,l_=Math.LN2;function c_(e){return e>>>=0,e===0?32:31-(a_(e)/l_|0)|0}var Ls=64,Es=4194304;function Ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ln(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,g=e.pingedLanes,x=r&268435455;if(x!==0){var i=x&~d;i!==0?s=Ti(i):(g&=x,g!==0&&(s=Ti(g)))}else x=r&~d,x!==0?s=Ti(x):g!==0&&(s=Ti(g));if(s===0)return 0;if(t!==0&&t!==s&&!(t&d)&&(d=s&-s,g=t&-t,d>=g||d===16&&(g&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-wt(t),d=1<<r,s|=e[r],t&=~d;return s}function h_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes;0<g;){var x=31-wt(g),i=1<<x,o=d[x];o===-1?(!(i&r)||i&s)&&(d[x]=h_(i,t)):o<=t&&(e.expiredLanes|=i),g&=~i}}function ta(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fu(){var e=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),e}function uo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wt(t),e[t]=r}function d_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-wt(r),g=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~g}}function Xa(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-wt(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var ve=0;function _u(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pu,Ya,gu,vu,mu,ra=!1,ks=[],ir=null,sr=null,nr=null,Gi=new Map,qi=new Map,Qt=[],f_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tc(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Gi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(t.pointerId)}}function xi(e,t,r,s,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:g,targetContainers:[d]},t!==null&&(t=ds(t),t!==null&&Ya(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function __(e,t,r,s,d){switch(t){case"focusin":return ir=xi(ir,e,t,r,s,d),!0;case"dragenter":return sr=xi(sr,e,t,r,s,d),!0;case"mouseover":return nr=xi(nr,e,t,r,s,d),!0;case"pointerover":var g=d.pointerId;return Gi.set(g,xi(Gi.get(g)||null,e,t,r,s,d)),!0;case"gotpointercapture":return g=d.pointerId,qi.set(g,xi(qi.get(g)||null,e,t,r,s,d)),!0}return!1}function Cu(e){var t=wr(e.target);if(t!==null){var r=Or(t);if(r!==null){if(t=r.tag,t===13){if(t=au(r),t!==null){e.blockedOn=t,mu(e.priority,function(){gu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ia(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Jo=s,r.target.dispatchEvent(s),Jo=null}else return t=ds(r),t!==null&&Ya(t),e.blockedOn=r,!1;t.shift()}return!0}function rc(e,t,r){zs(e)&&r.delete(t)}function p_(){ra=!1,ir!==null&&zs(ir)&&(ir=null),sr!==null&&zs(sr)&&(sr=null),nr!==null&&zs(nr)&&(nr=null),Gi.forEach(rc),qi.forEach(rc)}function bi(e,t){e.blockedOn===t&&(e.blockedOn=null,ra||(ra=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,p_)))}function Ki(e){function t(d){return bi(d,e)}if(0<ks.length){bi(ks[0],e);for(var r=1;r<ks.length;r++){var s=ks[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ir!==null&&bi(ir,e),sr!==null&&bi(sr,e),nr!==null&&bi(nr,e),Gi.forEach(t),qi.forEach(t),r=0;r<Qt.length;r++)s=Qt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)Cu(r),r.blockedOn===null&&Qt.shift()}var Zr=qt.ReactCurrentBatchConfig,cn=!0;function g_(e,t,r,s){var d=ve,g=Zr.transition;Zr.transition=null;try{ve=1,Ja(e,t,r,s)}finally{ve=d,Zr.transition=g}}function v_(e,t,r,s){var d=ve,g=Zr.transition;Zr.transition=null;try{ve=4,Ja(e,t,r,s)}finally{ve=d,Zr.transition=g}}function Ja(e,t,r,s){if(cn){var d=ia(e,t,r,s);if(d===null)wo(e,t,s,hn,r),tc(e,s);else if(__(d,e,t,r,s))s.stopPropagation();else if(tc(e,s),t&4&&-1<f_.indexOf(e)){for(;d!==null;){var g=ds(d);if(g!==null&&pu(g),g=ia(e,t,r,s),g===null&&wo(e,t,s,hn,r),g===d)break;d=g}d!==null&&s.stopPropagation()}else wo(e,t,s,null,r)}}var hn=null;function ia(e,t,r,s){if(hn=null,e=qa(s),e=wr(e),e!==null)if(t=Or(e),t===null)e=null;else if(r=t.tag,r===13){if(e=au(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hn=e,null}function yu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s_()){case Ka:return 1;case uu:return 4;case an:case n_:return 16;case du:return 536870912;default:return 16}default:return 16}}var er=null,Qa=null,Us=null;function Su(){if(Us)return Us;var e,t=Qa,r=t.length,s,d="value"in er?er.value:er.textContent,g=d.length;for(e=0;e<r&&t[e]===d[e];e++);var x=r-e;for(s=1;s<=x&&t[r-s]===d[g-s];s++);return Us=d.slice(e,1<s?1-s:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function ic(){return!1}function ht(e){function t(r,s,d,g,x){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(g):g[i]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Rs:ic,this.isPropagationStopped=ic,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),t}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=ht(fi),us=Le({},fi,{view:0,detail:0}),m_=ht(us),fo,_o,Li,Pn=Le({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Li&&(Li&&e.type==="mousemove"?(fo=e.screenX-Li.screenX,_o=e.screenY-Li.screenY):_o=fo=0,Li=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:_o}}),sc=ht(Pn),C_=Le({},Pn,{dataTransfer:0}),y_=ht(C_),S_=Le({},us,{relatedTarget:0}),po=ht(S_),w_=Le({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),x_=ht(w_),b_=Le({},fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L_=ht(b_),E_=Le({},fi,{data:0}),nc=ht(E_),k_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=M_[e])?!!t[e]:!1}function el(){return D_}var A_=Le({},us,{key:function(e){if(e.key){var t=k_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),T_=ht(A_),B_=Le({},Pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=ht(B_),P_=Le({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),O_=ht(P_),I_=Le({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),F_=ht(I_),N_=Le({},Pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H_=ht(N_),$_=[9,13,27,32],tl=zt&&"CompositionEvent"in window,Ii=null;zt&&"documentMode"in document&&(Ii=document.documentMode);var j_=zt&&"TextEvent"in window&&!Ii,wu=zt&&(!tl||Ii&&8<Ii&&11>=Ii),ac=" ",lc=!1;function xu(e,t){switch(e){case"keyup":return $_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function W_(e,t){switch(e){case"compositionend":return bu(t);case"keypress":return t.which!==32?null:(lc=!0,ac);case"textInput":return e=t.data,e===ac&&lc?null:e;default:return null}}function z_(e,t){if($r)return e==="compositionend"||!tl&&xu(e,t)?(e=Su(),Us=Qa=er=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wu&&t.locale!=="ko"?null:t.data;default:return null}}var U_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!U_[e.type]:t==="textarea"}function Lu(e,t,r,s){ru(s),t=un(t,"onChange"),0<t.length&&(r=new Za("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Fi=null,Xi=null;function V_(e){Iu(e,0)}function On(e){var t=zr(e);if(Xh(t))return e}function G_(e,t){if(e==="change")return t}var Eu=!1;if(zt){var go;if(zt){var vo="oninput"in document;if(!vo){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),vo=typeof hc.oninput=="function"}go=vo}else go=!1;Eu=go&&(!document.documentMode||9<document.documentMode)}function uc(){Fi&&(Fi.detachEvent("onpropertychange",ku),Xi=Fi=null)}function ku(e){if(e.propertyName==="value"&&On(Xi)){var t=[];Lu(t,Xi,e,qa(e)),ou(V_,t)}}function q_(e,t,r){e==="focusin"?(uc(),Fi=t,Xi=r,Fi.attachEvent("onpropertychange",ku)):e==="focusout"&&uc()}function K_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return On(Xi)}function X_(e,t){if(e==="click")return On(t)}function Y_(e,t){if(e==="input"||e==="change")return On(t)}function J_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:J_;function Yi(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!Ho.call(t,d)||!bt(e[d],t[d]))return!1}return!0}function dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fc(e,t){var r=dc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dc(r)}}function Ru(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ru(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mu(){for(var e=window,t=sn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=sn(e.document)}return t}function rl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Q_(e){var t=Mu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ru(r.ownerDocument.documentElement,r)){if(s!==null&&rl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,g=Math.min(s.start,d);s=s.end===void 0?g:Math.min(s.end,d),!e.extend&&g>s&&(d=s,s=g,g=d),d=fc(r,g);var x=fc(r,s);d&&x&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),g>s?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Z_=zt&&"documentMode"in document&&11>=document.documentMode,jr=null,sa=null,Ni=null,na=!1;function _c(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;na||jr==null||jr!==sn(s)||(s=jr,"selectionStart"in s&&rl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ni&&Yi(Ni,s)||(Ni=s,s=un(sa,"onSelect"),0<s.length&&(t=new Za("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=jr)))}function Ms(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wr={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionend:Ms("Transition","TransitionEnd")},mo={},Du={};zt&&(Du=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function In(e){if(mo[e])return mo[e];if(!Wr[e])return e;var t=Wr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Du)return mo[e]=t[r];return e}var Au=In("animationend"),Tu=In("animationiteration"),Bu=In("animationstart"),Pu=In("transitionend"),Ou=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Ou.set(e,t),Pr(t,[e])}for(var Co=0;Co<pc.length;Co++){var yo=pc[Co],ep=yo.toLowerCase(),tp=yo[0].toUpperCase()+yo.slice(1);_r(ep,"on"+tp)}_r(Au,"onAnimationEnd");_r(Tu,"onAnimationIteration");_r(Bu,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(Pu,"onTransitionEnd");si("onMouseEnter",["mouseout","mouseover"]);si("onMouseLeave",["mouseout","mouseover"]);si("onPointerEnter",["pointerout","pointerover"]);si("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function gc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,e_(s,t,void 0,e),e.currentTarget=null}function Iu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var g=void 0;if(t)for(var x=s.length-1;0<=x;x--){var i=s[x],o=i.instance,f=i.currentTarget;if(i=i.listener,o!==g&&d.isPropagationStopped())break e;gc(d,i,f),g=o}else for(x=0;x<s.length;x++){if(i=s[x],o=i.instance,f=i.currentTarget,i=i.listener,o!==g&&d.isPropagationStopped())break e;gc(d,i,f),g=o}}}if(on)throw e=ea,on=!1,ea=null,e}function ye(e,t){var r=t[ha];r===void 0&&(r=t[ha]=new Set);var s=e+"__bubble";r.has(s)||(Fu(t,e,2,!1),r.add(s))}function So(e,t,r){var s=0;t&&(s|=4),Fu(r,e,s,t)}var Ds="_reactListening"+Math.random().toString(36).slice(2);function Ji(e){if(!e[Ds]){e[Ds]=!0,Uh.forEach(function(r){r!=="selectionchange"&&(rp.has(r)||So(r,!1,e),So(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ds]||(t[Ds]=!0,So("selectionchange",!1,t))}}function Fu(e,t,r,s){switch(yu(t)){case 1:var d=g_;break;case 4:d=v_;break;default:d=Ja}r=d.bind(null,t,r,e),d=void 0,!Zo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function wo(e,t,r,s,d){var g=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var x=s.tag;if(x===3||x===4){var i=s.stateNode.containerInfo;if(i===d||i.nodeType===8&&i.parentNode===d)break;if(x===4)for(x=s.return;x!==null;){var o=x.tag;if((o===3||o===4)&&(o=x.stateNode.containerInfo,o===d||o.nodeType===8&&o.parentNode===d))return;x=x.return}for(;i!==null;){if(x=wr(i),x===null)return;if(o=x.tag,o===5||o===6){s=g=x;continue e}i=i.parentNode}}s=s.return}ou(function(){var f=g,_=qa(r),h=[];e:{var p=Ou.get(e);if(p!==void 0){var S=Za,y=e;switch(e){case"keypress":if(Vs(r)===0)break e;case"keydown":case"keyup":S=T_;break;case"focusin":y="focus",S=po;break;case"focusout":y="blur",S=po;break;case"beforeblur":case"afterblur":S=po;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=O_;break;case Au:case Tu:case Bu:S=x_;break;case Pu:S=F_;break;case"scroll":S=m_;break;case"wheel":S=H_;break;case"copy":case"cut":case"paste":S=L_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=oc}var u=(t&4)!==0,n=!u&&e==="scroll",a=u?p!==null?p+"Capture":null:p;u=[];for(var l=f,c;l!==null;){c=l;var m=c.stateNode;if(c.tag===5&&m!==null&&(c=m,a!==null&&(m=Vi(l,a),m!=null&&u.push(Qi(l,m,c)))),n)break;l=l.return}0<u.length&&(p=new S(p,y,null,r,_),h.push({event:p,listeners:u}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",p&&r!==Jo&&(y=r.relatedTarget||r.fromElement)&&(wr(y)||y[Ut]))break e;if((S||p)&&(p=_.window===_?_:(p=_.ownerDocument)?p.defaultView||p.parentWindow:window,S?(y=r.relatedTarget||r.toElement,S=f,y=y?wr(y):null,y!==null&&(n=Or(y),y!==n||y.tag!==5&&y.tag!==6)&&(y=null)):(S=null,y=f),S!==y)){if(u=sc,m="onMouseLeave",a="onMouseEnter",l="mouse",(e==="pointerout"||e==="pointerover")&&(u=oc,m="onPointerLeave",a="onPointerEnter",l="pointer"),n=S==null?p:zr(S),c=y==null?p:zr(y),p=new u(m,l+"leave",S,r,_),p.target=n,p.relatedTarget=c,m=null,wr(_)===f&&(u=new u(a,l+"enter",y,r,_),u.target=c,u.relatedTarget=n,m=u),n=m,S&&y)t:{for(u=S,a=y,l=0,c=u;c;c=Fr(c))l++;for(c=0,m=a;m;m=Fr(m))c++;for(;0<l-c;)u=Fr(u),l--;for(;0<c-l;)a=Fr(a),c--;for(;l--;){if(u===a||a!==null&&u===a.alternate)break t;u=Fr(u),a=Fr(a)}u=null}else u=null;S!==null&&vc(h,p,S,u,!1),y!==null&&n!==null&&vc(h,n,y,u,!0)}}e:{if(p=f?zr(f):window,S=p.nodeName&&p.nodeName.toLowerCase(),S==="select"||S==="input"&&p.type==="file")var w=G_;else if(cc(p))if(Eu)w=Y_;else{w=K_;var v=q_}else(S=p.nodeName)&&S.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=X_);if(w&&(w=w(e,f))){Lu(h,w,r,_);break e}v&&v(e,p,f),e==="focusout"&&(v=p._wrapperState)&&v.controlled&&p.type==="number"&&Go(p,"number",p.value)}switch(v=f?zr(f):window,e){case"focusin":(cc(v)||v.contentEditable==="true")&&(jr=v,sa=f,Ni=null);break;case"focusout":Ni=sa=jr=null;break;case"mousedown":na=!0;break;case"contextmenu":case"mouseup":case"dragend":na=!1,_c(h,r,_);break;case"selectionchange":if(Z_)break;case"keydown":case"keyup":_c(h,r,_)}var b;if(tl)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else $r?xu(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(wu&&r.locale!=="ko"&&($r||C!=="onCompositionStart"?C==="onCompositionEnd"&&$r&&(b=Su()):(er=_,Qa="value"in er?er.value:er.textContent,$r=!0)),v=un(f,C),0<v.length&&(C=new nc(C,e,null,r,_),h.push({event:C,listeners:v}),b?C.data=b:(b=bu(r),b!==null&&(C.data=b)))),(b=j_?W_(e,r):z_(e,r))&&(f=un(f,"onBeforeInput"),0<f.length&&(_=new nc("onBeforeInput","beforeinput",null,r,_),h.push({event:_,listeners:f}),_.data=b))}Iu(h,t)})}function Qi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function un(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=Vi(e,r),g!=null&&s.unshift(Qi(e,g,d)),g=Vi(e,t),g!=null&&s.push(Qi(e,g,d))),e=e.return}return s}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vc(e,t,r,s,d){for(var g=t._reactName,x=[];r!==null&&r!==s;){var i=r,o=i.alternate,f=i.stateNode;if(o!==null&&o===s)break;i.tag===5&&f!==null&&(i=f,d?(o=Vi(r,g),o!=null&&x.unshift(Qi(r,o,i))):d||(o=Vi(r,g),o!=null&&x.push(Qi(r,o,i)))),r=r.return}x.length!==0&&e.push({event:t,listeners:x})}var ip=/\r\n?/g,sp=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(ip,`
`).replace(sp,"")}function As(e,t,r){if(t=mc(t),mc(e)!==t&&r)throw Error(q(425))}function dn(){}var oa=null,aa=null;function la(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ca=typeof setTimeout=="function"?setTimeout:void 0,np=typeof clearTimeout=="function"?clearTimeout:void 0,Cc=typeof Promise=="function"?Promise:void 0,op=typeof queueMicrotask=="function"?queueMicrotask:typeof Cc<"u"?function(e){return Cc.resolve(null).then(e).catch(ap)}:ca;function ap(e){setTimeout(function(){throw e})}function xo(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),Ki(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);Ki(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Rt="__reactFiber$"+_i,Zi="__reactProps$"+_i,Ut="__reactContainer$"+_i,ha="__reactEvents$"+_i,lp="__reactListeners$"+_i,cp="__reactHandles$"+_i;function wr(e){var t=e[Rt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ut]||r[Rt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=yc(e);e!==null;){if(r=e[Rt])return r;e=yc(e)}return t}e=r,r=e.parentNode}return null}function ds(e){return e=e[Rt]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Fn(e){return e[Zi]||null}var ua=[],Ur=-1;function pr(e){return{current:e}}function Se(e){0>Ur||(e.current=ua[Ur],ua[Ur]=null,Ur--)}function Ce(e,t){Ur++,ua[Ur]=e.current,e.current=t}var fr={},Ve=pr(fr),et=pr(!1),Rr=fr;function ni(e,t){var r=e.type.contextTypes;if(!r)return fr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in r)d[g]=t[g];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function tt(e){return e=e.childContextTypes,e!=null}function fn(){Se(et),Se(Ve)}function Sc(e,t,r){if(Ve.current!==fr)throw Error(q(168));Ce(Ve,t),Ce(et,r)}function Nu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(q(108,qf(e)||"Unknown",d));return Le({},r,s)}function _n(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fr,Rr=Ve.current,Ce(Ve,e),Ce(et,et.current),!0}function wc(e,t,r){var s=e.stateNode;if(!s)throw Error(q(169));r?(e=Nu(e,t,Rr),s.__reactInternalMemoizedMergedChildContext=e,Se(et),Se(Ve),Ce(Ve,e)):Se(et),Ce(et,r)}var Nt=null,Nn=!1,bo=!1;function Hu(e){Nt===null?Nt=[e]:Nt.push(e)}function hp(e){Nn=!0,Hu(e)}function gr(){if(!bo&&Nt!==null){bo=!0;var e=0,t=ve;try{var r=Nt;for(ve=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Nt=null,Nn=!1}catch(d){throw Nt!==null&&(Nt=Nt.slice(e+1)),hu(Ka,gr),d}finally{ve=t,bo=!1}}return null}var Vr=[],Gr=0,pn=null,gn=0,ut=[],dt=0,Mr=null,Ht=1,$t="";function yr(e,t){Vr[Gr++]=gn,Vr[Gr++]=pn,pn=e,gn=t}function $u(e,t,r){ut[dt++]=Ht,ut[dt++]=$t,ut[dt++]=Mr,Mr=e;var s=Ht;e=$t;var d=32-wt(s)-1;s&=~(1<<d),r+=1;var g=32-wt(t)+d;if(30<g){var x=d-d%5;g=(s&(1<<x)-1).toString(32),s>>=x,d-=x,Ht=1<<32-wt(t)+d|r<<d|s,$t=g+e}else Ht=1<<g|r<<d|s,$t=e}function il(e){e.return!==null&&(yr(e,1),$u(e,1,0))}function sl(e){for(;e===pn;)pn=Vr[--Gr],Vr[Gr]=null,gn=Vr[--Gr],Vr[Gr]=null;for(;e===Mr;)Mr=ut[--dt],ut[dt]=null,$t=ut[--dt],ut[dt]=null,Ht=ut[--dt],ut[dt]=null}var ot=null,nt=null,we=!1,St=null;function ju(e,t){var r=ft(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function xc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,nt=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Mr!==null?{id:Ht,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ft(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ot=e,nt=null,!0):!1;default:return!1}}function da(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fa(e){if(we){var t=nt;if(t){var r=t;if(!xc(e,t)){if(da(e))throw Error(q(418));t=or(r.nextSibling);var s=ot;t&&xc(e,t)?ju(s,r):(e.flags=e.flags&-4097|2,we=!1,ot=e)}}else{if(da(e))throw Error(q(418));e.flags=e.flags&-4097|2,we=!1,ot=e}}}function bc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function Ts(e){if(e!==ot)return!1;if(!we)return bc(e),we=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!la(e.type,e.memoizedProps)),t&&(t=nt)){if(da(e))throw Wu(),Error(q(418));for(;t;)ju(e,t),t=or(t.nextSibling)}if(bc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nt=or(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=ot?or(e.stateNode.nextSibling):null;return!0}function Wu(){for(var e=nt;e;)e=or(e.nextSibling)}function oi(){nt=ot=null,we=!1}function nl(e){St===null?St=[e]:St.push(e)}var up=qt.ReactCurrentBatchConfig;function Ei(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var s=r.stateNode}if(!s)throw Error(q(147,e));var d=s,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(x){var i=d.refs;x===null?delete i[g]:i[g]=x},t._stringRef=g,t)}if(typeof e!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,e))}return e}function Bs(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lc(e){var t=e._init;return t(e._payload)}function zu(e){function t(a,l){if(e){var c=a.deletions;c===null?(a.deletions=[l],a.flags|=16):c.push(l)}}function r(a,l){if(!e)return null;for(;l!==null;)t(a,l),l=l.sibling;return null}function s(a,l){for(a=new Map;l!==null;)l.key!==null?a.set(l.key,l):a.set(l.index,l),l=l.sibling;return a}function d(a,l){return a=hr(a,l),a.index=0,a.sibling=null,a}function g(a,l,c){return a.index=c,e?(c=a.alternate,c!==null?(c=c.index,c<l?(a.flags|=2,l):c):(a.flags|=2,l)):(a.flags|=1048576,l)}function x(a){return e&&a.alternate===null&&(a.flags|=2),a}function i(a,l,c,m){return l===null||l.tag!==6?(l=Ao(c,a.mode,m),l.return=a,l):(l=d(l,c),l.return=a,l)}function o(a,l,c,m){var w=c.type;return w===Hr?_(a,l,c.props.children,m,c.key):l!==null&&(l.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Yt&&Lc(w)===l.type)?(m=d(l,c.props),m.ref=Ei(a,l,c),m.return=a,m):(m=Qs(c.type,c.key,c.props,null,a.mode,m),m.ref=Ei(a,l,c),m.return=a,m)}function f(a,l,c,m){return l===null||l.tag!==4||l.stateNode.containerInfo!==c.containerInfo||l.stateNode.implementation!==c.implementation?(l=To(c,a.mode,m),l.return=a,l):(l=d(l,c.children||[]),l.return=a,l)}function _(a,l,c,m,w){return l===null||l.tag!==7?(l=kr(c,a.mode,m,w),l.return=a,l):(l=d(l,c),l.return=a,l)}function h(a,l,c){if(typeof l=="string"&&l!==""||typeof l=="number")return l=Ao(""+l,a.mode,c),l.return=a,l;if(typeof l=="object"&&l!==null){switch(l.$$typeof){case ws:return c=Qs(l.type,l.key,l.props,null,a.mode,c),c.ref=Ei(a,null,l),c.return=a,c;case Nr:return l=To(l,a.mode,c),l.return=a,l;case Yt:var m=l._init;return h(a,m(l._payload),c)}if(Ai(l)||Si(l))return l=kr(l,a.mode,c,null),l.return=a,l;Bs(a,l)}return null}function p(a,l,c,m){var w=l!==null?l.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return w!==null?null:i(a,l,""+c,m);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case ws:return c.key===w?o(a,l,c,m):null;case Nr:return c.key===w?f(a,l,c,m):null;case Yt:return w=c._init,p(a,l,w(c._payload),m)}if(Ai(c)||Si(c))return w!==null?null:_(a,l,c,m,null);Bs(a,c)}return null}function S(a,l,c,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return a=a.get(c)||null,i(l,a,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ws:return a=a.get(m.key===null?c:m.key)||null,o(l,a,m,w);case Nr:return a=a.get(m.key===null?c:m.key)||null,f(l,a,m,w);case Yt:var v=m._init;return S(a,l,c,v(m._payload),w)}if(Ai(m)||Si(m))return a=a.get(c)||null,_(l,a,m,w,null);Bs(l,m)}return null}function y(a,l,c,m){for(var w=null,v=null,b=l,C=l=0,L=null;b!==null&&C<c.length;C++){b.index>C?(L=b,b=null):L=b.sibling;var E=p(a,b,c[C],m);if(E===null){b===null&&(b=L);break}e&&b&&E.alternate===null&&t(a,b),l=g(E,l,C),v===null?w=E:v.sibling=E,v=E,b=L}if(C===c.length)return r(a,b),we&&yr(a,C),w;if(b===null){for(;C<c.length;C++)b=h(a,c[C],m),b!==null&&(l=g(b,l,C),v===null?w=b:v.sibling=b,v=b);return we&&yr(a,C),w}for(b=s(a,b);C<c.length;C++)L=S(b,a,C,c[C],m),L!==null&&(e&&L.alternate!==null&&b.delete(L.key===null?C:L.key),l=g(L,l,C),v===null?w=L:v.sibling=L,v=L);return e&&b.forEach(function(R){return t(a,R)}),we&&yr(a,C),w}function u(a,l,c,m){var w=Si(c);if(typeof w!="function")throw Error(q(150));if(c=w.call(c),c==null)throw Error(q(151));for(var v=w=null,b=l,C=l=0,L=null,E=c.next();b!==null&&!E.done;C++,E=c.next()){b.index>C?(L=b,b=null):L=b.sibling;var R=p(a,b,E.value,m);if(R===null){b===null&&(b=L);break}e&&b&&R.alternate===null&&t(a,b),l=g(R,l,C),v===null?w=R:v.sibling=R,v=R,b=L}if(E.done)return r(a,b),we&&yr(a,C),w;if(b===null){for(;!E.done;C++,E=c.next())E=h(a,E.value,m),E!==null&&(l=g(E,l,C),v===null?w=E:v.sibling=E,v=E);return we&&yr(a,C),w}for(b=s(a,b);!E.done;C++,E=c.next())E=S(b,a,C,E.value,m),E!==null&&(e&&E.alternate!==null&&b.delete(E.key===null?C:E.key),l=g(E,l,C),v===null?w=E:v.sibling=E,v=E);return e&&b.forEach(function(k){return t(a,k)}),we&&yr(a,C),w}function n(a,l,c,m){if(typeof c=="object"&&c!==null&&c.type===Hr&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case ws:e:{for(var w=c.key,v=l;v!==null;){if(v.key===w){if(w=c.type,w===Hr){if(v.tag===7){r(a,v.sibling),l=d(v,c.props.children),l.return=a,a=l;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Yt&&Lc(w)===v.type){r(a,v.sibling),l=d(v,c.props),l.ref=Ei(a,v,c),l.return=a,a=l;break e}r(a,v);break}else t(a,v);v=v.sibling}c.type===Hr?(l=kr(c.props.children,a.mode,m,c.key),l.return=a,a=l):(m=Qs(c.type,c.key,c.props,null,a.mode,m),m.ref=Ei(a,l,c),m.return=a,a=m)}return x(a);case Nr:e:{for(v=c.key;l!==null;){if(l.key===v)if(l.tag===4&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){r(a,l.sibling),l=d(l,c.children||[]),l.return=a,a=l;break e}else{r(a,l);break}else t(a,l);l=l.sibling}l=To(c,a.mode,m),l.return=a,a=l}return x(a);case Yt:return v=c._init,n(a,l,v(c._payload),m)}if(Ai(c))return y(a,l,c,m);if(Si(c))return u(a,l,c,m);Bs(a,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,l!==null&&l.tag===6?(r(a,l.sibling),l=d(l,c),l.return=a,a=l):(r(a,l),l=Ao(c,a.mode,m),l.return=a,a=l),x(a)):r(a,l)}return n}var ai=zu(!0),Uu=zu(!1),vn=pr(null),mn=null,qr=null,ol=null;function al(){ol=qr=mn=null}function ll(e){var t=vn.current;Se(vn),e._currentValue=t}function _a(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ei(e,t){mn=e,ol=qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function pt(e){var t=e._currentValue;if(ol!==e)if(e={context:e,memoizedValue:t,next:null},qr===null){if(mn===null)throw Error(q(308));qr=e,mn.dependencies={lanes:0,firstContext:e}}else qr=qr.next=e;return t}var xr=null;function cl(e){xr===null?xr=[e]:xr.push(e)}function Vu(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,cl(t)):(r.next=d.next,d.next=r),t.interleaved=r,Vt(e,s)}function Vt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Jt=!1;function hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ar(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,Vt(e,r)}return d=s.interleaved,d===null?(t.next=t,cl(s)):(t.next=d.next,d.next=t),s.interleaved=t,Vt(e,r)}function Gs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Xa(e,r)}}function Ec(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var x={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};g===null?d=g=x:g=g.next=x,r=r.next}while(r!==null);g===null?d=g=t:g=g.next=t}else d=g=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cn(e,t,r,s){var d=e.updateQueue;Jt=!1;var g=d.firstBaseUpdate,x=d.lastBaseUpdate,i=d.shared.pending;if(i!==null){d.shared.pending=null;var o=i,f=o.next;o.next=null,x===null?g=f:x.next=f,x=o;var _=e.alternate;_!==null&&(_=_.updateQueue,i=_.lastBaseUpdate,i!==x&&(i===null?_.firstBaseUpdate=f:i.next=f,_.lastBaseUpdate=o))}if(g!==null){var h=d.baseState;x=0,_=f=o=null,i=g;do{var p=i.lane,S=i.eventTime;if((s&p)===p){_!==null&&(_=_.next={eventTime:S,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,u=i;switch(p=t,S=r,u.tag){case 1:if(y=u.payload,typeof y=="function"){h=y.call(S,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=u.payload,p=typeof y=="function"?y.call(S,h,p):y,p==null)break e;h=Le({},h,p);break e;case 2:Jt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=d.effects,p===null?d.effects=[i]:p.push(i))}else S={eventTime:S,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},_===null?(f=_=S,o=h):_=_.next=S,x|=p;if(i=i.next,i===null){if(i=d.shared.pending,i===null)break;p=i,i=p.next,p.next=null,d.lastBaseUpdate=p,d.shared.pending=null}}while(!0);if(_===null&&(o=h),d.baseState=o,d.firstBaseUpdate=f,d.lastBaseUpdate=_,t=d.shared.interleaved,t!==null){d=t;do x|=d.lane,d=d.next;while(d!==t)}else g===null&&(d.shared.lanes=0);Ar|=x,e.lanes=x,e.memoizedState=h}}function kc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(q(191,d));d.call(s)}}}var fs={},Dt=pr(fs),es=pr(fs),ts=pr(fs);function br(e){if(e===fs)throw Error(q(174));return e}function ul(e,t){switch(Ce(ts,t),Ce(es,e),Ce(Dt,fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ko(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ko(t,e)}Se(Dt),Ce(Dt,t)}function li(){Se(Dt),Se(es),Se(ts)}function qu(e){br(ts.current);var t=br(Dt.current),r=Ko(t,e.type);t!==r&&(Ce(es,e),Ce(Dt,r))}function dl(e){es.current===e&&(Se(Dt),Se(es))}var xe=pr(0);function yn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lo=[];function fl(){for(var e=0;e<Lo.length;e++)Lo[e]._workInProgressVersionPrimary=null;Lo.length=0}var qs=qt.ReactCurrentDispatcher,Eo=qt.ReactCurrentBatchConfig,Dr=0,be=null,Te=null,Oe=null,Sn=!1,Hi=!1,rs=0,dp=0;function je(){throw Error(q(321))}function _l(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bt(e[r],t[r]))return!1;return!0}function pl(e,t,r,s,d,g){if(Dr=g,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qs.current=e===null||e.memoizedState===null?gp:vp,e=r(s,d),Hi){g=0;do{if(Hi=!1,rs=0,25<=g)throw Error(q(301));g+=1,Oe=Te=null,t.updateQueue=null,qs.current=mp,e=r(s,d)}while(Hi)}if(qs.current=wn,t=Te!==null&&Te.next!==null,Dr=0,Oe=Te=be=null,Sn=!1,t)throw Error(q(300));return e}function gl(){var e=rs!==0;return rs=0,e}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?be.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function gt(){if(Te===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Oe===null?be.memoizedState:Oe.next;if(t!==null)Oe=t,Te=e;else{if(e===null)throw Error(q(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Oe===null?be.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function is(e,t){return typeof t=="function"?t(e):t}function ko(e){var t=gt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var s=Te,d=s.baseQueue,g=r.pending;if(g!==null){if(d!==null){var x=d.next;d.next=g.next,g.next=x}s.baseQueue=d=g,r.pending=null}if(d!==null){g=d.next,s=s.baseState;var i=x=null,o=null,f=g;do{var _=f.lane;if((Dr&_)===_)o!==null&&(o=o.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var h={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};o===null?(i=o=h,x=s):o=o.next=h,be.lanes|=_,Ar|=_}f=f.next}while(f!==null&&f!==g);o===null?x=s:o.next=i,bt(s,t.memoizedState)||(Ze=!0),t.memoizedState=s,t.baseState=x,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do g=d.lane,be.lanes|=g,Ar|=g,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ro(e){var t=gt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,g=t.memoizedState;if(d!==null){r.pending=null;var x=d=d.next;do g=e(g,x.action),x=x.next;while(x!==d);bt(g,t.memoizedState)||(Ze=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),r.lastRenderedState=g}return[g,s]}function Ku(){}function Xu(e,t){var r=be,s=gt(),d=t(),g=!bt(s.memoizedState,d);if(g&&(s.memoizedState=d,Ze=!0),s=s.queue,vl(Qu.bind(null,r,s,e),[e]),s.getSnapshot!==t||g||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,ss(9,Ju.bind(null,r,s,d,t),void 0,null),Ie===null)throw Error(q(349));Dr&30||Yu(r,t,d)}return d}function Yu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ju(e,t,r,s){t.value=r,t.getSnapshot=s,Zu(t)&&ed(e)}function Qu(e,t,r){return r(function(){Zu(t)&&ed(e)})}function Zu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bt(e,r)}catch{return!0}}function ed(e){var t=Vt(e,1);t!==null&&xt(t,e,1,-1)}function Rc(e){var t=Et();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:e},t.queue=e,e=e.dispatch=pp.bind(null,be,e),[t.memoizedState,e]}function ss(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function td(){return gt().memoizedState}function Ks(e,t,r,s){var d=Et();be.flags|=e,d.memoizedState=ss(1|t,r,void 0,s===void 0?null:s)}function Hn(e,t,r,s){var d=gt();s=s===void 0?null:s;var g=void 0;if(Te!==null){var x=Te.memoizedState;if(g=x.destroy,s!==null&&_l(s,x.deps)){d.memoizedState=ss(t,r,g,s);return}}be.flags|=e,d.memoizedState=ss(1|t,r,g,s)}function Mc(e,t){return Ks(8390656,8,e,t)}function vl(e,t){return Hn(2048,8,e,t)}function rd(e,t){return Hn(4,2,e,t)}function id(e,t){return Hn(4,4,e,t)}function sd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nd(e,t,r){return r=r!=null?r.concat([e]):null,Hn(4,4,sd.bind(null,t,e),r)}function ml(){}function od(e,t){var r=gt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&_l(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function ad(e,t){var r=gt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&_l(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function ld(e,t,r){return Dr&21?(bt(r,t)||(r=fu(),be.lanes|=r,Ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=r)}function fp(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var s=Eo.transition;Eo.transition={};try{e(!1),t()}finally{ve=r,Eo.transition=s}}function cd(){return gt().memoizedState}function _p(e,t,r){var s=cr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},hd(e))ud(t,r);else if(r=Vu(e,t,r,s),r!==null){var d=Xe();xt(r,e,s,d),dd(r,t,s)}}function pp(e,t,r){var s=cr(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(hd(e))ud(t,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var x=t.lastRenderedState,i=g(x,r);if(d.hasEagerState=!0,d.eagerState=i,bt(i,x)){var o=t.interleaved;o===null?(d.next=d,cl(t)):(d.next=o.next,o.next=d),t.interleaved=d;return}}catch{}finally{}r=Vu(e,t,d,s),r!==null&&(d=Xe(),xt(r,e,s,d),dd(r,t,s))}}function hd(e){var t=e.alternate;return e===be||t!==null&&t===be}function ud(e,t){Hi=Sn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function dd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Xa(e,r)}}var wn={readContext:pt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},gp={readContext:pt,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:Mc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ks(4194308,4,sd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ks(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ks(4,2,e,t)},useMemo:function(e,t){var r=Et();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Et();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=_p.bind(null,be,e),[s.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:Rc,useDebugValue:ml,useDeferredValue:function(e){return Et().memoizedState=e},useTransition:function(){var e=Rc(!1),t=e[0];return e=fp.bind(null,e[1]),Et().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=be,d=Et();if(we){if(r===void 0)throw Error(q(407));r=r()}else{if(r=t(),Ie===null)throw Error(q(349));Dr&30||Yu(s,t,r)}d.memoizedState=r;var g={value:r,getSnapshot:t};return d.queue=g,Mc(Qu.bind(null,s,g,e),[e]),s.flags|=2048,ss(9,Ju.bind(null,s,g,r,t),void 0,null),r},useId:function(){var e=Et(),t=Ie.identifierPrefix;if(we){var r=$t,s=Ht;r=(s&~(1<<32-wt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=rs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=dp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vp={readContext:pt,useCallback:od,useContext:pt,useEffect:vl,useImperativeHandle:nd,useInsertionEffect:rd,useLayoutEffect:id,useMemo:ad,useReducer:ko,useRef:td,useState:function(){return ko(is)},useDebugValue:ml,useDeferredValue:function(e){var t=gt();return ld(t,Te.memoizedState,e)},useTransition:function(){var e=ko(is)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Ku,useSyncExternalStore:Xu,useId:cd,unstable_isNewReconciler:!1},mp={readContext:pt,useCallback:od,useContext:pt,useEffect:vl,useImperativeHandle:nd,useInsertionEffect:rd,useLayoutEffect:id,useMemo:ad,useReducer:Ro,useRef:td,useState:function(){return Ro(is)},useDebugValue:ml,useDeferredValue:function(e){var t=gt();return Te===null?t.memoizedState=e:ld(t,Te.memoizedState,e)},useTransition:function(){var e=Ro(is)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Ku,useSyncExternalStore:Xu,useId:cd,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function pa(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Le({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $n={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Xe(),d=cr(e),g=Wt(s,d);g.payload=t,r!=null&&(g.callback=r),t=ar(e,g,d),t!==null&&(xt(t,e,d,s),Gs(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Xe(),d=cr(e),g=Wt(s,d);g.tag=1,g.payload=t,r!=null&&(g.callback=r),t=ar(e,g,d),t!==null&&(xt(t,e,d,s),Gs(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xe(),s=cr(e),d=Wt(r,s);d.tag=2,t!=null&&(d.callback=t),t=ar(e,d,s),t!==null&&(xt(t,e,s,r),Gs(t,e,s))}};function Dc(e,t,r,s,d,g,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,x):t.prototype&&t.prototype.isPureReactComponent?!Yi(r,s)||!Yi(d,g):!0}function fd(e,t,r){var s=!1,d=fr,g=t.contextType;return typeof g=="object"&&g!==null?g=pt(g):(d=tt(t)?Rr:Ve.current,s=t.contextTypes,g=(s=s!=null)?ni(e,d):fr),t=new t(r,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$n,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=g),t}function Ac(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&$n.enqueueReplaceState(t,t.state,null)}function ga(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},hl(e);var g=t.contextType;typeof g=="object"&&g!==null?d.context=pt(g):(g=tt(t)?Rr:Ve.current,d.context=ni(e,g)),d.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(pa(e,t,g,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&$n.enqueueReplaceState(d,d.state,null),Cn(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function ci(e,t){try{var r="",s=t;do r+=Gf(s),s=s.return;while(s);var d=r}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:d,digest:null}}function Mo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function va(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Cp=typeof WeakMap=="function"?WeakMap:Map;function _d(e,t,r){r=Wt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){bn||(bn=!0,ka=s),va(e,t)},r}function pd(e,t,r){r=Wt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){va(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){va(e,t),typeof s!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),r}function Tc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Cp;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=Bp.bind(null,e,t,r),t.then(e,e))}function Bc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pc(e,t,r,s,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wt(-1,1),t.tag=2,ar(r,t,1))),r.lanes|=1),e)}var yp=qt.ReactCurrentOwner,Ze=!1;function Ke(e,t,r,s){t.child=e===null?Uu(t,null,r,s):ai(t,e.child,r,s)}function Oc(e,t,r,s,d){r=r.render;var g=t.ref;return ei(t,d),s=pl(e,t,r,s,g,d),r=gl(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Gt(e,t,d)):(we&&r&&il(t),t.flags|=1,Ke(e,t,s,d),t.child)}function Ic(e,t,r,s,d){if(e===null){var g=r.type;return typeof g=="function"&&!El(g)&&g.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=g,gd(e,t,g,s,d)):(e=Qs(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&d)){var x=g.memoizedProps;if(r=r.compare,r=r!==null?r:Yi,r(x,s)&&e.ref===t.ref)return Gt(e,t,d)}return t.flags|=1,e=hr(g,s),e.ref=t.ref,e.return=t,t.child=e}function gd(e,t,r,s,d){if(e!==null){var g=e.memoizedProps;if(Yi(g,s)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=s=g,(e.lanes&d)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Gt(e,t,d)}return ma(e,t,r,s,d)}function vd(e,t,r){var s=t.pendingProps,d=s.children,g=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Xr,st),st|=r;else{if(!(r&1073741824))return e=g!==null?g.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Xr,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=g!==null?g.baseLanes:r,Ce(Xr,st),st|=s}else g!==null?(s=g.baseLanes|r,t.memoizedState=null):s=r,Ce(Xr,st),st|=s;return Ke(e,t,d,r),t.child}function md(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ma(e,t,r,s,d){var g=tt(r)?Rr:Ve.current;return g=ni(t,g),ei(t,d),r=pl(e,t,r,s,g,d),s=gl(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Gt(e,t,d)):(we&&s&&il(t),t.flags|=1,Ke(e,t,r,d),t.child)}function Fc(e,t,r,s,d){if(tt(r)){var g=!0;_n(t)}else g=!1;if(ei(t,d),t.stateNode===null)Xs(e,t),fd(t,r,s),ga(t,r,s,d),s=!0;else if(e===null){var x=t.stateNode,i=t.memoizedProps;x.props=i;var o=x.context,f=r.contextType;typeof f=="object"&&f!==null?f=pt(f):(f=tt(r)?Rr:Ve.current,f=ni(t,f));var _=r.getDerivedStateFromProps,h=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function";h||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(i!==s||o!==f)&&Ac(t,x,s,f),Jt=!1;var p=t.memoizedState;x.state=p,Cn(t,s,x,d),o=t.memoizedState,i!==s||p!==o||et.current||Jt?(typeof _=="function"&&(pa(t,r,_,s),o=t.memoizedState),(i=Jt||Dc(t,r,i,s,p,o,f))?(h||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),x.props=s,x.state=o,x.context=f,s=i):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{x=t.stateNode,Gu(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:Ct(t.type,i),x.props=f,h=t.pendingProps,p=x.context,o=r.contextType,typeof o=="object"&&o!==null?o=pt(o):(o=tt(r)?Rr:Ve.current,o=ni(t,o));var S=r.getDerivedStateFromProps;(_=typeof S=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(i!==h||p!==o)&&Ac(t,x,s,o),Jt=!1,p=t.memoizedState,x.state=p,Cn(t,s,x,d);var y=t.memoizedState;i!==h||p!==y||et.current||Jt?(typeof S=="function"&&(pa(t,r,S,s),y=t.memoizedState),(f=Jt||Dc(t,r,f,s,p,y,o)||!1)?(_||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(s,y,o),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(s,y,o)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=y),x.props=s,x.state=y,x.context=o,s=f):(typeof x.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return Ca(e,t,r,s,g,d)}function Ca(e,t,r,s,d,g){md(e,t);var x=(t.flags&128)!==0;if(!s&&!x)return d&&wc(t,r,!1),Gt(e,t,g);s=t.stateNode,yp.current=t;var i=x&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&x?(t.child=ai(t,e.child,null,g),t.child=ai(t,null,i,g)):Ke(e,t,i,g),t.memoizedState=s.state,d&&wc(t,r,!0),t.child}function Cd(e){var t=e.stateNode;t.pendingContext?Sc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sc(e,t.context,!1),ul(e,t.containerInfo)}function Nc(e,t,r,s,d){return oi(),nl(d),t.flags|=256,Ke(e,t,r,s),t.child}var ya={dehydrated:null,treeContext:null,retryLane:0};function Sa(e){return{baseLanes:e,cachePool:null,transitions:null}}function yd(e,t,r){var s=t.pendingProps,d=xe.current,g=!1,x=(t.flags&128)!==0,i;if((i=x)||(i=e!==null&&e.memoizedState===null?!1:(d&2)!==0),i?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ce(xe,d&1),e===null)return fa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(x=s.children,e=s.fallback,g?(s=t.mode,g=t.child,x={mode:"hidden",children:x},!(s&1)&&g!==null?(g.childLanes=0,g.pendingProps=x):g=zn(x,s,0,null),e=kr(e,s,r,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=Sa(r),t.memoizedState=ya,e):Cl(t,x));if(d=e.memoizedState,d!==null&&(i=d.dehydrated,i!==null))return Sp(e,t,x,s,i,d,r);if(g){g=s.fallback,x=t.mode,d=e.child,i=d.sibling;var o={mode:"hidden",children:s.children};return!(x&1)&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=hr(d,o),s.subtreeFlags=d.subtreeFlags&14680064),i!==null?g=hr(i,g):(g=kr(g,x,r,null),g.flags|=2),g.return=t,s.return=t,s.sibling=g,t.child=s,s=g,g=t.child,x=e.child.memoizedState,x=x===null?Sa(r):{baseLanes:x.baseLanes|r,cachePool:null,transitions:x.transitions},g.memoizedState=x,g.childLanes=e.childLanes&~r,t.memoizedState=ya,s}return g=e.child,e=g.sibling,s=hr(g,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Cl(e,t){return t=zn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ps(e,t,r,s){return s!==null&&nl(s),ai(t,e.child,null,r),e=Cl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sp(e,t,r,s,d,g,x){if(r)return t.flags&256?(t.flags&=-257,s=Mo(Error(q(422))),Ps(e,t,x,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=s.fallback,d=t.mode,s=zn({mode:"visible",children:s.children},d,0,null),g=kr(g,d,x,null),g.flags|=2,s.return=t,g.return=t,s.sibling=g,t.child=s,t.mode&1&&ai(t,e.child,null,x),t.child.memoizedState=Sa(x),t.memoizedState=ya,g);if(!(t.mode&1))return Ps(e,t,x,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var i=s.dgst;return s=i,g=Error(q(419)),s=Mo(g,s,void 0),Ps(e,t,x,s)}if(i=(x&e.childLanes)!==0,Ze||i){if(s=Ie,s!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(s.suspendedLanes|x)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Vt(e,d),xt(s,e,d,-1))}return Ll(),s=Mo(Error(q(421))),Ps(e,t,x,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Pp.bind(null,e),d._reactRetry=t,null):(e=g.treeContext,nt=or(d.nextSibling),ot=t,we=!0,St=null,e!==null&&(ut[dt++]=Ht,ut[dt++]=$t,ut[dt++]=Mr,Ht=e.id,$t=e.overflow,Mr=t),t=Cl(t,s.children),t.flags|=4096,t)}function Hc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),_a(e.return,t,r)}function Do(e,t,r,s,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=r,g.tailMode=d)}function Sd(e,t,r){var s=t.pendingProps,d=s.revealOrder,g=s.tail;if(Ke(e,t,s.children,r),s=xe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,r,t);else if(e.tag===19)Hc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ce(xe,s),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&yn(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Do(t,!1,d,r,g);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&yn(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Do(t,!0,r,null,g);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,r=hr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wp(e,t,r){switch(t.tag){case 3:Cd(t),oi();break;case 5:qu(t);break;case 1:tt(t.type)&&_n(t);break;case 4:ul(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;Ce(vn,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ce(xe,xe.current&1),t.flags|=128,null):r&t.child.childLanes?yd(e,t,r):(Ce(xe,xe.current&1),e=Gt(e,t,r),e!==null?e.sibling:null);Ce(xe,xe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Sd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(xe,xe.current),s)break;return null;case 22:case 23:return t.lanes=0,vd(e,t,r)}return Gt(e,t,r)}var wd,wa,xd,bd;wd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wa=function(){};xd=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,br(Dt.current);var g=null;switch(r){case"input":d=Uo(e,d),s=Uo(e,s),g=[];break;case"select":d=Le({},d,{value:void 0}),s=Le({},s,{value:void 0}),g=[];break;case"textarea":d=qo(e,d),s=qo(e,s),g=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=dn)}Xo(r,s);var x;r=null;for(f in d)if(!s.hasOwnProperty(f)&&d.hasOwnProperty(f)&&d[f]!=null)if(f==="style"){var i=d[f];for(x in i)i.hasOwnProperty(x)&&(r||(r={}),r[x]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(zi.hasOwnProperty(f)?g||(g=[]):(g=g||[]).push(f,null));for(f in s){var o=s[f];if(i=d?.[f],s.hasOwnProperty(f)&&o!==i&&(o!=null||i!=null))if(f==="style")if(i){for(x in i)!i.hasOwnProperty(x)||o&&o.hasOwnProperty(x)||(r||(r={}),r[x]="");for(x in o)o.hasOwnProperty(x)&&i[x]!==o[x]&&(r||(r={}),r[x]=o[x])}else r||(g||(g=[]),g.push(f,r)),r=o;else f==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(g=g||[]).push(f,o)):f==="children"?typeof o!="string"&&typeof o!="number"||(g=g||[]).push(f,""+o):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(zi.hasOwnProperty(f)?(o!=null&&f==="onScroll"&&ye("scroll",e),g||i===o||(g=[])):(g=g||[]).push(f,o))}r&&(g=g||[]).push("style",r);var f=g;(t.updateQueue=f)&&(t.flags|=4)}};bd=function(e,t,r,s){r!==s&&(t.flags|=4)};function ki(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function xp(e,t,r){var s=t.pendingProps;switch(sl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return tt(t.type)&&fn(),We(t),null;case 3:return s=t.stateNode,li(),Se(et),Se(Ve),fl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ts(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(Da(St),St=null))),wa(e,t),We(t),null;case 5:dl(t);var d=br(ts.current);if(r=t.type,e!==null&&t.stateNode!=null)xd(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(q(166));return We(t),null}if(e=br(Dt.current),Ts(t)){s=t.stateNode,r=t.type;var g=t.memoizedProps;switch(s[Rt]=t,s[Zi]=g,e=(t.mode&1)!==0,r){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(d=0;d<Bi.length;d++)ye(Bi[d],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":Kl(s,g),ye("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!g.multiple},ye("invalid",s);break;case"textarea":Yl(s,g),ye("invalid",s)}Xo(r,g),d=null;for(var x in g)if(g.hasOwnProperty(x)){var i=g[x];x==="children"?typeof i=="string"?s.textContent!==i&&(g.suppressHydrationWarning!==!0&&As(s.textContent,i,e),d=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(g.suppressHydrationWarning!==!0&&As(s.textContent,i,e),d=["children",""+i]):zi.hasOwnProperty(x)&&i!=null&&x==="onScroll"&&ye("scroll",s)}switch(r){case"input":xs(s),Xl(s,g,!0);break;case"textarea":xs(s),Jl(s);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(s.onclick=dn)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=x.createElement(r,{is:s.is}):(e=x.createElement(r),r==="select"&&(x=e,s.multiple?x.multiple=!0:s.size&&(x.size=s.size))):e=x.createElementNS(e,r),e[Rt]=t,e[Zi]=s,wd(e,t,!1,!1),t.stateNode=e;e:{switch(x=Yo(r,s),r){case"dialog":ye("cancel",e),ye("close",e),d=s;break;case"iframe":case"object":case"embed":ye("load",e),d=s;break;case"video":case"audio":for(d=0;d<Bi.length;d++)ye(Bi[d],e);d=s;break;case"source":ye("error",e),d=s;break;case"img":case"image":case"link":ye("error",e),ye("load",e),d=s;break;case"details":ye("toggle",e),d=s;break;case"input":Kl(e,s),d=Uo(e,s),ye("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=Le({},s,{value:void 0}),ye("invalid",e);break;case"textarea":Yl(e,s),d=qo(e,s),ye("invalid",e);break;default:d=s}Xo(r,d),i=d;for(g in i)if(i.hasOwnProperty(g)){var o=i[g];g==="style"?tu(e,o):g==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Zh(e,o)):g==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ui(e,o):typeof o=="number"&&Ui(e,""+o):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(zi.hasOwnProperty(g)?o!=null&&g==="onScroll"&&ye("scroll",e):o!=null&&za(e,g,o,x))}switch(r){case"input":xs(e),Xl(e,s,!1);break;case"textarea":xs(e),Jl(e);break;case"option":s.value!=null&&e.setAttribute("value",""+dr(s.value));break;case"select":e.multiple=!!s.multiple,g=s.value,g!=null?Yr(e,!!s.multiple,g,!1):s.defaultValue!=null&&Yr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=dn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return We(t),null;case 6:if(e&&t.stateNode!=null)bd(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(q(166));if(r=br(ts.current),br(Dt.current),Ts(t)){if(s=t.stateNode,r=t.memoizedProps,s[Rt]=t,(g=s.nodeValue!==r)&&(e=ot,e!==null))switch(e.tag){case 3:As(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&As(s.nodeValue,r,(e.mode&1)!==0)}g&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Rt]=t,t.stateNode=s}return We(t),null;case 13:if(Se(xe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&nt!==null&&t.mode&1&&!(t.flags&128))Wu(),oi(),t.flags|=98560,g=!1;else if(g=Ts(t),s!==null&&s.dehydrated!==null){if(e===null){if(!g)throw Error(q(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(q(317));g[Rt]=t}else oi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;We(t),g=!1}else St!==null&&(Da(St),St=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Be===0&&(Be=3):Ll())),t.updateQueue!==null&&(t.flags|=4),We(t),null);case 4:return li(),wa(e,t),e===null&&Ji(t.stateNode.containerInfo),We(t),null;case 10:return ll(t.type._context),We(t),null;case 17:return tt(t.type)&&fn(),We(t),null;case 19:if(Se(xe),g=t.memoizedState,g===null)return We(t),null;if(s=(t.flags&128)!==0,x=g.rendering,x===null)if(s)ki(g,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(x=yn(e),x!==null){for(t.flags|=128,ki(g,!1),s=x.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)g=r,e=s,g.flags&=14680066,x=g.alternate,x===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,e=x.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ce(xe,xe.current&1|2),t.child}e=e.sibling}g.tail!==null&&ke()>hi&&(t.flags|=128,s=!0,ki(g,!1),t.lanes=4194304)}else{if(!s)if(e=yn(x),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ki(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!we)return We(t),null}else 2*ke()-g.renderingStartTime>hi&&r!==1073741824&&(t.flags|=128,s=!0,ki(g,!1),t.lanes=4194304);g.isBackwards?(x.sibling=t.child,t.child=x):(r=g.last,r!==null?r.sibling=x:t.child=x,g.last=x)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=ke(),t.sibling=null,r=xe.current,Ce(xe,s?r&1|2:r&1),t):(We(t),null);case 22:case 23:return bl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?st&1073741824&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function bp(e,t){switch(sl(t),t.tag){case 1:return tt(t.type)&&fn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return li(),Se(et),Se(Ve),fl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dl(t),null;case 13:if(Se(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(xe),null;case 4:return li(),null;case 10:return ll(t.type._context),null;case 22:case 23:return bl(),null;case 24:return null;default:return null}}var Os=!1,Ue=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,re=null;function Kr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ee(e,t,s)}else r.current=null}function xa(e,t,r){try{r()}catch(s){Ee(e,t,s)}}var $c=!1;function Ep(e,t){if(oa=cn,e=Mu(),rl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var x=0,i=-1,o=-1,f=0,_=0,h=e,p=null;t:for(;;){for(var S;h!==r||d!==0&&h.nodeType!==3||(i=x+d),h!==g||s!==0&&h.nodeType!==3||(o=x+s),h.nodeType===3&&(x+=h.nodeValue.length),(S=h.firstChild)!==null;)p=h,h=S;for(;;){if(h===e)break t;if(p===r&&++f===d&&(i=x),p===g&&++_===s&&(o=x),(S=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=S}r=i===-1||o===-1?null:{start:i,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(aa={focusedElem:e,selectionRange:r},cn=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var u=y.memoizedProps,n=y.memoizedState,a=t.stateNode,l=a.getSnapshotBeforeUpdate(t.elementType===t.type?u:Ct(t.type,u),n);a.__reactInternalSnapshotBeforeUpdate=l}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(m){Ee(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return y=$c,$c=!1,y}function $i(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var g=d.destroy;d.destroy=void 0,g!==void 0&&xa(t,r,g)}d=d.next}while(d!==s)}}function jn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ba(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ld(e){var t=e.alternate;t!==null&&(e.alternate=null,Ld(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[Zi],delete t[ha],delete t[lp],delete t[cp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ed(e){return e.tag===5||e.tag===3||e.tag===4}function jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function La(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=dn));else if(s!==4&&(e=e.child,e!==null))for(La(e,t,r),e=e.sibling;e!==null;)La(e,t,r),e=e.sibling}function Ea(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ea(e,t,r),e=e.sibling;e!==null;)Ea(e,t,r),e=e.sibling}var Fe=null,yt=!1;function Xt(e,t,r){for(r=r.child;r!==null;)kd(e,t,r),r=r.sibling}function kd(e,t,r){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Bn,r)}catch{}switch(r.tag){case 5:Ue||Kr(r,t);case 6:var s=Fe,d=yt;Fe=null,Xt(e,t,r),Fe=s,yt=d,Fe!==null&&(yt?(e=Fe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fe.removeChild(r.stateNode));break;case 18:Fe!==null&&(yt?(e=Fe,r=r.stateNode,e.nodeType===8?xo(e.parentNode,r):e.nodeType===1&&xo(e,r),Ki(e)):xo(Fe,r.stateNode));break;case 4:s=Fe,d=yt,Fe=r.stateNode.containerInfo,yt=!0,Xt(e,t,r),Fe=s,yt=d;break;case 0:case 11:case 14:case 15:if(!Ue&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var g=d,x=g.destroy;g=g.tag,x!==void 0&&(g&2||g&4)&&xa(r,t,x),d=d.next}while(d!==s)}Xt(e,t,r);break;case 1:if(!Ue&&(Kr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){Ee(r,t,i)}Xt(e,t,r);break;case 21:Xt(e,t,r);break;case 22:r.mode&1?(Ue=(s=Ue)||r.memoizedState!==null,Xt(e,t,r),Ue=s):Xt(e,t,r);break;default:Xt(e,t,r)}}function Wc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Lp),t.forEach(function(s){var d=Op.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function vt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var g=e,x=t,i=x;e:for(;i!==null;){switch(i.tag){case 5:Fe=i.stateNode,yt=!1;break e;case 3:Fe=i.stateNode.containerInfo,yt=!0;break e;case 4:Fe=i.stateNode.containerInfo,yt=!0;break e}i=i.return}if(Fe===null)throw Error(q(160));kd(g,x,d),Fe=null,yt=!1;var o=d.alternate;o!==null&&(o.return=null),d.return=null}catch(f){Ee(d,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rd(t,e),t=t.sibling}function Rd(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),Lt(e),s&4){try{$i(3,e,e.return),jn(3,e)}catch(u){Ee(e,e.return,u)}try{$i(5,e,e.return)}catch(u){Ee(e,e.return,u)}}break;case 1:vt(t,e),Lt(e),s&512&&r!==null&&Kr(r,r.return);break;case 5:if(vt(t,e),Lt(e),s&512&&r!==null&&Kr(r,r.return),e.flags&32){var d=e.stateNode;try{Ui(d,"")}catch(u){Ee(e,e.return,u)}}if(s&4&&(d=e.stateNode,d!=null)){var g=e.memoizedProps,x=r!==null?r.memoizedProps:g,i=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{i==="input"&&g.type==="radio"&&g.name!=null&&Yh(d,g),Yo(i,x);var f=Yo(i,g);for(x=0;x<o.length;x+=2){var _=o[x],h=o[x+1];_==="style"?tu(d,h):_==="dangerouslySetInnerHTML"?Zh(d,h):_==="children"?Ui(d,h):za(d,_,h,f)}switch(i){case"input":Vo(d,g);break;case"textarea":Jh(d,g);break;case"select":var p=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var S=g.value;S!=null?Yr(d,!!g.multiple,S,!1):p!==!!g.multiple&&(g.defaultValue!=null?Yr(d,!!g.multiple,g.defaultValue,!0):Yr(d,!!g.multiple,g.multiple?[]:"",!1))}d[Zi]=g}catch(u){Ee(e,e.return,u)}}break;case 6:if(vt(t,e),Lt(e),s&4){if(e.stateNode===null)throw Error(q(162));d=e.stateNode,g=e.memoizedProps;try{d.nodeValue=g}catch(u){Ee(e,e.return,u)}}break;case 3:if(vt(t,e),Lt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ki(t.containerInfo)}catch(u){Ee(e,e.return,u)}break;case 4:vt(t,e),Lt(e);break;case 13:vt(t,e),Lt(e),d=e.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(wl=ke())),s&4&&Wc(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(Ue=(f=Ue)||_,vt(t,e),Ue=f):vt(t,e),Lt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!_&&e.mode&1)for(re=e,_=e.child;_!==null;){for(h=re=_;re!==null;){switch(p=re,S=p.child,p.tag){case 0:case 11:case 14:case 15:$i(4,p,p.return);break;case 1:Kr(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(u){Ee(s,r,u)}}break;case 5:Kr(p,p.return);break;case 22:if(p.memoizedState!==null){Uc(h);continue}}S!==null?(S.return=p,re=S):Uc(h)}_=_.sibling}e:for(_=null,h=e;;){if(h.tag===5){if(_===null){_=h;try{d=h.stateNode,f?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(i=h.stateNode,o=h.memoizedProps.style,x=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=eu("display",x))}catch(u){Ee(e,e.return,u)}}}else if(h.tag===6){if(_===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(u){Ee(e,e.return,u)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;_===h&&(_=null),h=h.return}_===h&&(_=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vt(t,e),Lt(e),s&4&&Wc(e);break;case 21:break;default:vt(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ed(r)){var s=r;break e}r=r.return}throw Error(q(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(Ui(d,""),s.flags&=-33);var g=jc(e);Ea(e,g,d);break;case 3:case 4:var x=s.stateNode.containerInfo,i=jc(e);La(e,i,x);break;default:throw Error(q(161))}}catch(o){Ee(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kp(e,t,r){re=e,Md(e)}function Md(e,t,r){for(var s=(e.mode&1)!==0;re!==null;){var d=re,g=d.child;if(d.tag===22&&s){var x=d.memoizedState!==null||Os;if(!x){var i=d.alternate,o=i!==null&&i.memoizedState!==null||Ue;i=Os;var f=Ue;if(Os=x,(Ue=o)&&!f)for(re=d;re!==null;)x=re,o=x.child,x.tag===22&&x.memoizedState!==null?Vc(d):o!==null?(o.return=x,re=o):Vc(d);for(;g!==null;)re=g,Md(g),g=g.sibling;re=d,Os=i,Ue=f}zc(e)}else d.subtreeFlags&8772&&g!==null?(g.return=d,re=g):zc(e)}}function zc(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ue||jn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ue)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Ct(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&kc(t,g,s);break;case 3:var x=t.updateQueue;if(x!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}kc(t,x,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var h=_.dehydrated;h!==null&&Ki(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ue||t.flags&512&&ba(t)}catch(p){Ee(t,t.return,p)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function Uc(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function Vc(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{jn(4,t)}catch(o){Ee(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(o){Ee(t,d,o)}}var g=t.return;try{ba(t)}catch(o){Ee(t,g,o)}break;case 5:var x=t.return;try{ba(t)}catch(o){Ee(t,x,o)}}}catch(o){Ee(t,t.return,o)}if(t===e){re=null;break}var i=t.sibling;if(i!==null){i.return=t.return,re=i;break}re=t.return}}var Rp=Math.ceil,xn=qt.ReactCurrentDispatcher,yl=qt.ReactCurrentOwner,_t=qt.ReactCurrentBatchConfig,fe=0,Ie=null,Ae=null,He=0,st=0,Xr=pr(0),Be=0,ns=null,Ar=0,Wn=0,Sl=0,ji=null,Qe=null,wl=0,hi=1/0,Ft=null,bn=!1,ka=null,lr=null,Is=!1,tr=null,Ln=0,Wi=0,Ra=null,Ys=-1,Js=0;function Xe(){return fe&6?ke():Ys!==-1?Ys:Ys=ke()}function cr(e){return e.mode&1?fe&2&&He!==0?He&-He:up.transition!==null?(Js===0&&(Js=fu()),Js):(e=ve,e!==0||(e=window.event,e=e===void 0?16:yu(e.type)),e):1}function xt(e,t,r,s){if(50<Wi)throw Wi=0,Ra=null,Error(q(185));hs(e,r,s),(!(fe&2)||e!==Ie)&&(e===Ie&&(!(fe&2)&&(Wn|=r),Be===4&&Zt(e,He)),rt(e,s),r===1&&fe===0&&!(t.mode&1)&&(hi=ke()+500,Nn&&gr()))}function rt(e,t){var r=e.callbackNode;u_(e,t);var s=ln(e,e===Ie?He:0);if(s===0)r!==null&&ec(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ec(r),t===1)e.tag===0?hp(Gc.bind(null,e)):Hu(Gc.bind(null,e)),op(function(){!(fe&6)&&gr()}),r=null;else{switch(_u(s)){case 1:r=Ka;break;case 4:r=uu;break;case 16:r=an;break;case 536870912:r=du;break;default:r=an}r=Fd(r,Dd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Dd(e,t){if(Ys=-1,Js=0,fe&6)throw Error(q(327));var r=e.callbackNode;if(ti()&&e.callbackNode!==r)return null;var s=ln(e,e===Ie?He:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=En(e,s);else{t=s;var d=fe;fe|=2;var g=Td();(Ie!==e||He!==t)&&(Ft=null,hi=ke()+500,Er(e,t));do try{Ap();break}catch(i){Ad(e,i)}while(!0);al(),xn.current=g,fe=d,Ae!==null?t=0:(Ie=null,He=0,t=Be)}if(t!==0){if(t===2&&(d=ta(e),d!==0&&(s=d,t=Ma(e,d))),t===1)throw r=ns,Er(e,0),Zt(e,s),rt(e,ke()),r;if(t===6)Zt(e,s);else{if(d=e.current.alternate,!(s&30)&&!Mp(d)&&(t=En(e,s),t===2&&(g=ta(e),g!==0&&(s=g,t=Ma(e,g))),t===1))throw r=ns,Er(e,0),Zt(e,s),rt(e,ke()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(q(345));case 2:Sr(e,Qe,Ft);break;case 3:if(Zt(e,s),(s&130023424)===s&&(t=wl+500-ke(),10<t)){if(ln(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){Xe(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ca(Sr.bind(null,e,Qe,Ft),t);break}Sr(e,Qe,Ft);break;case 4:if(Zt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var x=31-wt(s);g=1<<x,x=t[x],x>d&&(d=x),s&=~g}if(s=d,s=ke()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Rp(s/1960))-s,10<s){e.timeoutHandle=ca(Sr.bind(null,e,Qe,Ft),s);break}Sr(e,Qe,Ft);break;case 5:Sr(e,Qe,Ft);break;default:throw Error(q(329))}}}return rt(e,ke()),e.callbackNode===r?Dd.bind(null,e):null}function Ma(e,t){var r=ji;return e.current.memoizedState.isDehydrated&&(Er(e,t).flags|=256),e=En(e,t),e!==2&&(t=Qe,Qe=r,t!==null&&Da(t)),e}function Da(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function Mp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],g=d.getSnapshot;d=d.value;try{if(!bt(g(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zt(e,t){for(t&=~Sl,t&=~Wn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wt(t),s=1<<r;e[r]=-1,t&=~s}}function Gc(e){if(fe&6)throw Error(q(327));ti();var t=ln(e,0);if(!(t&1))return rt(e,ke()),null;var r=En(e,t);if(e.tag!==0&&r===2){var s=ta(e);s!==0&&(t=s,r=Ma(e,s))}if(r===1)throw r=ns,Er(e,0),Zt(e,t),rt(e,ke()),r;if(r===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sr(e,Qe,Ft),rt(e,ke()),null}function xl(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(hi=ke()+500,Nn&&gr())}}function Tr(e){tr!==null&&tr.tag===0&&!(fe&6)&&ti();var t=fe;fe|=1;var r=_t.transition,s=ve;try{if(_t.transition=null,ve=1,e)return e()}finally{ve=s,_t.transition=r,fe=t,!(fe&6)&&gr()}}function bl(){st=Xr.current,Se(Xr)}function Er(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,np(r)),Ae!==null)for(r=Ae.return;r!==null;){var s=r;switch(sl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&fn();break;case 3:li(),Se(et),Se(Ve),fl();break;case 5:dl(s);break;case 4:li();break;case 13:Se(xe);break;case 19:Se(xe);break;case 10:ll(s.type._context);break;case 22:case 23:bl()}r=r.return}if(Ie=e,Ae=e=hr(e.current,null),He=st=t,Be=0,ns=null,Sl=Wn=Ar=0,Qe=ji=null,xr!==null){for(t=0;t<xr.length;t++)if(r=xr[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,g=r.pending;if(g!==null){var x=g.next;g.next=d,s.next=x}r.pending=s}xr=null}return e}function Ad(e,t){do{var r=Ae;try{if(al(),qs.current=wn,Sn){for(var s=be.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}Sn=!1}if(Dr=0,Oe=Te=be=null,Hi=!1,rs=0,yl.current=null,r===null||r.return===null){Be=1,ns=t,Ae=null;break}e:{var g=e,x=r.return,i=r,o=t;if(t=He,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=o,_=i,h=_.tag;if(!(_.mode&1)&&(h===0||h===11||h===15)){var p=_.alternate;p?(_.updateQueue=p.updateQueue,_.memoizedState=p.memoizedState,_.lanes=p.lanes):(_.updateQueue=null,_.memoizedState=null)}var S=Bc(x);if(S!==null){S.flags&=-257,Pc(S,x,i,g,t),S.mode&1&&Tc(g,f,t),t=S,o=f;var y=t.updateQueue;if(y===null){var u=new Set;u.add(o),t.updateQueue=u}else y.add(o);break e}else{if(!(t&1)){Tc(g,f,t),Ll();break e}o=Error(q(426))}}else if(we&&i.mode&1){var n=Bc(x);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Pc(n,x,i,g,t),nl(ci(o,i));break e}}g=o=ci(o,i),Be!==4&&(Be=2),ji===null?ji=[g]:ji.push(g),g=x;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var a=_d(g,o,t);Ec(g,a);break e;case 1:i=o;var l=g.type,c=g.stateNode;if(!(g.flags&128)&&(typeof l.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(lr===null||!lr.has(c)))){g.flags|=65536,t&=-t,g.lanes|=t;var m=pd(g,i,t);Ec(g,m);break e}}g=g.return}while(g!==null)}Pd(r)}catch(w){t=w,Ae===r&&r!==null&&(Ae=r=r.return);continue}break}while(!0)}function Td(){var e=xn.current;return xn.current=wn,e===null?wn:e}function Ll(){(Be===0||Be===3||Be===2)&&(Be=4),Ie===null||!(Ar&268435455)&&!(Wn&268435455)||Zt(Ie,He)}function En(e,t){var r=fe;fe|=2;var s=Td();(Ie!==e||He!==t)&&(Ft=null,Er(e,t));do try{Dp();break}catch(d){Ad(e,d)}while(!0);if(al(),fe=r,xn.current=s,Ae!==null)throw Error(q(261));return Ie=null,He=0,Be}function Dp(){for(;Ae!==null;)Bd(Ae)}function Ap(){for(;Ae!==null&&!r_();)Bd(Ae)}function Bd(e){var t=Id(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Pd(e):Ae=t,yl.current=null}function Pd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=bp(r,t),r!==null){r.flags&=32767,Ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,Ae=null;return}}else if(r=xp(r,t,st),r!==null){Ae=r;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Be===0&&(Be=5)}function Sr(e,t,r){var s=ve,d=_t.transition;try{_t.transition=null,ve=1,Tp(e,t,r,s)}finally{_t.transition=d,ve=s}return null}function Tp(e,t,r,s){do ti();while(tr!==null);if(fe&6)throw Error(q(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var g=r.lanes|r.childLanes;if(d_(e,g),e===Ie&&(Ae=Ie=null,He=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Is||(Is=!0,Fd(an,function(){return ti(),null})),g=(r.flags&15990)!==0,r.subtreeFlags&15990||g){g=_t.transition,_t.transition=null;var x=ve;ve=1;var i=fe;fe|=4,yl.current=null,Ep(e,r),Rd(r,e),Q_(aa),cn=!!oa,aa=oa=null,e.current=r,kp(r),i_(),fe=i,ve=x,_t.transition=g}else e.current=r;if(Is&&(Is=!1,tr=e,Ln=d),g=e.pendingLanes,g===0&&(lr=null),o_(r.stateNode),rt(e,ke()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(bn)throw bn=!1,e=ka,ka=null,e;return Ln&1&&e.tag!==0&&ti(),g=e.pendingLanes,g&1?e===Ra?Wi++:(Wi=0,Ra=e):Wi=0,gr(),null}function ti(){if(tr!==null){var e=_u(Ln),t=_t.transition,r=ve;try{if(_t.transition=null,ve=16>e?16:e,tr===null)var s=!1;else{if(e=tr,tr=null,Ln=0,fe&6)throw Error(q(331));var d=fe;for(fe|=4,re=e.current;re!==null;){var g=re,x=g.child;if(re.flags&16){var i=g.deletions;if(i!==null){for(var o=0;o<i.length;o++){var f=i[o];for(re=f;re!==null;){var _=re;switch(_.tag){case 0:case 11:case 15:$i(8,_,g)}var h=_.child;if(h!==null)h.return=_,re=h;else for(;re!==null;){_=re;var p=_.sibling,S=_.return;if(Ld(_),_===f){re=null;break}if(p!==null){p.return=S,re=p;break}re=S}}}var y=g.alternate;if(y!==null){var u=y.child;if(u!==null){y.child=null;do{var n=u.sibling;u.sibling=null,u=n}while(u!==null)}}re=g}}if(g.subtreeFlags&2064&&x!==null)x.return=g,re=x;else e:for(;re!==null;){if(g=re,g.flags&2048)switch(g.tag){case 0:case 11:case 15:$i(9,g,g.return)}var a=g.sibling;if(a!==null){a.return=g.return,re=a;break e}re=g.return}}var l=e.current;for(re=l;re!==null;){x=re;var c=x.child;if(x.subtreeFlags&2064&&c!==null)c.return=x,re=c;else e:for(x=l;re!==null;){if(i=re,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:jn(9,i)}}catch(w){Ee(i,i.return,w)}if(i===x){re=null;break e}var m=i.sibling;if(m!==null){m.return=i.return,re=m;break e}re=i.return}}if(fe=d,gr(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Bn,e)}catch{}s=!0}return s}finally{ve=r,_t.transition=t}}return!1}function qc(e,t,r){t=ci(r,t),t=_d(e,t,1),e=ar(e,t,1),t=Xe(),e!==null&&(hs(e,1,t),rt(e,t))}function Ee(e,t,r){if(e.tag===3)qc(e,e,r);else for(;t!==null;){if(t.tag===3){qc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(lr===null||!lr.has(s))){e=ci(r,e),e=pd(t,e,1),t=ar(t,e,1),e=Xe(),t!==null&&(hs(t,1,e),rt(t,e));break}}t=t.return}}function Bp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&r,Ie===e&&(He&r)===r&&(Be===4||Be===3&&(He&130023424)===He&&500>ke()-wl?Er(e,0):Sl|=r),rt(e,t)}function Od(e,t){t===0&&(e.mode&1?(t=Es,Es<<=1,!(Es&130023424)&&(Es=4194304)):t=1);var r=Xe();e=Vt(e,t),e!==null&&(hs(e,t,r),rt(e,r))}function Pp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Od(e,r)}function Op(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(q(314))}s!==null&&s.delete(t),Od(e,r)}var Id;Id=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ze=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ze=!1,wp(e,t,r);Ze=!!(e.flags&131072)}else Ze=!1,we&&t.flags&1048576&&$u(t,gn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xs(e,t),e=t.pendingProps;var d=ni(t,Ve.current);ei(t,r),d=pl(null,t,s,e,d,r);var g=gl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(s)?(g=!0,_n(t)):g=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,hl(t),d.updater=$n,t.stateNode=d,d._reactInternals=t,ga(t,s,e,r),t=Ca(null,t,s,!0,g,r)):(t.tag=0,we&&g&&il(t),Ke(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Xs(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=Fp(s),e=Ct(s,e),d){case 0:t=ma(null,t,s,e,r);break e;case 1:t=Fc(null,t,s,e,r);break e;case 11:t=Oc(null,t,s,e,r);break e;case 14:t=Ic(null,t,s,Ct(s.type,e),r);break e}throw Error(q(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),ma(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),Fc(e,t,s,d,r);case 3:e:{if(Cd(t),e===null)throw Error(q(387));s=t.pendingProps,g=t.memoizedState,d=g.element,Gu(e,t),Cn(t,s,null,r);var x=t.memoizedState;if(s=x.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){d=ci(Error(q(423)),t),t=Nc(e,t,s,r,d);break e}else if(s!==d){d=ci(Error(q(424)),t),t=Nc(e,t,s,r,d);break e}else for(nt=or(t.stateNode.containerInfo.firstChild),ot=t,we=!0,St=null,r=Uu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oi(),s===d){t=Gt(e,t,r);break e}Ke(e,t,s,r)}t=t.child}return t;case 5:return qu(t),e===null&&fa(t),s=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,x=d.children,la(s,d)?x=null:g!==null&&la(s,g)&&(t.flags|=32),md(e,t),Ke(e,t,x,r),t.child;case 6:return e===null&&fa(t),null;case 13:return yd(e,t,r);case 4:return ul(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ai(t,null,s,r):Ke(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),Oc(e,t,s,d,r);case 7:return Ke(e,t,t.pendingProps,r),t.child;case 8:return Ke(e,t,t.pendingProps.children,r),t.child;case 12:return Ke(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,g=t.memoizedProps,x=d.value,Ce(vn,s._currentValue),s._currentValue=x,g!==null)if(bt(g.value,x)){if(g.children===d.children&&!et.current){t=Gt(e,t,r);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var i=g.dependencies;if(i!==null){x=g.child;for(var o=i.firstContext;o!==null;){if(o.context===s){if(g.tag===1){o=Wt(-1,r&-r),o.tag=2;var f=g.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?o.next=o:(o.next=_.next,_.next=o),f.pending=o}}g.lanes|=r,o=g.alternate,o!==null&&(o.lanes|=r),_a(g.return,r,t),i.lanes|=r;break}o=o.next}}else if(g.tag===10)x=g.type===t.type?null:g.child;else if(g.tag===18){if(x=g.return,x===null)throw Error(q(341));x.lanes|=r,i=x.alternate,i!==null&&(i.lanes|=r),_a(x,r,t),x=g.sibling}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===t){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}Ke(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,ei(t,r),d=pt(d),s=s(d),t.flags|=1,Ke(e,t,s,r),t.child;case 14:return s=t.type,d=Ct(s,t.pendingProps),d=Ct(s.type,d),Ic(e,t,s,d,r);case 15:return gd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),Xs(e,t),t.tag=1,tt(s)?(e=!0,_n(t)):e=!1,ei(t,r),fd(t,s,d),ga(t,s,d,r),Ca(null,t,s,!0,e,r);case 19:return Sd(e,t,r);case 22:return vd(e,t,r)}throw Error(q(156,t.tag))};function Fd(e,t){return hu(e,t)}function Ip(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,r,s){return new Ip(e,t,r,s)}function El(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fp(e){if(typeof e=="function")return El(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Va)return 11;if(e===Ga)return 14}return 2}function hr(e,t){var r=e.alternate;return r===null?(r=ft(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qs(e,t,r,s,d,g){var x=2;if(s=e,typeof e=="function")El(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case Hr:return kr(r.children,d,g,t);case Ua:x=8,d|=8;break;case $o:return e=ft(12,r,t,d|2),e.elementType=$o,e.lanes=g,e;case jo:return e=ft(13,r,t,d),e.elementType=jo,e.lanes=g,e;case Wo:return e=ft(19,r,t,d),e.elementType=Wo,e.lanes=g,e;case qh:return zn(r,d,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vh:x=10;break e;case Gh:x=9;break e;case Va:x=11;break e;case Ga:x=14;break e;case Yt:x=16,s=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=ft(x,r,t,d),t.elementType=e,t.type=s,t.lanes=g,t}function kr(e,t,r,s){return e=ft(7,e,s,t),e.lanes=r,e}function zn(e,t,r,s){return e=ft(22,e,s,t),e.elementType=qh,e.lanes=r,e.stateNode={isHidden:!1},e}function Ao(e,t,r){return e=ft(6,e,null,t),e.lanes=r,e}function To(e,t,r){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Np(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function kl(e,t,r,s,d,g,x,i,o){return e=new Np(e,t,r,i,o),t===1?(t=1,g===!0&&(t|=8)):t=0,g=ft(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hl(g),e}function Hp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Nd(e){if(!e)return fr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var r=e.type;if(tt(r))return Nu(e,r,t)}return t}function Hd(e,t,r,s,d,g,x,i,o){return e=kl(r,s,!0,e,d,g,x,i,o),e.context=Nd(null),r=e.current,s=Xe(),d=cr(r),g=Wt(s,d),g.callback=t??null,ar(r,g,d),e.current.lanes=d,hs(e,d,s),rt(e,s),e}function Un(e,t,r,s){var d=t.current,g=Xe(),x=cr(d);return r=Nd(r),t.context===null?t.context=r:t.pendingContext=r,t=Wt(g,x),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ar(d,t,x),e!==null&&(xt(e,d,x,g),Gs(e,d,x)),x}function kn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Rl(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}function $p(){return null}var $d=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ml(e){this._internalRoot=e}Vn.prototype.render=Ml.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Un(e,t,null,null)};Vn.prototype.unmount=Ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tr(function(){Un(null,e,null,null)}),t[Ut]=null}};function Vn(e){this._internalRoot=e}Vn.prototype.unstable_scheduleHydration=function(e){if(e){var t=vu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qt.length&&t!==0&&t<Qt[r].priority;r++);Qt.splice(r,0,e),r===0&&Cu(e)}};function Dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xc(){}function jp(e,t,r,s,d){if(d){if(typeof s=="function"){var g=s;s=function(){var f=kn(x);g.call(f)}}var x=Hd(t,s,e,0,null,!1,!1,"",Xc);return e._reactRootContainer=x,e[Ut]=x.current,Ji(e.nodeType===8?e.parentNode:e),Tr(),x}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var i=s;s=function(){var f=kn(o);i.call(f)}}var o=kl(e,0,!1,null,null,!1,!1,"",Xc);return e._reactRootContainer=o,e[Ut]=o.current,Ji(e.nodeType===8?e.parentNode:e),Tr(function(){Un(t,o,r,s)}),o}function qn(e,t,r,s,d){var g=r._reactRootContainer;if(g){var x=g;if(typeof d=="function"){var i=d;d=function(){var o=kn(x);i.call(o)}}Un(t,x,e,d)}else x=jp(r,t,e,d,s);return kn(x)}pu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ti(t.pendingLanes);r!==0&&(Xa(t,r|1),rt(t,ke()),!(fe&6)&&(hi=ke()+500,gr()))}break;case 13:Tr(function(){var s=Vt(e,1);if(s!==null){var d=Xe();xt(s,e,1,d)}}),Rl(e,1)}};Ya=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var r=Xe();xt(t,e,134217728,r)}Rl(e,134217728)}};gu=function(e){if(e.tag===13){var t=cr(e),r=Vt(e,t);if(r!==null){var s=Xe();xt(r,e,t,s)}Rl(e,t)}};vu=function(){return ve};mu=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};Qo=function(e,t,r){switch(t){case"input":if(Vo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=Fn(s);if(!d)throw Error(q(90));Xh(s),Vo(s,d)}}}break;case"textarea":Jh(e,r);break;case"select":t=r.value,t!=null&&Yr(e,!!r.multiple,t,!1)}};su=xl;nu=Tr;var Wp={usingClientEntryPoint:!1,Events:[ds,zr,Fn,ru,iu,xl]},Ri={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lu(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||$p,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{Bn=Fs.inject(zp),Mt=Fs}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wp;ct.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dl(t))throw Error(q(200));return Hp(e,t,null,r)};ct.createRoot=function(e,t){if(!Dl(e))throw Error(q(299));var r=!1,s="",d=$d;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=kl(e,1,!1,null,null,r,!1,s,d),e[Ut]=t.current,Ji(e.nodeType===8?e.parentNode:e),new Ml(t)};ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=lu(t),e=e===null?null:e.stateNode,e};ct.flushSync=function(e){return Tr(e)};ct.hydrate=function(e,t,r){if(!Gn(t))throw Error(q(200));return qn(null,e,t,!0,r)};ct.hydrateRoot=function(e,t,r){if(!Dl(e))throw Error(q(405));var s=r!=null&&r.hydratedSources||null,d=!1,g="",x=$d;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),t=Hd(t,null,e,1,r??null,d,!1,g,x),e[Ut]=t.current,Ji(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new Vn(t)};ct.render=function(e,t,r){if(!Gn(t))throw Error(q(200));return qn(null,e,t,!1,r)};ct.unmountComponentAtNode=function(e){if(!Gn(e))throw Error(q(40));return e._reactRootContainer?(Tr(function(){qn(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};ct.unstable_batchedUpdates=xl;ct.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Gn(r))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return qn(e,t,r,!1,s)};ct.version="18.3.1-next-f1338f8080-20240426";function jd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jd)}catch(e){console.error(e)}}jd(),jh.exports=ct;var Up=jh.exports,Yc=Up;No.createRoot=Yc.createRoot,No.hydrateRoot=Yc.hydrateRoot;const Wd=K.createContext(null),vr=()=>{const e=K.useContext(Wd);if(!e)throw new Error("useTerminal must be used within a TerminalProvider");return e},Vp={ESC:"\x1B",TAB:"	",ENTER:"\r",CTRL_C:"",ARROW_UP:"\x1B[A",ARROW_DOWN:"\x1B[B",ARROW_RIGHT:"\x1B[C",ARROW_LEFT:"\x1B[D",PAGE_UP:"\x1B[5~",PAGE_DOWN:"\x1B[6~",CTRL_L:"\f"},Gp=10,qp=[1e3,2e3,3e3,5e3,5e3,1e4,1e4,15e3,15e3,3e4],Kp=({children:e})=>{const t=K.useRef(null),r=K.useRef(null),s=K.useRef(new Set),[d,g]=K.useState("connecting"),[x,i]=K.useState(0),o=K.useRef(null),f=K.useRef(!1),_=K.useRef({cols:80,rows:24}),h=K.useCallback(()=>{if(r.current?.readyState===WebSocket.OPEN)return;g(x>0?"reconnecting":"connecting");const a=window.location.protocol==="https:"?"wss:":"ws:",l=window.location.host,c=window.location.pathname.replace(/\/$/,""),m=`${a}//${l}${c}/ws`,w=new WebSocket(m,["tty"]);w.binaryType="arraybuffer",r.current=w,w.onopen=()=>{console.log("[Terminal] WebSocket connected"),g("connected"),i(0);const{cols:v,rows:b}=_.current,C=JSON.stringify({AuthToken:"",columns:v,rows:b});w.send(new TextEncoder().encode(C))},w.onmessage=v=>{const b=new Uint8Array(v.data);if(b.length===0)return;const C=String.fromCharCode(b[0]);if(C==="0"){const L=b.slice(1);s.current.forEach(E=>E(L))}else if(C==="1"){const L=new TextDecoder().decode(b.slice(1));document.title=L}},w.onclose=()=>{if(console.log("[Terminal] WebSocket closed"),r.current=null,f.current){f.current=!1,g("disconnected");return}if(g("disconnected"),x<Gp){const v=qp[x]||3e4;console.log(`[Terminal] Reconnecting in ${v}ms (attempt ${x+1})`),i(b=>b+1),o.current=window.setTimeout(()=>{h()},v)}},w.onerror=v=>{console.error("[Terminal] WebSocket error",v)}},[x]),p=K.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),i(0),h()},[h]);K.useEffect(()=>(h(),()=>{f.current=!0,o.current&&clearTimeout(o.current),r.current&&r.current.close()}),[h]);const S=K.useCallback(a=>{if(r.current&&r.current.readyState===WebSocket.OPEN){const l=new TextEncoder().encode(a),c=new Uint8Array(l.length+1);c[0]=48,c.set(l,1),r.current.send(c)}},[]),y=K.useCallback(a=>{const l=Vp[a];l&&S(l)},[S]),u=K.useCallback(a=>(s.current.add(a),()=>{s.current.delete(a)}),[]),n=K.useCallback((a,l)=>{if(_.current={cols:a,rows:l},r.current&&r.current.readyState===WebSocket.OPEN){const c=JSON.stringify({AuthToken:"",columns:a,rows:l}),m=new TextEncoder().encode(c),w=new Uint8Array(m.length+1);w[0]=49,w[0]=49,w.set(m,1),r.current.send(w)}},[]);return H.jsx(Wd.Provider,{value:{connectionState:d,sendInput:S,sendKey:y,subscribeOutput:u,terminalRef:t,resize:n,reconnect:p,reconnectAttempt:x},children:e})},Jc={defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]},Xp=({isOpen:e,onClose:t,onConfigChange:r})=>{const[s,d]=K.useState(Jc),[g,x]=K.useState(""),[i,o]=K.useState("");K.useEffect(()=>{if(e){const S=localStorage.getItem("ttyd_commands");if(S)try{d(JSON.parse(S))}catch(y){console.error("Failed to parse ttyd_commands",y)}else d(Jc)}},[e]);const f=S=>{d(S),localStorage.setItem("ttyd_commands",JSON.stringify(S)),r()},_=S=>{const y=[...s.defaultCommands];y[S].visible=!y[S].visible,f({...s,defaultCommands:y})},h=S=>{const y=s.customCommands.filter((u,n)=>n!==S);f({...s,customCommands:y})},p=S=>{if(S.preventDefault(),!g.trim()||!i.trim())return;const y=[...s.customCommands,{name:g.trim(),cmd:i.trim()}];f({...s,customCommands:y}),x(""),o("")};return e?H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:H.jsxs("div",{className:"bg-bg-secondary w-full max-w-sm mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col max-h-[80vh]",onClick:S=>S.stopPropagation(),children:[H.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[H.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Command Settings"}),H.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),H.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[H.jsxs("section",{children:[H.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Built-in Commands"}),H.jsx("div",{className:"space-y-2",children:s.defaultCommands.map((S,y)=>H.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[H.jsx("span",{className:"font-mono text-sm text-text-primary",children:S.name}),H.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[H.jsx("input",{type:"checkbox",className:"sr-only peer",checked:S.visible,onChange:()=>_(y)}),H.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]},S.name))})]}),H.jsxs("section",{children:[H.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Custom Commands"}),s.customCommands.length===0?H.jsx("p",{className:"text-sm text-text-muted italic",children:"No custom commands added"}):H.jsx("div",{className:"space-y-2",children:s.customCommands.map((S,y)=>H.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[H.jsxs("div",{className:"flex flex-col min-w-0 mr-2",children:[H.jsx("span",{className:"font-mono text-sm text-text-primary truncate",children:S.name}),H.jsx("span",{className:"font-mono text-xs text-text-muted truncate",children:S.cmd})]}),H.jsx("button",{onClick:()=>h(y),className:"p-2 text-text-secondary hover:text-accent-red transition-colors",children:""})]},y))})]}),H.jsxs("section",{children:[H.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Add New Command"}),H.jsxs("form",{onSubmit:p,className:"space-y-3",children:[H.jsx("div",{children:H.jsx("input",{type:"text",placeholder:"Button Name (e.g. ls -la)",value:g,onChange:S=>x(S.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),H.jsx("div",{children:H.jsx("input",{type:"text",placeholder:"Command (e.g. ls -la\\r)",value:i,onChange:S=>o(S.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),H.jsx("button",{type:"submit",disabled:!g.trim()||!i.trim(),className:"w-full py-2 bg-accent-blue/10 text-accent-blue border border-accent-blue/30 rounded font-medium hover:bg-accent-blue/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Command"})]})]})]})]})}):null},Yp=({isOpen:e,onClose:t,onSend:r})=>{const[s,d]=K.useState(""),g=K.useRef(null);K.useEffect(()=>{e?setTimeout(()=>{g.current&&g.current.focus()},50):d("")},[e]);const x=()=>{s&&(r(s),t())},i=o=>{o.key==="Enter"&&(o.metaKey||o.ctrlKey)&&(o.preventDefault(),x())};return e?H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:H.jsxs("div",{className:"bg-bg-secondary w-full max-w-lg mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col h-[50vh]",onClick:o=>o.stopPropagation(),children:[H.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[H.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Input Text"}),H.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),H.jsx("div",{className:"flex-1 p-4",children:H.jsx("textarea",{ref:g,value:s,onChange:o=>d(o.target.value),onKeyDown:i,placeholder:"Type or paste long text here...",className:"w-full h-full bg-bg-primary border border-border-subtle rounded p-3 font-mono text-sm text-text-primary focus:outline-none focus:border-accent-blue resize-none"})}),H.jsxs("div",{className:"p-4 border-t border-border-subtle flex justify-end gap-3",children:[H.jsx("button",{onClick:t,className:"px-4 py-2 rounded text-text-secondary hover:bg-bg-tertiary transition-colors",children:"Cancel"}),H.jsx("button",{onClick:x,disabled:!s,className:"px-4 py-2 bg-accent-blue text-white rounded font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send (Cmd+Enter)"})]})]})}):null};var zd={},Ud={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var g="",x=0;x<arguments.length;x++){var i=arguments[x];i&&(g=d(g,s(i)))}return g}function s(g){if(typeof g=="string"||typeof g=="number")return g;if(typeof g!="object")return"";if(Array.isArray(g))return r.apply(null,g);if(g.toString!==Object.prototype.toString&&!g.toString.toString().includes("[native code]"))return g.toString();var x="";for(var i in g)t.call(g,i)&&g[i]&&(x=d(x,i));return x}function d(g,x){return x?g?g+" "+x:g+x:g}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Ud);var Jp=Ud.exports,ur={},Vd={},Kt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){}t.prototype={diff:function(d,g){var x,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var f=this;function _(b){return o?(setTimeout(function(){o(void 0,b)},0),!0):b}d=this.castInput(d),g=this.castInput(g),d=this.removeEmpty(this.tokenize(d)),g=this.removeEmpty(this.tokenize(g));var h=g.length,p=d.length,S=1,y=h+p;i.maxEditLength&&(y=Math.min(y,i.maxEditLength));var u=(x=i.timeout)!==null&&x!==void 0?x:1/0,n=Date.now()+u,a=[{oldPos:-1,lastComponent:void 0}],l=this.extractCommon(a[0],g,d,0);if(a[0].oldPos+1>=p&&l+1>=h)return _([{value:this.join(g),count:g.length}]);var c=-1/0,m=1/0;function w(){for(var b=Math.max(c,-S);b<=Math.min(m,S);b+=2){var C=void 0,L=a[b-1],E=a[b+1];L&&(a[b-1]=void 0);var R=!1;if(E){var k=E.oldPos-b;R=E&&0<=k&&k<h}var D=L&&L.oldPos+1<p;if(!R&&!D){a[b]=void 0;continue}if(!D||R&&L.oldPos+1<E.oldPos?C=f.addToPath(E,!0,void 0,0):C=f.addToPath(L,void 0,!0,1),l=f.extractCommon(C,g,d,b),C.oldPos+1>=p&&l+1>=h)return _(r(f,C.lastComponent,g,d,f.useLongestToken));a[b]=C,C.oldPos+1>=p&&(m=Math.min(m,b-1)),l+1>=h&&(c=Math.max(c,b+1))}S++}if(o)(function b(){setTimeout(function(){if(S>y||Date.now()>n)return o();w()||b()},0)})();else for(;S<=y&&Date.now()<=n;){var v=w();if(v)return v}},addToPath:function(d,g,x,i){var o=d.lastComponent;return o&&o.added===g&&o.removed===x?{oldPos:d.oldPos+i,lastComponent:{count:o.count+1,added:g,removed:x,previousComponent:o.previousComponent}}:{oldPos:d.oldPos+i,lastComponent:{count:1,added:g,removed:x,previousComponent:o}}},extractCommon:function(d,g,x,i){for(var o=g.length,f=x.length,_=d.oldPos,h=_-i,p=0;h+1<o&&_+1<f&&this.equals(g[h+1],x[_+1]);)h++,_++,p++;return p&&(d.lastComponent={count:p,previousComponent:d.lastComponent}),d.oldPos=_,h},equals:function(d,g){return this.options.comparator?this.options.comparator(d,g):d===g||this.options.ignoreCase&&d.toLowerCase()===g.toLowerCase()},removeEmpty:function(d){for(var g=[],x=0;x<d.length;x++)d[x]&&g.push(d[x]);return g},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};function r(s,d,g,x,i){for(var o=[],f;d;)o.push(d),f=d.previousComponent,delete d.previousComponent,d=f;o.reverse();for(var _=0,h=o.length,p=0,S=0;_<h;_++){var y=o[_];if(y.removed){if(y.value=s.join(x.slice(S,S+y.count)),S+=y.count,_&&o[_-1].added){var n=o[_-1];o[_-1]=o[_],o[_]=n}}else{if(!y.added&&i){var u=g.slice(p,p+y.count);u=u.map(function(l,c){var m=x[S+c];return m.length>l.length?m:l}),y.value=s.join(u)}else y.value=s.join(g.slice(p,p+y.count));p+=y.count,y.added||(S+=y.count)}}var a=o[h-1];return h>1&&typeof a.value=="string"&&(a.added||a.removed)&&s.equals("",a.value)&&(o[h-2].value+=a.value,o.pop()),o}})(Kt);var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.diffChars=eg;_s.characterDiff=void 0;var Qp=Zp(Kt);function Zp(e){return e&&e.__esModule?e:{default:e}}var Gd=new Qp.default;_s.characterDiff=Gd;function eg(e,t,r){return Gd.diff(e,t,r)}var pi={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.generateOptions=tg;function tg(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Object.defineProperty(pi,"__esModule",{value:!0});pi.diffWords=ng;pi.diffWordsWithSpace=og;pi.wordDiff=void 0;var rg=sg(Kt),ig=Kn;function sg(e){return e&&e.__esModule?e:{default:e}}var Qc=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Zc=/\S/,ps=new rg.default;pi.wordDiff=ps;ps.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Zc.test(e)&&!Zc.test(t)};ps.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&Qc.test(t[r])&&Qc.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function ng(e,t,r){return r=(0,ig.generateOptions)(r,{ignoreWhitespace:!0}),ps.diff(e,t,r)}function og(e,t,r){return ps.diff(e,t,r)}var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.diffLines=hg;mr.diffTrimmedLines=ug;mr.lineDiff=void 0;var ag=cg(Kt),lg=Kn;function cg(e){return e&&e.__esModule?e:{default:e}}var Xn=new ag.default;mr.lineDiff=Xn;Xn.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var s=0;s<r.length;s++){var d=r[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=d:(this.options.ignoreWhitespace&&(d=d.trim()),t.push(d))}return t};function hg(e,t,r){return Xn.diff(e,t,r)}function ug(e,t,r){var s=(0,lg.generateOptions)(r,{ignoreWhitespace:!0});return Xn.diff(e,t,s)}var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.diffSentences=_g;gs.sentenceDiff=void 0;var dg=fg(Kt);function fg(e){return e&&e.__esModule?e:{default:e}}var Al=new dg.default;gs.sentenceDiff=Al;Al.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function _g(e,t,r){return Al.diff(e,t,r)}var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.diffCss=vg;vs.cssDiff=void 0;var pg=gg(Kt);function gg(e){return e&&e.__esModule?e:{default:e}}var Tl=new pg.default;vs.cssDiff=Tl;Tl.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function vg(e,t,r){return Tl.diff(e,t,r)}var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.diffJson=Sg;gi.canonicalize=Rn;gi.jsonDiff=void 0;var qd=Cg(Kt),mg=mr;function Cg(e){return e&&e.__esModule?e:{default:e}}function Zs(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zs=function(r){return typeof r}:Zs=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zs(e)}var yg=Object.prototype.toString,Br=new qd.default;gi.jsonDiff=Br;Br.useLongestToken=!0;Br.tokenize=mg.lineDiff.tokenize;Br.castInput=function(e){var t=this.options,r=t.undefinedReplacement,s=t.stringifyReplacer,d=s===void 0?function(g,x){return typeof x>"u"?r:x}:s;return typeof e=="string"?e:JSON.stringify(Rn(e,null,null,d),d,"  ")};Br.equals=function(e,t){return qd.default.prototype.equals.call(Br,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Sg(e,t,r){return Br.diff(e,t,r)}function Rn(e,t,r,s,d){t=t||[],r=r||[],s&&(e=s(d,e));var g;for(g=0;g<t.length;g+=1)if(t[g]===e)return r[g];var x;if(yg.call(e)==="[object Array]"){for(t.push(e),x=new Array(e.length),r.push(x),g=0;g<e.length;g+=1)x[g]=Rn(e[g],t,r,s,d);return t.pop(),r.pop(),x}if(e&&e.toJSON&&(e=e.toJSON()),Zs(e)==="object"&&e!==null){t.push(e),x={},r.push(x);var i=[],o;for(o in e)e.hasOwnProperty(o)&&i.push(o);for(i.sort(),g=0;g<i.length;g+=1)o=i[g],x[o]=Rn(e[o],t,r,s,o);t.pop(),r.pop()}else x=e;return x}var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.diffArrays=bg;ms.arrayDiff=void 0;var wg=xg(Kt);function xg(e){return e&&e.__esModule?e:{default:e}}var os=new wg.default;ms.arrayDiff=os;os.tokenize=function(e){return e.slice()};os.join=os.removeEmpty=function(e){return e};function bg(e,t,r){return os.diff(e,t,r)}var Yn={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.parsePatch=Lg;function Lg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],d=[],g=0;function x(){var f={};for(d.push(f);g<r.length;){var _=r[g];if(/^(\-\-\-|\+\+\+|@@)\s/.test(_))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+/.exec(_);h&&(f.index=_.substring(h[0].length).trim()),g++}for(i(f),i(f),f.hunks=[];g<r.length;){var p=r[g];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))f.hunks.push(o());else{if(p&&t.strict)throw new Error("Unknown line "+(g+1)+" "+JSON.stringify(p));g++}}}function i(f){var _=/^(---|\+\+\+)\s+/.exec(r[g]);if(_){var h=_[1]==="---"?"old":"new",p=r[g].substring(3).trim().split("	",2),S=p[0].replace(/\\\\/g,"\\");S.startsWith('"')&&S.endsWith('"')&&(S=S.substr(1,S.length-2)),f[h+"FileName"]=S,f[h+"Header"]=(p[1]||"").trim(),g++}}function o(){var f=g,_=r[g++],h=_.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]>"u"?1:+h[2],newStart:+h[3],newLines:typeof h[4]>"u"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var S=0,y=0;g<r.length&&!(r[g].indexOf("--- ")===0&&g+2<r.length&&r[g+1].indexOf("+++ ")===0&&r[g+2].indexOf("@@")===0);g++){var u=r[g].length==0&&g!=r.length-1?" ":r[g][0];if(u==="+"||u==="-"||u===" "||u==="\\")p.lines.push(r[g]),p.linedelimiters.push(s[g]||`
`),u==="+"?S++:u==="-"?y++:u===" "&&(S++,y++);else break}if(!S&&p.newLines===1&&(p.newLines=0),!y&&p.oldLines===1&&(p.oldLines=0),t.strict){if(S!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(y!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return p}for(;g<r.length;)x();return d}var Kd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,s,d){var g=!0,x=!1,i=!1,o=1;return function f(){if(g&&!i){if(x?o++:g=!1,r+o<=d)return o;i=!0}if(!x)return i||(g=!0),s<=r-o?-o++:(x=!0,f())}}})(Kd);Object.defineProperty(Yn,"__esModule",{value:!0});Yn.applyPatch=Yd;Yn.applyPatches=Rg;var Xd=Cs,Eg=kg(Kd);function kg(e){return e&&e.__esModule?e:{default:e}}function Yd(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=(0,Xd.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var s=e.split(/\r\n|[\n\v\f\r\x85]/),d=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],g=t.hunks,x=r.compareLine||function(N,$,F,B){return $===B},i=0,o=r.fuzzFactor||0,f=0,_=0,h,p;function S(N,$){for(var F=0;F<N.lines.length;F++){var B=N.lines[F],M=B.length>0?B[0]:" ",A=B.length>0?B.substr(1):B;if(M===" "||M==="-"){if(!x($+1,s[$],M,A)&&(i++,i>o))return!1;$++}}return!0}for(var y=0;y<g.length;y++){for(var u=g[y],n=s.length-u.oldLines,a=0,l=_+u.oldStart-1,c=(0,Eg.default)(l,f,n);a!==void 0;a=c())if(S(u,l+a)){u.offset=_+=a;break}if(a===void 0)return!1;f=u.offset+u.oldStart+u.oldLines}for(var m=0,w=0;w<g.length;w++){var v=g[w],b=v.oldStart+v.offset+m-1;m+=v.newLines-v.oldLines;for(var C=0;C<v.lines.length;C++){var L=v.lines[C],E=L.length>0?L[0]:" ",R=L.length>0?L.substr(1):L,k=v.linedelimiters&&v.linedelimiters[C]||`
`;if(E===" ")b++;else if(E==="-")s.splice(b,1),d.splice(b,1);else if(E==="+")s.splice(b,0,R),d.splice(b,0,k),b++;else if(E==="\\"){var D=v.lines[C-1]?v.lines[C-1][0]:null;D==="+"?h=!0:D==="-"&&(p=!0)}}}if(h)for(;!s[s.length-1];)s.pop(),d.pop();else p&&(s.push(""),d.push(`
`));for(var T=0;T<s.length-1;T++)s[T]=s[T]+d[T];return s.join("")}function Rg(e,t){typeof e=="string"&&(e=(0,Xd.parsePatch)(e));var r=0;function s(){var d=e[r++];if(!d)return t.complete();t.loadFile(d,function(g,x){if(g)return t.complete(g);var i=Yd(x,d,t);t.patched(d,i,function(o){if(o)return t.complete(o);s()})})}s()}var Jn={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.structuredPatch=Jd;Ir.formatPatch=Bl;Ir.createTwoFilesPatch=Qd;Ir.createPatch=Pg;var Mg=mr;function Bo(e){return Bg(e)||Tg(e)||Ag(e)||Dg()}function Dg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ag(e,t){if(e){if(typeof e=="string")return Aa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Aa(e,t)}}function Tg(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Bg(e){if(Array.isArray(e))return Aa(e)}function Aa(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Jd(e,t,r,s,d,g,x){x||(x={}),typeof x.context>"u"&&(x.context=4);var i=(0,Mg.diffLines)(r,s,x);if(!i)return;i.push({value:"",lines:[]});function o(a){return a.map(function(l){return" "+l})}for(var f=[],_=0,h=0,p=[],S=1,y=1,u=function(l){var c=i[l],m=c.lines||c.value.replace(/\n$/,"").split(`
`);if(c.lines=m,c.added||c.removed){var w;if(!_){var v=i[l-1];_=S,h=y,v&&(p=x.context>0?o(v.lines.slice(-x.context)):[],_-=p.length,h-=p.length)}(w=p).push.apply(w,Bo(m.map(function(T){return(c.added?"+":"-")+T}))),c.added?y+=m.length:S+=m.length}else{if(_)if(m.length<=x.context*2&&l<i.length-2){var b;(b=p).push.apply(b,Bo(o(m)))}else{var C,L=Math.min(m.length,x.context);(C=p).push.apply(C,Bo(o(m.slice(0,L))));var E={oldStart:_,oldLines:S-_+L,newStart:h,newLines:y-h+L,lines:p};if(l>=i.length-2&&m.length<=x.context){var R=/\n$/.test(r),k=/\n$/.test(s),D=m.length==0&&p.length>E.oldLines;!R&&D&&r.length>0&&p.splice(E.oldLines,0,"\\ No newline at end of file"),(!R&&!D||!k)&&p.push("\\ No newline at end of file")}f.push(E),_=0,h=0,p=[]}S+=m.length,y+=m.length}},n=0;n<i.length;n++)u(n);return{oldFileName:e,newFileName:t,oldHeader:d,newHeader:g,hunks:f}}function Bl(e){if(Array.isArray(e))return e.map(Bl).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var s=e.hunks[r];s.oldLines===0&&(s.oldStart-=1),s.newLines===0&&(s.newStart-=1),t.push("@@ -"+s.oldStart+","+s.oldLines+" +"+s.newStart+","+s.newLines+" @@"),t.push.apply(t,s.lines)}return t.join(`
`)+`
`}function Qd(e,t,r,s,d,g,x){return Bl(Jd(e,t,r,s,d,g,x))}function Pg(e,t,r,s,d,g){return Qd(e,e,t,r,s,d,g)}var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.arrayEqual=Og;Qn.arrayStartsWith=Zd;function Og(e,t){return e.length!==t.length?!1:Zd(e,t)}function Zd(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(Jn,"__esModule",{value:!0});Jn.calcLineCount=ef;Jn.merge=Wg;var Ig=Ir,Fg=Cs,Po=Qn;function ri(e){return jg(e)||$g(e)||Hg(e)||Ng()}function Ng(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hg(e,t){if(e){if(typeof e=="string")return Ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ta(e,t)}}function $g(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function jg(e){if(Array.isArray(e))return Ta(e)}function Ta(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function ef(e){var t=Ba(e.lines),r=t.oldLines,s=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,s!==void 0?e.newLines=s:delete e.newLines}function Wg(e,t,r){e=eh(e,r),t=eh(t,r);var s={};(e.index||t.index)&&(s.index=e.index||t.index),(e.newFileName||t.newFileName)&&(th(e)?th(t)?(s.oldFileName=Ns(s,e.oldFileName,t.oldFileName),s.newFileName=Ns(s,e.newFileName,t.newFileName),s.oldHeader=Ns(s,e.oldHeader,t.oldHeader),s.newHeader=Ns(s,e.newHeader,t.newHeader)):(s.oldFileName=e.oldFileName,s.newFileName=e.newFileName,s.oldHeader=e.oldHeader,s.newHeader=e.newHeader):(s.oldFileName=t.oldFileName||e.oldFileName,s.newFileName=t.newFileName||e.newFileName,s.oldHeader=t.oldHeader||e.oldHeader,s.newHeader=t.newHeader||e.newHeader)),s.hunks=[];for(var d=0,g=0,x=0,i=0;d<e.hunks.length||g<t.hunks.length;){var o=e.hunks[d]||{oldStart:1/0},f=t.hunks[g]||{oldStart:1/0};if(rh(o,f))s.hunks.push(ih(o,x)),d++,i+=o.newLines-o.oldLines;else if(rh(f,o))s.hunks.push(ih(f,i)),g++,x+=f.newLines-f.oldLines;else{var _={oldStart:Math.min(o.oldStart,f.oldStart),oldLines:0,newStart:Math.min(o.newStart+x,f.oldStart+i),newLines:0,lines:[]};zg(_,o.oldStart,o.lines,f.oldStart,f.lines),g++,d++,s.hunks.push(_)}}return s}function eh(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,Fg.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,Ig.structuredPatch)(void 0,void 0,t,e)}return e}function th(e){return e.newFileName&&e.newFileName!==e.oldFileName}function Ns(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function rh(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function ih(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function zg(e,t,r,s,d){var g={offset:t,lines:r,index:0},x={offset:s,lines:d,index:0};for(nh(e,g,x),nh(e,x,g);g.index<g.lines.length&&x.index<x.lines.length;){var i=g.lines[g.index],o=x.lines[x.index];if((i[0]==="-"||i[0]==="+")&&(o[0]==="-"||o[0]==="+"))Ug(e,g,x);else if(i[0]==="+"&&o[0]===" "){var f;(f=e.lines).push.apply(f,ri(Lr(g)))}else if(o[0]==="+"&&i[0]===" "){var _;(_=e.lines).push.apply(_,ri(Lr(x)))}else i[0]==="-"&&o[0]===" "?sh(e,g,x):o[0]==="-"&&i[0]===" "?sh(e,x,g,!0):i===o?(e.lines.push(i),g.index++,x.index++):Pl(e,Lr(g),Lr(x))}oh(e,g),oh(e,x),ef(e)}function Ug(e,t,r){var s=Lr(t),d=Lr(r);if(ah(s)&&ah(d)){if((0,Po.arrayStartsWith)(s,d)&&lh(r,s,s.length-d.length)){var g;(g=e.lines).push.apply(g,ri(s));return}else if((0,Po.arrayStartsWith)(d,s)&&lh(t,d,d.length-s.length)){var x;(x=e.lines).push.apply(x,ri(d));return}}else if((0,Po.arrayEqual)(s,d)){var i;(i=e.lines).push.apply(i,ri(s));return}Pl(e,s,d)}function sh(e,t,r,s){var d=Lr(t),g=Vg(r,d);if(g.merged){var x;(x=e.lines).push.apply(x,ri(g.merged))}else Pl(e,s?g:d,s?d:g)}function Pl(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function nh(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var s=t.lines[t.index++];e.lines.push(s),t.offset++}}function oh(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function Lr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var s=e.lines[e.index];if(r==="-"&&s[0]==="+"&&(r="+"),r===s[0])t.push(s),e.index++;else break}return t}function Vg(e,t){for(var r=[],s=[],d=0,g=!1,x=!1;d<t.length&&e.index<e.lines.length;){var i=e.lines[e.index],o=t[d];if(o[0]==="+")break;if(g=g||i[0]!==" ",s.push(o),d++,i[0]==="+")for(x=!0;i[0]==="+";)r.push(i),i=e.lines[++e.index];o.substr(1)===i.substr(1)?(r.push(i),e.index++):x=!0}if((t[d]||"")[0]==="+"&&g&&(x=!0),x)return r;for(;d<t.length;)s.push(t[d++]);return{merged:s,changes:r}}function ah(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function lh(e,t,r){for(var s=0;s<r;s++){var d=t[t.length-r+s].substr(1);if(e.lines[e.index+s]!==" "+d)return!1}return e.index+=r,!0}function Ba(e){var t=0,r=0;return e.forEach(function(s){if(typeof s!="string"){var d=Ba(s.mine),g=Ba(s.theirs);t!==void 0&&(d.oldLines===g.oldLines?t+=d.oldLines:t=void 0),r!==void 0&&(d.newLines===g.newLines?r+=d.newLines:r=void 0)}else r!==void 0&&(s[0]==="+"||s[0]===" ")&&r++,t!==void 0&&(s[0]==="-"||s[0]===" ")&&t++}),{oldLines:t,newLines:r}}var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.reversePatch=tf;function ch(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,s)}return r}function hh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ch(Object(r),!0).forEach(function(s){Gg(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ch(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Gg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tf(e){return Array.isArray(e)?e.map(tf).reverse():hh(hh({},e),{},{oldFileName:e.newFileName,oldHeader:e.newHeader,newFileName:e.oldFileName,newHeader:e.oldHeader,hunks:e.hunks.map(function(t){return{oldLines:t.newLines,oldStart:t.newStart,newLines:t.oldLines,newStart:t.oldStart,linedelimiters:t.linedelimiters,lines:t.lines.map(function(r){return r.startsWith("-")?"+".concat(r.slice(1)):r.startsWith("+")?"-".concat(r.slice(1)):r})}})})}var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.convertChangesToDMP=qg;function qg(e){for(var t=[],r,s,d=0;d<e.length;d++)r=e[d],r.added?s=1:r.removed?s=-1:s=0,t.push([s,r.value]);return t}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.convertChangesToXML=Kg;function Kg(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];s.added?t.push("<ins>"):s.removed&&t.push("<del>"),t.push(Xg(s.value)),s.added?t.push("</ins>"):s.removed&&t.push("</del>")}return t.join("")}function Xg(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Diff",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"diffChars",{enumerable:!0,get:function(){return r.diffChars}}),Object.defineProperty(e,"diffWords",{enumerable:!0,get:function(){return s.diffWords}}),Object.defineProperty(e,"diffWordsWithSpace",{enumerable:!0,get:function(){return s.diffWordsWithSpace}}),Object.defineProperty(e,"diffLines",{enumerable:!0,get:function(){return d.diffLines}}),Object.defineProperty(e,"diffTrimmedLines",{enumerable:!0,get:function(){return d.diffTrimmedLines}}),Object.defineProperty(e,"diffSentences",{enumerable:!0,get:function(){return g.diffSentences}}),Object.defineProperty(e,"diffCss",{enumerable:!0,get:function(){return x.diffCss}}),Object.defineProperty(e,"diffJson",{enumerable:!0,get:function(){return i.diffJson}}),Object.defineProperty(e,"canonicalize",{enumerable:!0,get:function(){return i.canonicalize}}),Object.defineProperty(e,"diffArrays",{enumerable:!0,get:function(){return o.diffArrays}}),Object.defineProperty(e,"applyPatch",{enumerable:!0,get:function(){return f.applyPatch}}),Object.defineProperty(e,"applyPatches",{enumerable:!0,get:function(){return f.applyPatches}}),Object.defineProperty(e,"parsePatch",{enumerable:!0,get:function(){return _.parsePatch}}),Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return h.merge}}),Object.defineProperty(e,"reversePatch",{enumerable:!0,get:function(){return p.reversePatch}}),Object.defineProperty(e,"structuredPatch",{enumerable:!0,get:function(){return S.structuredPatch}}),Object.defineProperty(e,"createTwoFilesPatch",{enumerable:!0,get:function(){return S.createTwoFilesPatch}}),Object.defineProperty(e,"createPatch",{enumerable:!0,get:function(){return S.createPatch}}),Object.defineProperty(e,"formatPatch",{enumerable:!0,get:function(){return S.formatPatch}}),Object.defineProperty(e,"convertChangesToDMP",{enumerable:!0,get:function(){return y.convertChangesToDMP}}),Object.defineProperty(e,"convertChangesToXML",{enumerable:!0,get:function(){return u.convertChangesToXML}});var t=n(Kt),r=_s,s=pi,d=mr,g=gs,x=vs,i=gi,o=ms,f=Yn,_=Cs,h=Jn,p=Ol,S=Ir,y=Il,u=Fl;function n(a){return a&&a.__esModule?a:{default:a}}})(Vd);var Yg=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r);var d=Object.getOwnPropertyDescriptor(t,r);(!d||("get"in d?!t.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,d)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),Jg=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qg=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Yg(t,e,r);return Jg(t,e),t};Object.defineProperty(ur,"__esModule",{value:!0});ur.computeLineInformation=ur.DiffMethod=ur.DiffType=void 0;const Pa=Qg(Vd),Zg=Pa;var jt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADDED=1]="ADDED",e[e.REMOVED=2]="REMOVED",e[e.CHANGED=3]="CHANGED"})(jt||(ur.DiffType=jt={}));var Mn;(function(e){e.CHARS="diffChars",e.WORDS="diffWords",e.WORDS_WITH_SPACE="diffWordsWithSpace",e.LINES="diffLines",e.TRIMMED_LINES="diffTrimmedLines",e.SENTENCES="diffSentences",e.CSS="diffCss",e.JSON="diffJson"})(Mn||(ur.DiffMethod=Mn={}));const uh=e=>e===""?[]:e.replace(/\n$/,"").split(`
`),ev=(e,t,r=Mn.CHARS)=>{const s=Zg[r](e,t),d={left:[],right:[]};return s.forEach(({added:g,removed:x,value:i})=>{const o={};return g&&(o.type=jt.ADDED,o.value=i,d.right.push(o)),x&&(o.type=jt.REMOVED,o.value=i,d.left.push(o)),!x&&!g&&(o.type=jt.DEFAULT,o.value=i,d.right.push(o),d.left.push(o)),o}),d},tv=(e,t,r=!1,s=Mn.CHARS,d=0,g=[])=>{let x=[];typeof e=="string"&&typeof t=="string"?x=Pa.diffLines(e.trimRight(),t.trimRight(),{newlineIsToken:!1,ignoreWhitespace:!1,ignoreCase:!1}):x=Pa.diffJson(e,t);let i=d,o=d,f=[],_=0;const h=[],p=[],S=(y,u,n,a,l)=>uh(y).map((m,w)=>{const v={},b={};if(!(p.includes(`${u}-${w}`)||l&&w!==0)){if(n||a){let C=!0;if(a){o+=1,v.lineNumber=o,v.type=jt.REMOVED,v.value=m||" ";const L=x[u+1];if(L&&L.added){const E=uh(L.value)[w];if(E){const R=S(E,u,!0,!1,!0),{value:k,lineNumber:D,type:T}=R[0].right;if(p.push(`${u+1}-${w}`),b.lineNumber=D,v.value===k)C=!1,b.type=0,v.type=0,b.value=k;else if(b.type=T,r)b.value=k;else{const N=ev(m,k,s);b.value=N.right,v.value=N.left}}}}else i+=1,b.lineNumber=i,b.type=jt.ADDED,b.value=m;C&&!l&&(h.includes(_)||h.push(_))}else o+=1,i+=1,v.lineNumber=o,v.type=jt.DEFAULT,v.value=m,b.lineNumber=i,b.type=jt.DEFAULT,b.value=m;return(g?.includes(`L-${v.lineNumber}`)||g?.includes(`R-${b.lineNumber}`)&&!h.includes(_))&&h.push(_),l||(_+=1),{right:b,left:v}}}).filter(Boolean);return x.forEach(({added:y,removed:u,value:n},a)=>{f=[...f,...S(n,a,y,u)]}),{lineInformation:f,diffLines:h}};ur.computeLineInformation=tv;var Nl={};function rv(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function iv(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var sv=function(){function e(r){var s=this;this._insertTag=function(d){var g;s.tags.length===0?s.insertionPoint?g=s.insertionPoint.nextSibling:s.prepend?g=s.container.firstChild:g=s.before:g=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(d,g),s.tags.push(d)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(iv(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var g=rv(d);try{g.insertRule(s,g.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var d;return(d=s.parentNode)==null?void 0:d.removeChild(s)}),this.tags=[],this.ctr=0},e}(),ze="-ms-",Dn="-moz-",pe="-webkit-",rf="comm",Hl="rule",$l="decl",nv="@import",sf="@keyframes",ov="@layer",av=Math.abs,Zn=String.fromCharCode,lv=Object.assign;function cv(e,t){return Ne(e,0)^45?(((t<<2^Ne(e,0))<<2^Ne(e,1))<<2^Ne(e,2))<<2^Ne(e,3):0}function nf(e){return e.trim()}function hv(e,t){return(e=t.exec(e))?e[0]:e}function ge(e,t,r){return e.replace(t,r)}function Oa(e,t){return e.indexOf(t)}function Ne(e,t){return e.charCodeAt(t)|0}function as(e,t,r){return e.slice(t,r)}function kt(e){return e.length}function jl(e){return e.length}function Hs(e,t){return t.push(e),e}function uv(e,t){return e.map(t).join("")}var eo=1,ui=1,of=0,it=0,De=0,vi="";function to(e,t,r,s,d,g,x){return{value:e,root:t,parent:r,type:s,props:d,children:g,line:eo,column:ui,length:x,return:""}}function Mi(e,t){return lv(to("",null,null,"",null,null,0),e,{length:-e.length},t)}function dv(){return De}function fv(){return De=it>0?Ne(vi,--it):0,ui--,De===10&&(ui=1,eo--),De}function at(){return De=it<of?Ne(vi,it++):0,ui++,De===10&&(ui=1,eo++),De}function At(){return Ne(vi,it)}function en(){return it}function ys(e,t){return as(vi,e,t)}function ls(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function af(e){return eo=ui=1,of=kt(vi=e),it=0,[]}function lf(e){return vi="",e}function tn(e){return nf(ys(it-1,Ia(e===91?e+2:e===40?e+1:e)))}function _v(e){for(;(De=At())&&De<33;)at();return ls(e)>2||ls(De)>3?"":" "}function pv(e,t){for(;--t&&at()&&!(De<48||De>102||De>57&&De<65||De>70&&De<97););return ys(e,en()+(t<6&&At()==32&&at()==32))}function Ia(e){for(;at();)switch(De){case e:return it;case 34:case 39:e!==34&&e!==39&&Ia(De);break;case 40:e===41&&Ia(e);break;case 92:at();break}return it}function gv(e,t){for(;at()&&e+De!==57;)if(e+De===84&&At()===47)break;return"/*"+ys(t,it-1)+"*"+Zn(e===47?e:at())}function vv(e){for(;!ls(At());)at();return ys(e,it)}function mv(e){return lf(rn("",null,null,null,[""],e=af(e),0,[0],e))}function rn(e,t,r,s,d,g,x,i,o){for(var f=0,_=0,h=x,p=0,S=0,y=0,u=1,n=1,a=1,l=0,c="",m=d,w=g,v=s,b=c;n;)switch(y=l,l=at()){case 40:if(y!=108&&Ne(b,h-1)==58){Oa(b+=ge(tn(l),"&","&\f"),"&\f")!=-1&&(a=-1);break}case 34:case 39:case 91:b+=tn(l);break;case 9:case 10:case 13:case 32:b+=_v(y);break;case 92:b+=pv(en()-1,7);continue;case 47:switch(At()){case 42:case 47:Hs(Cv(gv(at(),en()),t,r),o);break;default:b+="/"}break;case 123*u:i[f++]=kt(b)*a;case 125*u:case 59:case 0:switch(l){case 0:case 125:n=0;case 59+_:a==-1&&(b=ge(b,/\f/g,"")),S>0&&kt(b)-h&&Hs(S>32?fh(b+";",s,r,h-1):fh(ge(b," ","")+";",s,r,h-2),o);break;case 59:b+=";";default:if(Hs(v=dh(b,t,r,f,_,d,i,c,m=[],w=[],h),g),l===123)if(_===0)rn(b,t,v,v,m,g,h,i,w);else switch(p===99&&Ne(b,3)===110?100:p){case 100:case 108:case 109:case 115:rn(e,v,v,s&&Hs(dh(e,v,v,0,0,d,i,c,d,m=[],h),w),d,w,h,i,s?m:w);break;default:rn(b,v,v,v,[""],w,0,i,w)}}f=_=S=0,u=a=1,c=b="",h=x;break;case 58:h=1+kt(b),S=y;default:if(u<1){if(l==123)--u;else if(l==125&&u++==0&&fv()==125)continue}switch(b+=Zn(l),l*u){case 38:a=_>0?1:(b+="\f",-1);break;case 44:i[f++]=(kt(b)-1)*a,a=1;break;case 64:At()===45&&(b+=tn(at())),p=At(),_=h=kt(c=b+=vv(en())),l++;break;case 45:y===45&&kt(b)==2&&(u=0)}}return g}function dh(e,t,r,s,d,g,x,i,o,f,_){for(var h=d-1,p=d===0?g:[""],S=jl(p),y=0,u=0,n=0;y<s;++y)for(var a=0,l=as(e,h+1,h=av(u=x[y])),c=e;a<S;++a)(c=nf(u>0?p[a]+" "+l:ge(l,/&\f/g,p[a])))&&(o[n++]=c);return to(e,t,r,d===0?Hl:i,o,f,_)}function Cv(e,t,r){return to(e,t,r,rf,Zn(dv()),as(e,2,-2),0)}function fh(e,t,r,s){return to(e,t,r,$l,as(e,0,s),as(e,s+1,-1),s)}function ii(e,t){for(var r="",s=jl(e),d=0;d<s;d++)r+=t(e[d],d,e,t)||"";return r}function yv(e,t,r,s){switch(e.type){case ov:if(e.children.length)break;case nv:case $l:return e.return=e.return||e.value;case rf:return"";case sf:return e.return=e.value+"{"+ii(e.children,s)+"}";case Hl:e.value=e.props.join(",")}return kt(r=ii(e.children,s))?e.return=e.value+"{"+r+"}":""}function Sv(e){var t=jl(e);return function(r,s,d,g){for(var x="",i=0;i<t;i++)x+=e[i](r,s,d,g)||"";return x}}function wv(e){return function(t){t.root||(t=t.return)&&e(t)}}function xv(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var bv=function(t,r,s){for(var d=0,g=0;d=g,g=At(),d===38&&g===12&&(r[s]=1),!ls(g);)at();return ys(t,it)},Lv=function(t,r){var s=-1,d=44;do switch(ls(d)){case 0:d===38&&At()===12&&(r[s]=1),t[s]+=bv(it-1,r,s);break;case 2:t[s]+=tn(d);break;case 4:if(d===44){t[++s]=At()===58?"&\f":"",r[s]=t[s].length;break}default:t[s]+=Zn(d)}while(d=at());return t},Ev=function(t,r){return lf(Lv(af(t),r))},_h=new WeakMap,kv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,s=t.parent,d=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!_h.get(s))&&!d){_h.set(t,!0);for(var g=[],x=Ev(r,g),i=s.props,o=0,f=0;o<x.length;o++)for(var _=0;_<i.length;_++,f++)t.props[f]=g[o]?x[o].replace(/&\f/g,i[_]):i[_]+" "+x[o]}}},Rv=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function cf(e,t){switch(cv(e,t)){case 5103:return pe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return pe+e+Dn+e+ze+e+e;case 6828:case 4268:return pe+e+ze+e+e;case 6165:return pe+e+ze+"flex-"+e+e;case 5187:return pe+e+ge(e,/(\w+).+(:[^]+)/,pe+"box-$1$2"+ze+"flex-$1$2")+e;case 5443:return pe+e+ze+"flex-item-"+ge(e,/flex-|-self/,"")+e;case 4675:return pe+e+ze+"flex-line-pack"+ge(e,/align-content|flex-|-self/,"")+e;case 5548:return pe+e+ze+ge(e,"shrink","negative")+e;case 5292:return pe+e+ze+ge(e,"basis","preferred-size")+e;case 6060:return pe+"box-"+ge(e,"-grow","")+pe+e+ze+ge(e,"grow","positive")+e;case 4554:return pe+ge(e,/([^-])(transform)/g,"$1"+pe+"$2")+e;case 6187:return ge(ge(ge(e,/(zoom-|grab)/,pe+"$1"),/(image-set)/,pe+"$1"),e,"")+e;case 5495:case 3959:return ge(e,/(image-set\([^]*)/,pe+"$1$`$1");case 4968:return ge(ge(e,/(.+:)(flex-)?(.*)/,pe+"box-pack:$3"+ze+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pe+e+e;case 4095:case 3583:case 4068:case 2532:return ge(e,/(.+)-inline(.+)/,pe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(kt(e)-1-t>6)switch(Ne(e,t+1)){case 109:if(Ne(e,t+4)!==45)break;case 102:return ge(e,/(.+:)(.+)-([^]+)/,"$1"+pe+"$2-$3$1"+Dn+(Ne(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Oa(e,"stretch")?cf(ge(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ne(e,t+1)!==115)break;case 6444:switch(Ne(e,kt(e)-3-(~Oa(e,"!important")&&10))){case 107:return ge(e,":",":"+pe)+e;case 101:return ge(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pe+(Ne(e,14)===45?"inline-":"")+"box$3$1"+pe+"$2$3$1"+ze+"$2box$3")+e}break;case 5936:switch(Ne(e,t+11)){case 114:return pe+e+ze+ge(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return pe+e+ze+ge(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return pe+e+ze+ge(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return pe+e+ze+e+e}return e}var Mv=function(t,r,s,d){if(t.length>-1&&!t.return)switch(t.type){case $l:t.return=cf(t.value,t.length);break;case sf:return ii([Mi(t,{value:ge(t.value,"@","@"+pe)})],d);case Hl:if(t.length)return uv(t.props,function(g){switch(hv(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ii([Mi(t,{props:[ge(g,/:(read-\w+)/,":"+Dn+"$1")]})],d);case"::placeholder":return ii([Mi(t,{props:[ge(g,/:(plac\w+)/,":"+pe+"input-$1")]}),Mi(t,{props:[ge(g,/:(plac\w+)/,":"+Dn+"$1")]}),Mi(t,{props:[ge(g,/:(plac\w+)/,ze+"input-$1")]})],d)}return""})}},Dv=[Mv],Av=function(t){var r=t.key;if(r==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(u){var n=u.getAttribute("data-emotion");n.indexOf(" ")!==-1&&(document.head.appendChild(u),u.setAttribute("data-s",""))})}var d=t.stylisPlugins||Dv,g={},x,i=[];x=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(u){for(var n=u.getAttribute("data-emotion").split(" "),a=1;a<n.length;a++)g[n[a]]=!0;i.push(u)});var o,f=[kv,Rv];{var _,h=[yv,wv(function(u){_.insert(u)})],p=Sv(f.concat(d,h)),S=function(n){return ii(mv(n),p)};o=function(n,a,l,c){_=l,S(n?n+"{"+a.styles+"}":a.styles),c&&(y.inserted[a.name]=!0)}}var y={key:r,sheet:new sv({key:r,container:x,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:g,registered:{},insert:o};return y.sheet.hydrate(i),y};function Tv(e){for(var t=0,r,s=0,d=e.length;d>=4;++s,d-=4)r=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Bv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pv=/[A-Z]|^ms/g,Ov=/_EMO_([^_]+?)_([^]*?)_EMO_/g,hf=function(t){return t.charCodeAt(1)===45},ph=function(t){return t!=null&&typeof t!="boolean"},Oo=xv(function(e){return hf(e)?e:e.replace(Pv,"-$&").toLowerCase()}),gh=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Ov,function(s,d,g){return rr={name:d,styles:g,next:rr},d})}return Bv[t]!==1&&!hf(t)&&typeof r=="number"&&r!==0?r+"px":r};function An(e,t,r){if(r==null)return"";var s=r;if(s.__emotion_styles!==void 0)return s;switch(typeof r){case"boolean":return"";case"object":{var d=r;if(d.anim===1)return rr={name:d.name,styles:d.styles,next:rr},d.name;var g=r;if(g.styles!==void 0){var x=g.next;if(x!==void 0)for(;x!==void 0;)rr={name:x.name,styles:x.styles,next:rr},x=x.next;var i=g.styles+";";return i}return Iv(e,t,r)}}var o=r;if(t==null)return o;var f=t[o];return f!==void 0?f:o}function Iv(e,t,r){var s="";if(Array.isArray(r))for(var d=0;d<r.length;d++)s+=An(e,t,r[d])+";";else for(var g in r){var x=r[g];if(typeof x!="object"){var i=x;t!=null&&t[i]!==void 0?s+=g+"{"+t[i]+"}":ph(i)&&(s+=Oo(g)+":"+gh(g,i)+";")}else if(Array.isArray(x)&&typeof x[0]=="string"&&(t==null||t[x[0]]===void 0))for(var o=0;o<x.length;o++)ph(x[o])&&(s+=Oo(g)+":"+gh(g,x[o])+";");else{var f=An(e,t,x);switch(g){case"animation":case"animationName":{s+=Oo(g)+":"+f+";";break}default:s+=g+"{"+f+"}"}}}return s}var vh=/label:\s*([^\s;{]+)\s*(;|$)/g,rr;function Io(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,d="";rr=void 0;var g=e[0];if(g==null||g.raw===void 0)s=!1,d+=An(r,t,g);else{var x=g;d+=x[0]}for(var i=1;i<e.length;i++)if(d+=An(r,t,e[i]),s){var o=g;d+=o[i]}vh.lastIndex=0;for(var f="",_;(_=vh.exec(d))!==null;)f+="-"+_[1];var h=Tv(d)+f;return{name:h,styles:d,next:rr}}function uf(e,t,r){var s="";return r.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):d&&(s+=d+" ")}),s}var Fv=function(t,r,s){var d=t.key+"-"+r.name;t.registered[d]===void 0&&(t.registered[d]=r.styles)},Nv=function(t,r,s){Fv(t,r);var d=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var g=r;do t.insert(r===g?"."+d:"",g,t.sheet,!0),g=g.next;while(g!==void 0)}};function mh(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function Ch(e,t,r){var s=[],d=uf(e,s,r);return s.length<2?r:d+t(s)}var Hv=function(t){var r=Av(t);r.sheet.speedy=function(i){this.isSpeedy=i},r.compat=!0;var s=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Io(f,r.registered,void 0);return Nv(r,h),r.key+"-"+h.name},d=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Io(f,r.registered),p="animation-"+h.name;return mh(r,{name:h.name,styles:"@keyframes "+p+"{"+h.styles+"}"}),p},g=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Io(f,r.registered);mh(r,h)},x=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];return Ch(r.registered,s,$v(f))};return{css:s,cx:x,injectGlobal:g,keyframes:d,hydrate:function(o){o.forEach(function(f){r.inserted[f]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:uf.bind(null,r.registered),merge:Ch.bind(null,r.registered,s)}},$v=function e(t){for(var r="",s=0;s<t.length;s++){var d=t[s];if(d!=null){var g=void 0;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))g=e(d);else{g="";for(var x in d)d[x]&&x&&(g&&(g+=" "),g+=x)}break}default:g=d}g&&(r&&(r+=" "),r+=g)}}return r};const jv=Object.freeze(Object.defineProperty({__proto__:null,default:Hv},Symbol.toStringTag,{value:"Module"})),Wv=Mh(jv);var zv=Pe&&Pe.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(r[s[d]]=e[s[d]]);return r},Uv=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nl,"__esModule",{value:!0});const Vv=Uv(Wv);Nl.default=(e,t=!1,r="")=>{const{variables:s={}}=e,d=zv(e,["variables"]),g={light:Object.assign({diffViewerBackground:"#fff",diffViewerColor:"#212529",addedBackground:"#e6ffed",addedColor:"#24292e",removedBackground:"#ffeef0",removedColor:"#24292e",changedBackground:"#fffbdd",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0",addedGutterBackground:"#cdffd8",removedGutterBackground:"#ffdce0",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",codeFoldGutterBackground:"#dbedff",codeFoldBackground:"#f1f8ff",emptyLineBackground:"#fafbfc",gutterColor:"#212529",addedGutterColor:"#212529",removedGutterColor:"#212529",codeFoldContentColor:"#212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleColor:"#212529",diffViewerTitleBorderColor:"#eee"},s.light||{}),dark:Object.assign({diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",addedBackground:"#044B53",addedColor:"white",removedBackground:"#632F34",removedColor:"white",changedBackground:"#3e302c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f",addedGutterBackground:"#034148",removedGutterBackground:"#632b30",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",codeFoldGutterBackground:"#21232b",codeFoldBackground:"#262831",emptyLineBackground:"#363946",gutterColor:"#666c87",addedGutterColor:"#8c8c8c",removedGutterColor:"#8c8c8c",codeFoldContentColor:"#656a8b",diffViewerTitleBackground:"#2f323e",diffViewerTitleColor:"#555a7b",diffViewerTitleBorderColor:"#353846"},s.dark||{})},x=t?g.dark:g.light,{css:i,cx:o}=(0,Vv.default)({key:"react-diff",nonce:r}),f=i({width:"100%",label:"content"}),_=i({[`.${f}`]:{width:"50%"},label:"split-view"}),h=i({width:"100%",background:x.diffViewerBackground,pre:{margin:0,whiteSpace:"pre-wrap",lineHeight:"25px"},label:"diff-container",borderCollapse:"collapse"}),p=i({color:x.codeFoldContentColor,label:"code-fold-content"}),S=i({color:x.diffViewerColor,label:"content-text"}),y=i({background:x.diffViewerTitleBackground,padding:10,borderBottom:`1px solid ${x.diffViewerTitleBorderColor}`,label:"title-block",":last-child":{borderLeft:`1px solid ${x.diffViewerTitleBorderColor}`},[`.${S}`]:{color:x.diffViewerTitleColor}}),u=i({color:x.gutterColor,label:"line-number"}),n=i({background:x.removedBackground,color:x.removedColor,pre:{color:x.removedColor},[`.${u}`]:{color:x.removedGutterColor},label:"diff-removed"}),a=i({background:x.addedBackground,color:x.addedColor,pre:{color:x.addedColor},[`.${u}`]:{color:x.addedGutterColor},label:"diff-added"}),l=i({background:x.changedBackground,[`.${u}`]:{color:x.gutterColor},label:"diff-changed"}),c=i({padding:2,display:"inline-flex",borderRadius:4,wordBreak:"break-all",label:"word-diff"}),m=i({background:x.wordAddedBackground,label:"word-added"}),w=i({background:x.wordRemovedBackground,label:"word-removed"}),v=i({backgroundColor:x.codeFoldGutterBackground,label:"code-fold-gutter"}),b=i({backgroundColor:x.codeFoldBackground,height:40,fontSize:14,fontWeight:700,label:"code-fold",a:{textDecoration:"underline !important",cursor:"pointer",pre:{display:"inline"}}}),C=i({backgroundColor:x.emptyLineBackground,label:"empty-line"}),L=i({width:25,paddingLeft:10,paddingRight:10,userSelect:"none",label:"marker",[`&.${a}`]:{pre:{color:x.addedColor}},[`&.${n}`]:{pre:{color:x.removedColor}}}),E=i({background:x.highlightBackground,label:"highlighted-line",[`.${m}, .${w}`]:{backgroundColor:"initial"}}),R=i({label:"highlighted-gutter"}),k=i({userSelect:"none",minWidth:50,padding:"0 10px",whiteSpace:"nowrap",label:"gutter",textAlign:"right",background:x.gutterBackground,"&:hover":{cursor:"pointer",background:x.gutterBackgroundDark,pre:{opacity:1}},pre:{opacity:.5},[`&.${a}`]:{background:x.addedGutterBackground},[`&.${n}`]:{background:x.removedGutterBackground},[`&.${R}`]:{background:x.highlightGutterBackground,"&:hover":{background:x.highlightGutterBackground}}}),D=i({"&:hover":{background:x.gutterBackground,cursor:"initial"},label:"empty-gutter"}),T=i({verticalAlign:"baseline",label:"line"}),N={diffContainer:h,diffRemoved:n,diffAdded:a,diffChanged:l,splitView:_,marker:L,highlightedGutter:R,highlightedLine:E,gutter:k,line:T,wordDiff:c,wordAdded:m,wordRemoved:w,codeFoldGutter:v,codeFold:b,emptyGutter:D,emptyLine:C,lineNumber:u,contentText:S,content:f,codeFoldContent:p,titleBlock:y},$=Object.keys(d).reduce((F,B)=>Object.assign(Object.assign({},F),{[B]:i(d[B])}),{});return Object.keys(N).reduce((F,B)=>Object.assign(Object.assign({},F),{[B]:$[B]?o(N[B],$[B]):N[B]}),{})};var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.computeHiddenBlocks=void 0;function Gv(e,t,r){let s=0,d,g={},x=[];return e.forEach((i,o)=>{const f=t.some(_=>_>=o-r&&_<=o+r);!f&&d==null?(d={index:s,startLine:o,endLine:o,lines:1},x.push(d),g[o]=d.index,s++):f?d=void 0:(d.endLine=o,d.lines++,g[o]=d.index)}),{lineBlocks:g,blocks:x}}ro.computeHiddenBlocks=Gv;var yh=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function qv(e,t){return!!(e===t||yh(e)&&yh(t))}function Kv(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!qv(e[r],t[r]))return!1;return!0}function Xv(e,t){t===void 0&&(t=Kv);var r=null;function s(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];if(r&&r.lastThis===this&&t(d,r.lastArgs))return r.lastResult;var x=e.apply(this,d);return r={lastResult:x,lastArgs:d,lastThis:this},x}return s.clear=function(){r=null},s}const Yv=Object.freeze(Object.defineProperty({__proto__:null,default:Xv},Symbol.toStringTag,{value:"Module"})),Jv=Mh(Yv);(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(u,n,a,l){l===void 0&&(l=a);var c=Object.getOwnPropertyDescriptor(n,a);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(u,l,c)}:function(u,n,a,l){l===void 0&&(l=a),u[l]=n[a]}),r=Pe&&Pe.__setModuleDefault||(Object.create?function(u,n){Object.defineProperty(u,"default",{enumerable:!0,value:n})}:function(u,n){u.default=n}),s=Pe&&Pe.__importStar||function(u){if(u&&u.__esModule)return u;var n={};if(u!=null)for(var a in u)a!=="default"&&Object.prototype.hasOwnProperty.call(u,a)&&t(n,u,a);return r(n,u),n},d=Pe&&Pe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.DiffMethod=e.LineNumberPrefix=void 0;const g=H,x=s(K),i=d(Jp),o=ur;Object.defineProperty(e,"DiffMethod",{enumerable:!0,get:function(){return o.DiffMethod}});const f=d(Nl),_=ro,h=Jv,p=h.default||h;var S;(function(u){u.LEFT="L",u.RIGHT="R"})(S||(e.LineNumberPrefix=S={}));class y extends x.Component{constructor(n){super(n),this.resetCodeBlocks=()=>this.state.expandedBlocks.length>0?(this.setState({expandedBlocks:[]}),!0):!1,this.onBlockExpand=a=>{const l=this.state.expandedBlocks.slice();l.push(a),this.setState({expandedBlocks:l})},this.computeStyles=p(f.default),this.onLineNumberClickProxy=a=>this.props.onLineNumberClick?l=>this.props.onLineNumberClick(a,l):()=>{},this.renderWordDiff=(a,l)=>a.map((c,m)=>(0,g.jsx)("span",{className:(0,i.default)(this.styles.wordDiff,{[this.styles.wordAdded]:c.type===o.DiffType.ADDED,[this.styles.wordRemoved]:c.type===o.DiffType.REMOVED}),children:l?l(c.value):c.value},m)),this.renderLine=(a,l,c,m,w,v)=>{const b=`${c}-${a}`,C=`${v}-${w}`,L=this.props.highlightLines.includes(b)||this.props.highlightLines.includes(C),E=l===o.DiffType.ADDED,R=l===o.DiffType.REMOVED,k=l===o.DiffType.CHANGED;let D;return Array.isArray(m)?D=this.renderWordDiff(m,this.props.renderContent):this.props.renderContent?D=this.props.renderContent(m):D=m,(0,g.jsxs)(x.Fragment,{children:[!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:a&&this.onLineNumberClickProxy(b),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!a,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:L}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:a})}),!this.props.splitView&&!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:w&&this.onLineNumberClickProxy(C),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!w,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:L}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:w})}),this.props.renderGutter?this.props.renderGutter({lineNumber:a,type:l,prefix:c,value:m,additionalLineNumber:w,additionalPrefix:v,styles:this.styles}):null,!this.props.hideMarkers&&(0,g.jsx)("td",{className:(0,i.default)(this.styles.marker,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:L}),children:(0,g.jsxs)("pre",{children:[E&&"+",R&&"-"]})}),(0,g.jsx)("td",{className:(0,i.default)(this.styles.content,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:L}),children:(0,g.jsx)("pre",{className:this.styles.contentText,children:D})})]})},this.renderSplitView=({left:a,right:l},c)=>(0,g.jsxs)("tr",{className:this.styles.line,children:[this.renderLine(a.lineNumber,a.type,S.LEFT,a.value),this.renderLine(l.lineNumber,l.type,S.RIGHT,l.value)]},c),this.renderInlineView=({left:a,right:l},c)=>{let m;return a.type===o.DiffType.REMOVED&&l.type===o.DiffType.ADDED?(0,g.jsxs)(x.Fragment,{children:[(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(a.lineNumber,a.type,S.LEFT,a.value,null)}),(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(null,l.type,S.RIGHT,l.value,l.lineNumber)})]},c):(a.type===o.DiffType.REMOVED&&(m=this.renderLine(a.lineNumber,a.type,S.LEFT,a.value,null)),a.type===o.DiffType.DEFAULT&&(m=this.renderLine(a.lineNumber,a.type,S.LEFT,a.value,l.lineNumber,S.RIGHT)),l.type===o.DiffType.ADDED&&(m=this.renderLine(null,l.type,S.RIGHT,l.value,l.lineNumber)),(0,g.jsx)("tr",{className:this.styles.line,children:m},c))},this.onBlockClickProxy=a=>()=>this.onBlockExpand(a),this.renderSkippedLineIndicator=(a,l,c,m)=>{const{hideLineNumbers:w,splitView:v}=this.props,b=this.props.codeFoldMessageRenderer?this.props.codeFoldMessageRenderer(a,c,m):(0,g.jsxs)("pre",{className:this.styles.codeFoldContent,children:["Expand ",a," lines ..."]}),C=(0,g.jsx)("td",{children:(0,g.jsx)("a",{onClick:this.onBlockClickProxy(l),tabIndex:0,children:b})}),L=!v&&!w;return(0,g.jsxs)("tr",{className:this.styles.codeFold,children:[!w&&(0,g.jsx)("td",{className:this.styles.codeFoldGutter}),this.props.renderGutter?(0,g.jsx)("td",{className:this.styles.codeFoldGutter}):null,(0,g.jsx)("td",{className:(0,i.default)({[this.styles.codeFoldGutter]:L})}),L?(0,g.jsxs)(x.Fragment,{children:[(0,g.jsx)("td",{}),C]}):(0,g.jsxs)(x.Fragment,{children:[C,this.props.renderGutter?(0,g.jsx)("td",{}):null,(0,g.jsx)("td",{})]}),(0,g.jsx)("td",{}),(0,g.jsx)("td",{})]},`${c}-${m}`)},this.renderDiff=()=>{const{oldValue:a,newValue:l,splitView:c,disableWordDiff:m,compareMethod:w,linesOffset:v}=this.props,{lineInformation:b,diffLines:C}=(0,o.computeLineInformation)(a,l,m,w,v,this.props.alwaysShowLines),L=this.props.extraLinesSurroundingDiff<0?0:Math.round(this.props.extraLinesSurroundingDiff),{lineBlocks:E,blocks:R}=(0,_.computeHiddenBlocks)(b,C,L);return b.map((k,D)=>{if(this.props.showDiffOnly){const N=E[D];if(N!==void 0){const $=R[N].endLine===D;if(!this.state.expandedBlocks.includes(N)&&$)return(0,g.jsx)(x.Fragment,{children:this.renderSkippedLineIndicator(R[N].lines,N,k.left.lineNumber,k.right.lineNumber)},D);if(!this.state.expandedBlocks.includes(N))return null}}return c?this.renderSplitView(k,D):this.renderInlineView(k,D)})},this.render=()=>{const{oldValue:a,newValue:l,useDarkTheme:c,leftTitle:m,rightTitle:w,splitView:v,hideLineNumbers:b,hideMarkers:C,nonce:L}=this.props;if(this.props.compareMethod!==o.DiffMethod.JSON&&(typeof a!="string"||typeof l!="string"))throw Error('"oldValue" and "newValue" should be strings');this.styles=this.computeStyles(this.props.styles,c,L);const E=this.renderDiff();let R=b?2:3,k=b?2:4;C&&(R-=1,k-=1);const D=this.props.renderGutter?1:0,T=(m||w)&&(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{colSpan:(v?R:k)+D,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:m})}),v&&(0,g.jsx)("td",{colSpan:R+D,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:w})})]});return(0,g.jsx)("table",{className:(0,i.default)(this.styles.diffContainer,{[this.styles.splitView]:v}),children:(0,g.jsxs)("tbody",{children:[T,E]})})},this.state={expandedBlocks:[]}}}y.defaultProps={oldValue:"",newValue:"",splitView:!0,highlightLines:[],disableWordDiff:!1,compareMethod:o.DiffMethod.CHARS,styles:{},hideLineNumbers:!1,hideMarkers:!1,extraLinesSurroundingDiff:3,showDiffOnly:!0,useDarkTheme:!1,linesOffset:0,nonce:""},e.default=y})(zd);const Qv=Rh(zd),Zv=7683,em={variables:{dark:{diffViewerBackground:"#0d1117",diffViewerColor:"#e6edf3",addedBackground:"rgba(63, 185, 80, 0.15)",addedColor:"#e6edf3",removedBackground:"rgba(248, 81, 73, 0.15)",removedColor:"#e6edf3",wordAddedBackground:"rgba(63, 185, 80, 0.4)",wordRemovedBackground:"rgba(248, 81, 73, 0.4)",addedGutterBackground:"#1a4d2e",removedGutterBackground:"#4d1a1a",gutterBackground:"#161b22",gutterBackgroundDark:"#0d1117",highlightBackground:"#21262d",highlightGutterBackground:"#21262d",codeFoldGutterBackground:"#161b22",codeFoldBackground:"#161b22",emptyLineBackground:"#161b22",gutterColor:"#6e7681",addedGutterColor:"#3fb950",removedGutterColor:"#f85149",codeFoldContentColor:"#8b949e",diffViewerTitleBackground:"#161b22",diffViewerTitleColor:"#e6edf3",diffViewerTitleBorderColor:"#30363d"}}},tm={A:"Added",M:"Modified",D:"Deleted"},rm={A:"bg-accent-green text-white",M:"bg-accent-blue text-white",D:"bg-accent-red text-white"};function im(e){const t=e.querySelectorAll("td");for(const r of t){const s=r.querySelector("pre");if(s){const d=s.textContent?.trim();if(d==="+"||d==="-")return!0}}return!1}function sm(e){return e.textContent?.includes("hidden lines")||!1}function nm(e){const t=[],r=Array.from(e.querySelectorAll("tr"));let s=!1;for(const d of r){if(sm(d)){s=!1;continue}const g=im(d);g&&!s&&t.push(d),s=g}return t}function om({file:e,defaultExpanded:t}){const[r,s]=K.useState(t),[d,g]=K.useState(-1),[x,i]=K.useState(0),o=K.useRef(null),f=K.useRef([]);K.useEffect(()=>{if(r&&o.current){const h=setTimeout(()=>{o.current&&(f.current=nm(o.current),i(f.current.length),g(f.current.length>0?0:-1))},200);return()=>clearTimeout(h)}else f.current=[],i(0),g(-1)},[r]);const _=h=>{if(f.current.length===0)return;let p;h==="prev"?p=Math.max(0,d-1):p=Math.min(f.current.length-1,d+1),p!==d&&(g(p),f.current[p]?.scrollIntoView({behavior:"smooth",block:"center"}))};return H.jsxs("div",{className:"border border-border-subtle rounded-lg overflow-hidden mb-3",children:[H.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-bg-tertiary",children:[H.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>s(!r),children:[H.jsx("span",{className:"text-text-secondary shrink-0",children:r?"":""}),H.jsx("span",{className:"text-sm truncate",children:e.filename}),H.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded shrink-0 ${rm[e.status]||"bg-bg-secondary"}`,children:tm[e.status]||e.status})]}),H.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[H.jsxs("span",{className:"text-xs text-text-secondary",children:[e.additions>0&&H.jsxs("span",{className:"text-accent-green mr-1",children:["+",e.additions]}),e.deletions>0&&H.jsxs("span",{className:"text-accent-red",children:["-",e.deletions]})]}),r&&x>0&&H.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[H.jsx("button",{onClick:h=>{h.stopPropagation(),_("prev")},disabled:d<=0,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""}),H.jsxs("span",{className:"text-xs text-text-muted min-w-[32px] text-center",children:[d+1,"/",x]}),H.jsx("button",{onClick:h=>{h.stopPropagation(),_("next")},disabled:d>=x-1,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]}),r&&H.jsx("div",{ref:o,className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:e.binary?H.jsx("div",{className:"p-4 text-center text-text-muted",children:"Binary file"}):H.jsx(Qv,{oldValue:e.oldValue||"",newValue:e.newValue||"",splitView:!1,useDarkTheme:!0,styles:em,showDiffOnly:!0,extraLinesSurroundingDiff:3,codeFoldMessageRenderer:h=>H.jsxs("span",{children:[h," hidden lines"]})})})]})}const am=({isOpen:e,onClose:t})=>{const[r,s]=K.useState(null),[d,g]=K.useState(!1),x=K.useCallback(async()=>{g(!0);try{const h=`http://${location.hostname}:${Zv}/api/diff`,p=await fetch(h,{signal:AbortSignal.timeout(5e3)});if(!p.ok)throw new Error(`HTTP ${p.status}`);const S=await p.json();s(S)}catch(h){s({error:"connection_failed",message:h instanceof Error?h.message:"Cannot connect to diff server"})}finally{g(!1)}},[]);if(K.useEffect(()=>{e&&x()},[e,x]),K.useEffect(()=>{const h=p=>{e&&p.key==="Escape"&&(t(),p.preventDefault())};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e,t]),!e)return null;const i=r?.files||[],o=i.length,f=r?.summary?.totalAdditions||0,_=r?.summary?.totalDeletions||0;return H.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end justify-center",onClick:h=>h.target===h.currentTarget&&t(),children:H.jsxs("div",{className:"w-full h-[90vh] bg-bg-primary rounded-t-2xl flex flex-col overflow-hidden",children:[H.jsxs("div",{className:"shrink-0 px-4 py-3 border-b border-border-subtle flex items-center justify-between",children:[H.jsxs("div",{className:"flex items-center gap-3",children:[H.jsx("h2",{className:"text-lg font-semibold",children:"Git Diff"}),r?.branch&&H.jsx("span",{className:"text-sm text-accent-purple",children:r.branch})]}),H.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary text-text-secondary",children:""})]}),H.jsxs("div",{className:"shrink-0 px-4 py-2 border-b border-border-subtle flex items-center justify-between text-xs text-text-secondary",children:[H.jsxs("div",{className:"flex items-center gap-3",children:[r?.git_root&&H.jsx("span",{className:"truncate max-w-[200px]",title:r.git_root,children:r.git_root}),H.jsxs("span",{children:[o," file",o!==1?"s":""]})]}),H.jsxs("div",{className:"flex items-center gap-2",children:[H.jsxs("span",{className:"text-accent-green",children:["+",f]}),H.jsxs("span",{className:"text-accent-red",children:["-",_]})]})]}),H.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?H.jsx("div",{className:"flex items-center justify-center h-full",children:H.jsx("div",{className:"text-text-muted",children:"Loading..."})}):r?.error?H.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[H.jsx("span",{className:"text-2xl",children:""}),H.jsx("span",{className:"text-text-muted",children:r.message||"Error loading diff"})]}):i.length===0?H.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[H.jsx("span",{className:"text-2xl text-accent-green",children:""}),H.jsx("span",{className:"text-text-muted",children:"No changes"})]}):i.map((h,p)=>H.jsx(om,{file:h,defaultExpanded:p===0},h.filename))})]})})},lm=()=>{const{sendKey:e,sendInput:t}=vr(),[r,s]=K.useState(null),[d,g]=K.useState(!1),[x,i]=K.useState(!1),[o,f]=K.useState(!1),[_,h]=K.useState(!1),p=()=>{const y=localStorage.getItem("ttyd_commands");if(y)try{s(JSON.parse(y))}catch(u){console.error("Failed to parse ttyd_commands",u)}else s({defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]})};K.useEffect(()=>{p()},[]);const S=y=>{t(y+"\r")};return H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"h-auto min-h-[44px] bg-bg-secondary border-t border-border-subtle flex flex-col shrink-0 pb-[env(safe-area-inset-bottom)]",children:H.jsxs("div",{className:`flex items-start px-2 py-2 gap-2 ${_?"flex-wrap":"overflow-x-auto no-scrollbar mask-gradient-right"}`,children:[H.jsx("button",{onClick:()=>h(!_),className:`px-2 py-1.5 rounded shadow-sm border text-sm active:scale-95 transition-all shrink-0 ${_?"bg-accent-blue/20 border-accent-blue text-accent-blue":"bg-bg-tertiary/50 border-border-subtle text-text-secondary"}`,title:_?"Collapse toolbar":"Expand toolbar",children:_?"":""}),H.jsxs("div",{className:`flex items-center gap-2 pr-2 border-r border-border-subtle ${_?"flex-wrap":"shrink-0"}`,children:[H.jsx(mt,{label:"ESC",onClick:()=>e("ESC")}),H.jsx(mt,{label:"Tab",onClick:()=>e("TAB")}),H.jsx(mt,{label:"",onClick:()=>e("ENTER")}),H.jsx(mt,{label:"^C",onClick:()=>e("CTRL_C"),className:"text-accent-red"}),H.jsx(mt,{label:"",onClick:()=>e("ARROW_UP")}),H.jsx(mt,{label:"",onClick:()=>e("ARROW_DOWN")}),H.jsx(mt,{label:"",onClick:()=>e("ARROW_LEFT")}),H.jsx(mt,{label:"",onClick:()=>e("ARROW_RIGHT")}),H.jsx(mt,{label:"PgUp",onClick:()=>e("PAGE_UP")}),H.jsx(mt,{label:"PgDn",onClick:()=>e("PAGE_DOWN")}),H.jsx(mt,{label:"^L",onClick:()=>e("CTRL_L")})]}),r&&H.jsxs("div",{className:`flex items-center gap-2 pr-2 border-r border-border-subtle ${_?"flex-wrap":"shrink-0"}`,children:[r.defaultCommands.filter(y=>y.visible).map(y=>H.jsx(Sh,{label:y.name,onClick:()=>S(y.cmd)},y.name)),r.customCommands.map(y=>H.jsx(Sh,{label:y.name,onClick:()=>S(y.cmd)},y.name))]}),H.jsxs("div",{className:`flex items-center gap-2 ${_?"flex-wrap":"shrink-0"}`,children:[H.jsx(Fo,{label:"",onClick:()=>i(!0)}),H.jsx(Fo,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),H.jsx(Fo,{label:"",onClick:()=>g(!0)})]})]})}),H.jsx(Xp,{isOpen:d,onClose:()=>g(!1),onConfigChange:p}),H.jsx(Yp,{isOpen:x,onClose:()=>i(!1),onSend:y=>t(y)}),H.jsx(am,{isOpen:o,onClose:()=>f(!1)})]})},mt=({label:e,onClick:t,className:r=""})=>H.jsx("button",{onClick:t,className:`px-3 py-1.5 bg-bg-tertiary rounded shadow-sm border border-border-subtle text-text-primary text-sm font-mono active:scale-95 transition-transform whitespace-nowrap ${r}`,children:e}),Sh=({label:e,onClick:t})=>H.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-bg-tertiary rounded shadow-sm border border-border-subtle text-accent-blue text-sm font-mono active:scale-95 transition-transform whitespace-nowrap",children:e}),Fo=({label:e,onClick:t,className:r=""})=>H.jsx("button",{onClick:t,className:`px-3 py-1.5 bg-bg-tertiary/50 hover:bg-bg-tertiary rounded shadow-sm border border-border-subtle text-text-secondary hover:text-text-primary text-sm font-medium active:scale-95 transition-all whitespace-nowrap ${r}`,children:e}),cm=7683,hm=5e3;function um(){const[e,t]=K.useState({branch:"",path:"",changedFiles:0,additions:0,deletions:0,isLoading:!0,error:null,isOffline:!1}),r=K.useCallback(async()=>{try{const s=`http://${location.hostname}:${cm}/api/diff`,d=await fetch(s,{signal:AbortSignal.timeout(3e3)});if(!d.ok)throw new Error(`HTTP ${d.status}`);const g=await d.json();t({branch:g.branch||"unknown",path:g.git_root||g.cwd||"~",changedFiles:g.summary?.totalFiles||0,additions:g.summary?.totalAdditions||0,deletions:g.summary?.totalDeletions||0,isLoading:!1,error:null,isOffline:!1})}catch(s){t(d=>({...d,isLoading:!1,isOffline:!0,error:s instanceof Error?s.message:"Unknown error"}))}},[]);return K.useEffect(()=>{r();const s=setInterval(r,hm);return()=>clearInterval(s)},[r]),e}const dm=7683,fm=5e3;function _m(){const[e,t]=K.useState([]),[r,s]=K.useState(null),[d,g]=K.useState(!0),[x,i]=K.useState(null),o=K.useCallback(async()=>{try{const _=`http://${location.hostname}:${dm}/api/tmux/list`,h=await fetch(_,{signal:AbortSignal.timeout(3e3)});if(!h.ok)throw new Error(`HTTP ${h.status}`);const p=await h.json();t(p.sessions||[]),s(p.currentSession||null),i(null)}catch{i("Failed to fetch sessions"),t([]),s(null)}finally{g(!1)}},[]);K.useEffect(()=>{o();const _=setInterval(o,fm);return()=>clearInterval(_)},[o]);const f=K.useCallback(()=>{g(!0),o()},[o]);return{sessions:e,currentSession:r,isLoading:d,error:x,refresh:f}}const pm=7683,wh=({isOpen:e,onClose:t})=>{const{sendInput:r}=vr(),[s,d]=K.useState(""),g=K.useRef(null);K.useEffect(()=>{e&&(d(""),setTimeout(()=>g.current?.focus(),100))},[e]);const x=async()=>{const o=s.trim();if(o){t();try{const f=`http://${location.hostname}:${pm}/api/tmux/create?name=${encodeURIComponent(o)}`;if(!(await fetch(f,{signal:AbortSignal.timeout(5e3)})).ok)throw new Error("API failed")}catch{r(`[ -n "$TMUX" ] && { tmux new-session -d -s ${o} 2>/dev/null; tmux switch-client -t ${o}; } || tmux new -A -s ${o}\r`)}}},i=o=>{o.key==="Enter"?(o.preventDefault(),x()):o.key==="Escape"&&t()};return e?H.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:o=>o.target===o.currentTarget&&t(),children:H.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[H.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Tmux Session"}),H.jsx("input",{ref:g,type:"text",value:s,onChange:o=>d(o.target.value),onKeyDown:i,placeholder:"Session name (e.g. work, claude)",className:"w-full px-3 py-2 bg-bg-tertiary border border-border-subtle rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple mb-4"}),H.jsxs("div",{className:"flex gap-2 justify-end",children:[H.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),H.jsx("button",{onClick:x,disabled:!s.trim(),className:"px-4 py-2 rounded-lg bg-accent-purple text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Create & Attach"})]})]})}):null},xh=7683,gm=1500,vm=({sessionName:e,onConfirm:t,onCancel:r})=>H.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:s=>s.target===s.currentTarget&&r(),children:H.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[H.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Kill Session?"}),H.jsxs("p",{className:"text-text-secondary text-sm mb-4",children:["Are you sure you want to kill session ",H.jsxs("span",{className:"text-accent-red font-mono",children:['"',e,'"']}),"? This action cannot be undone."]}),H.jsxs("div",{className:"flex gap-2 justify-end",children:[H.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),H.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-accent-red text-white",children:"Kill Session"})]})]})}),mm=()=>{const{sendInput:e}=vr(),{sessions:t,currentSession:r,refresh:s}=_m(),[d,g]=K.useState(!1),[x,i]=K.useState(!1),[o,f]=K.useState(null),_=K.useRef(null),h=K.useRef(null),p=K.useRef(!1);K.useEffect(()=>{const w=v=>{_.current&&!_.current.contains(v.target)&&g(!1)};if(d)return document.addEventListener("mousedown",w),document.addEventListener("touchstart",w,{passive:!0}),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("touchstart",w)}},[d]);const S=async w=>{g(!1);try{const v=`http://${location.hostname}:${xh}/api/tmux/switch?session=${encodeURIComponent(w)}`;if(!(await fetch(v,{signal:AbortSignal.timeout(5e3)})).ok)throw new Error("API failed");s()}catch{e(`[ -n "$TMUX" ] && tmux switch-client -t ${w} || tmux attach -t ${w}\r`)}},y=async w=>{try{const v=`http://${location.hostname}:${xh}/api/tmux/kill?name=${encodeURIComponent(w)}`;await fetch(v,{signal:AbortSignal.timeout(5e3)}),s()}catch{}f(null)},u=w=>{p.current=!1,h.current=window.setTimeout(()=>{p.current=!0,f(w),g(!1)},gm)},n=()=>{h.current&&(clearTimeout(h.current),h.current=null)},a=w=>{p.current||S(w)},l=()=>{g(!1),i(!0)};if(t.length===0)return H.jsxs(H.Fragment,{children:[H.jsx("button",{onTouchEnd:w=>{w.preventDefault(),l()},onClick:l,className:"flex items-center gap-1.5 px-2.5 py-1 text-accent-purple text-xs font-medium active:opacity-70",children:"+ New Session"}),H.jsx(wh,{isOpen:x,onClose:()=>i(!1)})]});const m=t.find(w=>w.name===r)?.name||t[0]?.name||"Select";return H.jsxs(H.Fragment,{children:[H.jsxs("div",{ref:_,className:"relative",children:[H.jsxs("button",{onClick:()=>g(!d),className:"flex items-center gap-1.5 px-2.5 py-1 bg-accent-purple rounded-md text-white text-xs font-medium whitespace-nowrap",children:[H.jsx("span",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),m,H.jsx("span",{className:"ml-1 text-[10px] opacity-70",children:d?"":""})]}),d&&H.jsxs("div",{className:"absolute top-full left-0 mt-1 min-w-[160px] bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[H.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:t.map(w=>H.jsxs("button",{onClick:()=>a(w.name),onTouchStart:()=>u(w.name),onTouchEnd:n,onMouseDown:()=>u(w.name),onMouseUp:n,onMouseLeave:n,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm transition-colors ${w.name===r?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[H.jsx("span",{className:`w-2 h-2 rounded-full ${w.attached?"bg-accent-green":"bg-text-muted opacity-50"}`}),H.jsx("span",{className:"flex-1 truncate",children:w.name}),H.jsxs("span",{className:"text-xs text-text-muted",children:[w.windows,"w"]})]},w.name))}),H.jsx("div",{className:"border-t border-border-subtle",children:H.jsxs("button",{onTouchEnd:w=>{w.preventDefault(),l()},onClick:l,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-accent-purple hover:bg-bg-tertiary active:bg-bg-tertiary",children:[H.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:"+"}),H.jsx("span",{children:"New Session"})]})})]})]}),H.jsx(wh,{isOpen:x,onClose:()=>i(!1)}),o&&H.jsx(vm,{sessionName:o,onConfirm:()=>y(o),onCancel:()=>f(null)})]})};function Cm(e,t=20){if(e.length<=t)return e;const r=e.split("/");return r.length<=2?"..."+e.slice(-t+3):"~/"+r.slice(-2).join("/")}const ym=()=>{const{connectionState:e}=vr(),{branch:t,path:r,isOffline:s,isLoading:d}=um(),g=e==="connected";return H.jsx("div",{className:"h-[40px] shrink-0 border-b border-border-subtle flex items-center px-3 bg-bg-secondary overflow-visible",children:H.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary font-mono w-full",children:[H.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${g?"bg-accent-green":"bg-accent-red"}`,title:g?"Connected":"Disconnected"}),H.jsx(mm,{}),H.jsx("span",{className:"text-border-subtle shrink-0",children:""}),d?H.jsx("span",{className:"text-text-muted",children:"..."}):s?H.jsx("span",{className:"text-text-muted",children:"(offline)"}):H.jsxs(H.Fragment,{children:[H.jsx("span",{className:"text-accent-purple shrink-0",children:t||"-"}),H.jsx("span",{className:"text-border-subtle shrink-0",children:""}),H.jsx("span",{className:"truncate",title:r,children:Cm(r)})]})]})})};function Sm({onlyFirst:e=!1}={}){const d="(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]";return new RegExp(d,e?void 0:"g")}const wm=Sm();function xm(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(wm,"")}const bm=[{pattern:/^Reading\s+(.+)$/i,type:"reading",fileGroup:1},{pattern:/^Wrote\s+(.+?)(?:\s+\(.*\))?$/i,type:"writing",fileGroup:1},{pattern:/^Created\s+(.+)$/i,type:"writing",fileGroup:1},{pattern:/^Edited\s+(.+)$/i,type:"writing",fileGroup:1},{pattern:/^Running\s+(.+)$/i,type:"executing",fileGroup:1},{pattern:/^Executing\s+(.+)$/i,type:"executing",fileGroup:1},{pattern:/^Thinking\.{3}$/i,type:"thinking"},{pattern:/^Analyzing\s+(.+)/i,type:"thinking",fileGroup:1},{pattern:/^\[read\]\s+(.+)$/i,type:"reading",fileGroup:1},{pattern:/^\[write\]\s+(.+)$/i,type:"writing",fileGroup:1},{pattern:/^\[exec\]\s+(.+)$/i,type:"executing",fileGroup:1},{pattern:/^\s+(.+)$/i,type:"complete",fileGroup:1},{pattern:/^\s+(.+)$/i,type:"error",fileGroup:1},{pattern:/^Error:\s+(.+)/i,type:"error",fileGroup:1}],Lm=10,$s=1e3,Em=typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:e=>setTimeout(e,16);function km(){const[e,t]=K.useState([]),{subscribeOutput:r}=vr(),s=K.useRef(""),d=K.useRef(0),g=K.useCallback((o,f,_)=>{const h={id:`activity-${++d.current}`,type:o,message:f,file:_,timestamp:new Date};t(p=>[h,...p].slice(0,Lm))},[]),x=K.useCallback(o=>{const f=o.trim();if(f)for(const{pattern:_,type:h,fileGroup:p}of bm){const S=f.match(_);if(S){const y=p?S[p]:void 0;g(h,y||f,y);return}}},[g]),i=K.useCallback(()=>{if(!s.current)return;const o=s.current.split(/\r?\n/);s.current=o.pop()||"",s.current.length>$s&&(s.current=s.current.slice(-$s)),o.slice(0,50).forEach(x)},[x]);return K.useEffect(()=>r(f=>{const _=typeof f=="string"?f:new TextDecoder().decode(f),h=xm(_);s.current+=h,s.current.length>$s&&(s.current=s.current.slice(-$s)),Em(()=>i())}),[r,i]),K.useEffect(()=>(typeof window<"u"&&(window.__addMockActivity=g),()=>{typeof window<"u"&&delete window.__addMockActivity}),[g]),{activities:e,addActivity:g}}const bh={reading:"",writing:"",thinking:"",executing:"",complete:"",error:""},Lh={reading:"text-text-secondary",writing:"text-accent-green",thinking:"text-accent-purple",executing:"text-accent-blue",complete:"text-accent-green",error:"text-accent-red"},Rm=()=>{const[e,t]=K.useState(!1),{activities:r}=km(),s=r.length>0,d=r[0];return!s&&!e?H.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:H.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2",children:[H.jsx("span",{children:""}),H.jsx("span",{children:"No recent activity"})]})}):e?H.jsxs("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle max-h-[200px] overflow-y-auto",children:[H.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2 cursor-pointer sticky top-0 bg-bg-secondary border-b border-border-subtle",onClick:()=>t(!1),children:[H.jsx("span",{children:""}),H.jsxs("span",{children:[r.length," activities"]})]}),H.jsx("div",{className:"divide-y divide-border-subtle",children:r.map((g,x)=>{const i=x===0&&(g.type==="reading"||g.type==="thinking"||g.type==="executing");return H.jsxs("div",{className:`px-3 py-2 text-xs flex items-center gap-2 ${i?"bg-glow-ai border-l-2 border-accent-purple":""}`,style:i?{boxShadow:"0 0 12px var(--glow-ai)"}:void 0,children:[H.jsx("span",{className:Lh[g.type],children:bh[g.type]}),H.jsx("span",{className:"text-text-primary truncate flex-1",children:g.message}),g.file&&g.file!==g.message&&H.jsx("span",{className:"text-text-muted truncate max-w-[120px]",title:g.file,children:g.file}),H.jsx("span",{className:"text-text-muted shrink-0",children:Mm(g.timestamp)})]},g.id)})}),!s&&H.jsx("div",{className:"px-3 py-4 text-xs text-text-muted text-center",children:"No recent activity"})]}):H.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:H.jsxs("div",{className:"px-3 py-2 text-xs flex items-center gap-2",children:[H.jsx("span",{className:"text-text-muted",children:""}),H.jsxs("span",{className:"text-text-secondary",children:[r.length," activities"]}),d&&H.jsxs(H.Fragment,{children:[H.jsx("span",{className:"text-border-subtle",children:""}),H.jsxs("span",{className:Lh[d.type],children:[bh[d.type]," ",d.message]})]})]})})};function Mm(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}const Dm=()=>{const{connectionState:e,reconnect:t,reconnectAttempt:r}=vr(),s=K.useCallback(i=>{i.key==="Enter"&&e==="disconnected"&&t()},[e,t]);if(K.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s]),e==="connected")return null;const d=e==="reconnecting",g=e==="connecting",x=e==="disconnected";return H.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center pointer-events-auto",children:H.jsxs("div",{className:"bg-bg-secondary rounded-xl p-6 max-w-xs w-full mx-4 text-center shadow-xl border border-border-subtle",children:[(g||d)&&H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"w-8 h-8 border-2 border-accent-purple border-t-transparent rounded-full animate-spin mx-auto mb-4"}),H.jsx("h3",{className:"text-lg font-semibold mb-2",children:d?"Reconnecting...":"Connecting..."}),d&&H.jsxs("p",{className:"text-sm text-text-secondary",children:["Attempt ",r," of 10"]})]}),x&&r>=10&&H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-red/20 flex items-center justify-center mx-auto mb-4",children:H.jsx("span",{className:"text-2xl",children:""})}),H.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Failed"}),H.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Could not connect after 10 attempts"}),H.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Try Again"})]}),x&&r<10&&r>0&&H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:H.jsx("span",{className:"text-2xl",children:""})}),H.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),H.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reconnecting automatically..."}),H.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect Now"}),H.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]}),x&&r===0&&H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:H.jsx("span",{className:"text-2xl",children:""})}),H.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),H.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Connection lost"}),H.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect"}),H.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]})]})})},Am=({children:e})=>{const{terminalRef:t}=vr();return H.jsxs("div",{className:"flex flex-col h-[100dvh] bg-bg-primary overflow-hidden text-text-primary font-sans selection:bg-accent-blue/30",children:[H.jsx(ym,{}),H.jsx(Rm,{}),H.jsx("div",{ref:t,className:"flex-1 min-h-0 relative bg-bg-primary overflow-hidden",children:e}),H.jsx(lm,{}),H.jsx(Dm,{})]})};var df={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(x,i,o){var f=this&&this.__decorate||function(l,c,m,w){var v,b=arguments.length,C=b<3?c:w===null?w=Object.getOwnPropertyDescriptor(c,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,w);else for(var L=l.length-1;L>=0;L--)(v=l[L])&&(C=(b<3?v(C):b>3?v(c,m,C):v(c,m))||C);return b>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,w){c(m,w,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=o(9042),p=o(9924),S=o(844),y=o(4725),u=o(2585),n=o(3656);let a=i.AccessibilityManager=class extends S.Disposable{constructor(l,c,m,w){super(),this._terminal=l,this._coreBrowserService=m,this._renderService=w,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let c=0;c<l;c++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),/\p{Control}/u.test(l)||this._charsToConsume.push(l)}_refreshRows(l,c){this._liveRegionDebouncer.refresh(l,c,this._terminal.rows)}_renderRows(l,c){const m=this._terminal.buffer,w=m.lines.length.toString();for(let v=l;v<=c;v++){const b=m.lines.get(m.ydisp+v),C=[],L=b?.translateToString(!0,void 0,void 0,C)||"",E=(m.ydisp+v+1).toString(),R=this._rowElements[v];R&&(L.length===0?(R.innerText="",this._rowColumns.set(R,[0,1])):(R.textContent=L,this._rowColumns.set(R,C)),R.setAttribute("aria-posinset",E),R.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,c){const m=l.target,w=this._rowElements[c===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==w)return;let v,b;if(c===0?(v=m,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(v=this._rowElements.shift(),b=m,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:l.anchorNode,offset:l.anchorOffset},m={node:l.focusNode,offset:l.focusOffset};if((c.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===m.node&&c.offset>m.offset)&&([c,m]=[m,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const w=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(w)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:w,offset:w.textContent?.length??0}),!this._rowContainer.contains(m.node))return;const v=({node:L,offset:E})=>{const R=L instanceof Text?L.parentNode:L;let k=parseInt(R?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;const D=this._rowColumns.get(R);if(!D)return console.warn("columns is null. Race condition?"),null;let T=E<D.length?D[E]:D.slice(-1)[0]+1;return T>=this._terminal.cols&&(++k,T=0),{row:k,column:T}},b=v(c),C=v(m);if(b&&C){if(b.row>C.row||b.row===C.row&&b.column>=C.column)throw new Error("invalid range");this._terminal.select(b.column,b.row,(C.row-b.row)*this._terminal.cols-b.column+C.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=f([_(1,u.IInstantiationService),_(2,y.ICoreBrowserService),_(3,y.IRenderService)],a)},3614:(x,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function f(p,S){return S?"\x1B[200~"+p+"\x1B[201~":p}function _(p,S,y,u){p=f(p=o(p),y.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(p,!0),S.value=""}function h(p,S,y){const u=y.getBoundingClientRect(),n=p.clientX-u.left-10,a=p.clientY-u.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${n}px`,S.style.top=`${a}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(p,S){p.clipboardData&&p.clipboardData.setData("text/plain",S.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,S,y,u){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),S,y,u)},i.paste=_,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(p,S,y,u,n){h(p,S,y),n&&u.rightClickSelect(p),S.value=u.selectionText,S.select()}},7239:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(_,h,p){this._css.set(_,h,p)}getCss(_,h){return this._css.get(_,h)}setColor(_,h,p){this._color.set(_,h,p)}getColor(_,h){return this._color.get(_,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,h){o.addEventListener(f,_,h);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,h))}}}},3551:function(x,i,o){var f=this&&this.__decorate||function(a,l,c,m){var w,v=arguments.length,b=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(w=a[C])&&(b=(v<3?w(b):v>3?w(l,c,b):w(l,c))||b);return v>3&&b&&Object.defineProperty(l,c,b),b},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=o(3656),p=o(8460),S=o(844),y=o(2585),u=o(4725);let n=i.Linkifier=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(a,l,c,m,w){super(),this._element=a,this._mouseService=l,this._renderService=c,this._bufferService=m,this._linkProviderService=w,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=a.composedPath();for(let m=0;m<c.length;m++){const w=c[m];if(w.classList.contains("xterm"))break;if(w.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,l){this._activeProviderReplies&&l||(this._activeProviderReplies?.forEach(m=>{m?.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let c=!1;for(const[m,w]of this._linkProviderService.linkProviders.entries())l?this._activeProviderReplies?.get(m)&&(c=this._checkLinkProviderResult(m,a,c)):w.provideLinks(a.y,v=>{if(this._isMouseOut)return;const b=v?.map(C=>({link:C}));this._activeProviderReplies?.set(m,b),c=this._checkLinkProviderResult(m,a,c),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,l){const c=new Set;for(let m=0;m<l.size;m++){const w=l.get(m);if(w)for(let v=0;v<w.length;v++){const b=w[v],C=b.link.range.start.y<a?0:b.link.range.start.x,L=b.link.range.end.y>a?this._bufferService.cols:b.link.range.end.x;for(let E=C;E<=L;E++){if(c.has(E)){w.splice(v--,1);break}c.add(E)}}}}_checkLinkProviderResult(a,l,c){if(!this._activeProviderReplies)return c;const m=this._activeProviderReplies.get(a);let w=!1;for(let v=0;v<a;v++)this._activeProviderReplies.has(v)&&!this._activeProviderReplies.get(v)||(w=!0);if(!w&&m){const v=m.find(b=>this._linkAtPosition(b.link,l));v&&(c=!0,this._handleNewLink(v))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let v=0;v<this._activeProviderReplies.size;v++){const b=this._activeProviderReplies.get(v)?.find(C=>this._linkAtPosition(C.link,l));if(b){c=!0,this._handleNewLink(b);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,l){this._currentLink&&this._lastMouseEvent&&(!a||!l||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(a.link,l)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:c=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:c=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const m=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=w&&(this._clearCurrentLink(m,w),this._lastMouseEvent)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(a,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(a,l){const c=a.range,m=this._bufferService.buffer.ydisp,w=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-m-1,c.end.x,c.end.y-m-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(w)}_linkLeave(a,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(a,l){const c=a.range.start.y*this._bufferService.cols+a.range.start.x,m=a.range.end.y*this._bufferService.cols+a.range.end.x,w=l.y*this._bufferService.cols+l.x;return c<=w&&w<=m}_positionFromMouseEvent(a,l,c){const m=c.getCoords(a,l,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,l,c,m,w){return{x1:a,y1:l,x2:c,y2:m,cols:this._bufferService.cols,fg:w}}};i.Linkifier=n=f([_(1,u.IMouseService),_(2,u.IRenderService),_(3,y.IBufferService),_(4,u.ILinkProviderService)],n)},9042:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(x,i,o){var f=this&&this.__decorate||function(u,n,a,l){var c,m=arguments.length,w=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,n,a,l);else for(var v=u.length-1;v>=0;v--)(c=u[v])&&(w=(m<3?c(w):m>3?c(n,a,w):c(n,a))||w);return m>3&&w&&Object.defineProperty(n,a,w),w},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=o(511),p=o(2585);let S=i.OscLinkProvider=class{constructor(u,n,a){this._bufferService=u,this._optionsService=n,this._oscLinkService=a}provideLinks(u,n){const a=this._bufferService.buffer.lines.get(u-1);if(!a)return void n(void 0);const l=[],c=this._optionsService.rawOptions.linkHandler,m=new h.CellData,w=a.getTrimmedLength();let v=-1,b=-1,C=!1;for(let L=0;L<w;L++)if(b!==-1||a.hasContent(L)){if(a.loadCell(L,m),m.hasExtendedAttrs()&&m.extended.urlId){if(b===-1){b=L,v=m.extended.urlId;continue}C=m.extended.urlId!==v}else b!==-1&&(C=!0);if(C||b!==-1&&L===w-1){const E=this._oscLinkService.getLinkData(v)?.uri;if(E){const R={start:{x:b+1,y:u},end:{x:L+(C||L!==w-1?0:1),y:u}};let k=!1;if(!c?.allowNonHttpProtocols)try{const D=new URL(E);["http:","https:"].includes(D.protocol)||(k=!0)}catch{k=!0}k||l.push({text:E,range:R,activate:(D,T)=>c?c.activate(D,T,R):y(0,T),hover:(D,T)=>c?.hover?.(D,T,R),leave:(D,T)=>c?.leave?.(D,T,R)})}C=!1,m.hasExtendedAttrs()&&m.extended.urlId?(b=L,v=m.extended.urlId):(b=-1,v=-1)}}n(l)}};function y(u,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=S=f([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],S)},6193:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),_=o(3656),h=o(3551),p=o(9042),S=o(3730),y=o(1680),u=o(3107),n=o(5744),a=o(2950),l=o(1296),c=o(428),m=o(4269),w=o(5114),v=o(8934),b=o(3230),C=o(9312),L=o(4725),E=o(6731),R=o(8055),k=o(8969),D=o(8460),T=o(844),N=o(6114),$=o(8437),F=o(2584),B=o(7399),M=o(5941),A=o(9074),O=o(2585),I=o(5435),z=o(4567),U=o(779);class Q extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(j={}){super(j),this.browser=N,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new T.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(U.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((P,W)=>this.refresh(P,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(P=>this._reportWindowsOptions(P))),this.register(this._inputHandler.onColor(P=>this._handleColorEvent(P))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(P=>this._afterResize(P.cols,P.rows))),this.register((0,T.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(j){if(this._themeService)for(const P of j){let W,G="";switch(P.index){case 256:W="foreground",G="10";break;case 257:W="background",G="11";break;case 258:W="cursor",G="12";break;default:W="ansi",G="4;"+P.index}switch(P.type){case 0:const Z=R.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[P.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${G};${(0,M.toRgbString)(Z)}${F.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(X=>X.ansi[P.index]=R.channels.toColor(...P.color));else{const X=W;this._themeService.modifyColors(ae=>ae[X]=R.channels.toColor(...P.color))}break;case 2:this._themeService.restoreColor(P.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(j){j?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(j){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const j=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get(j);if(!P)return;const W=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.css.cell.height,Z=P.getWidth(W),X=this._renderService.dimensions.css.cell.width*Z,ae=this.buffer.y*this._renderService.dimensions.css.cell.height,J=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=J+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=X+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",P=>{this.hasSelection()&&(0,f.copyHandler)(P,this._selectionService)}));const j=P=>(0,f.handlePasteEvent)(P,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",j)),this.register((0,_.addDisposableDomListener)(this.element,"paste",j)),N.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",P=>{P.button===2&&(0,f.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",P=>{(0,f.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),N.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",P=>{P.button===1&&(0,f.moveTextAreaUnderMouseCursor)(P,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",j=>this._keyUp(j),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",j=>this._keyDown(j),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",j=>this._keyPress(j),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",j=>this._compositionHelper.compositionupdate(j))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",j=>this._inputEvent(j),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(j){if(!j)throw new Error("Terminal requires a parent element.");if(j.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=j.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),j.appendChild(this.element);const P=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),P.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",W=>this.updateCursorStyle(W))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),P.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),N.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,j.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",W=>this._handleTextAreaFocus(W))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(W=>this._onRender.fire(W))),this.onResize(W=>this._renderService.resize(W.cols,W.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(P);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(W=>this._renderService.handleSelectionChanged(W.start,W.end,W.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(W=>{this.textarea.value=W,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(W=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",W=>this._selectionService.handleMouseDown(W))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",W=>this._handleScreenReaderModeOptionChange(W))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",W=>{!this._overviewRulerRenderer&&W&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const j=this,P=this.element;function W(X){const ae=j._mouseService.getMouseReportCoords(X,j.screenElement);if(!ae)return!1;let J,ue;switch(X.overrideType||X.type){case"mousemove":ue=32,X.buttons===void 0?(J=3,X.button!==void 0&&(J=X.button<3?X.button:3)):J=1&X.buttons?0:4&X.buttons?1:2&X.buttons?2:3;break;case"mouseup":ue=0,J=X.button<3?X.button:3;break;case"mousedown":ue=1,J=X.button<3?X.button:3;break;case"wheel":if(j._customWheelEventHandler&&j._customWheelEventHandler(X)===!1||j.viewport.getLinesScrolled(X)===0)return!1;ue=X.deltaY<0?0:1,J=4;break;default:return!1}return!(ue===void 0||J===void 0||J>4)&&j.coreMouseService.triggerMouseEvent({col:ae.col,row:ae.row,x:ae.x,y:ae.y,button:J,action:ue,ctrl:X.ctrlKey,alt:X.altKey,shift:X.shiftKey})}const G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Z={mouseup:X=>(W(X),X.buttons||(this._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.removeEventListener("mousemove",G.mousedrag)),this.cancel(X)),wheel:X=>(W(X),this.cancel(X,!0)),mousedrag:X=>{X.buttons&&W(X)},mousemove:X=>{X.buttons||W(X)}};this.register(this.coreMouseService.onProtocolChange(X=>{X?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(X)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&X?G.mousemove||(P.addEventListener("mousemove",Z.mousemove),G.mousemove=Z.mousemove):(P.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&X?G.wheel||(P.addEventListener("wheel",Z.wheel,{passive:!1}),G.wheel=Z.wheel):(P.removeEventListener("wheel",G.wheel),G.wheel=null),2&X?G.mouseup||(G.mouseup=Z.mouseup):(this._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&X?G.mousedrag||(G.mousedrag=Z.mousedrag):(this._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(P,"mousedown",X=>{if(X.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(X))return W(X),G.mouseup&&this._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.addEventListener("mousemove",G.mousedrag),this.cancel(X)})),this.register((0,_.addDisposableDomListener)(P,"wheel",X=>{if(!G.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(X)===!1)return!1;if(!this.buffer.hasScrollback){const ae=this.viewport.getLinesScrolled(X);if(ae===0)return;const J=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(X.deltaY<0?"A":"B");let ue="";for(let me=0;me<Math.abs(ae);me++)ue+=J;return this.coreService.triggerDataEvent(ue,!0),this.cancel(X,!0)}return this.viewport.handleWheel(X)?this.cancel(X):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(P,"touchstart",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(X),this.cancel(X)},{passive:!0})),this.register((0,_.addDisposableDomListener)(P,"touchmove",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(X)?void 0:this.cancel(X)},{passive:!1}))}refresh(j,P){this._renderService?.refreshRows(j,P)}updateCursorStyle(j){this._selectionService?.shouldColumnSelect(j)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(j,P,W=0){W===1?(super.scrollLines(j,P,W),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(j)}paste(j){(0,f.paste)(j,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(j){this._customKeyEventHandler=j}attachCustomWheelEventHandler(j){this._customWheelEventHandler=j}registerLinkProvider(j){return this._linkProviderService.registerLinkProvider(j)}registerCharacterJoiner(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const P=this._characterJoinerService.register(j);return this.refresh(0,this.rows-1),P}deregisterCharacterJoiner(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(j)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(j){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+j)}registerDecoration(j){return this._decorationService.registerDecoration(j)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(j,P,W){this._selectionService.setSelection(j,P,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(j,P){this._selectionService?.selectLines(j,P)}_keyDown(j){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;const P=this.browser.isMac&&this.options.macOptionIsMeta&&j.altKey;if(!P&&!this._compositionHelper.keydown(j))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;P||j.key!=="Dead"&&j.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const W=(0,B.evaluateKeyboardEvent)(j,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(j),W.type===3||W.type===2){const G=this.rows-1;return this.scrollLines(W.type===2?-G:G),this.cancel(j,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,j)||(W.cancel&&this.cancel(j,!0),!W.key||!!(j.key&&!j.ctrlKey&&!j.altKey&&!j.metaKey&&j.key.length===1&&j.key.charCodeAt(0)>=65&&j.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==F.C0.ETX&&W.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||j.altKey||j.ctrlKey?this.cancel(j,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(j,P){const W=j.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||j.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||j.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?W:W&&(!P.keyCode||P.keyCode>47)}_keyUp(j){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1||(function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18}(j)||this.focus(),this.updateCursorStyle(j),this._keyPressHandled=!1)}_keyPress(j){let P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(this.cancel(j),j.charCode)P=j.charCode;else if(j.which===null||j.which===void 0)P=j.keyCode;else{if(j.which===0||j.charCode===0)return!1;P=j.which}return!(!P||(j.altKey||j.ctrlKey||j.metaKey)&&!this._isThirdLevelShift(this.browser,j)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(j){if(j.data&&j.inputType==="insertText"&&(!j.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const P=j.data;return this.coreService.triggerDataEvent(P,!0),this.cancel(j),!0}return!1}resize(j,P){j!==this.cols||P!==this.rows?super.resize(j,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(j,P){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let j=1;j<this.rows;j++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const j=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(j){if(this._renderService)switch(j){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const P=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${W};${P}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const G=this._renderService.dimensions.css.cell.width.toFixed(0),Z=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${Z};${G}t`)}}cancel(j,P){if(this.options.cancelEvents||P)return j.preventDefault(),j.stopPropagation(),!1}}i.Terminal=Q},9924:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=h-this._lastRefreshMs,S=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(x,i,o){var f=this&&this.__decorate||function(a,l,c,m){var w,v=arguments.length,b=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(w=a[C])&&(b=(v<3?w(b):v>3?w(l,c,b):w(l,c))||b);return v>3&&b&&Object.defineProperty(l,c,b),b},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=o(3656),p=o(4725),S=o(8460),y=o(844),u=o(2585);let n=i.Viewport=class extends y.Disposable{constructor(a,l,c,m,w,v,b,C){super(),this._viewportElement=a,this._scrollArea=l,this._bufferService=c,this._optionsService=m,this._charSizeService=w,this._renderService=v,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,l){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&c<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const l=this._getPixelsScrolled(a);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(a,l){let c,m="";const w=[],v=l??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let C=a;C<v;C++){const L=b.get(C);if(!L)continue;const E=b.get(C+1)?.isWrapped;if(m+=L.translateToString(!E),!E||C===b.length-1){const R=document.createElement("div");R.textContent=m,w.push(R),m.length>0&&(c=R),m=""}}return{bufferElements:w,cursorElement:c}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(a,l){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&l.altKey||c==="ctrl"&&l.ctrlKey||c==="shift"&&l.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const l=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}};i.Viewport=n=f([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,p.ICharSizeService),_(5,p.IRenderService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],n)},3107:function(x,i,o){var f=this&&this.__decorate||function(u,n,a,l){var c,m=arguments.length,w=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,n,a,l);else for(var v=u.length-1;v>=0;v--)(c=u[v])&&(w=(m<3?c(w):m>3?c(n,a,w):c(n,a))||w);return m>3&&w&&Object.defineProperty(n,a,w),w},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=o(4725),p=o(844),S=o(2585);let y=i.BufferDecorationRenderer=class extends p.Disposable{constructor(u,n,a,l,c){super(),this._screenElement=u,this._bufferService=n,this._coreBrowserService=a,this._decorationService=l,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",u?.options?.layer==="top"),n.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=u.options.x??0;return a&&a>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(u,n),n}_refreshStyle(u){const n=u.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let a=this._decorationElements.get(u);a||(a=this._createElement(u),u.element=a,this._decorationElements.set(u,a),this._container.appendChild(a),u.onDispose(()=>{this._decorationElements.delete(u),a.remove()})),a.style.top=n*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(a)}}_refreshXPosition(u,n=u.element){if(!n)return;const a=u.options.x??0;(u.options.anchor||"left")==="right"?n.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){this._decorationElements.get(u)?.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=y=f([_(1,S.IBufferService),_(2,h.ICoreBrowserService),_(3,S.IDecorationService),_(4,h.IRenderService)],y)},5871:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,_){return f>=o.startBufferLine-this._linePadding[_||"full"]&&f<=o.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(x,i,o){var f=this&&this.__decorate||function(c,m,w,v){var b,C=arguments.length,L=C<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,w):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,m,w,v);else for(var E=c.length-1;E>=0;E--)(b=c[E])&&(L=(C<3?b(L):C>3?b(m,w,L):b(m,w))||L);return C>3&&L&&Object.defineProperty(m,w,L),L},_=this&&this.__param||function(c,m){return function(w,v){m(w,v,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=o(5871),p=o(4725),S=o(844),y=o(2585),u={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let l=i.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,m,w,v,b,C,L){super(),this._viewportElement=c,this._screenElement=m,this._bufferService=w,this._decorationService=v,this._renderService=b,this._optionsService=C,this._coreBrowserService=L,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=c,n.center=m,n.right=c,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=n.left,a.right=n.left+n.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);u.left=m,u.center=m,u.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const m of c)m.position!=="full"&&this._renderColorZone(m);for(const m of c)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(a[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-u[c.position||"full"]/2),n[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[c.position||"full"]))}_queueRefresh(c,m){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=l=f([_(2,y.IBufferService),_(3,y.IDecorationService),_(4,p.IRenderService),_(5,y.IOptionsService),_(6,p.ICoreBrowserService)],l)},2950:function(x,i,o){var f=this&&this.__decorate||function(u,n,a,l){var c,m=arguments.length,w=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,n,a,l);else for(var v=u.length-1;v>=0;v--)(c=u[v])&&(w=(m<3?c(w):m>3?c(n,a,w):c(n,a))||w);return m>3&&w&&Object.defineProperty(n,a,w),w},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=o(4725),p=o(2585),S=o(2584);let y=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,n,a,l,c,m){this._textarea=u,this._compositionView=n,this._bufferService=a,this._optionsService=l,this._coreService=c,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,a=n.replace(u,"");this._dataAlreadySent=a,n.length>u.length?this._coreService.triggerDataEvent(a,!0):n.length<u.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):n.length===u.length&&n!==u&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=y=f([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,h.IRenderService)],y)},9806:(x,i)=>{function o(f,_,h){const p=h.getBoundingClientRect(),S=f.getComputedStyle(h),y=parseInt(S.getPropertyValue("padding-left")),u=parseInt(S.getPropertyValue("padding-top"));return[_.clientX-p.left-y,_.clientY-p.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,_,h,p,S,y,u,n,a){if(!y)return;const l=o(f,_,h);return l?(l[0]=Math.ceil((l[0]+(a?u/2:0))/u),l[1]=Math.ceil(l[1]/n),l[0]=Math.min(Math.max(l[0],1),p+(a?1:0)),l[1]=Math.min(Math.max(l[1],1),S),l):void 0}},9504:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function _(n,a,l,c){const m=n-h(n,l),w=a-h(a,l),v=Math.abs(m-w)-function(b,C,L){let E=0;const R=b-h(b,L),k=C-h(C,L);for(let D=0;D<Math.abs(R-k);D++){const T=p(b,C)==="A"?-1:1;L.buffer.lines.get(R+T*D)?.isWrapped&&E++}return E}(n,a,l);return u(v,y(p(n,a),c))}function h(n,a){let l=0,c=a.buffer.lines.get(n),m=c?.isWrapped;for(;m&&n>=0&&n<a.rows;)l++,c=a.buffer.lines.get(--n),m=c?.isWrapped;return l}function p(n,a){return n>a?"A":"B"}function S(n,a,l,c,m,w){let v=n,b=a,C="";for(;v!==l||b!==c;)v+=m?1:-1,m&&v>w.cols-1?(C+=w.buffer.translateBufferLineToString(b,!1,n,v),v=0,n=0,b++):!m&&v<0&&(C+=w.buffer.translateBufferLineToString(b,!1,0,n+1),v=w.cols-1,n=v,b--);return C+w.buffer.translateBufferLineToString(b,!1,n,v)}function y(n,a){const l=a?"O":"[";return f.C0.ESC+l+n}function u(n,a){n=Math.floor(n);let l="";for(let c=0;c<n;c++)l+=a;return l}i.moveToCellSequence=function(n,a,l,c){const m=l.buffer.x,w=l.buffer.y;if(!l.buffer.hasScrollback)return function(C,L,E,R,k,D){return _(L,R,k,D).length===0?"":u(S(C,L,C,L-h(L,k),!1,k).length,y("D",D))}(m,w,0,a,l,c)+_(w,a,l,c)+function(C,L,E,R,k,D){let T;T=_(L,R,k,D).length>0?R-h(R,k):L;const N=R,$=function(F,B,M,A,O,I){let z;return z=_(M,A,O,I).length>0?A-h(A,O):B,F<M&&z<=A||F>=M&&z<A?"C":"D"}(C,L,E,R,k,D);return u(S(C,T,E,N,$==="C",k).length,y($,D))}(m,w,n,a,l,c);let v;if(w===a)return v=m>n?"D":"C",u(Math.abs(m-n),y(v,c));v=w>a?"D":"C";const b=Math.abs(w-a);return u(function(C,L){return L.cols-C}(w>a?n:m,l)+(b-1)*l.cols+1+((w>a?m:n)-1),y(v,c))}},1296:function(x,i,o){var f=this&&this.__decorate||function(D,T,N,$){var F,B=arguments.length,M=B<3?T:$===null?$=Object.getOwnPropertyDescriptor(T,N):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,T,N,$);else for(var A=D.length-1;A>=0;A--)(F=D[A])&&(M=(B<3?F(M):B>3?F(T,N,M):F(T,N))||M);return B>3&&M&&Object.defineProperty(T,N,M),M},_=this&&this.__param||function(D,T){return function(N,$){T(N,$,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=o(3787),p=o(2550),S=o(2223),y=o(6171),u=o(6052),n=o(4725),a=o(8055),l=o(8460),c=o(844),m=o(2585),w="xterm-dom-renderer-owner-",v="xterm-rows",b="xterm-fg-",C="xterm-bg-",L="xterm-focus",E="xterm-selection";let R=1,k=i.DomRenderer=class extends c.Disposable{constructor(D,T,N,$,F,B,M,A,O,I,z,U,Q){super(),this._terminal=D,this._document=T,this._element=N,this._screenElement=$,this._viewportElement=F,this._helperContainer=B,this._linkifier2=M,this._charSizeService=O,this._optionsService=I,this._bufferService=z,this._coreBrowserService=U,this._themeService=Q,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Y=>this._injectCss(Y))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(w+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Y=>this._handleLinkHover(Y))),this.register(this._linkifier2.onHideLinkUnderline(Y=>this._handleLinkLeave(Y))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(w+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${v} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${v} .xterm-dim { color: ${a.color.multiplyOpacity(D.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const N=`blink_underline_${this._terminalClass}`,$=`blink_bar_${this._terminalClass}`,F=`blink_block_${this._terminalClass}`;T+=`@keyframes ${N} { 50% {  border-bottom-style: hidden; }}`,T+=`@keyframes ${$} { 50% {  box-shadow: none; }}`,T+=`@keyframes ${F} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,T+=`${this._terminalSelector} .${v}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${v}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${v}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${F} 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,M]of D.ansi.entries())T+=`${this._terminalSelector} .${b}${B} { color: ${M.css}; }${this._terminalSelector} .${b}${B}.xterm-dim { color: ${a.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${C}${B} { background-color: ${M.css}; }`;T+=`${this._terminalSelector} .${b}${S.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(D.background).css}; }${this._terminalSelector} .${b}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${C}${S.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,T){for(let N=this._rowElements.length;N<=T;N++){const $=this._document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,T){this._refreshRowElements(D,T),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,T,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,T,N),this.renderRows(0,this._bufferService.rows-1),!D||!T)return;this._selectionRenderModel.update(this._terminal,D,T,N);const $=this._selectionRenderModel.viewportStartRow,F=this._selectionRenderModel.viewportEndRow,B=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(B>=this._bufferService.rows||M<0)return;const A=this._document.createDocumentFragment();if(N){const O=D[0]>T[0];A.appendChild(this._createSelectionElement(B,O?T[0]:D[0],O?D[0]:T[0],M-B+1))}else{const O=$===B?D[0]:0,I=B===F?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(B,O,I));const z=M-B-1;if(A.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,z)),B!==M){const U=F===M?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(M,0,U))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,T,N,$=1){const F=this._document.createElement("div"),B=T*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(N-T);return B+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-B),F.style.height=$*this.dimensions.css.cell.height+"px",F.style.top=D*this.dimensions.css.cell.height+"px",F.style.left=`${B}px`,F.style.width=`${M}px`,F}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,T){const N=this._bufferService.buffer,$=N.ybase+N.y,F=Math.min(N.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let O=D;O<=T;O++){const I=O+N.ydisp,z=this._rowElements[O],U=N.lines.get(I);if(!z||!U)break;z.replaceChildren(...this._rowFactory.createRow(U,I,I===$,M,A,F,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${w}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,T,N,$,F,B){N<0&&(D=0),$<0&&(T=0);const M=this._bufferService.rows-1;N=Math.max(Math.min(N,M),0),$=Math.max(Math.min($,M),0),F=Math.min(F,this._bufferService.cols);const A=this._bufferService.buffer,O=A.ybase+A.y,I=Math.min(A.x,F-1),z=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=N;Y<=$;++Y){const j=Y+A.ydisp,P=this._rowElements[Y],W=A.lines.get(j);if(!P||!W)break;P.replaceChildren(...this._rowFactory.createRow(W,j,j===O,U,Q,I,z,this.dimensions.css.cell.width,this._widthCache,B?Y===N?D:0:-1,B?(Y===$?T:F)-1:-1))}}};i.DomRenderer=k=f([_(7,m.IInstantiationService),_(8,n.ICharSizeService),_(9,m.IOptionsService),_(10,m.IBufferService),_(11,n.ICoreBrowserService),_(12,n.IThemeService)],k)},3787:function(x,i,o){var f=this&&this.__decorate||function(v,b,C,L){var E,R=arguments.length,k=R<3?b:L===null?L=Object.getOwnPropertyDescriptor(b,C):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(v,b,C,L);else for(var D=v.length-1;D>=0;D--)(E=v[D])&&(k=(R<3?E(k):R>3?E(b,C,k):E(b,C))||k);return R>3&&k&&Object.defineProperty(b,C,k),k},_=this&&this.__param||function(v,b){return function(C,L){b(C,L,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=o(2223),p=o(643),S=o(511),y=o(2585),u=o(8055),n=o(4725),a=o(4269),l=o(6171),c=o(3734);let m=i.DomRendererRowFactory=class{constructor(v,b,C,L,E,R,k){this._document=v,this._characterJoinerService=b,this._optionsService=C,this._coreBrowserService=L,this._coreService=E,this._decorationService=R,this._themeService=k,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(v,b,C){this._selectionStart=v,this._selectionEnd=b,this._columnSelectMode=C}createRow(v,b,C,L,E,R,k,D,T,N,$){const F=[],B=this._characterJoinerService.getJoinedCharacters(b),M=this._themeService.colors;let A,O=v.getNoBgTrimmedLength();C&&O<R+1&&(O=R+1);let I=0,z="",U=0,Q=0,Y=0,j=!1,P=0,W=!1,G=0;const Z=[],X=N!==-1&&$!==-1;for(let ae=0;ae<O;ae++){v.loadCell(ae,this._workCell);let J=this._workCell.getWidth();if(J===0)continue;let ue=!1,me=ae,ne=this._workCell;if(B.length>0&&ae===B[0][0]){ue=!0;const oe=B.shift();ne=new a.JoinedCellData(this._workCell,v.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),me=oe[1]-1,J=ne.getWidth()}const Ge=this._isCellInSelection(ae,b),Tt=C&&ae===R,ie=X&&ae>=N&&ae<=$;let ee=!1;this._decorationService.forEachDecorationAtCell(ae,b,void 0,oe=>{ee=!0});let te=ne.getChars()||p.WHITESPACE_CELL_CHAR;if(te===" "&&(ne.isUnderline()||ne.isOverline())&&(te=""),G=J*D-T.get(te,ne.isBold(),ne.isItalic()),A){if(I&&(Ge&&W||!Ge&&!W&&ne.bg===U)&&(Ge&&W&&M.selectionForeground||ne.fg===Q)&&ne.extended.ext===Y&&ie===j&&G===P&&!Tt&&!ue&&!ee){ne.isInvisible()?z+=p.WHITESPACE_CELL_CHAR:z+=te,I++;continue}I&&(A.textContent=z),A=this._document.createElement("span"),I=0,z=""}else A=this._document.createElement("span");if(U=ne.bg,Q=ne.fg,Y=ne.extended.ext,j=ie,P=G,W=Ge,ue&&R>=ae&&R<=me&&(R=ae),!this._coreService.isCursorHidden&&Tt&&this._coreService.isCursorInitialized){if(Z.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&Z.push("xterm-cursor-blink"),Z.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":Z.push("xterm-cursor-outline");break;case"block":Z.push("xterm-cursor-block");break;case"bar":Z.push("xterm-cursor-bar");break;case"underline":Z.push("xterm-cursor-underline")}}if(ne.isBold()&&Z.push("xterm-bold"),ne.isItalic()&&Z.push("xterm-italic"),ne.isDim()&&Z.push("xterm-dim"),z=ne.isInvisible()?p.WHITESPACE_CELL_CHAR:ne.getChars()||p.WHITESPACE_CELL_CHAR,ne.isUnderline()&&(Z.push(`xterm-underline-${ne.extended.underlineStyle}`),z===" "&&(z=""),!ne.isUnderlineColorDefault()))if(ne.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(ne.getUnderlineColor()).join(",")})`;else{let oe=ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ne.isBold()&&oe<8&&(oe+=8),A.style.textDecorationColor=M.ansi[oe].css}ne.isOverline()&&(Z.push("xterm-overline"),z===" "&&(z="")),ne.isStrikethrough()&&Z.push("xterm-strikethrough"),ie&&(A.style.textDecoration="underline");let V=ne.getFgColor(),se=ne.getFgColorMode(),de=ne.getBgColor(),ce=ne.getBgColorMode();const qe=!!ne.isInverse();if(qe){const oe=V;V=de,de=oe;const Bt=se;se=ce,ce=Bt}let Re,Me,_e,le=!1;switch(this._decorationService.forEachDecorationAtCell(ae,b,void 0,oe=>{oe.options.layer!=="top"&&le||(oe.backgroundColorRGB&&(ce=50331648,de=oe.backgroundColorRGB.rgba>>8&16777215,Re=oe.backgroundColorRGB),oe.foregroundColorRGB&&(se=50331648,V=oe.foregroundColorRGB.rgba>>8&16777215,Me=oe.foregroundColorRGB),le=oe.options.layer==="top")}),!le&&Ge&&(Re=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,de=Re.rgba>>8&16777215,ce=50331648,le=!0,M.selectionForeground&&(se=50331648,V=M.selectionForeground.rgba>>8&16777215,Me=M.selectionForeground)),le&&Z.push("xterm-decoration-top"),ce){case 16777216:case 33554432:_e=M.ansi[de],Z.push(`xterm-bg-${de}`);break;case 50331648:_e=u.channels.toColor(de>>16,de>>8&255,255&de),this._addStyle(A,`background-color:#${w((de>>>0).toString(16),"0",6)}`);break;default:qe?(_e=M.foreground,Z.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):_e=M.background}switch(Re||ne.isDim()&&(Re=u.color.multiplyOpacity(_e,.5)),se){case 16777216:case 33554432:ne.isBold()&&V<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(V+=8),this._applyMinimumContrast(A,_e,M.ansi[V],ne,Re,void 0)||Z.push(`xterm-fg-${V}`);break;case 50331648:const oe=u.channels.toColor(V>>16&255,V>>8&255,255&V);this._applyMinimumContrast(A,_e,oe,ne,Re,Me)||this._addStyle(A,`color:#${w(V.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,_e,M.foreground,ne,Re,Me)||qe&&Z.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Z.length&&(A.className=Z.join(" "),Z.length=0),Tt||ue||ee?A.textContent=z:I++,G!==this.defaultSpacing&&(A.style.letterSpacing=`${G}px`),F.push(A),ae=me}return A&&I&&(A.textContent=z),F}_applyMinimumContrast(v,b,C,L,E,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const k=this._getContrastCache(L);let D;if(E||R||(D=k.getColor(b.rgba,C.rgba)),D===void 0){const T=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);D=u.color.ensureContrastRatio(E||b,R||C,T),k.setColor((E||b).rgba,(R||C).rgba,D??null)}return!!D&&(this._addStyle(v,`color:${D.css}`),!0)}_getContrastCache(v){return v.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(v,b){v.setAttribute("style",`${v.getAttribute("style")||""}${b};`)}_isCellInSelection(v,b){const C=this._selectionStart,L=this._selectionEnd;return!(!C||!L)&&(this._columnSelectMode?C[0]<=L[0]?v>=C[0]&&b>=C[1]&&v<L[0]&&b<=L[1]:v<C[0]&&b>=C[1]&&v>=L[0]&&b<=L[1]:b>C[1]&&b<L[1]||C[1]===L[1]&&b===C[1]&&v>=C[0]&&v<L[0]||C[1]<L[1]&&b===L[1]&&v<L[0]||C[1]<L[1]&&b===C[1]&&v>=C[0])}};function w(v,b,C){for(;v.length<C;)v=b+v;return v}i.DomRendererRowFactory=m=f([_(1,n.ICharacterJoinerService),_(2,y.IOptionsService),_(3,n.ICoreBrowserService),_(4,y.ICoreService),_(5,y.IDecorationService),_(6,n.IThemeService)],m)},2550:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=o.createElement("span");_.classList.add("xterm-char-measure-element");const h=o.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";const S=o.createElement("span");S.classList.add("xterm-char-measure-element"),S.style.fontWeight="bold",S.style.fontStyle="italic",this._measureElements=[_,h,p,S],this._container.appendChild(_),this._container.appendChild(h),this._container.appendChild(p),this._container.appendChild(S),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,_,h){o===this._font&&f===this._fontSize&&_===this._weight&&h===this._weightBold||(this._font=o,this._fontSize=f,this._weight=_,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(o,f,_){let h=0;if(!f&&!_&&o.length===1&&(h=o.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const y=this._measure(o,0);return y>0&&(this._flat[h]=y),y}let p=o;f&&(p+="B"),_&&(p+="I");let S=this._holey.get(p);if(S===void 0){let y=0;f&&(y|=1),_&&(y|=2),S=this._measure(o,y),S>0&&this._holey.set(p,S)}return S}_measure(o,f){const _=this._measureElements[f];return _.textContent=o.repeat(32),_.offsetWidth/32}}},2223:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(x,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,S){return h===1&&p>Math.ceil(1.5*S)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(y){return 57344<=y&&y<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},6052:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,S=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const y=_.buffers.active.ydisp,u=h[1]-y,n=p[1]-y,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(x,i,o){var f=this&&this.__decorate||function(l,c,m,w){var v,b=arguments.length,C=b<3?c:w===null?w=Object.getOwnPropertyDescriptor(c,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,w);else for(var L=l.length-1;L>=0;L--)(v=l[L])&&(C=(b<3?v(C):b>3?v(c,m,C):v(c,m))||C);return b>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,w){c(m,w,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=o(2585),p=o(8460),S=o(844);let y=i.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,c,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new n(l,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=y=f([_(2,h.IOptionsService)],y);class u extends S.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,m){c!==void 0&&c>0&&m!==void 0&&m>0&&(this._result.width=c,this._result.height=m)}}class n extends u{constructor(c,m,w){super(),this._document=c,this._parentElement=m,this._optionsService=w,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends u{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(x,i,o){var f=this&&this.__decorate||function(a,l,c,m){var w,v=arguments.length,b=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(w=a[C])&&(b=(v<3?w(b):v>3?w(l,c,b):w(l,c))||b);return v>3&&b&&Object.defineProperty(l,c,b),b},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=o(3734),p=o(643),S=o(511),y=o(2585);class u extends h.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class ff{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],w=c.translateToString(!0);let v=0,b=0,C=0,L=c.getFg(0),E=c.getBg(0);for(let R=0;R<c.getTrimmedLength();R++)if(c.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==E){if(R-v>1){const k=this._getJoinedRanges(w,C,b,c,v);for(let D=0;D<k.length;D++)m.push(k[D])}v=R,C=b,L=this._workCell.fg,E=this._workCell.bg}b+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const R=this._getJoinedRanges(w,C,b,c,v);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(l,c,m,w,v){const b=l.substring(c,m);let C=[];try{C=this._characterJoiners[0].handler(b)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const E=this._characterJoiners[L].handler(b);for(let R=0;R<E.length;R++)ff._mergeRanges(C,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(C,w,v),C}_stringRangesToCellRanges(l,c,m){let w=0,v=!1,b=0,C=l[w];if(C){for(let L=m;L<this._bufferService.cols;L++){const E=c.getWidth(L),R=c.getString(L).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&C[0]<=b&&(C[0]=L,v=!0),C[1]<=b){if(C[1]=L,C=l[++w],!C)break;C[0]<=b?(C[0]=L,v=!0):v=!1}b+=R}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let w=0;w<l.length;w++){const v=l[w];if(m){if(c[1]<=v[0])return l[w-1][1]=c[1],l;if(c[1]<=v[1])return l[w-1][1]=Math.max(c[1],v[1]),l.splice(w,1),l;l.splice(w,1),w--}else{if(c[1]<=v[0])return l.splice(w,0,c),l;if(c[1]<=v[1])return v[0]=Math.min(c[0],v[0]),l;c[0]<v[1]&&(v[0]=Math.min(c[0],v[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([_(0,y.IBufferService)],n)},5114:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),_=o(8460),h=o(3656);class p extends f.Disposable{constructor(u,n,a){super(),this._textarea=u,this._window=n,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new S(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class S extends f.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class _ extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{const S=this.linkProviders.indexOf(p);S!==-1&&this.linkProviders.splice(S,1)}}}}i.LinkProviderService=_},8934:function(x,i,o){var f=this&&this.__decorate||function(y,u,n,a){var l,c=arguments.length,m=c<3?u:a===null?a=Object.getOwnPropertyDescriptor(u,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(y,u,n,a);else for(var w=y.length-1;w>=0;w--)(l=y[w])&&(m=(c<3?l(m):c>3?l(u,n,m):l(u,n))||m);return c>3&&m&&Object.defineProperty(u,n,m),m},_=this&&this.__param||function(y,u){return function(n,a){u(n,a,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=o(4725),p=o(9806);let S=i.MouseService=class{constructor(y,u){this._renderService=y,this._charSizeService=u}getCoords(y,u,n,a,l){return(0,p.getCoords)(window,y,u,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(y,u){const n=(0,p.getCoordsRelativeToElement)(window,y,u);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=S=f([_(0,h.IRenderService),_(1,h.ICharSizeService)],S)},3230:function(x,i,o){var f=this&&this.__decorate||function(l,c,m,w){var v,b=arguments.length,C=b<3?c:w===null?w=Object.getOwnPropertyDescriptor(c,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,w);else for(var L=l.length-1;L>=0;L--)(v=l[L])&&(C=(b<3?v(C):b>3?v(c,m,C):v(c,m))||C);return b>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,w){c(m,w,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=o(6193),p=o(4725),S=o(8460),y=o(844),u=o(7226),n=o(2585);let a=i.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,c,m,w,v,b,C,L){super(),this._rowCount=l,this._charSizeService=w,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((E,R)=>this._renderRows(E,R),C),this.register(this._renderDebouncer),this.register(C.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register(L.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(C.window,c),this.register(C.onWindowChange(E=>this._registerIntersectionObserver(E,c)))}_registerIntersectionObserver(l,c){if("IntersectionObserver"in l){const m=new l.IntersectionObserver(w=>this._handleIntersectionChange(w[w.length-1]),{threshold:0});m.observe(c),this._observerDisposable.value=(0,y.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,c,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,c,this._rowCount))}_renderRows(l,c){this._renderer.value&&(l=Math.min(l,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(l,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:c}),this._onRender.fire({start:l,end:c}),this._isNextRenderRedrawOnly=!0)}resize(l,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(c=>this.refreshRows(c.start,c.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(l,c)):this._renderer.value.handleResize(l,c),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(l,c,m){this._selectionState.start=l,this._selectionState.end=c,this._selectionState.columnSelectMode=m,this._renderer.value?.handleSelectionChanged(l,c,m)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=a=f([_(2,n.IOptionsService),_(3,p.ICharSizeService),_(4,n.IDecorationService),_(5,n.IBufferService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],a)},9312:function(x,i,o){var f=this&&this.__decorate||function(C,L,E,R){var k,D=arguments.length,T=D<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,L,E,R);else for(var N=C.length-1;N>=0;N--)(k=C[N])&&(T=(D<3?k(T):D>3?k(L,E,T):k(L,E))||T);return D>3&&T&&Object.defineProperty(L,E,T),T},_=this&&this.__param||function(C,L){return function(E,R){L(E,R,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=o(9806),p=o(9504),S=o(456),y=o(4725),u=o(8460),n=o(844),a=o(6114),l=o(4841),c=o(511),m=o(2585),w="",v=new RegExp(w,"g");let b=i.SelectionService=class extends n.Disposable{constructor(C,L,E,R,k,D,T,N,$){super(),this._element=C,this._screenElement=L,this._linkifier=E,this._bufferService=R,this._coreService=k,this._mouseService=D,this._optionsService=T,this._renderService=N,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!C||!L||C[0]===L[0]&&C[1]===L[1])}get selectionText(){const C=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!C||!L)return"";const E=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(C[0]===L[0])return"";const k=C[0]<L[0]?C[0]:L[0],D=C[0]<L[0]?L[0]:C[0];for(let T=C[1];T<=L[1];T++){const N=E.translateBufferLineToString(T,!0,k,D);R.push(N)}}else{const k=C[1]===L[1]?L[0]:void 0;R.push(E.translateBufferLineToString(C[1],!0,C[0],k));for(let D=C[1]+1;D<=L[1]-1;D++){const T=E.lines.get(D),N=E.translateBufferLineToString(D,!0);T?.isWrapped?R[R.length-1]+=N:R.push(N)}if(C[1]!==L[1]){const D=E.lines.get(L[1]),T=E.translateBufferLineToString(L[1],!0,0,L[0]);D&&D.isWrapped?R[R.length-1]+=T:R.push(T)}}return R.map(k=>k.replace(v," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const L=this._getMouseBufferCoords(C),E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(E&&R&&L)&&this._areCoordsInSelection(L,E,R)}isCellInSelection(C,L){const E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!E||!R)&&this._areCoordsInSelection([C,L],E,R)}_areCoordsInSelection(C,L,E){return C[1]>L[1]&&C[1]<E[1]||L[1]===E[1]&&C[1]===L[1]&&C[0]>=L[0]&&C[0]<E[0]||L[1]<E[1]&&C[1]===E[1]&&C[0]<E[0]||L[1]<E[1]&&C[1]===L[1]&&C[0]>=L[0]}_selectWordAtCursor(C,L){const E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(C);return!!R&&(this._selectWordAt(R,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,L){this._model.clearSelection(),C=Math.max(C,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const L=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(C){let L=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=E?0:(L>E&&(L-=E),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(C){return a.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const L=this._getMouseBufferCoords(C);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(C){return C.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const R=E.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const L=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const R=(0,p.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,E=!(!C||!L||C[0]===L[0]&&C[1]===L[1]);E?C&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,L,E)):this._oldHasSelection&&this._fireOnSelectionChange(C,L,E)}_fireOnSelectionChange(C,L,E){this._oldSelectionStart=C,this._oldSelectionEnd=L,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(C,L){let E=L;for(let R=0;L>=R;R++){const k=C.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:k>1&&L!==R&&(E+=k-1)}return E}setSelection(C,L,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,L],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,L,E=!0,R=!0){if(C[0]>=this._bufferService.cols)return;const k=this._bufferService.buffer,D=k.lines.get(C[1]);if(!D)return;const T=k.translateBufferLineToString(C[1],!1);let N=this._convertViewportColToCharacterIndex(D,C[0]),$=N;const F=C[0]-N;let B=0,M=0,A=0,O=0;if(T.charAt(N)===" "){for(;N>0&&T.charAt(N-1)===" ";)N--;for(;$<T.length&&T.charAt($+1)===" ";)$++}else{let U=C[0],Q=C[0];D.getWidth(U)===0&&(B++,U--),D.getWidth(Q)===2&&(M++,Q++);const Y=D.getString(Q).length;for(Y>1&&(O+=Y-1,$+=Y-1);U>0&&N>0&&!this._isCharWordSeparator(D.loadCell(U-1,this._workCell));){D.loadCell(U-1,this._workCell);const j=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,U--):j>1&&(A+=j-1,N-=j-1),N--,U--}for(;Q<D.length&&$+1<T.length&&!this._isCharWordSeparator(D.loadCell(Q+1,this._workCell));){D.loadCell(Q+1,this._workCell);const j=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,Q++):j>1&&(O+=j-1,$+=j-1),$++,Q++}}$++;let I=N+F-B+A,z=Math.min(this._bufferService.cols,$-N+B+M-A-O);if(L||T.slice(N,$).trim()!==""){if(E&&I===0&&D.getCodePoint(0)!==32){const U=k.lines.get(C[1]-1);if(U&&D.isWrapped&&U.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(Q){const Y=this._bufferService.cols-Q.start;I-=Y,z+=Y}}}if(R&&I+z===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const U=k.lines.get(C[1]+1);if(U?.isWrapped&&U.getCodePoint(0)!==32){const Q=this._getWordAt([0,C[1]+1],!1,!1,!0);Q&&(z+=Q.length)}}return{start:I,length:z}}}_selectWordAt(C,L){const E=this._getWordAt(C,L);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[E.start,C[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(C){const L=this._getWordAt(C,!0);if(L){let E=C[1];for(;L.start<0;)L.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,E]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const L=this._bufferService.buffer.getWrappedRangeForLine(C),E={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=b=f([_(3,m.IBufferService),_(4,m.ICoreService),_(5,y.IMouseService),_(6,m.IOptionsService),_(7,y.IRenderService),_(8,y.ICoreBrowserService)],b)},4725:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(x,i,o){var f=this&&this.__decorate||function(b,C,L,E){var R,k=arguments.length,D=k<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,L):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,C,L,E);else for(var T=b.length-1;T>=0;T--)(R=b[T])&&(D=(k<3?R(D):k>3?R(C,L,D):R(C,L))||D);return k>3&&D&&Object.defineProperty(C,L,D),D},_=this&&this.__param||function(b,C){return function(L,E){C(L,E,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=o(7239),p=o(8055),S=o(8460),y=o(844),u=o(2585),n=p.css.toColor("#ffffff"),a=p.css.toColor("#000000"),l=p.css.toColor("#ffffff"),c=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const b=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let L=0;L<216;L++){const E=C[L/36%6|0],R=C[L/6%6|0],k=C[L%6];b.push({css:p.channels.toCss(E,R,k),rgba:p.channels.toRgba(E,R,k)})}for(let L=0;L<24;L++){const E=8+10*L;b.push({css:p.channels.toCss(E,E,E),rgba:p.channels.toRgba(E,E,E)})}return b})());let w=i.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:a,cursor:l,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(a,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(a,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(b={}){const C=this._colors;if(C.foreground=v(b.foreground,n),C.background=v(b.background,a),C.cursor=v(b.cursor,l),C.cursorAccent=v(b.cursorAccent,c),C.selectionBackgroundTransparent=v(b.selectionBackground,m),C.selectionBackgroundOpaque=p.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=v(b.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=p.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=b.selectionForeground?v(b.selectionForeground,p.NULL_COLOR):void 0,C.selectionForeground===p.NULL_COLOR&&(C.selectionForeground=void 0),p.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=p.color.opacity(C.selectionBackgroundTransparent,.3)),p.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=p.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=i.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=v(b.black,i.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=v(b.red,i.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=v(b.green,i.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=v(b.yellow,i.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=v(b.blue,i.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=v(b.magenta,i.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=v(b.cyan,i.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=v(b.white,i.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=v(b.brightBlack,i.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=v(b.brightRed,i.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=v(b.brightGreen,i.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=v(b.brightYellow,i.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=v(b.brightBlue,i.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=v(b.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=v(b.brightCyan,i.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=v(b.brightWhite,i.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){const L=Math.min(C.ansi.length-16,b.extendedAnsi.length);for(let E=0;E<L;E++)C.ansi[E+16]=v(b.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(b,C){if(b!==void 0)try{return p.css.toColor(b)}catch{}return C}i.ThemeService=w=f([_(0,u.IOptionsService)],w)},6349:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),_=o(844);class h extends _.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const y=new Array(S);for(let u=0;u<Math.min(S,this.length);u++)y[u]=this._array[this._getCyclicIndex(u)];this._array=y,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let y=this._length;y<S;y++)this._array[y]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,y){this._array[this._getCyclicIndex(S)]=y}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,y,...u){if(y){for(let n=S;n<this._length-y;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+y)];this._length-=y,this.onDeleteEmitter.fire({index:S,amount:y})}for(let n=this._length-1;n>=S;n--)this._array[this._getCyclicIndex(n+u.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<u.length;n++)this._array[this._getCyclicIndex(S+n)]=u[n];if(u.length&&this.onInsertEmitter.fire({index:S,amount:u.length}),this._length+u.length>this._maxLength){const n=this._length+u.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=u.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,y,u){if(!(y<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let a=y-1;a>=0;a--)this.set(S+a+u,this.get(S+a));const n=S+y+u-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<y;n++)this.set(S+n+u,this.get(S+n))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}i.CircularList=h},1439:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,_=5){if(typeof f!="object")return f;const h=Array.isArray(f)?[]:{};for(const p in f)h[p]=_<=1?f[p]:f[p]&&o(f[p],_-1);return h}},8055:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,S,y,u,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,w,v,b){return b!==void 0?`#${a(m)}${a(w)}${a(v)}${a(b)}`:`#${a(m)}${a(w)}${a(v)}`},c.toRgba=function(m,w,v,b=255){return(m<<24|w<<16|v<<8|b)>>>0},c.toColor=function(m,w,v,b){return{css:c.toCss(m,w,v,b),rgba:c.toRgba(m,w,v,b)}}}(p||(i.channels=p={})),function(c){function m(w,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(w.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}c.blend=function(w,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const b=v.rgba>>24&255,C=v.rgba>>16&255,L=v.rgba>>8&255,E=w.rgba>>24&255,R=w.rgba>>16&255,k=w.rgba>>8&255;return o=E+Math.round((b-E)*h),f=R+Math.round((C-R)*h),_=k+Math.round((L-k)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(w){return(255&w.rgba)==255},c.ensureContrastRatio=function(w,v,b){const C=n.ensureContrastRatio(w.rgba,v.rgba,b);if(C)return p.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(w){const v=(255|w.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(w,v){return h=255&w.rgba,m(w,h*v/255)},c.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(S||(i.color=S={})),function(c){let m,w;try{const v=document.createElement("canvas");v.width=1,v.height=1;const b=v.getContext("2d",{willReadFrequently:!0});b&&(m=b,m.globalCompositeOperation="copy",w=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const b=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return o=parseInt(b[1]),f=parseInt(b[2]),_=parseInt(b[3]),h=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),p.toColor(o,f,_,h);if(!m||!w)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=w,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(y||(i.css=y={})),function(c){function m(w,v,b){const C=w/255,L=v/255,E=b/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(w){return m(w>>16&255,w>>8&255,255&w)},c.relativeLuminance2=m}(u||(i.rgb=u={})),function(c){function m(v,b,C){const L=v>>24&255,E=v>>16&255,R=v>>8&255;let k=b>>24&255,D=b>>16&255,T=b>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));for(;N<C&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function w(v,b,C){const L=v>>24&255,E=v>>16&255,R=v>>8&255;let k=b>>24&255,D=b>>16&255,T=b>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));for(;N<C&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));return(k<<24|D<<16|T<<8|255)>>>0}c.blend=function(v,b){if(h=(255&b)/255,h===1)return b;const C=b>>24&255,L=b>>16&255,E=b>>8&255,R=v>>24&255,k=v>>16&255,D=v>>8&255;return o=R+Math.round((C-R)*h),f=k+Math.round((L-k)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,b,C){const L=u.relativeLuminance(v>>8),E=u.relativeLuminance(b>>8);if(l(L,E)<C){if(E<L){const D=m(v,b,C),T=l(L,u.relativeLuminance(D>>8));if(T<C){const N=w(v,b,C);return T>l(L,u.relativeLuminance(N>>8))?D:N}return D}const R=w(v,b,C),k=l(L,u.relativeLuminance(R>>8));if(k<C){const D=m(v,b,C);return k>l(L,u.relativeLuminance(D>>8))?R:D}return R}},c.reduceLuminance=m,c.increaseLuminance=w,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},8969:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),_=o(2585),h=o(4348),p=o(7866),S=o(744),y=o(7302),u=o(6975),n=o(8460),a=o(1753),l=o(1480),c=o(7994),m=o(9282),w=o(5435),v=o(5981),b=o(2660);let C=!1;class L extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(R=>{this._onScrollApi?.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const k in R)this.optionsService.options[k]=R[k]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new y.OptionsService(R)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((k,D)=>this._inputHandler.parse(k,D))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,k){this._writeBuffer.write(R,k)}writeSync(R,k){this._logService.logLevel<=_.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(R,k)}input(R,k=!0){this.coreService.triggerDataEvent(R,k)}resize(R,k){isNaN(R)||isNaN(k)||(R=Math.max(R,S.MINIMUM_COLS),k=Math.max(k,S.MINIMUM_ROWS),this._bufferService.resize(R,k))}scroll(R,k=!1){this._bufferService.scroll(R,k)}scrollLines(R,k,D){this._bufferService.scrollLines(R,k,D)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const k=R-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(R,k){return this._inputHandler.registerEscHandler(R,k)}registerDcsHandler(R,k){return this._inputHandler.registerDcsHandler(R,k)}registerCsiHandler(R,k){return this._inputHandler.registerCsiHandler(R,k)}registerOscHandler(R,k){return this._inputHandler.registerOscHandler(R,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?R=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const k of R)k.dispose()})}}}i.CoreTerminal=L},8460:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},5435:function(x,i,o){var f=this&&this.__decorate||function(B,M,A,O){var I,z=arguments.length,U=z<3?M:O===null?O=Object.getOwnPropertyDescriptor(M,A):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(B,M,A,O);else for(var Q=B.length-1;Q>=0;Q--)(I=B[Q])&&(U=(z<3?I(U):z>3?I(M,A,U):I(M,A))||U);return z>3&&U&&Object.defineProperty(M,A,U),U},_=this&&this.__param||function(B,M){return function(A,O){M(A,O,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=o(2584),p=o(7116),S=o(2015),y=o(844),u=o(482),n=o(8437),a=o(8460),l=o(643),c=o(511),m=o(3734),w=o(2585),v=o(1480),b=o(6242),C=o(6351),L=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function k(B,M){if(B>24)return M.setWinLines||!1;switch(B){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var D;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let T=0;class N extends y.Disposable{getAttrData(){return this._curAttrData}constructor(M,A,O,I,z,U,Q,Y,j=new S.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=A,this._coreService=O,this._logService=I,this._optionsService=z,this._oscLinkService=U,this._coreMouseService=Q,this._unicodeService=Y,this._parser=j,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(P=>this._activeBuffer=P.activeBuffer)),this._parser.setCsiHandlerFallback((P,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(P),params:W.toArray()})}),this._parser.setEscHandlerFallback(P=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(P)})}),this._parser.setExecuteHandlerFallback(P=>{this._logService.debug("Unknown EXECUTE code: ",{code:P})}),this._parser.setOscHandlerFallback((P,W,G)=>{this._logService.debug("Unknown OSC code: ",{identifier:P,action:W,data:G})}),this._parser.setDcsHandlerFallback((P,W,G)=>{W==="HOOK"&&(G=G.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(P),action:W,payload:G})}),this._parser.setPrintHandler((P,W,G)=>this.print(P,W,G)),this._parser.registerCsiHandler({final:"@"},P=>this.insertChars(P)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},P=>this.scrollLeft(P)),this._parser.registerCsiHandler({final:"A"},P=>this.cursorUp(P)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},P=>this.scrollRight(P)),this._parser.registerCsiHandler({final:"B"},P=>this.cursorDown(P)),this._parser.registerCsiHandler({final:"C"},P=>this.cursorForward(P)),this._parser.registerCsiHandler({final:"D"},P=>this.cursorBackward(P)),this._parser.registerCsiHandler({final:"E"},P=>this.cursorNextLine(P)),this._parser.registerCsiHandler({final:"F"},P=>this.cursorPrecedingLine(P)),this._parser.registerCsiHandler({final:"G"},P=>this.cursorCharAbsolute(P)),this._parser.registerCsiHandler({final:"H"},P=>this.cursorPosition(P)),this._parser.registerCsiHandler({final:"I"},P=>this.cursorForwardTab(P)),this._parser.registerCsiHandler({final:"J"},P=>this.eraseInDisplay(P,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},P=>this.eraseInDisplay(P,!0)),this._parser.registerCsiHandler({final:"K"},P=>this.eraseInLine(P,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},P=>this.eraseInLine(P,!0)),this._parser.registerCsiHandler({final:"L"},P=>this.insertLines(P)),this._parser.registerCsiHandler({final:"M"},P=>this.deleteLines(P)),this._parser.registerCsiHandler({final:"P"},P=>this.deleteChars(P)),this._parser.registerCsiHandler({final:"S"},P=>this.scrollUp(P)),this._parser.registerCsiHandler({final:"T"},P=>this.scrollDown(P)),this._parser.registerCsiHandler({final:"X"},P=>this.eraseChars(P)),this._parser.registerCsiHandler({final:"Z"},P=>this.cursorBackwardTab(P)),this._parser.registerCsiHandler({final:"`"},P=>this.charPosAbsolute(P)),this._parser.registerCsiHandler({final:"a"},P=>this.hPositionRelative(P)),this._parser.registerCsiHandler({final:"b"},P=>this.repeatPrecedingCharacter(P)),this._parser.registerCsiHandler({final:"c"},P=>this.sendDeviceAttributesPrimary(P)),this._parser.registerCsiHandler({prefix:">",final:"c"},P=>this.sendDeviceAttributesSecondary(P)),this._parser.registerCsiHandler({final:"d"},P=>this.linePosAbsolute(P)),this._parser.registerCsiHandler({final:"e"},P=>this.vPositionRelative(P)),this._parser.registerCsiHandler({final:"f"},P=>this.hVPosition(P)),this._parser.registerCsiHandler({final:"g"},P=>this.tabClear(P)),this._parser.registerCsiHandler({final:"h"},P=>this.setMode(P)),this._parser.registerCsiHandler({prefix:"?",final:"h"},P=>this.setModePrivate(P)),this._parser.registerCsiHandler({final:"l"},P=>this.resetMode(P)),this._parser.registerCsiHandler({prefix:"?",final:"l"},P=>this.resetModePrivate(P)),this._parser.registerCsiHandler({final:"m"},P=>this.charAttributes(P)),this._parser.registerCsiHandler({final:"n"},P=>this.deviceStatus(P)),this._parser.registerCsiHandler({prefix:"?",final:"n"},P=>this.deviceStatusPrivate(P)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},P=>this.softReset(P)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},P=>this.setCursorStyle(P)),this._parser.registerCsiHandler({final:"r"},P=>this.setScrollRegion(P)),this._parser.registerCsiHandler({final:"s"},P=>this.saveCursor(P)),this._parser.registerCsiHandler({final:"t"},P=>this.windowOptions(P)),this._parser.registerCsiHandler({final:"u"},P=>this.restoreCursor(P)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},P=>this.insertColumns(P)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},P=>this.deleteColumns(P)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},P=>this.selectProtected(P)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},P=>this.requestMode(P,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},P=>this.requestMode(P,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(P=>(this.setTitle(P),this.setIconName(P),!0))),this._parser.registerOscHandler(1,new b.OscHandler(P=>this.setIconName(P))),this._parser.registerOscHandler(2,new b.OscHandler(P=>this.setTitle(P))),this._parser.registerOscHandler(4,new b.OscHandler(P=>this.setOrReportIndexedColor(P))),this._parser.registerOscHandler(8,new b.OscHandler(P=>this.setHyperlink(P))),this._parser.registerOscHandler(10,new b.OscHandler(P=>this.setOrReportFgColor(P))),this._parser.registerOscHandler(11,new b.OscHandler(P=>this.setOrReportBgColor(P))),this._parser.registerOscHandler(12,new b.OscHandler(P=>this.setOrReportCursorColor(P))),this._parser.registerOscHandler(104,new b.OscHandler(P=>this.restoreIndexedColor(P))),this._parser.registerOscHandler(110,new b.OscHandler(P=>this.restoreFgColor(P))),this._parser.registerOscHandler(111,new b.OscHandler(P=>this.restoreBgColor(P))),this._parser.registerOscHandler(112,new b.OscHandler(P=>this.restoreCursorColor(P))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const P in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:P},()=>this.selectCharset("("+P)),this._parser.registerEscHandler({intermediates:")",final:P},()=>this.selectCharset(")"+P)),this._parser.registerEscHandler({intermediates:"*",final:P},()=>this.selectCharset("*"+P)),this._parser.registerEscHandler({intermediates:"+",final:P},()=>this.selectCharset("+"+P)),this._parser.registerEscHandler({intermediates:"-",final:P},()=>this.selectCharset("-"+P)),this._parser.registerEscHandler({intermediates:".",final:P},()=>this.selectCharset("."+P)),this._parser.registerEscHandler({intermediates:"/",final:P},()=>this.selectCharset("/"+P));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(P=>(this._logService.error("Parsing error: ",P),P)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((P,W)=>this.requestStatusString(P,W)))}_preserveStack(M,A,O,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=O,this._parseStack.position=I}_logSlowResolvingAsync(M){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([M,new Promise((A,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,A){let O,I=this._activeBuffer.x,z=this._activeBuffer.y,U=0;const Q=this._parseStack.paused;if(Q){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(O),O;I=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>R&&(U=this._parseStack.position+R)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,P=>String.fromCharCode(P)).join("")}"`),typeof M=="string"?M.split("").map(P=>P.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(M.length,R))),Q||this._dirtyRowTracker.clearRange(),M.length>R)for(let P=U;P<M.length;P+=R){const W=P+R<M.length?P+R:M.length,G=typeof M=="string"?this._stringDecoder.decode(M.substring(P,W),this._parseBuffer):this._utf8Decoder.decode(M.subarray(P,W),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,G))return this._preserveStack(I,z,G,P),this._logSlowResolvingAsync(O),O}else if(!Q){const P=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,P))return this._preserveStack(I,z,P,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===I&&this._activeBuffer.y===z||this._onCursorMove.fire();const Y=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),j=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);j<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(j,this._bufferService.rows-1),Math.min(Y,this._bufferService.rows-1))}print(M,A,O){let I,z;const U=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,j=this._coreService.decPrivateModes.wraparound,P=this._coreService.modes.insertMode,W=this._curAttrData;let G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-A>0&&G.getWidth(this._activeBuffer.x-1)===2&&G.setCellFromCodepoint(this._activeBuffer.x-1,0,1,W);let Z=this._parser.precedingJoinState;for(let X=A;X<O;++X){if(I=M[X],I<127&&U){const me=U[String.fromCharCode(I)];me&&(I=me.charCodeAt(0))}const ae=this._unicodeService.charProperties(I,Z);z=v.UnicodeService.extractWidth(ae);const J=v.UnicodeService.extractShouldJoin(ae),ue=J?v.UnicodeService.extractWidth(Z):0;if(Z=ae,Q&&this._onA11yChar.fire((0,u.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+z-ue>Y){if(j){const me=G;let ne=this._activeBuffer.x-ue;for(this._activeBuffer.x=ue,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ue>0&&G instanceof n.BufferLine&&G.copyCellsFrom(me,ne,0,ue,!1);ne<Y;)me.setCellFromCodepoint(ne++,0,1,W)}else if(this._activeBuffer.x=Y-1,z===2)continue}if(J&&this._activeBuffer.x){const me=G.getWidth(this._activeBuffer.x-1)?1:2;G.addCodepointToCell(this._activeBuffer.x-me,I,z);for(let ne=z-ue;--ne>=0;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,W)}else if(P&&(G.insertCells(this._activeBuffer.x,z-ue,this._activeBuffer.getNullCell(W)),G.getWidth(Y-1)===2&&G.setCellFromCodepoint(Y-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,W)),G.setCellFromCodepoint(this._activeBuffer.x++,I,z,W),z>0)for(;--z;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,W)}this._parser.precedingJoinState=Z,this._activeBuffer.x<Y&&O-A>0&&G.getWidth(this._activeBuffer.x)===0&&!G.hasContent(this._activeBuffer.x)&&G.setCellFromCodepoint(this._activeBuffer.x,0,1,W),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,A){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,A):this._parser.registerCsiHandler(M,O=>!k(O.params[0],this._optionsService.rawOptions.windowOptions)||A(O))}registerDcsHandler(M,A){return this._parser.registerDcsHandler(M,new C.DcsHandler(A))}registerEscHandler(M,A){return this._parser.registerEscHandler(M,A)}registerOscHandler(M,A){return this._parser.registerOscHandler(M,new b.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=M,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+A)}cursorUp(M){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const A=M.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const A=M.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,A,O,I=!1,z=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);U.replaceCells(A,O,this._activeBuffer.getNullCell(this._eraseAttrData()),z),I&&(U.isWrapped=!1)}_resetBufferLine(M,A=!1){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O&&(O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),O.isWrapped=!1)}eraseInDisplay(M,A=!1){let O;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);O<this._bufferService.rows;O++)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(M,A=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;A--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;A--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const A=this._parser.precedingJoinState;if(!A)return!0;const O=M.params[0]||1,I=v.UnicodeService.extractWidth(A),z=this._activeBuffer.x-I,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(z),Q=new Uint32Array(U.length*O);let Y=0;for(let P=0;P<U.length;){const W=U.codePointAt(P)||0;Q[Y++]=W,P+=W>65535?2:1}let j=Y;for(let P=1;P<O;++P)Q.copyWithin(j,0,Y),j+=Y;return this.print(Q,0,j),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,A){const O=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:z}=this._coreMouseService,U=this._coreService,{buffers:Q,cols:Y}=this._bufferService,{active:j,alt:P}=Q,W=this._optionsService.rawOptions,G=J=>J?1:2,Z=M.params[0];return X=Z,ae=A?Z===2?4:Z===4?G(U.modes.insertMode):Z===12?3:Z===20?G(W.convertEol):0:Z===1?G(O.applicationCursorKeys):Z===3?W.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:Z===6?G(O.origin):Z===7?G(O.wraparound):Z===8?3:Z===9?G(I==="X10"):Z===12?G(W.cursorBlink):Z===25?G(!U.isCursorHidden):Z===45?G(O.reverseWraparound):Z===66?G(O.applicationKeypad):Z===67?4:Z===1e3?G(I==="VT200"):Z===1002?G(I==="DRAG"):Z===1003?G(I==="ANY"):Z===1004?G(O.sendFocus):Z===1005?4:Z===1006?G(z==="SGR"):Z===1015?4:Z===1016?G(z==="SGR_PIXELS"):Z===1048?1:Z===47||Z===1047||Z===1049?G(j===P):Z===2004?G(O.bracketedPasteMode):0,U.triggerDataEvent(`${h.C0.ESC}[${A?"":"?"}${X};${ae}$y`),!0;var X,ae}_updateAttrColor(M,A,O,I,z){return A===2?(M|=50331648,M&=-16777216,M|=m.AttributeData.fromColorRGB([O,I,z])):A===5&&(M&=-50331904,M|=33554432|255&O),M}_extractColor(M,A,O){const I=[0,0,-1,0,0,0];let z=0,U=0;do{if(I[U+z]=M.params[A+U],M.hasSubParams(A+U)){const Q=M.getSubParams(A+U);let Y=0;do I[1]===5&&(z=1),I[U+Y+1+z]=Q[Y];while(++Y<Q.length&&Y+U+1+z<I.length);break}if(I[1]===5&&U+z>=2||I[1]===2&&U+z>=5)break;I[1]&&(z=1)}while(++U+A<M.length&&U+z<I.length);for(let Q=2;Q<I.length;++Q)I[Q]===-1&&(I[Q]=0);switch(I[0]){case 38:O.fg=this._updateAttrColor(O.fg,I[1],I[3],I[4],I[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,I[1],I[3],I[4],I[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,I[1],I[3],I[4],I[5])}return U}_processUnderline(M,A){A.extended=A.extended.clone(),(!~M||M>5)&&(M=1),A.extended.underlineStyle=M,A.fg|=268435456,M===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(M){M.fg=n.DEFAULT_ATTR_DATA.fg,M.bg=n.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=M.length;let O;const I=this._curAttrData;for(let z=0;z<A;z++)O=M.params[z],O>=30&&O<=37?(I.fg&=-50331904,I.fg|=16777216|O-30):O>=40&&O<=47?(I.bg&=-50331904,I.bg|=16777216|O-40):O>=90&&O<=97?(I.fg&=-50331904,I.fg|=16777224|O-90):O>=100&&O<=107?(I.bg&=-50331904,I.bg|=16777224|O-100):O===0?this._processSGR0(I):O===1?I.fg|=134217728:O===3?I.bg|=67108864:O===4?(I.fg|=268435456,this._processUnderline(M.hasSubParams(z)?M.getSubParams(z)[0]:1,I)):O===5?I.fg|=536870912:O===7?I.fg|=67108864:O===8?I.fg|=1073741824:O===9?I.fg|=2147483648:O===2?I.bg|=134217728:O===21?this._processUnderline(2,I):O===22?(I.fg&=-134217729,I.bg&=-134217729):O===23?I.bg&=-67108865:O===24?(I.fg&=-268435457,this._processUnderline(0,I)):O===25?I.fg&=-536870913:O===27?I.fg&=-67108865:O===28?I.fg&=-1073741825:O===29?I.fg&=2147483647:O===39?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):O===49?(I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?z+=this._extractColor(M,z,I):O===53?I.bg|=1073741824:O===55?I.bg&=-1073741825:O===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):O===100?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${A};${O}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${A};${O}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const A=M.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const O=A%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(M){const A=M.params[0]||1;let O;return(M.length<2||(O=M.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(M){if(!k(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const A=[],O=M.split(";");for(;O.length>1;){const I=O.shift(),z=O.shift();if(/^\d+$/.exec(I)){const U=parseInt(I);if(F(U))if(z==="?")A.push({type:0,index:U});else{const Q=(0,L.parseColor)(z);Q&&A.push({type:1,index:U,color:Q})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(M){const A=M.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(M,A){this._getCurrentLinkId()&&this._finishHyperlink();const O=M.split(":");let I;const z=O.findIndex(U=>U.startsWith("id="));return z!==-1&&(I=O[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,A){const O=M.split(";");for(let I=0;I<O.length&&!(A>=this._specialColors.length);++I,++A)if(O[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const z=(0,L.parseColor)(O[I]);z&&this._onColor.fire([{type:1,index:this._specialColors[A],color:z}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const A=[],O=M.split(";");for(let I=0;I<O.length;++I)if(/^\d+$/.exec(O[I])){const z=parseInt(O[I]);F(z)&&A.push({type:2,index:z})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(E[M[0]],p.CHARSETS[M[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new c.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const O=this._activeBuffer.ybase+this._activeBuffer.y+A,I=this._activeBuffer.lines.get(O);I&&(I.fill(M),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,A){const O=this._bufferService.buffer,I=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${z}${h.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,A){this._dirtyRowTracker.markRangeDirty(M,A)}}i.InputHandler=N;let $=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,M){B>M&&(T=B,B=M,M=T),B<this.start&&(this.start=B),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function F(B){return 0<=B&&B<256}$=f([_(0,w.IBufferService)],$)},844:(x,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,S){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,S)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},6114:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const _=this._getKey(f);if(_===void 0||(o=this._search(_),o===-1)||this._getKey(this._array[o])!==_)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===_);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,_){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do _(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let _=0,h=this._array.length-1;for(;h>=_;){let p=_+h>>1;const S=this._getKey(this._array[p]);if(S>f)h=p-1;else{if(!(S<f)){for(;p>0&&this._getKey(this._array[p-1])===f;)p--;return p}_=p+1}}return _}}},7226:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let y=0,u=0,n=S.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),u=Math.max(y,u),a=S.timeRemaining(),1.5*u>a)return n-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-y))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const y=Date.now()+S;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(_){const h=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=h?.get(_.cols-1),S=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);S&&p&&(S.isWrapped=p[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&p[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),_=o(7226),h=o(3734),p=o(8437),S=o(4634),y=o(511),u=o(643),n=o(4863),a=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(l,c,m){this._hasScrollback=l,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,c){return new p.BufferLine(this._bufferService.cols,this.getNullCell(l),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const c=l+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=p.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,c){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let w=0;const v=this._getCorrectBufferLength(c);if(v>this.lines.maxLength&&(this.lines.maxLength=v),this.lines.length>0){if(this._cols<l)for(let C=0;C<this.lines.length;C++)w+=+this.lines.get(C).resize(l,m);let b=0;if(this._rows<c)for(let C=this._rows;C<c;C++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(l,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(l,m)));else for(let C=this._rows;C>c;C--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(v<this.lines.maxLength){const C=this.lines.length-v;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=v}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,c-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(l,c),this._cols>l))for(let b=0;b<this.lines.length;b++)w+=+this.lines.get(b).resize(l,m);this._cols=l,this._rows=c,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,c){this._cols!==l&&(l>this._cols?this._reflowLarger(l,c):this._reflowSmaller(l,c))}_reflowLarger(l,c){const m=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const w=(0,S.reflowLargerCreateNewLayout)(this.lines,m);(0,S.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(l,c,w.countRemoved)}}_reflowLargerAdjustViewport(l,c,m){const w=this.getNullCell(p.DEFAULT_ATTR_DATA);let v=m;for(;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new p.BufferLine(l,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(l,c){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),w=[];let v=0;for(let b=this.lines.length-1;b>=0;b--){let C=this.lines.get(b);if(!C||!C.isWrapped&&C.getTrimmedLength()<=l)continue;const L=[C];for(;C.isWrapped&&b>0;)C=this.lines.get(--b),L.unshift(C);const E=this.ybase+this.y;if(E>=b&&E<b+L.length)continue;const R=L[L.length-1].getTrimmedLength(),k=(0,S.reflowSmallerGetNewLineLengths)(L,this._cols,l),D=k.length-L.length;let T;T=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const N=[];for(let O=0;O<D;O++){const I=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);N.push(I)}N.length>0&&(w.push({start:b+L.length+v,newLines:N}),v+=N.length),L.push(...N);let $=k.length-1,F=k[$];F===0&&($--,F=k[$]);let B=L.length-D-1,M=R;for(;B>=0;){const O=Math.min(M,F);if(L[$]===void 0)break;if(L[$].copyCellsFrom(L[B],M-O,F-O,O,!0),F-=O,F===0&&($--,F=k[$]),M-=O,M===0){B--;const I=Math.max(B,0);M=(0,S.getWrappedLineTrimmedLength)(L,I,this._cols)}}for(let O=0;O<L.length;O++)k[O]<l&&L[O].setCell(k[O],m);let A=D-T;for(;A-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+c-1)}if(w.length>0){const b=[],C=[];for(let $=0;$<this.lines.length;$++)C.push(this.lines.get($));const L=this.lines.length;let E=L-1,R=0,k=w[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);let D=0;for(let $=Math.min(this.lines.maxLength-1,L+v-1);$>=0;$--)if(k&&k.start>E+D){for(let F=k.newLines.length-1;F>=0;F--)this.lines.set($--,k.newLines[F]);$++,b.push({index:E+1,amount:k.newLines.length}),D+=k.newLines.length,k=w[++R]}else this.lines.set($,C[E--]);let T=0;for(let $=b.length-1;$>=0;$--)b[$].index+=T,this.lines.onInsertEmitter.fire(b[$]),T+=b[$].amount;const N=Math.max(0,L+v-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}translateBufferLineToString(l,c,m=0,w){const v=this.lines.get(l);return v?v.translateToString(c,m,w):""}getWrappedRangeForLine(l){let c=l,m=l;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===l&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const c=new n.Marker(l);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),_=o(511),h=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let S=0;class y{constructor(n,a,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const c=a||_.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,c);this.length=n}get(n){const a=this._data[3*n+0],l=2097151&a;return[this._data[3*n+1],2097152&a?this._combined[n]:l?(0,p.stringFromCodePoint)(l):"",a>>22,2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):l]}set(n,a){this._data[3*n+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=a[1],this._data[3*n+0]=2097152|n|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&a}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n]:2097151&a?(0,p.stringFromCodePoint)(2097151&a):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,a){return S=3*n,a.content=this._data[S+0],a.fg=this._data[S+1],a.bg=this._data[S+2],2097152&a.content&&(a.combinedData=this._combined[n]),268435456&a.bg&&(a.extended=this._extendedAttrs[n]),a}setCell(n,a){2097152&a.content&&(this._combined[n]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[n]=a.extended),this._data[3*n+0]=a.content,this._data[3*n+1]=a.fg,this._data[3*n+2]=a.bg}setCellFromCodepoint(n,a,l,c){268435456&c.bg&&(this._extendedAttrs[n]=c.extended),this._data[3*n+0]=a|l<<22,this._data[3*n+1]=c.fg,this._data[3*n+2]=c.bg}addCodepointToCell(n,a,l){let c=this._data[3*n+0];2097152&c?this._combined[n]+=(0,p.stringFromCodePoint)(a):2097151&c?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&c)+(0,p.stringFromCodePoint)(a),c&=-2097152,c|=2097152):c=a|4194304,l&&(c&=-12582913,c|=l<<22),this._data[3*n+0]=c}insertCells(n,a,l){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length-n){const c=new _.CellData;for(let m=this.length-n-a-1;m>=0;--m)this.setCell(n+a+m,this.loadCell(n+m,c));for(let m=0;m<a;++m)this.setCell(n+m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(n,a,l){if(n%=this.length,a<this.length-n){const c=new _.CellData;for(let m=0;m<this.length-n-a;++m)this.setCell(n+m,this.loadCell(n+a+m,c));for(let m=this.length-a;m<this.length;++m)this.setCell(m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,l)}replaceCells(n,a,l,c=!1){if(c)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.isProtected(n)||this.setCell(n,l),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.setCell(n++,l)}resize(n,a){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const c=new Uint32Array(l);c.set(this._data),this._data=c}for(let c=this.length;c<n;++c)this.setCell(c,a)}else{this._data=this._data.subarray(0,l);const c=Object.keys(this._combined);for(let w=0;w<c.length;w++){const v=parseInt(c[w],10);v>=n&&delete this._combined[v]}const m=Object.keys(this._extendedAttrs);for(let w=0;w<m.length;w++){const v=parseInt(m[w],10);v>=n&&delete this._extendedAttrs[v]}}return this.length=n,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,a=!1){if(a)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,n);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const a in n._combined)this._combined[a]=n._combined[a];this._extendedAttrs={};for(const a in n._extendedAttrs)this._extendedAttrs[a]=n._extendedAttrs[a];this.isWrapped=n.isWrapped}clone(){const n=new y(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const a in this._combined)n._combined[a]=this._combined[a];for(const a in this._extendedAttrs)n._extendedAttrs[a]=this._extendedAttrs[a];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,a,l,c,m){const w=n._data;if(m)for(let b=c-1;b>=0;b--){for(let C=0;C<3;C++)this._data[3*(l+b)+C]=w[3*(a+b)+C];268435456&w[3*(a+b)+2]&&(this._extendedAttrs[l+b]=n._extendedAttrs[a+b])}else for(let b=0;b<c;b++){for(let C=0;C<3;C++)this._data[3*(l+b)+C]=w[3*(a+b)+C];268435456&w[3*(a+b)+2]&&(this._extendedAttrs[l+b]=n._extendedAttrs[a+b])}const v=Object.keys(n._combined);for(let b=0;b<v.length;b++){const C=parseInt(v[b],10);C>=a&&(this._combined[C-a+l]=n._combined[C])}}translateToString(n,a,l,c){a=a??0,l=l??this.length,n&&(l=Math.min(l,this.getTrimmedLength())),c&&(c.length=0);let m="";for(;a<l;){const w=this._data[3*a+0],v=2097151&w,b=2097152&w?this._combined[a]:v?(0,p.stringFromCodePoint)(v):h.WHITESPACE_CELL_CHAR;if(m+=b,c)for(let C=0;C<b.length;++C)c.push(a);a+=w>>22||1}return c&&c.push(a),m}}i.BufferLine=y},4841:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(x,i)=>{function o(f,_,h){if(_===f.length-1)return f[_].getTrimmedLength();const p=!f[_].hasContent(h-1)&&f[_].getWidth(h-1)===1,S=f[_+1].getWidth(0)===2;return p&&S?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,_,h,p,S){const y=[];for(let u=0;u<f.length-1;u++){let n=u,a=f.get(++n);if(!a.isWrapped)continue;const l=[f.get(u)];for(;n<f.length&&a.isWrapped;)l.push(a),a=f.get(++n);if(p>=u&&p<n){u+=l.length-1;continue}let c=0,m=o(l,c,_),w=1,v=0;for(;w<l.length;){const C=o(l,w,_),L=C-v,E=h-m,R=Math.min(L,E);l[c].copyCellsFrom(l[w],v,m,R,!1),m+=R,m===h&&(c++,m=0),v+=R,v===C&&(w++,v=0),m===0&&c!==0&&l[c-1].getWidth(h-1)===2&&(l[c].copyCellsFrom(l[c-1],h-1,m++,1,!1),l[c-1].setCell(h-1,S))}l[c].replaceCells(m,h,S);let b=0;for(let C=l.length-1;C>0&&(C>c||l[C].getTrimmedLength()===0);C--)b++;b>0&&(y.push(u+l.length-b),y.push(b)),u+=l.length-1}return y},i.reflowLargerCreateNewLayout=function(f,_){const h=[];let p=0,S=_[p],y=0;for(let u=0;u<f.length;u++)if(S===u){const n=_[++p];f.onDeleteEmitter.fire({index:u-y,amount:n}),u+=n-1,y+=n,S=_[++p]}else h.push(u);return{layout:h,countRemoved:y}},i.reflowLargerApplyNewLayout=function(f,_){const h=[];for(let p=0;p<_.length;p++)h.push(f.get(_[p]));for(let p=0;p<h.length;p++)f.set(p,h[p]);f.length=_.length},i.reflowSmallerGetNewLineLengths=function(f,_,h){const p=[],S=f.map((a,l)=>o(f,l,_)).reduce((a,l)=>a+l);let y=0,u=0,n=0;for(;n<S;){if(S-n<h){p.push(S-n);break}y+=h;const a=o(f,u,_);y>a&&(y-=a,u++);const l=f[u].getWidth(y-1)===2;l&&y--;const c=l?h-1:h;p.push(c),n+=c}return p},i.getWrappedLineTrimmedLength=o},5295:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),_=o(844),h=o(9092);class p extends _.Disposable{constructor(y,u){super(),this._optionsService=y,this._bufferService=u,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,u){this._normal.resize(y,u),this._alt.resize(y,u),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}i.BufferSet=p},511:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),_=o(643),h=o(3734);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const u=new p;return u.setFromCharData(y),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(y[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(y[_.CHAR_DATA_CHAR_INDEX].length===2){const n=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|y[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=y[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),_=o(844);class h{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}i.Marker=h,h._nextId=1},7116:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(x,i)=>{var o,f,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(o||(i.C0=o={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(f||(i.C1=f={})),function(h){h.ST=`${o.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,p,S,y){const u={type:0,cancel:!1,key:void 0},n=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:u.key=h.ctrlKey?"\b":f.C0.DEL,h.altKey&&(u.key=f.C0.ESC+u.key);break;case 9:if(h.shiftKey){u.key=f.C0.ESC+"[Z";break}u.key=f.C0.HT,u.cancel=!0;break;case 13:u.key=h.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,u.cancel=!0;break;case 27:u.key=f.C0.ESC,h.altKey&&(u.key=f.C0.ESC+f.C0.ESC),u.cancel=!0;break;case 37:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"D",u.key===f.C0.ESC+"[1;3D"&&(u.key=f.C0.ESC+(S?"b":"[1;5D"))):u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"C",u.key===f.C0.ESC+"[1;3C"&&(u.key=f.C0.ESC+(S?"f":"[1;5C"))):u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"A",S||u.key!==f.C0.ESC+"[1;3A"||(u.key=f.C0.ESC+"[1;5A")):u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"B",S||u.key!==f.C0.ESC+"[1;3B"||(u.key=f.C0.ESC+"[1;5B")):u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(u.key=f.C0.ESC+"[2~");break;case 46:u.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:u.key=n?f.C0.ESC+"[1;"+(n+1)+"H":p?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:u.key=n?f.C0.ESC+"[1;"+(n+1)+"F":p?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:h.shiftKey?u.type=2:h.ctrlKey?u.key=f.C0.ESC+"[5;"+(n+1)+"~":u.key=f.C0.ESC+"[5~";break;case 34:h.shiftKey?u.type=3:h.ctrlKey?u.key=f.C0.ESC+"[6;"+(n+1)+"~":u.key=f.C0.ESC+"[6~";break;case 112:u.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:u.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:u.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:u.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:u.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:u.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:u.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:u.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:u.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:u.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:u.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:u.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(S&&!y||!h.altKey||h.metaKey)!S||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?u.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(u.key=f.C0.US),h.key==="@"&&(u.key=f.C0.NUL)):h.keyCode===65&&(u.type=1);else{const a=_[h.keyCode],l=a?.[h.shiftKey?1:0];if(l)u.key=f.C0.ESC+l;else if(h.keyCode>=65&&h.keyCode<=90){const c=h.ctrlKey?h.keyCode-64:h.keyCode+32;let m=String.fromCharCode(c);h.shiftKey&&(m=m.toUpperCase()),u.key=f.C0.ESC+m}else if(h.keyCode===32)u.key=f.C0.ESC+(h.ctrlKey?f.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let c=h.code.slice(3,4);h.shiftKey||(c=c.toLowerCase()),u.key=f.C0.ESC+c,u.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?u.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?u.key=f.C0.NUL:h.keyCode>=51&&h.keyCode<=55?u.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?u.key=f.C0.DEL:h.keyCode===219?u.key=f.C0.ESC:h.keyCode===220?u.key=f.C0.FS:h.keyCode===221&&(u.key=f.C0.GS)}return u}},482:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let S=o[p];S>65535?(S-=65536,h+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):h+=String.fromCharCode(S)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const S=o.charCodeAt(p++);56320<=S&&S<=57343?f[h++]=1024*(this._interim-55296)+S-56320+65536:(f[h++]=this._interim,f[h++]=S),this._interim=0}for(let S=p;S<_;++S){const y=o.charCodeAt(S);if(55296<=y&&y<=56319){if(++S>=_)return this._interim=y,h;const u=o.charCodeAt(S);56320<=u&&u<=57343?f[h++]=1024*(y-55296)+u-56320+65536:(f[h++]=y,f[h++]=u)}else y!==65279&&(f[h++]=y)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,S,y,u=0,n=0,a=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let v,b=0;for(;(v=63&this.interim[++b])&&b<4;)w<<=6,w|=v;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=C-b;for(;a<L;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[b++]=v,w<<=6,w|=63&v}m||(C===2?w<128?a--:f[u++]=w:C===3?w<2048||w>=55296&&w<=57343||w===65279||(f[u++]=w):w<65536||w>1114111||(f[u++]=w)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(h=o[c])||128&(p=o[c+1])||128&(S=o[c+2])||128&(y=o[c+3]));)f[u++]=h,f[u++]=p,f[u++]=S,f[u++]=y,c+=4;if(h=o[c++],h<128)f[u++]=h;else if((224&h)==192){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&h)<<6|63&p,n<128){c--;continue}f[u++]=n}else if((240&h)==224){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(15&h)<<12|(63&p)<<6|63&S,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(S=o[c++],(192&S)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=S,u;if(y=o[c++],(192&y)!=128){c--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&S)<<6|63&y,n<65536||n>1114111)continue;f[u++]=n}}return u}}},225:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let S=0;S<_.length;++S)p.fill(0,_[S][0],_[S][1]+1)}}wcwidth(S){return S<32?0:S<127?1:S<65536?p[S]:function(y,u){let n,a=0,l=u.length-1;if(y<u[0][0]||y>u[l][1])return!1;for(;l>=a;)if(n=a+l>>1,y>u[n][1])a=n+1;else{if(!(y<u[n][0]))return!0;l=n-1}return!1}(S,h)?0:S>=131072&&S<=196605||S>=196608&&S<=262141?2:1}charProperties(S,y){let u=this.wcwidth(S),n=u===0&&y!==0;if(n){const a=f.UnicodeService.extractWidth(y);a===0?n=!1:a>u&&(u=a)}return f.UnicodeService.createPropertyValue(0,u,n)}}},5981:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),_=o(844);class h extends _.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(y)}_innerWrite(S=0,y=!0){const u=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],a=this._action(n,y);if(a){const c=m=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(u,m);return void a.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(c)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function _(h,p){const S=h.toString(16),y=S.length<2?"0"+S:S;switch(p){case 4:return S[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}i.parseColor=function(h){if(!h)return;let p=h.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const S=o.exec(p);if(S){const y=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/y*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/y*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/y*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),f.exec(p)&&[3,6,9,12].includes(p.length))){const S=p.length/3,y=[0,0,0];for(let u=0;u<3;++u){const n=parseInt(p.slice(S*u,S*u+S),16);y[u]=S===1?n<<4:S===2?n:S===3?n>>4:n>>8}return y}},i.toRgbString=function(h,p=16){const[S,y,u]=h;return`rgb:${_(S,p)}/${_(y,p)}/${_(u,p)}`}},5770:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),_=o(8742),h=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(y,u){this._handlers[y]===void 0&&(this._handlers[y]=[]);const n=this._handlers[y];return n.push(u),{dispose:()=>{const a=n.indexOf(u);a!==-1&&n.splice(a,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(y,u){if(this.reset(),this._ident=y,this._active=this._handlers[y]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(y,u,n){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(y,u,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(y,u,n))}unhook(y,u=!0){if(this._active.length){let n=!1,a=this._active.length-1,l=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=u,l=this._stack.fallThrough,this._stack.paused=!1),!l&&n===!1){for(;a>=0&&(n=this._active[a].unhook(y),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",y);this._active=p,this._ident=0}};const S=new _.Params;S.addParam(0),i.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=S,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():S,this._data="",this._hitLimit=!1}put(y,u,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(y,u,n),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let u=!1;if(this._hitLimit)u=!1;else if(y&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(n=>(this._params=S,this._data="",this._hitLimit=!1,n));return this._params=S,this._data="",this._hitLimit=!1,u}}},2015:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),_=o(8742),h=o(6242),p=o(6351);class S{constructor(a){this.table=new Uint8Array(a)}setDefault(a,l){this.table.fill(a<<4|l)}add(a,l,c,m){this.table[l<<8|a]=c<<4|m}addMany(a,l,c,m){for(let w=0;w<a.length;w++)this.table[l<<8|a[w]]=c<<4|m}}i.TransitionTable=S;const y=160;i.VT500_TRANSITION_TABLE=function(){const n=new S(4095),a=Array.apply(null,Array(256)).map((b,C)=>C),l=(b,C)=>a.slice(b,C),c=l(32,127),m=l(0,24);m.push(25),m.push.apply(m,l(28,32));const w=l(0,14);let v;for(v in n.setDefault(1,0),n.addMany(c,0,2,0),w)n.addMany([24,26,153,154],v,3,0),n.addMany(l(128,144),v,3,0),n.addMany(l(144,152),v,3,0),n.add(156,v,0,0),n.add(27,v,11,1),n.add(157,v,4,8),n.addMany([152,158,159],v,0,7),n.add(155,v,11,3),n.add(144,v,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(c,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(l(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(c,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(l(64,127),3,7,0),n.addMany(l(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(l(48,60),4,8,4),n.addMany(l(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(l(32,64),6,0,6),n.add(127,6,0,6),n.addMany(l(64,127),6,0,0),n.addMany(l(32,48),3,9,5),n.addMany(l(32,48),5,9,5),n.addMany(l(48,64),5,0,6),n.addMany(l(64,127),5,7,0),n.addMany(l(32,48),4,9,5),n.addMany(l(32,48),1,9,2),n.addMany(l(32,48),2,9,2),n.addMany(l(48,127),2,10,0),n.addMany(l(48,80),1,10,0),n.addMany(l(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(l(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(l(28,32),9,0,9),n.addMany(l(32,48),9,9,12),n.addMany(l(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(l(32,128),11,0,11),n.addMany(l(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(l(28,32),10,0,10),n.addMany(l(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(l(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(l(28,32),12,0,12),n.addMany(l(32,48),12,9,12),n.addMany(l(48,64),12,0,11),n.addMany(l(64,127),12,12,13),n.addMany(l(64,127),10,12,13),n.addMany(l(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(c,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(y,0,2,0),n.add(y,8,5,8),n.add(y,6,0,6),n.add(y,11,0,11),n.add(y,13,13,13),n}();class u extends f.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,c,m)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,c)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,l=[64,126]){let c=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=a.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<a.intermediates.length;++w){const v=a.intermediates.charCodeAt(w);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=v}}if(a.final.length!==1)throw new Error("final must be a single byte");const m=a.final.charCodeAt(0);if(l[0]>m||m>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return c<<=8,c|=m,c}identToString(a){const l=[];for(;a;)l.push(String.fromCharCode(255&a)),a>>=8;return l.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,l){const c=this._identifier(a,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const m=this._escHandlers[c];return m.push(l),{dispose:()=>{const w=m.indexOf(l);w!==-1&&m.splice(w,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,l){this._executeHandlers[a.charCodeAt(0)]=l}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,l){const c=this._identifier(a);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const m=this._csiHandlers[c];return m.push(l),{dispose:()=>{const w=m.indexOf(l);w!==-1&&m.splice(w,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,l){return this._dcsParser.registerHandler(this._identifier(a),l)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,l){return this._oscParser.registerHandler(a,l)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,l,c,m,w){this._parseStack.state=a,this._parseStack.handlers=l,this._parseStack.handlerPos=c,this._parseStack.transition=m,this._parseStack.chunkPos=w}parse(a,l,c){let m,w=0,v=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&L>-1){for(;L>=0&&(m=C[L](this._params),m!==!0);L--)if(m instanceof Promise)return this._parseStack.handlerPos=L,m}this._parseStack.handlers=[];break;case 4:if(c===!1&&L>-1){for(;L>=0&&(m=C[L](),m!==!0);L--)if(m instanceof Promise)return this._parseStack.handlerPos=L,m}this._parseStack.handlers=[];break;case 6:if(w=a[this._parseStack.chunkPos],m=this._dcsParser.unhook(w!==24&&w!==26,c),m)return m;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=a[this._parseStack.chunkPos],m=this._oscParser.end(w!==24&&w!==26,c),m)return m;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let C=b;C<l;++C){switch(w=a[C],v=this._transitions.table[this.currentState<<8|(w<160?w:y)],v>>4){case 2:for(let D=C+1;;++D){if(D>=l||(w=a[D])<32||w>126&&w<y){this._printHandler(a,C,D),C=D-1;break}if(++D>=l||(w=a[D])<32||w>126&&w<y){this._printHandler(a,C,D),C=D-1;break}if(++D>=l||(w=a[D])<32||w>126&&w<y){this._printHandler(a,C,D),C=D-1;break}if(++D>=l||(w=a[D])<32||w>126&&w<y){this._printHandler(a,C,D),C=D-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|w];let E=L?L.length-1:-1;for(;E>=0&&(m=L[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,L,E,v,C),m;E<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingJoinState=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++C<l&&(w=a[C])>47&&w<60);C--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const R=this._escHandlers[this._collect<<8|w];let k=R?R.length-1:-1;for(;k>=0&&(m=R[k](),m!==!0);k--)if(m instanceof Promise)return this._preserveStack(4,R,k,v,C),m;k<0&&this._escHandlerFb(this._collect<<8|w),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let D=C+1;;++D)if(D>=l||(w=a[D])===24||w===26||w===27||w>127&&w<y){this._dcsParser.put(a,C,D),C=D-1;break}break;case 14:if(m=this._dcsParser.unhook(w!==24&&w!==26),m)return this._preserveStack(6,[],0,v,C),m;w===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=C+1;;D++)if(D>=l||(w=a[D])<32||w>127&&w<y){this._oscParser.put(a,C,D),C=D-1;break}break;case 6:if(m=this._oscParser.end(w!==24&&w!==26),m)return this._preserveStack(5,[],0,v,C),m;w===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&v}}}i.EscapeSequenceParser=u},6242:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),_=o(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,S){this._handlers[p]===void 0&&(this._handlers[p]=[]);const y=this._handlers[p];return y.push(S),{dispose:()=>{const u=y.indexOf(S);u!==-1&&y.splice(u,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,S,y){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(p,S,y);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,S,y))}start(){this.reset(),this._state=1}put(p,S,y){if(this._state!==3){if(this._state===1)for(;S<y;){const u=p[S++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&y-S>0&&this._put(p,S,y)}}end(p,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,u=this._active.length-1,n=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,y=S,n=this._stack.fallThrough,this._stack.paused=!1),!n&&y===!1){for(;u>=0&&(y=this._active[u].end(p),y!==!0);u--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,y;u--}for(;u>=0;u--)if(y=this._active[u].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",p);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,S,y){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,S,y),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let S=!1;if(this._hitLimit)S=!1;else if(p&&(S=this._handler(this._data),S instanceof Promise))return S.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,S}}},8742:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(h){const p=new f;if(!h.length)return p;for(let S=Array.isArray(h[0])?1:0;S<h.length;++S){const y=h[S];if(Array.isArray(y))for(let u=0;u<y.length;++u)p.addSubParam(y[u]);else p.addParam(y)}return p}constructor(h=32,p=32){if(this.maxLength=h,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new f(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let p=0;p<this.length;++p){h.push(this.params[p]);const S=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-S>0&&h.push(Array.prototype.slice.call(this._subParams,S,y))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>o?o:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>o?o:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const p=this._subParamsIdx[h]>>8,S=255&this._subParamsIdx[h];return S-p>0?this._subParams.subarray(p,S):null}getSubParamsAll(){const h={};for(let p=0;p<this.length;++p){const S=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-S>0&&(h[p]=this._subParams.slice(S,y))}return h}addDigit(h){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,y=S[p-1];S[p-1]=~y?Math.min(10*y+h,o):h}}i.Params=f},5741:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const _={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=()=>this._wrappedAddonDispose(_),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===o){f=_;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),_=o(511);i.BufferApiView=class{constructor(h,p){this._buffer=h,this.type=p}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const p=this._buffer.lines.get(h);if(p)return new f.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,h){if(!(_<0||_>=this._line.length))return h?(this._line.loadCell(_,h),h):this._line.loadCell(_,new f.CellData)}translateToString(_,h,p){return this._line.translateToString(_,h,p)}}},8285:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),_=o(8460),h=o(844);class p extends h.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,_=>f(_.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(_,h)=>f(_,h.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(x,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,w=arguments.length,v=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var b=n.length-1;b>=0;b--)(m=n[b])&&(v=(w<3?m(v):w>3?m(a,l,v):m(a,l))||v);return w>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=o(8460),p=o(844),S=o(5295),y=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(n,this))}resize(n,a){this.cols=n,this.rows=a,this.buffers.resize(n,a),this._onResize.fire({cols:n,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,a=!1){const l=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===n.fg&&c.getBg(0)===n.bg||(c=l.getBlankLine(n,a),this._cachedBlankLine=c),c.isWrapped=a;const m=l.ybase+l.scrollTop,w=l.ybase+l.scrollBottom;if(l.scrollTop===0){const v=l.lines.isFull;w===l.lines.length-1?v?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(w+1,0,c.clone()),v?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const v=w-m+1;l.lines.shiftElements(m+1,v-1,-1),l.lines.set(w,c.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(n,a,l){const c=this.buffer;if(n<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else n+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const m=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+n,c.ybase),0),m!==c.ydisp&&(a||this._onScroll.fire(c.ydisp))}};i.BufferService=u=f([_(0,y.IOptionsService)],u)},7994:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(x,i,o){var f=this&&this.__decorate||function(c,m,w,v){var b,C=arguments.length,L=C<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,w):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,m,w,v);else for(var E=c.length-1;E>=0;E--)(b=c[E])&&(L=(C<3?b(L):C>3?b(m,w,L):b(m,w))||L);return C>3&&L&&Object.defineProperty(m,w,L),L},_=this&&this.__param||function(c,m){return function(w,v){m(w,v,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=o(2585),p=o(8460),S=o(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function u(c,m){let w=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(w|=64,w|=c.action):(w|=3&c.button,4&c.button&&(w|=64),8&c.button&&(w|=128),c.action===32?w|=32:c.action!==0||m||(w|=3)),w}const n=String.fromCharCode,a={DEFAULT:c=>{const m=[u(c,!1)+32,c.col+32,c.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${u(c,!0)};${c.col};${c.row}${m}`},SGR_PIXELS:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${u(c,!0)};${c.x};${c.y}${m}`}};let l=i.CoreMouseService=class extends S.Disposable{constructor(c,m){super(),this._bufferService=c,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(y))this.addProtocol(w,y[w]);for(const w of Object.keys(a))this.addEncoding(w,a[w]);this.reset()}addProtocol(c,m){this._protocols[c]=m}addEncoding(c,m){this._encodings[c]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const m=this._encodings[this._activeEncoding](c);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,m,w){if(w){if(c.x!==m.x||c.y!==m.y)return!1}else if(c.col!==m.col||c.row!==m.row)return!1;return c.button===m.button&&c.action===m.action&&c.ctrl===m.ctrl&&c.alt===m.alt&&c.shift===m.shift}};i.CoreMouseService=l=f([_(0,h.IBufferService),_(1,h.ICoreService)],l)},6975:function(x,i,o){var f=this&&this.__decorate||function(l,c,m,w){var v,b=arguments.length,C=b<3?c:w===null?w=Object.getOwnPropertyDescriptor(c,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,w);else for(var L=l.length-1;L>=0;L--)(v=l[L])&&(C=(b<3?v(C):b>3?v(c,m,C):v(c,m))||C);return b>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,w){c(m,w,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=o(1439),p=o(8460),S=o(844),y=o(2585),u=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends S.Disposable{constructor(l,c,m){super(),this._bufferService=l,this._logService=c,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(u),this.decPrivateModes=(0,h.clone)(n)}reset(){this.modes=(0,h.clone)(u),this.decPrivateModes=(0,h.clone)(n)}triggerDataEvent(l,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(w=>w.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(l))}};i.CoreService=a=f([_(0,y.IBufferService),_(1,y.ILogService),_(2,y.IOptionsService)],a)},9074:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),_=o(8460),h=o(844),p=o(6106);let S=0,y=0;class u extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(l=>l?.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const c=new n(l);if(c){const m=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),m.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,c,m){let w=0,v=0;for(const b of this._decorations.getKeyIterator(c))w=b.options.x??0,v=w+(b.options.width??1),l>=w&&l<v&&(!m||(b.options.layer??"bottom")===m)&&(yield b)}forEachDecorationAtCell(l,c,m,w){this._decorations.forEachByKey(c,v=>{S=v.options.x??0,y=S+(v.options.width??1),l>=S&&l<y&&(!m||(v.options.layer??"bottom")===m)&&w(v)})}}i.DecorationService=u;class n extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),_=o(8343);class h{constructor(...S){this._entries=new Map;for(const[y,u]of S)this.set(y,u)}set(S,y){const u=this._entries.get(S);return this._entries.set(S,y),u}forEach(S){for(const[y,u]of this._entries.entries())S(y,u)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(f.IInstantiationService,this)}setService(p,S){this._services.set(p,S)}getService(p){return this._services.get(p)}createInstance(p,...S){const y=(0,_.getServiceDependencies)(p).sort((a,l)=>a.index-l.index),u=[];for(const a of y){const l=this._services.get(a.id);if(!l)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${a.id}.`);u.push(l)}const n=y.length>0?y[0].index:S.length;if(S.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${S.length} static arguments`);return new p(...S,...u)}}},7866:function(x,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,w=arguments.length,v=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var b=n.length-1;b>=0;b--)(m=n[b])&&(v=(w<3?m(v):w>3?m(a,l,v):m(a,l))||v);return w>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(844),p=o(2585),S={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let y,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){y=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(y.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);y.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const w=c.apply(this,m);return y.trace(`GlyphRenderer#${c.name} return`,w),w}}},7302:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),_=o(844),h=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends _.Disposable{constructor(u){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const a in u)if(a in n)try{const l=u[a];n[a]=this._sanitizeAndValidateOption(a,l)}catch(l){console.error(l)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,n){return this.onOptionChange(a=>{a===u&&n(this.rawOptions[u])})}onMultipleOptionChange(u,n){return this.onOptionChange(a=>{u.indexOf(a)!==-1&&n()})}_setupOptions(){const u=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},n=(a,l)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);l=this._sanitizeAndValidateOption(a,l),this.rawOptions[a]!==l&&(this.rawOptions[a]=l,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const l={get:u.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this.options,a,l)}}_sanitizeAndValidateOption(u,n){switch(u){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[u]),!function(a){return a==="block"||a==="underline"||a==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${u}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${u} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${u} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=S},2660:function(x,i,o){var f=this&&this.__decorate||function(S,y,u,n){var a,l=arguments.length,c=l<3?y:n===null?n=Object.getOwnPropertyDescriptor(y,u):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(S,y,u,n);else for(var m=S.length-1;m>=0;m--)(a=S[m])&&(c=(l<3?a(c):l>3?a(y,u,c):a(y,u))||c);return l>3&&c&&Object.defineProperty(y,u,c),c},_=this&&this.__param||function(S,y){return function(u,n){y(u,n,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=o(2585);let p=i.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const y=this._bufferService.buffer;if(S.id===void 0){const m=y.addMarker(y.ybase+y.y),w={data:S,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(w,m)),this._dataByLinkId.set(w.id,w),w.id}const u=S,n=this._getEntryIdKey(u),a=this._entriesWithId.get(n);if(a)return this.addLineToLink(a.id,y.ybase+y.y),a.id;const l=y.addMarker(y.ybase+y.y),c={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(S,y){const u=this._dataByLinkId.get(S);if(u&&u.lines.every(n=>n.line!==y)){const n=this._bufferService.buffer.addMarker(y);u.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(u,n))}}getLinkData(S){return this._dataByLinkId.get(S)?.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,y){const u=S.lines.indexOf(y);u!==-1&&(S.lines.splice(u,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};i.OscLinkService=p=f([_(0,h.IBufferService)],p)},8343:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,S,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,y)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},2585:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),_=o(225);class h{static extractShouldJoin(S){return(1&S)!=0}static extractWidth(S){return S>>1&3}static extractCharKind(S){return S>>3}static createPropertyValue(S,y,u=!1){return(16777215&S)<<3|(3&y)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const S=new _.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(S){if(!this._providers[S])throw new Error(`unknown Unicode version "${S}"`);this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)}register(S){this._providers[S.version]=S}wcwidth(S){return this._activeProvider.wcwidth(S)}getStringCellWidth(S){let y=0,u=0;const n=S.length;for(let a=0;a<n;++a){let l=S.charCodeAt(a);if(55296<=l&&l<=56319){if(++a>=n)return y+this.wcwidth(l);const w=S.charCodeAt(a);56320<=w&&w<=57343?l=1024*(l-55296)+w-56320+65536:y+=this.wcwidth(w)}const c=this.charProperties(l,u);let m=h.extractWidth(c);h.extractShouldJoin(c)&&(m-=h.extractWidth(u)),y+=m,u=c}return y}charProperties(S,y){return this._activeProvider.charProperties(S,y)}}i.UnicodeService=h}},s={};function d(x){var i=s[x];if(i!==void 0)return i.exports;var o=s[x]={exports:{}};return r[x].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.Terminal=void 0;const i=d(9042),o=d(3236),f=d(844),_=d(5741),h=d(8285),p=d(7975),S=d(7090),y=["cols","rows"];class u extends f.Disposable{constructor(a){super(),this._core=this.register(new o.Terminal(a)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const l=m=>this._core.options[m],c=(m,w)=>{this._checkReadonlyOptions(m),this._core.options[m]=w};for(const m in this._core.options){const w={get:l.bind(this,m),set:c.bind(this,m)};Object.defineProperty(this._publicOptions,m,w)}}_checkReadonlyOptions(a){if(y.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const l in a)this._publicOptions[l]=a[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,l=!0){this._core.input(a,l)}resize(a,l){this._verifyIntegers(a,l),this._core.resize(a,l)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,l,c){this._verifyIntegers(a,l,c),this._core.select(a,l,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,l){this._verifyIntegers(a,l),this._core.selectLines(a,l)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,l){this._core.write(a,l)}writeln(a,l){this._core.write(a),this._core.write(`\r
`,l)}paste(a){this._core.paste(a)}refresh(a,l){this._verifyIntegers(a,l),this._core.refresh(a,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const l of a)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const l of a)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}x.Terminal=u})(),g})())})(df);var Tm=df.exports,_f={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const g=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(g._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,g=d._renderService.dimensions;if(g.css.cell.width===0||g.css.cell.height===0)return;const x=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),h=o-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=f-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-x;return{cols:Math.max(2,Math.floor(p/g.css.cell.width)),rows:Math.max(1,Math.floor(h/g.css.cell.height))}}}})(),r})())})(_f);var Bm=_f.exports,pf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=o(374),_=o(509),h=o(855),p=o(859),S=o(381),y=11,u=y*Float32Array.BYTES_PER_ELEMENT;let n,a=0,l=0,c=0;class m extends p.Disposable{constructor(v,b,C,L){super(),this._terminal=v,this._gl=b,this._dimensions=C,this._optionsService=L,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const E=this._gl;_.TextureAtlas.maxAtlasPages===void 0&&(_.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),_.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,S.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function($){let F="";for(let B=1;B<$;B++)F+=` else if (v_texpage == ${B}) { outColor = texture(u_texture[${B}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${$}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${F}
}`}(_.TextureAtlas.maxAtlasPages))),this.register((0,p.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);const R=new Float32Array([0,0,1,0,0,1,1,1]),k=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(k))),E.bindBuffer(E.ARRAY_BUFFER,k),E.bufferData(E.ARRAY_BUFFER,R,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),T=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(T))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,T),E.bufferData(E.ELEMENT_ARRAY_BUFFER,D,E.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(E.createBuffer()),this.register((0,p.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,u,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,u,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,u,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,u,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,u,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,u,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);const N=new Int32Array(_.TextureAtlas.maxAtlasPages);for(let $=0;$<_.TextureAtlas.maxAtlasPages;$++)N[$]=$;E.uniform1iv(this._textureLocation,N),E.uniformMatrix4fv(this._projectionLocation,!1,S.PROJECTION_MATRIX),this._atlasTextures=[];for(let $=0;$<_.TextureAtlas.maxAtlasPages;$++){const F=new S.GLTexture((0,f.throwIfFalsy)(E.createTexture()));this.register((0,p.toDisposable)(()=>E.deleteTexture(F.texture))),E.activeTexture(E.TEXTURE0+$),E.bindTexture(E.TEXTURE_2D,F.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[$]=F}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(v,b,C,L,E,R,k,D,T){this._updateCell(this._vertices.attributes,v,b,C,L,E,R,k,D,T)}_updateCell(v,b,C,L,E,R,k,D,T,N){a=(C*this._terminal.cols+b)*y,L!==h.NULL_CELL_CODE&&L!==void 0?this._atlas&&(n=D&&D.length>1?this._atlas.getRasterizedGlyphCombinedChar(D,E,R,k,!1):this._atlas.getRasterizedGlyph(L,E,R,k,!1),l=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==N&&n.offset.x>l?(c=n.offset.x-l,v[a]=-(n.offset.x-c)+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=(n.size.x-c)/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x+c/this._atlas.pages[n.texturePage].canvas.width,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x-c/this._atlas.pages[n.texturePage].canvas.width,v[a+8]=n.sizeClipSpace.y):(v[a]=-n.offset.x+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=n.size.x/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x,v[a+8]=n.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(L,T,n.size.x,this._dimensions.device.cell.width)&&(v[a+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):v.fill(0,a,a+y-1-2)}clear(){const v=this._terminal,b=v.cols*v.rows*y;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let C=0;for(;C<this._vertices.attributesBuffers.length;C++)this._vertices.count!==b?this._vertices.attributesBuffers[C]=new Float32Array(b):this._vertices.attributesBuffers[C].fill(0);this._vertices.count=b,C=0;for(let L=0;L<v.rows;L++)for(let E=0;E<v.cols;E++)this._vertices.attributes[C+9]=E/v.cols,this._vertices.attributes[C+10]=L/v.rows,C+=y}handleResize(){const v=this._gl;v.useProgram(this._program),v.viewport(0,0,v.canvas.width,v.canvas.height),v.uniform2f(this._resolutionLocation,v.canvas.width,v.canvas.height),this.clear()}render(v){if(!this._atlas)return;const b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const C=this._vertices.attributesBuffers[this._activeBuffer];let L=0;for(let E=0;E<v.lineLengths.length;E++){const R=E*this._terminal.cols*y,k=this._vertices.attributes.subarray(R,R+v.lineLengths[E]*y);C.set(k,L),L+=k.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,C.subarray(0,L),b.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(b,this._atlas,E);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,L/y)}setAtlas(v){this._atlas=v;for(const b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(v,b,C){v.activeTexture(v.TEXTURE0+C),v.bindTexture(v.TEXTURE_2D,this._atlasTextures[C].texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,b.pages[C].canvas),v.generateMipmap(v.TEXTURE_2D),this._atlasTextures[C].version=b.pages[C].version}setDimensions(v){this._dimensions=v}}i.GlyphRenderer=m},742:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=o(374),_=o(859),h=o(310),p=o(381),S=8*Float32Array.BYTES_PER_ELEMENT;class y{constructor(){this.attributes=new Float32Array(160),this.count=0}}let u=0,n=0,a=0,l=0,c=0,m=0,w=0;class v extends _.Disposable{constructor(C,L,E,R){super(),this._terminal=C,this._gl=L,this._dimensions=E,this._themeService=R,this._vertices=new y,this._verticesCursor=new y;const k=this._gl;this._program=(0,f.throwIfFalsy)((0,p.createProgram)(k,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,_.toDisposable)(()=>k.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(k.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=k.createVertexArray(),k.bindVertexArray(this._vertexArrayObject);const D=new Float32Array([0,0,1,0,0,1,1,1]),T=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer(T))),k.bindBuffer(k.ARRAY_BUFFER,T),k.bufferData(k.ARRAY_BUFFER,D,k.STATIC_DRAW),k.enableVertexAttribArray(3),k.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const N=new Uint8Array([0,1,2,3]),$=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer($))),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,$),k.bufferData(k.ELEMENT_ARRAY_BUFFER,N,k.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(k.createBuffer()),this.register((0,_.toDisposable)(()=>k.deleteBuffer(this._attributesBuffer))),k.bindBuffer(k.ARRAY_BUFFER,this._attributesBuffer),k.enableVertexAttribArray(0),k.vertexAttribPointer(0,2,k.FLOAT,!1,S,0),k.vertexAttribDivisor(0,1),k.enableVertexAttribArray(1),k.vertexAttribPointer(1,2,k.FLOAT,!1,S,2*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(1,1),k.enableVertexAttribArray(2),k.vertexAttribPointer(2,4,k.FLOAT,!1,S,4*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(2,1),this._updateCachedColors(R.colors),this.register(this._themeService.onChangeColors(F=>{this._updateCachedColors(F),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(C){const L=this._gl;L.useProgram(this._program),L.bindVertexArray(this._vertexArrayObject),L.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),L.bindBuffer(L.ARRAY_BUFFER,this._attributesBuffer),L.bufferData(L.ARRAY_BUFFER,C.attributes,L.DYNAMIC_DRAW),L.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,L.UNSIGNED_BYTE,0,C.count)}handleResize(){this._updateViewportRectangle()}setDimensions(C){this._dimensions=C}_updateCachedColors(C){this._bgFloat=this._colorToFloat32Array(C.background),this._cursorFloat=this._colorToFloat32Array(C.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(C){const L=this._terminal,E=this._vertices;let R,k,D,T,N,$,F,B,M,A,O,I=1;for(R=0;R<L.rows;R++){for(D=-1,T=0,N=0,$=!1,k=0;k<L.cols;k++)F=(R*L.cols+k)*h.RENDER_MODEL_INDICIES_PER_CELL,B=C.cells[F+h.RENDER_MODEL_BG_OFFSET],M=C.cells[F+h.RENDER_MODEL_FG_OFFSET],A=!!(67108864&M),(B!==T||M!==N&&($||A))&&((T!==0||$&&N!==0)&&(O=8*I++,this._updateRectangle(E,O,N,T,D,k,R)),D=k,T=B,N=M,$=A);(T!==0||$&&N!==0)&&(O=8*I++,this._updateRectangle(E,O,N,T,D,L.cols,R))}E.count=I}updateCursor(C){const L=this._verticesCursor,E=C.cursor;if(!E||E.style==="block")return void(L.count=0);let R,k=0;E.style!=="bar"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(L.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(L.attributes,R,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(R=8*k++,this._addRectangleFloat(L.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),R=8*k++,this._addRectangleFloat(L.attributes,R,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),L.count=k}_updateRectangle(C,L,E,R,k,D,T){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:u=(16777215&E)<<8;break;default:u=this._themeService.colors.foreground.rgba}else switch(50331648&R){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&R].rgba;break;case 50331648:u=(16777215&R)<<8;break;default:u=this._themeService.colors.background.rgba}C.attributes.length<L+4&&(C.attributes=(0,p.expandFloat32Array)(C.attributes,this._terminal.rows*this._terminal.cols*8)),n=k*this._dimensions.device.cell.width,a=T*this._dimensions.device.cell.height,l=(u>>24&255)/255,c=(u>>16&255)/255,m=(u>>8&255)/255,w=1,this._addRectangle(C.attributes,L,n,a,(D-k)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,l,c,m,w)}_addRectangle(C,L,E,R,k,D,T,N,$,F){C[L]=E/this._dimensions.device.canvas.width,C[L+1]=R/this._dimensions.device.canvas.height,C[L+2]=k/this._dimensions.device.canvas.width,C[L+3]=D/this._dimensions.device.canvas.height,C[L+4]=T,C[L+5]=N,C[L+6]=$,C[L+7]=F}_addRectangleFloat(C,L,E,R,k,D,T){C[L]=E/this._dimensions.device.canvas.width,C[L+1]=R/this._dimensions.device.canvas.height,C[L+2]=k/this._dimensions.device.canvas.width,C[L+3]=D/this._dimensions.device.canvas.height,C[L+4]=T[0],C[L+5]=T[1],C[L+6]=T[2],C[L+7]=T[3]}_colorToFloat32Array(C){return new Float32Array([(C.rgba>>24&255)/255,(C.rgba>>16&255)/255,(C.rgba>>8&255)/255,(255&C.rgba)/255])}}i.RectangleRenderer=v},310:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=o(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(_,h){const p=_*h*i.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(h))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=o(820),_=o(274),h=o(627),p=o(457),S=o(56),y=o(374),u=o(345),n=o(859),a=o(147),l=o(782),c=o(855),m=o(965),w=o(742),v=o(310),b=o(733);class C extends n.Disposable{constructor(k,D,T,N,$,F,B,M,A){super(),this._terminal=k,this._characterJoinerService=D,this._charSizeService=T,this._coreBrowserService=N,this._coreService=$,this._decorationService=F,this._optionsService=B,this._themeService=M,this._cursorBlinkStateManager=new n.MutableDisposable,this._charAtlasDisposable=this.register(new n.MutableDisposable),this._observerDisposable=this.register(new n.MutableDisposable),this._model=new v.RenderModel,this._workCell=new l.CellData,this._workCell2=new l.CellData,this._rectangleRenderer=this.register(new n.MutableDisposable),this._glyphRenderer=this.register(new n.MutableDisposable),this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new u.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new u.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new _.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,B,this._themeService)],this.dimensions=(0,y.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(B.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const O={antialias:!1,depth:!1,preserveDrawingBuffer:A};if(this._gl=this._canvas.getContext("webgl2",O),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",I=>{console.log("webglcontextlost event received"),I.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(I)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",I=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,h.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,S.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(I,z)=>this._setCanvasDevicePixelDimensions(I,z)),this.register(this._coreBrowserService.onWindowChange(I=>{this._observerDisposable.value=(0,S.observeDevicePixelDimensions)(this._canvas,I,(z,U)=>this._setCanvasDevicePixelDimensions(z,U))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,n.toDisposable)(()=>{for(const I of this._renderLayers)I.dispose();this._canvas.parentElement?.removeChild(this._canvas),(0,h.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(k,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const T of this._renderLayers)T.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const k of this._renderLayers)k.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(const k of this._renderLayers)k.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(k,D,T){for(const N of this._renderLayers)N.handleSelectionChanged(this._terminal,k,D,T);this._model.selection.update(this._core,k,D,T),this._requestRedrawViewport()}handleCursorMove(){for(const k of this._renderLayers)k.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new w.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new m.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const k=(0,h.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==k&&(this._onChangeTextureAtlas.fire(k.pages[0].canvas),this._charAtlasDisposable.value=(0,n.getDisposeArrayDisposable)([(0,u.forwardEvent)(k.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,u.forwardEvent)(k.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=k,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(k){this._model.clear(),k&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(k){return-1}deregisterCharacterJoiner(k){return!1}renderRows(k,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const T of this._renderLayers)T.handleGridChanged(this._terminal,k,D);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(k,D),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(k,D){const T=this._core;let N,$,F,B,M,A,O,I,z,U,Q,Y,j,P,W=this._workCell;k=E(k,T.rows-1,0),D=E(D,T.rows-1,0);const G=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Z=G-T.buffer.ydisp,X=Math.min(this._terminal.buffer.active.cursorX,T.cols-1);let ae=-1;const J=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ue=!1;for($=k;$<=D;$++)for(F=$+T.buffer.ydisp,B=T.buffer.lines.get(F),this._model.lineLengths[$]=0,M=this._characterJoinerService.getJoinedCharacters(F),j=0;j<T.cols;j++)if(N=this._cellColorResolver.result.bg,B.loadCell(j,W),j===0&&(N=this._cellColorResolver.result.bg),A=!1,O=j,M.length>0&&j===M[0][0]&&(A=!0,I=M.shift(),W=new L(W,B.translateToString(!0,I[0],I[1]),I[1]-I[0]),O=I[1]-1),z=W.getChars(),U=W.getCode(),Y=($*T.cols+j)*v.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(W,j,F,this.dimensions.device.cell.width),J&&F===G&&(j===X&&(this._model.cursor={x:X,y:Z,width:W.getWidth(),style:this._coreBrowserService.isFocused?T.options.cursorStyle||"block":T.options.cursorInactiveStyle,cursorWidth:T.options.cursorWidth,dpr:this._devicePixelRatio},ae=X+W.getWidth()-1),j>=X&&j<=ae&&(this._coreBrowserService.isFocused&&(T.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&T.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),U!==c.NULL_CELL_CODE&&(this._model.lineLengths[$]=j+1),(this._model.cells[Y]!==U||this._model.cells[Y+v.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Y+v.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Y+v.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ue=!0,z.length>1&&(U|=v.COMBINED_CHAR_BIT_MASK),this._model.cells[Y]=U,this._model.cells[Y+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Y+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Y+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,Q=W.getWidth(),this._glyphRenderer.value.updateCell(j,$,U,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,z,Q,N),A))for(W=this._workCell,j++;j<O;j++)P=($*T.cols+j)*v.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(j,$,c.NULL_CELL_CODE,0,0,0,c.NULL_CELL_CHAR,0,0),this._model.cells[P]=c.NULL_CELL_CODE,this._model.cells[P+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[P+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[P+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ue&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(k,D){this._canvas.width===k&&this._canvas.height===D||(this._canvas.width=k,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const k=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:k,end:k})}}i.WebglRenderer=C;class L extends a.AttributeData{constructor(k,D,T){super(),this.content=0,this.combinedData="",this.fg=k.fg,this.bg=k.bg,this.combinedData=D,this._width=T}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(k){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(R,k,D=0){return Math.max(Math.min(R,k),D)}i.JoinedCellData=L},381:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=o(374);function _(h,p,S){const y=(0,f.throwIfFalsy)(h.createShader(p));if(h.shaderSource(y,S),h.compileShader(y),h.getShaderParameter(y,h.COMPILE_STATUS))return y;console.error(h.getShaderInfoLog(y)),h.deleteShader(y)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(h,p,S){const y=(0,f.throwIfFalsy)(h.createProgram());if(h.attachShader(y,(0,f.throwIfFalsy)(_(h,h.VERTEX_SHADER,p))),h.attachShader(y,(0,f.throwIfFalsy)(_(h,h.FRAGMENT_SHADER,S))),h.linkProgram(y),h.getProgramParameter(y,h.LINK_STATUS))return y;console.error(h.getProgramInfoLog(y)),h.deleteProgram(y)},i.createShader=_,i.expandFloat32Array=function(h,p){const S=Math.min(2*h.length,p),y=new Float32Array(S);for(let u=0;u<h.length;u++)y[u]=h[u];return y},i.GLTexture=class{constructor(h){this.texture=h,this.version=-1}}},592:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(627),_=o(237),h=o(374),p=o(859);class S extends p.Disposable{constructor(u,n,a,l,c,m,w,v){super(),this._container=n,this._alpha=c,this._coreBrowserService=m,this._optionsService=w,this._themeService=v,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${a}-layer`),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(b=>{this._refreshCharAtlas(u,b),this.reset(u)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(u){}handleFocus(u){}handleCursorMove(u){}handleGridChanged(u,n,a){}handleSelectionChanged(u,n,a,l=!1){}_setTransparency(u,n){if(n===this._alpha)return;const a=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(u,this._themeService.colors),this.handleGridChanged(u,0,u.rows-1)}_refreshCharAtlas(u,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(u,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(u,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(u,this._themeService.colors)}_fillBottomLineAtCells(u,n,a=1){this._ctx.fillRect(u*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,a*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(u,n,a,l){this._alpha?this._ctx.clearRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight))}_fillCharTrueColor(u,n,a,l){this._ctx.font=this._getFont(u,!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipCell(a,l,n.getWidth()),this._ctx.fillText(n.getChars(),a*this._deviceCellWidth+this._deviceCharLeft,l*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(u,n,a){this._ctx.beginPath(),this._ctx.rect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(u,n,a){return`${a?"italic":""} ${n?u.options.fontWeightBold:u.options.fontWeight} ${u.options.fontSize*this._coreBrowserService.dpr}px ${u.options.fontFamily}`}}i.BaseRenderLayer=S},733:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),h=o(592);class p extends h.BaseRenderLayer{constructor(y,u,n,a,l,c,m){super(n,y,"link",u,!0,l,c,m),this.register(a.onShowLinkUnderline(w=>this._handleShowLinkUnderline(w))),this.register(a.onHideLinkUnderline(w=>this._handleHideLinkUnderline(w)))}resize(y,u){super.resize(y,u),this._state=void 0}reset(y){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const y=this._state.y2-this._state.y1-1;y>0&&this._clearCells(0,this._state.y1+1,this._state.cols,y),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(y){if(y.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:y.fg!==void 0&&(0,f.is256Color)(y.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[y.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,y.y1===y.y2)this._fillBottomLineAtCells(y.x1,y.y1,y.x2-y.x1);else{this._fillBottomLineAtCells(y.x1,y.y1,y.cols-y.x1);for(let u=y.y1+1;u<y.y2;u++)this._fillBottomLineAtCells(0,u,y.cols);this._fillBottomLineAtCells(0,y.y2,y.x2)}this._state=y}_handleHideLinkUnderline(y){this._clearCurrentLink()}}i.LinkRenderLayer=p},820:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,h){o.addEventListener(f,_,h);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,h))}}}},274:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),h=o(374);let p,S=0,y=0,u=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(c,m,w,v,b,C){this._terminal=c,this._optionService=m,this._selectionRenderModel=w,this._decorationService=v,this._coreBrowserService=b,this._themeService=C,this.result={fg:0,bg:0,ext:0}}resolve(c,m,w,v){if(this.result.bg=c.bg,this.result.fg=c.fg,this.result.ext=268435456&c.bg?c.extended.ext:0,y=0,S=0,n=!1,u=!1,a=!1,p=this._themeService.colors,l=0,c.getCode()!==f.NULL_CELL_CODE&&c.extended.underlineStyle===4){const b=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*v%(2*Math.round(b))}if(this._decorationService.forEachDecorationAtCell(m,w,"bottom",b=>{b.backgroundColorRGB&&(y=b.backgroundColorRGB.rgba>>8&16777215,n=!0),b.foregroundColorRGB&&(S=b.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,w),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:y=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:y=(16777215&this.result.fg)<<8|255;break;default:y=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:y=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:y=(16777215&this.result.bg)<<8|255}y=_.rgba.blend(y,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else y=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(S=p.selectionForeground.rgba>>8&16777215,u=!0),(0,h.treatGlyphAsBackgroundColor)(c.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,w,"top",b=>{b.backgroundColorRGB&&(y=b.backgroundColorRGB.rgba>>8&16777215,n=!0),b.foregroundColorRGB&&(S=b.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(y=a?-16777216&c.bg&-134217729|y|50331648:-16777216&c.bg|y|50331648),u&&(S=-16777216&c.fg&-67108865|S|50331648),67108864&this.result.fg&&(n&&!u&&(S=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(y=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?y:this.result.bg,this.result.fg=u?S:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),h=[];i.acquireTextureAtlas=function(p,S,y,u,n,a,l,c){const m=(0,_.generateConfig)(u,n,a,l,S,y,c);for(let b=0;b<h.length;b++){const C=h[b],L=C.ownedBy.indexOf(p);if(L>=0){if((0,_.configEquals)(C.config,m))return C.atlas;C.ownedBy.length===1?(C.atlas.dispose(),h.splice(b,1)):C.ownedBy.splice(L,1);break}}for(let b=0;b<h.length;b++){const C=h[b];if((0,_.configEquals)(C.config,m))return C.ownedBy.push(p),C.atlas}const w=p._core,v={atlas:new f.TextureAtlas(document,m,w.unicodeService),config:m,ownedBy:[p]};return h.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let S=0;S<h.length;S++){const y=h[S].ownedBy.indexOf(p);if(y!==-1){h[S].ownedBy.length===1?(h[S].atlas.dispose(),h.splice(S,1)):h[S].ownedBy.splice(y,1);break}}}},197:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,h,p,S,y,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:y.customGlyphs,devicePixelRatio:n,letterSpacing:y.letterSpacing,lineHeight:y.lineHeight,deviceCellWidth:_,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:S,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,fontWeightBold:y.fontWeightBold,allowTransparency:y.allowTransparency,drawBoldTextInBrightColors:y.drawBoldTextInBrightColors,minimumContrastRatio:y.minimumContrastRatio,colors:a}},i.configEquals=function(_,h){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===h.devicePixelRatio&&_.customGlyphs===h.customGlyphs&&_.lineHeight===h.lineHeight&&_.letterSpacing===h.letterSpacing&&_.fontFamily===h.fontFamily&&_.fontSize===h.fontSize&&_.fontWeight===h.fontWeight&&_.fontWeightBold===h.fontWeightBold&&_.allowTransparency===h.allowTransparency&&_.deviceCharWidth===h.deviceCharWidth&&_.deviceCharHeight===h.deviceCharHeight&&_.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&_.minimumContrastRatio===h.minimumContrastRatio&&_.colors.foreground.rgba===h.colors.foreground.rgba&&_.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,l,c,m,w,v){const b=i.blockElementDefinitions[n];if(b)return function(R,k,D,T,N,$){for(let F=0;F<k.length;F++){const B=k[F],M=N/8,A=$/8;R.fillRect(D+B.x*M,T+B.y*A,B.w*M,B.h*A)}}(u,b,a,l,c,m),!0;const C=_[n];if(C)return function(R,k,D,T,N,$){let F=h.get(k);F||(F=new Map,h.set(k,F));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let M=F.get(B);if(!M){const A=k[0].length,O=k.length,I=R.canvas.ownerDocument.createElement("canvas");I.width=A,I.height=O;const z=(0,f.throwIfFalsy)(I.getContext("2d")),U=new ImageData(A,O);let Q,Y,j,P;if(B.startsWith("#"))Q=parseInt(B.slice(1,3),16),Y=parseInt(B.slice(3,5),16),j=parseInt(B.slice(5,7),16),P=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[Q,Y,j,P]=B.substring(5,B.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<O;W++)for(let G=0;G<A;G++)U.data[4*(W*A+G)]=Q,U.data[4*(W*A+G)+1]=Y,U.data[4*(W*A+G)+2]=j,U.data[4*(W*A+G)+3]=k[W][G]*(255*P);z.putImageData(U,0,0),M=(0,f.throwIfFalsy)(R.createPattern(I,null)),F.set(B,M)}R.fillStyle=M,R.fillRect(D,T,N,$)}(u,C,a,l,c,m),!0;const L=i.boxDrawingDefinitions[n];if(L)return function(R,k,D,T,N,$,F){R.strokeStyle=R.fillStyle;for(const[B,M]of Object.entries(k)){let A;R.beginPath(),R.lineWidth=F*Number.parseInt(B),A=typeof M=="function"?M(.15,.15/$*N):M;for(const O of A.split(" ")){const I=O[0],z=S[I];if(!z){console.error(`Could not find drawing instructions for "${I}"`);continue}const U=O.substring(1).split(",");U[0]&&U[1]&&z(R,y(U,N,$,D,T,!0,F))}R.stroke(),R.closePath()}}(u,L,a,l,c,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,D,T,N,$,F,B){const M=new Path2D;M.rect(D,T,N,$),R.clip(M),R.beginPath();const A=F/12;R.lineWidth=B*A;for(const O of k.d.split(" ")){const I=O[0],z=S[I];if(!z){console.error(`Could not find drawing instructions for "${I}"`);continue}const U=O.substring(1).split(",");U[0]&&U[1]&&z(R,y(U,N,$,D,T,!1,B,(k.leftPadding??0)*(A/2),(k.rightPadding??0)*(A/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(u,E,a,l,c,m,w,v),!0)};const h=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const S={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function y(u,n,a,l,c,m,w,v=0,b=0){const C=u.map(L=>parseFloat(L)||parseInt(L));if(C.length<2)throw new Error("Too few arguments for instruction");for(let L=0;L<C.length;L+=2)C[L]*=n-v*w-b*w,m&&C[L]!==0&&(C[L]=p(Math.round(C[L]+.5)-.5,n,0)),C[L]+=l+v*w;for(let L=1;L<C.length;L+=2)C[L]*=a,m&&C[L]!==0&&(C[L]=p(Math.round(C[L]+.5)-.5,a,0)),C[L]+=c;return C}},56:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,h,p){let S=new h.ResizeObserver(y=>{const u=y.find(l=>l.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return S?.disconnect(),void(S=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{S.observe(_,{box:["device-pixel-content-box"]})}catch{S.disconnect(),S=void 0}return(0,f.toDisposable)(()=>S?.disconnect())}},374:(x,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,S){return h===1&&p>Math.ceil(1.5*S)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(y){return 57344<=y&&y<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},296:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,S=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const y=_.buffers.active.ydisp,u=h[1]-y,n=p[1]-y,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),h=o(374),p=o(160),S=o(345),y=o(485),u=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let c;class m{get pages(){return this._pages}constructor(L,E,R){this._document=L,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new y.FourKeyMap,this._cacheMapCombined=new y.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new S.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new S.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(L,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const L of this.pages)L.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const L=new u.IdleTaskQueue;for(let E=33;E<126;E++)L.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const L of this._pages)L.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(F=>2*F.canvas.width<=(m.maxTextureSize||4096)).sort((F,B)=>B.canvas.width!==F.canvas.width?B.canvas.width-F.canvas.width:B.percentageUsed-F.percentageUsed);let R=-1,k=0;for(let F=0;F<E.length;F++)if(E[F].canvas.width!==k)R=F,k=E[F].canvas.width;else if(F-R==3)break;const D=E.slice(R,R+4),T=D.map(F=>F.glyphs[0].texturePage).sort((F,B)=>F>B?1:-1),N=this.pages.length-D.length,$=this._mergePages(D,N);$.version++;for(let F=T.length-1;F>=0;F--)this._deletePage(T[F]);this.pages.push($),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)}const L=new w(this._document,this._textureSize);return this._pages.push(L),this._activePages.push(L),this._onAddTextureAtlasCanvas.fire(L.canvas),L}_mergePages(L,E){const R=2*L[0].canvas.width,k=new w(this._document,R,L);for(const[D,T]of L.entries()){const N=D*T.canvas.width%R,$=Math.floor(D/2)*T.canvas.height;k.ctx.drawImage(T.canvas,N,$);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=N,B.texturePosition.y+=$,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const F=this._activePages.indexOf(T);F!==-1&&this._activePages.splice(F,1)}return k}_deletePage(L){this._pages.splice(L,1);for(let E=L;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(L,E,R,k,D){return this._getFromCacheMap(this._cacheMapCombined,L,E,R,k,D)}getRasterizedGlyph(L,E,R,k,D){return this._getFromCacheMap(this._cacheMap,L,E,R,k,D)}_getFromCacheMap(L,E,R,k,D,T=!1){return c=L.get(E,R,k,D),c||(c=this._drawToCache(E,R,k,D,T),L.set(E,R,k,D,c)),c}_getColorFromAnsiIndex(L){if(L>=this._config.colors.ansi.length)throw new Error("No color found for idx "+L);return this._config.colors.ansi[L]}_getBackgroundColor(L,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(L){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(L,E,R,k,D,T,N,$,F,B){const M=this._getMinimumContrastColor(L,E,R,k,D,T,N,F,$,B);if(M)return M;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&F&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const O=n.AttributeData.toColorRGB(T);A=p.channels.toColor(O[0],O[1],O[2]);break;default:A=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),$&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(L,E,R){switch(L){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(L,E,R,k){switch(L){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(L,E,R,k,D,T,N,$,F,B){if(this._config.minimumContrastRatio===1||B)return;const M=this._getContrastCache(F),A=M.getColor(L,k);if(A!==void 0)return A||void 0;const O=this._resolveBackgroundRgba(E,R,N),I=this._resolveForegroundRgba(D,T,N,$),z=p.rgba.ensureContrastRatio(O,I,this._config.minimumContrastRatio/(F?2:1));if(!z)return void M.setColor(L,k,null);const U=p.channels.toColor(z>>24&255,z>>16&255,z>>8&255);return M.setColor(L,k,U),U}_getContrastCache(L){return L?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(L,E,R,k,D=!1){const T=typeof L=="number"?String.fromCharCode(L):L,N=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<N&&(this._tmpCanvas.width=N);const $=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<$&&(this._tmpCanvas.height=$),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return l;const F=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),M=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),I=!!this._workAttributeData.isStrikethrough(),z=!!this._workAttributeData.isOverline();let U=this._workAttributeData.getFgColor(),Q=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),j=this._workAttributeData.getBgColorMode();if(B){const V=U;U=Y,Y=V;const se=Q;Q=j,j=se}const P=this._getBackgroundColor(j,Y,B,M);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const W=F?this._config.fontWeightBold:this._config.fontWeight,G=A?"italic":"";this._tmpCtx.font=`${G} ${W} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Z=T.length===1&&(0,h.isPowerlineGlyph)(T.charCodeAt(0)),X=T.length===1&&(0,h.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),ae=this._getForegroundColor(E,j,Y,R,Q,U,B,M,F,(0,h.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=ae.css;const J=X?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,T,J,J,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let me,ne=!Z;if(me=typeof L=="number"?this._unicodeService.wcwidth(L):this._unicodeService.getStringCellWidth(L),O){this._tmpCtx.save();const V=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=V%2==1?.5:0;if(this._tmpCtx.lineWidth=V,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ne=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ne=!1;let _e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&_e<8&&(_e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(_e).css}this._tmpCtx.beginPath();const de=J,ce=Math.ceil(J+this._config.deviceCharHeight)-se-(D?2*V:0),qe=ce+V,Re=ce+2*V;let Me=this._workAttributeData.getUnderlineVariantOffset();for(let _e=0;_e<me;_e++){this._tmpCtx.save();const le=de+_e*this._config.deviceCellWidth,oe=de+(_e+1)*this._config.deviceCellWidth,Bt=le+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce),this._tmpCtx.moveTo(le,Re),this._tmpCtx.lineTo(oe,Re);break;case 3:const Pt=V<=1?Re:Math.ceil(J+this._config.deviceCharHeight-V/2)-se,Ot=V<=1?ce:Math.ceil(J+this._config.deviceCharHeight+V/2)-se,mi=new Path2D;mi.rect(le,ce,this._config.deviceCellWidth,Re-ce),this._tmpCtx.clip(mi),this._tmpCtx.moveTo(le-this._config.deviceCellWidth/2,qe),this._tmpCtx.bezierCurveTo(le-this._config.deviceCellWidth/2,Ot,le,Ot,le,qe),this._tmpCtx.bezierCurveTo(le,Pt,Bt,Pt,Bt,qe),this._tmpCtx.bezierCurveTo(Bt,Ot,oe,Ot,oe,qe),this._tmpCtx.bezierCurveTo(oe,Pt,oe+this._config.deviceCellWidth/2,Pt,oe+this._config.deviceCellWidth/2,qe);break;case 4:const It=Me===0?0:Me>=V?2*V-Me:V-Me;Me>=V||It===0?(this._tmpCtx.setLineDash([Math.round(V),Math.round(V)]),this._tmpCtx.moveTo(le+It,ce),this._tmpCtx.lineTo(oe,ce)):(this._tmpCtx.setLineDash([Math.round(V),Math.round(V)]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(le+It,ce),this._tmpCtx.moveTo(le+It+V,ce),this._tmpCtx.lineTo(oe,ce)),Me=(0,h.computeNextVariantOffset)(oe-le,V,Me);break;case 5:const io=.6,so=.3,Cr=oe-le,Ci=Math.floor(io*Cr),yi=Math.floor(so*Cr),no=Cr-Ci-yi;this._tmpCtx.setLineDash([Ci,yi,no]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce);break;default:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const _e=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in _e&&_e.actualBoundingBoxDescent>0){this._tmpCtx.save();const le=new Path2D;le.rect(de,ce-Math.ceil(V/2),this._config.deviceCellWidth*me,Re-ce+Math.ceil(V/2)),this._tmpCtx.clip(le),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(T,J,J+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(z){const V=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=V%2==1?.5:0;this._tmpCtx.lineWidth=V,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(J,J+se),this._tmpCtx.lineTo(J+this._config.deviceCharWidth*me,J+se),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(T,J,J+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let V=v(this._tmpCtx.getImageData(J,J,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,ne);if(V)for(let se=1;se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,J,J+this._config.deviceCharHeight-se),V=v(this._tmpCtx.getImageData(J,J,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,ne),V);se++);}if(I){const V=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=V,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(J,J+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.lineTo(J+this._config.deviceCharWidth*me,J+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ge=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Tt;if(Tt=this._config.allowTransparency?function(V){for(let se=0;se<V.data.length;se+=4)if(V.data[se+3]>0)return!1;return!0}(Ge):v(Ge,P,ae,ne),Tt)return l;const ie=this._findGlyphBoundingBox(Ge,this._workBoundingBox,N,X,ue,J);let ee,te;for(;;){if(this._activePages.length===0){const V=this._createNewPage();ee=V,te=V.currentRow,te.height=ie.size.y;break}ee=this._activePages[this._activePages.length-1],te=ee.currentRow;for(const V of this._activePages)ie.size.y<=V.currentRow.height&&(ee=V,te=V.currentRow);for(let V=this._activePages.length-1;V>=0;V--)for(const se of this._activePages[V].fixedRows)se.height<=te.height&&ie.size.y<=se.height&&(ee=this._activePages[V],te=se);if(te.y+ie.size.y>=ee.canvas.height||te.height>ie.size.y+2){let V=!1;if(ee.currentRow.y+ee.currentRow.height+ie.size.y>=ee.canvas.height){let se;for(const de of this._activePages)if(de.currentRow.y+de.currentRow.height+ie.size.y<de.canvas.height){se=de;break}if(se)ee=se;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&te.y+ie.size.y<=ee.canvas.height&&te.height>=ie.size.y&&te.x+ie.size.x<=ee.canvas.width)V=!0;else{const de=this._createNewPage();ee=de,te=de.currentRow,te.height=ie.size.y,V=!0}}V||(ee.currentRow.height>0&&ee.fixedRows.push(ee.currentRow),te={x:0,y:ee.currentRow.y+ee.currentRow.height,height:ie.size.y},ee.fixedRows.push(te),ee.currentRow={x:0,y:te.y+te.height,height:0})}if(te.x+ie.size.x<=ee.canvas.width)break;te===ee.currentRow?(te.x=0,te.y+=te.height,te.height=0):ee.fixedRows.splice(ee.fixedRows.indexOf(te),1)}return ie.texturePage=this._pages.indexOf(ee),ie.texturePosition.x=te.x,ie.texturePosition.y=te.y,ie.texturePositionClipSpace.x=te.x/ee.canvas.width,ie.texturePositionClipSpace.y=te.y/ee.canvas.height,ie.sizeClipSpace.x/=ee.canvas.width,ie.sizeClipSpace.y/=ee.canvas.height,te.height=Math.max(te.height,ie.size.y),te.x+=ie.size.x,ee.ctx.putImageData(Ge,ie.texturePosition.x-this._workBoundingBox.left,ie.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ie.size.x,ie.size.y),ee.addGlyph(ie),ee.version++,ie}_findGlyphBoundingBox(L,E,R,k,D,T){E.top=0;const N=k?this._config.deviceCellHeight:this._tmpCanvas.height,$=k?this._config.deviceCellWidth:R;let F=!1;for(let B=0;B<N;B++){for(let M=0;M<$;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(L.data[A]!==0){E.top=B,F=!0;break}}if(F)break}E.left=0,F=!1;for(let B=0;B<T+$;B++){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(L.data[A]!==0){E.left=B,F=!0;break}}if(F)break}E.right=$,F=!1;for(let B=T+$-1;B>=T;B--){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(L.data[A]!==0){E.right=B,F=!0;break}}if(F)break}E.bottom=N,F=!1;for(let B=N-1;B>=0;B--){for(let M=0;M<$;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(L.data[A]!==0){E.bottom=B,F=!0;break}}if(F)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class w{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(L){this._glyphs.push(L),this._usedPixels+=L.size.x*L.size.y}constructor(L,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=b(L,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(C,L,E,R){const k=L.rgba>>>24,D=L.rgba>>>16&255,T=L.rgba>>>8&255,N=E.rgba>>>24,$=E.rgba>>>16&255,F=E.rgba>>>8&255,B=Math.floor((Math.abs(k-N)+Math.abs(D-$)+Math.abs(T-F))/12);let M=!0;for(let A=0;A<C.data.length;A+=4)C.data[A]===k&&C.data[A+1]===D&&C.data[A+2]===T||R&&Math.abs(C.data[A]-k)+Math.abs(C.data[A+1]-D)+Math.abs(C.data[A+2]-T)<B?C.data[A+3]=0:M=!1;return M}function b(C,L,E){const R=C.createElement("canvas");return R.width=L,R.height=E,R}},160:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,S,y,u,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,w,v,b){return b!==void 0?`#${a(m)}${a(w)}${a(v)}${a(b)}`:`#${a(m)}${a(w)}${a(v)}`},c.toRgba=function(m,w,v,b=255){return(m<<24|w<<16|v<<8|b)>>>0},c.toColor=function(m,w,v,b){return{css:c.toCss(m,w,v,b),rgba:c.toRgba(m,w,v,b)}}}(p||(i.channels=p={})),function(c){function m(w,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(w.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}c.blend=function(w,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const b=v.rgba>>24&255,C=v.rgba>>16&255,L=v.rgba>>8&255,E=w.rgba>>24&255,R=w.rgba>>16&255,k=w.rgba>>8&255;return o=E+Math.round((b-E)*h),f=R+Math.round((C-R)*h),_=k+Math.round((L-k)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(w){return(255&w.rgba)==255},c.ensureContrastRatio=function(w,v,b){const C=n.ensureContrastRatio(w.rgba,v.rgba,b);if(C)return p.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(w){const v=(255|w.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(w,v){return h=255&w.rgba,m(w,h*v/255)},c.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(S||(i.color=S={})),function(c){let m,w;try{const v=document.createElement("canvas");v.width=1,v.height=1;const b=v.getContext("2d",{willReadFrequently:!0});b&&(m=b,m.globalCompositeOperation="copy",w=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const b=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return o=parseInt(b[1]),f=parseInt(b[2]),_=parseInt(b[3]),h=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),p.toColor(o,f,_,h);if(!m||!w)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=w,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(y||(i.css=y={})),function(c){function m(w,v,b){const C=w/255,L=v/255,E=b/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(w){return m(w>>16&255,w>>8&255,255&w)},c.relativeLuminance2=m}(u||(i.rgb=u={})),function(c){function m(v,b,C){const L=v>>24&255,E=v>>16&255,R=v>>8&255;let k=b>>24&255,D=b>>16&255,T=b>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));for(;N<C&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function w(v,b,C){const L=v>>24&255,E=v>>16&255,R=v>>8&255;let k=b>>24&255,D=b>>16&255,T=b>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));for(;N<C&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));return(k<<24|D<<16|T<<8|255)>>>0}c.blend=function(v,b){if(h=(255&b)/255,h===1)return b;const C=b>>24&255,L=b>>16&255,E=b>>8&255,R=v>>24&255,k=v>>16&255,D=v>>8&255;return o=R+Math.round((C-R)*h),f=k+Math.round((L-k)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,b,C){const L=u.relativeLuminance(v>>8),E=u.relativeLuminance(b>>8);if(l(L,E)<C){if(E<L){const D=m(v,b,C),T=l(L,u.relativeLuminance(D>>8));if(T<C){const N=w(v,b,C);return T>l(L,u.relativeLuminance(N>>8))?D:N}return D}const R=w(v,b,C),k=l(L,u.relativeLuminance(R>>8));if(k<C){const D=m(v,b,C);return k>l(L,u.relativeLuminance(D>>8))?R:D}return R}},c.reduceLuminance=m,c.increaseLuminance=w,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(x,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,S){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,S)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},399:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let y=0,u=0,n=S.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),u=Math.max(y,u),a=S.timeRemaining(),1.5*u>a)return n-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-y))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const y=Date.now()+S;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),h=o(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const u=new p;return u.setFromCharData(y),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(y[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(y[_.CHAR_DATA_CHAR_INDEX].length===2){const n=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|y[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=y[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let S=o[p];S>65535?(S-=65536,h+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):h+=String.fromCharCode(S)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const S=o.charCodeAt(p++);56320<=S&&S<=57343?f[h++]=1024*(this._interim-55296)+S-56320+65536:(f[h++]=this._interim,f[h++]=S),this._interim=0}for(let S=p;S<_;++S){const y=o.charCodeAt(S);if(55296<=y&&y<=56319){if(++S>=_)return this._interim=y,h;const u=o.charCodeAt(S);56320<=u&&u<=57343?f[h++]=1024*(y-55296)+u-56320+65536:(f[h++]=y,f[h++]=u)}else y!==65279&&(f[h++]=y)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,S,y,u=0,n=0,a=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let v,b=0;for(;(v=63&this.interim[++b])&&b<4;)w<<=6,w|=v;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=C-b;for(;a<L;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[b++]=v,w<<=6,w|=63&v}m||(C===2?w<128?a--:f[u++]=w:C===3?w<2048||w>=55296&&w<=57343||w===65279||(f[u++]=w):w<65536||w>1114111||(f[u++]=w)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(h=o[c])||128&(p=o[c+1])||128&(S=o[c+2])||128&(y=o[c+3]));)f[u++]=h,f[u++]=p,f[u++]=S,f[u++]=y,c+=4;if(h=o[c++],h<128)f[u++]=h;else if((224&h)==192){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&h)<<6|63&p,n<128){c--;continue}f[u++]=n}else if((240&h)==224){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(15&h)<<12|(63&p)<<6|63&S,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(S=o[c++],(192&S)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=S,u;if(y=o[c++],(192&y)!=128){c--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&S)<<6|63&y,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(x,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,w=arguments.length,v=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var b=n.length-1;b>=0;b--)(m=n[b])&&(v=(w<3?m(v):w>3?m(a,l,v):m(a,l))||v);return w>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(859),p=o(97),S={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let y,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){y=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(y.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);y.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const w=c.apply(this,m);return y.trace(`GlyphRenderer#${c.name} return`,w),w}}},726:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,S,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,y)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},97:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(x){var i=s[x];if(i!==void 0)return i.exports;var o=s[x]={exports:{}};return r[x].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.WebglAddon=void 0;const i=d(345),o=d(859),f=d(399),_=d(666),h=d(776);class p extends o.Disposable{constructor(y){if(f.isSafari&&(0,f.getSafariVersion)()<16){const u={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",u))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=y,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(y){const u=y._core;if(!y.element)return void this.register(u.onWillOpen(()=>this.activate(y)));this._terminal=y;const n=u.coreService,a=u.optionsService,l=u,c=l._renderService,m=l._characterJoinerService,w=l._charSizeService,v=l._coreBrowserService,b=l._decorationService,C=l._logService,L=l._themeService;(0,h.setTraceLogger)(C),this._renderer=this.register(new _.WebglRenderer(y,m,w,v,n,b,a,L,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),c.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(y.cols,y.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}x.WebglAddon=p})(),g})())})(pf);var Pm=pf.exports,gf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={903:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(274),_=o(627),h=o(237),p=o(860),S=o(374),y=o(296),u=o(345),n=o(859),a=o(399),l=o(855);class c extends n.Disposable{get canvas(){return this._canvas}get cacheCanvas(){return this._charAtlas?.pages[0].canvas}constructor(v,b,C,L,E,R,k,D,T,N){super(),this._terminal=v,this._container=b,this._alpha=E,this._themeService=R,this._bufferService=k,this._optionsService=D,this._decorationService=T,this._coreBrowserService=N,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,y.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new n.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new f.CellColorResolver(this._terminal,this._optionsService,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${C}-layer`),this._canvas.style.zIndex=L.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors($=>{this._refreshCharAtlas($),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,n.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,S.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(v,b){}handleSelectionChanged(v,b,C=!1){this._selectionModel.update(this._terminal._core,v,b,C)}_setTransparency(v){if(v===this._alpha)return;const b=this._canvas;this._alpha=v,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,b),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(v){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,_.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,v,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,u.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let b=0;b<this._charAtlas.pages.length;b++)this._bitmapGenerator[b]=new m(this._charAtlas.pages[b].canvas)}}resize(v){this._deviceCellWidth=v.device.cell.width,this._deviceCellHeight=v.device.cell.height,this._deviceCharWidth=v.device.char.width,this._deviceCharHeight=v.device.char.height,this._deviceCharLeft=v.device.char.left,this._deviceCharTop=v.device.char.top,this._canvas.width=v.device.canvas.width,this._canvas.height=v.device.canvas.height,this._canvas.style.width=`${v.css.canvas.width}px`,this._canvas.style.height=`${v.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){this._charAtlas?.clearTexture()}_fillCells(v,b,C,L){this._ctx.fillRect(v*this._deviceCellWidth,b*this._deviceCellHeight,C*this._deviceCellWidth,L*this._deviceCellHeight)}_fillMiddleLineAtCells(v,b,C=1){const L=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(v*this._deviceCellWidth,(b+1)*this._deviceCellHeight-L-this._coreBrowserService.dpr,C*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(v,b,C=1,L=0){this._ctx.fillRect(v*this._deviceCellWidth,(b+1)*this._deviceCellHeight+L-this._coreBrowserService.dpr-1,C*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(v,b,C=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const L=this._coreBrowserService.dpr;this._ctx.lineWidth=L;for(let E=0;E<C;E++){const R=(v+E)*this._deviceCellWidth,k=(v+E+.5)*this._deviceCellWidth,D=(v+E+1)*this._deviceCellWidth,T=(b+1)*this._deviceCellHeight-L-1,N=T-L,$=T+L;this._ctx.moveTo(R,T),this._ctx.bezierCurveTo(R,N,k,N,k,T),this._ctx.bezierCurveTo(k,$,D,$,D,T)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(v,b,C=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const L=this._coreBrowserService.dpr;this._ctx.lineWidth=L,this._ctx.setLineDash([2*L,L]);const E=v*this._deviceCellWidth,R=(b+1)*this._deviceCellHeight-L-1;this._ctx.moveTo(E,R);for(let k=0;k<C;k++){const D=(v+C+k)*this._deviceCellWidth;this._ctx.lineTo(D,R)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(v,b,C=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const L=this._coreBrowserService.dpr;this._ctx.lineWidth=L,this._ctx.setLineDash([4*L,3*L]);const E=v*this._deviceCellWidth,R=(v+C)*this._deviceCellWidth,k=(b+1)*this._deviceCellHeight-L-1;this._ctx.moveTo(E,k),this._ctx.lineTo(R,k),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(v,b,C){this._ctx.fillRect(v*this._deviceCellWidth,b*this._deviceCellHeight,this._coreBrowserService.dpr*C,this._deviceCellHeight)}_strokeRectAtCell(v,b,C,L){const E=this._coreBrowserService.dpr;this._ctx.lineWidth=E,this._ctx.strokeRect(v*this._deviceCellWidth+E/2,b*this._deviceCellHeight+E/2,C*this._deviceCellWidth-E,L*this._deviceCellHeight-E)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(v,b,C,L){this._alpha?this._ctx.clearRect(v*this._deviceCellWidth,b*this._deviceCellHeight,C*this._deviceCellWidth,L*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(v*this._deviceCellWidth,b*this._deviceCellHeight,C*this._deviceCellWidth,L*this._deviceCellHeight))}_fillCharTrueColor(v,b,C){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=h.TEXT_BASELINE,this._clipRow(C);let L=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(L=(0,p.tryDrawCustomChar)(this._ctx,v.getChars(),b*this._deviceCellWidth,C*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),L||this._ctx.fillText(v.getChars(),b*this._deviceCellWidth+this._deviceCharLeft,C*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(v,b,C){const L=v.getChars(),E=v.getCode(),R=v.getWidth();if(this._cellColorResolver.resolve(v,b,this._bufferService.buffer.ydisp+C,this._deviceCellWidth),!this._charAtlas)return;let k;if(k=L&&L.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(L,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(v.getCode()||l.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),!k.size.x||!k.size.y)return;this._ctx.save(),this._clipRow(C),this._bitmapGenerator[k.texturePage]&&this._charAtlas.pages[k.texturePage].canvas!==this._bitmapGenerator[k.texturePage].canvas&&(this._bitmapGenerator[k.texturePage]?.bitmap?.close(),delete this._bitmapGenerator[k.texturePage]),this._charAtlas.pages[k.texturePage].version!==this._bitmapGenerator[k.texturePage]?.version&&(this._bitmapGenerator[k.texturePage]||(this._bitmapGenerator[k.texturePage]=new m(this._charAtlas.pages[k.texturePage].canvas)),this._bitmapGenerator[k.texturePage].refresh(),this._bitmapGenerator[k.texturePage].version=this._charAtlas.pages[k.texturePage].version);let D=k.size.x;this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,S.allowRescaling)(E,R,k.size.x,this._deviceCellWidth)&&(D=this._deviceCellWidth-1),this._ctx.drawImage(this._bitmapGenerator[k.texturePage]?.bitmap||this._charAtlas.pages[k.texturePage].canvas,k.texturePosition.x,k.texturePosition.y,k.size.x,k.size.y,b*this._deviceCellWidth+this._deviceCharLeft-k.offset.x,C*this._deviceCellHeight+this._deviceCharTop-k.offset.y,D,k.size.y),this._ctx.restore()}_clipRow(v){this._ctx.beginPath(),this._ctx.rect(0,v*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(v,b){return`${b?"italic":""} ${v?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}i.BaseRenderLayer=c;class m{get bitmap(){return this._bitmap}constructor(v){this.canvas=v,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){this._bitmap?.close(),this._bitmap=void 0,a.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap?.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(v=>{this._state===2?this.refresh():this._bitmap=v,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasRenderer=void 0;const f=o(627),_=o(56),h=o(374),p=o(345),S=o(859),y=o(873),u=o(43),n=o(630),a=o(744);class l extends S.Disposable{constructor(m,w,v,b,C,L,E,R,k,D,T){super(),this._terminal=m,this._screenElement=w,this._bufferService=b,this._charSizeService=C,this._optionsService=L,this._coreBrowserService=k,this._themeService=T,this._observerDisposable=this.register(new S.MutableDisposable),this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const N=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new a.TextRenderLayer(this._terminal,this._screenElement,0,N,this._bufferService,this._optionsService,E,D,this._coreBrowserService,T),new n.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,D,this._optionsService,T),new u.LinkRenderLayer(this._terminal,this._screenElement,2,v,this._bufferService,this._optionsService,D,this._coreBrowserService,T),new y.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,R,this._coreBrowserService,D,T)];for(const $ of this._renderLayers)(0,p.forwardEvent)($.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,h.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,($,F)=>this._setCanvasDevicePixelDimensions($,F)),this.register(this._coreBrowserService.onWindowChange($=>{this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,$,(F,B)=>this._setCanvasDevicePixelDimensions(F,B))})),this.register((0,S.toDisposable)(()=>{for(const $ of this._renderLayers)$.dispose();(0,f.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(m,w){this._updateDimensions();for(const v of this._renderLayers)v.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(m=>m.handleBlur())}handleFocus(){this._runOperation(m=>m.handleFocus())}handleSelectionChanged(m,w,v=!1){this._runOperation(b=>b.handleSelectionChanged(m,w,v)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(m=>m.handleCursorMove())}clear(){this._runOperation(m=>m.reset())}_runOperation(m){for(const w of this._renderLayers)m(w)}renderRows(m,w){for(const v of this._renderLayers)v.handleGridChanged(m,w)}clearTextureAtlas(){for(const m of this._renderLayers)m.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const m=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*m),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*m),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/m),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/m),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(m,w){this.dimensions.device.canvas.height=w,this.dimensions.device.canvas.width=m;for(const v of this._renderLayers)v.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}i.CanvasRenderer=l},873:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;const f=o(457),_=o(859),h=o(399),p=o(782),S=o(903);class y extends S.BaseRenderLayer{constructor(n,a,l,c,m,w,v,b,C,L){super(n,a,"cursor",l,!0,L,m,w,C,b),this._onRequestRedraw=c,this._coreService=v,this._cursorBlinkStateManager=this.register(new _.MutableDisposable),this._cell=new p.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(w.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(n){super.resize(n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){this._clearCursor(),this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){this._cursorBlinkStateManager.value?.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){this._cursorBlinkStateManager.value?.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){this._cursorBlinkStateManager.value?.restartBlinkAnimation()}handleGridChanged(n,a){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,l=a-this._bufferService.buffer.ydisp;if(l<0||l>=this._bufferService.rows)return void this._clearCursor();const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(c,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=this._optionsService.rawOptions.cursorStyle,w=this._optionsService.rawOptions.cursorInactiveStyle;return w&&w!=="none"&&this._cursorRenderers[w](c,l,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=l,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===c&&this._state.y===l&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](c,l,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=l,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(h.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,a,l.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(l,n,a),this._ctx.restore()}_renderUnderlineCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,a),this._ctx.restore()}_renderOutlineCursor(n,a,l){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,a,l.getWidth(),1),this._ctx.restore()}}i.CursorRenderLayer=y},574:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0,i.GridCache=class{constructor(){this.cache=[]}resize(o,f){for(let _=0;_<o;_++){this.cache.length<=_&&this.cache.push([]);for(let h=this.cache[_].length;h<f;h++)this.cache[_].push(void 0);this.cache[_].length=f}this.cache.length=o}clear(){for(let o=0;o<this.cache.length;o++)for(let f=0;f<this.cache[o].length;f++)this.cache[o][f]=void 0}}},43:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),h=o(903);class p extends h.BaseRenderLayer{constructor(y,u,n,a,l,c,m,w,v){super(y,u,"link",n,!0,v,l,c,m,w),this.register(a.onShowLinkUnderline(b=>this._handleShowLinkUnderline(b))),this.register(a.onHideLinkUnderline(b=>this._handleHideLinkUnderline(b)))}resize(y){super.resize(y),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const y=this._state.y2-this._state.y1-1;y>0&&this._clearCells(0,this._state.y1+1,this._state.cols,y),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(y){if(y.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:y.fg&&(0,f.is256Color)(y.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[y.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,y.y1===y.y2)this._fillBottomLineAtCells(y.x1,y.y1,y.x2-y.x1);else{this._fillBottomLineAtCells(y.x1,y.y1,y.cols-y.x1);for(let u=y.y1+1;u<y.y2;u++)this._fillBottomLineAtCells(0,u,y.cols);this._fillBottomLineAtCells(0,y.y2,y.x2)}this._state=y}_handleHideLinkUnderline(y){this._clearCurrentLink()}}i.LinkRenderLayer=p},630:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;const f=o(903);class _ extends f.BaseRenderLayer{constructor(p,S,y,u,n,a,l,c){super(p,S,"selection",y,!0,c,u,l,a,n),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(p){super.resize(p),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(p,S,y){super.handleSelectionChanged(p,S,y),this._redrawSelection(p,S,y)}_redrawSelection(p,S,y){if(!this._didStateChange(p,S,y,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!p||!S)return void this._clearState();const u=p[1]-this._bufferService.buffer.ydisp,n=S[1]-this._bufferService.buffer.ydisp,a=Math.max(u,0),l=Math.min(n,this._bufferService.rows-1);if(a>=this._bufferService.rows||l<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,y){const c=p[0],m=S[0]-c,w=l-a+1;this._fillCells(c,a,m,w)}else{const c=u===a?p[0]:0,m=a===n?S[0]:this._bufferService.cols;this._fillCells(c,a,m-c,1);const w=Math.max(l-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,w),a!==l){const v=n===l?S[0]:this._bufferService.cols;this._fillCells(0,l,v,1)}}this._state.start=[p[0],p[1]],this._state.end=[S[0],S[1]],this._state.columnSelectMode=y,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(p,S,y,u){return!this._areCoordinatesEqual(p,this._state.start)||!this._areCoordinatesEqual(S,this._state.end)||y!==this._state.columnSelectMode||u!==this._state.ydisp}_areCoordinatesEqual(p,S){return!(!p||!S)&&p[0]===S[0]&&p[1]===S[1]}}i.SelectionRenderLayer=_},744:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;const f=o(577),_=o(147),h=o(782),p=o(855),S=o(903),y=o(574);class u extends S.BaseRenderLayer{constructor(a,l,c,m,w,v,b,C,L,E){super(a,l,"text",c,m,E,w,v,C,L),this._characterJoinerService=b,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new h.CellData,this._state=new y.GridCache,this.register(v.onSpecificOptionChange("allowTransparency",R=>this._setTransparency(R)))}resize(a){super.resize(a);const l=this._getFont(!1,!1);this._characterWidth===a.device.char.width&&this._characterFont===l||(this._characterWidth=a.device.char.width,this._characterFont=l,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(a,l,c){for(let m=a;m<=l;m++){const w=m+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.lines.get(w),b=this._characterJoinerService.getJoinedCharacters(w);for(let C=0;C<this._bufferService.cols;C++){v.loadCell(C,this._workCell);let L=this._workCell,E=!1,R=C;if(L.getWidth()!==0){if(b.length>0&&C===b[0][0]){E=!0;const k=b.shift();L=new f.JoinedCellData(this._workCell,v.translateToString(!0,k[0],k[1]),k[1]-k[0]),R=k[1]-1}!E&&this._isOverlapping(L)&&R<v.length-1&&v.getCodePoint(R+1)===p.NULL_CELL_CODE&&(L.content&=-12582913,L.content|=8388608),c(L,C,m),C=R}}}}_drawBackground(a,l){const c=this._ctx,m=this._bufferService.cols;let w=0,v=0,b=null;c.save(),this._forEachCell(a,l,(C,L,E)=>{let R=null;C.isInverse()?R=C.isFgDefault()?this._themeService.colors.foreground.css:C.isFgRGB()?`rgb(${_.AttributeData.toColorRGB(C.getFgColor()).join(",")})`:this._themeService.colors.ansi[C.getFgColor()].css:C.isBgRGB()?R=`rgb(${_.AttributeData.toColorRGB(C.getBgColor()).join(",")})`:C.isBgPalette()&&(R=this._themeService.colors.ansi[C.getBgColor()].css);let k=!1;this._decorationService.forEachDecorationAtCell(L,this._bufferService.buffer.ydisp+E,void 0,D=>{D.options.layer!=="top"&&k||(D.backgroundColorRGB&&(R=D.backgroundColorRGB.css),k=D.options.layer==="top")}),b===null&&(w=L,v=E),E!==v?(c.fillStyle=b||"",this._fillCells(w,v,m-w,1),w=L,v=E):b!==R&&(c.fillStyle=b||"",this._fillCells(w,v,L-w,1),w=L,v=E),b=R}),b!==null&&(c.fillStyle=b,this._fillCells(w,v,m-w,1)),c.restore()}_drawForeground(a,l){this._forEachCell(a,l,(c,m,w)=>this._drawChars(c,m,w))}handleGridChanged(a,l){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,l-a+1),this._drawBackground(a,l),this._drawForeground(a,l))}_isOverlapping(a){if(a.getWidth()!==1||a.getCode()<256)return!1;const l=a.getChars();if(this._characterOverlapCache.hasOwnProperty(l))return this._characterOverlapCache[l];this._ctx.save(),this._ctx.font=this._characterFont;const c=Math.floor(this._ctx.measureText(l).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[l]=c,c}}i.TextRenderLayer=u},274:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),h=o(374);let p,S=0,y=0,u=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(c,m,w,v,b,C){this._terminal=c,this._optionService=m,this._selectionRenderModel=w,this._decorationService=v,this._coreBrowserService=b,this._themeService=C,this.result={fg:0,bg:0,ext:0}}resolve(c,m,w,v){if(this.result.bg=c.bg,this.result.fg=c.fg,this.result.ext=268435456&c.bg?c.extended.ext:0,y=0,S=0,n=!1,u=!1,a=!1,p=this._themeService.colors,l=0,c.getCode()!==f.NULL_CELL_CODE&&c.extended.underlineStyle===4){const b=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*v%(2*Math.round(b))}if(this._decorationService.forEachDecorationAtCell(m,w,"bottom",b=>{b.backgroundColorRGB&&(y=b.backgroundColorRGB.rgba>>8&16777215,n=!0),b.foregroundColorRGB&&(S=b.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,w),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:y=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:y=(16777215&this.result.fg)<<8|255;break;default:y=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:y=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:y=(16777215&this.result.bg)<<8|255}y=_.rgba.blend(y,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else y=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(S=p.selectionForeground.rgba>>8&16777215,u=!0),(0,h.treatGlyphAsBackgroundColor)(c.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,w,"top",b=>{b.backgroundColorRGB&&(y=b.backgroundColorRGB.rgba>>8&16777215,n=!0),b.foregroundColorRGB&&(S=b.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(y=a?-16777216&c.bg&-134217729|y|50331648:-16777216&c.bg|y|50331648),u&&(S=-16777216&c.fg&-67108865|S|50331648),67108864&this.result.fg&&(n&&!u&&(S=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(y=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?y:this.result.bg,this.result.fg=u?S:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),h=[];i.acquireTextureAtlas=function(p,S,y,u,n,a,l,c){const m=(0,_.generateConfig)(u,n,a,l,S,y,c);for(let b=0;b<h.length;b++){const C=h[b],L=C.ownedBy.indexOf(p);if(L>=0){if((0,_.configEquals)(C.config,m))return C.atlas;C.ownedBy.length===1?(C.atlas.dispose(),h.splice(b,1)):C.ownedBy.splice(L,1);break}}for(let b=0;b<h.length;b++){const C=h[b];if((0,_.configEquals)(C.config,m))return C.ownedBy.push(p),C.atlas}const w=p._core,v={atlas:new f.TextureAtlas(document,m,w.unicodeService),config:m,ownedBy:[p]};return h.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let S=0;S<h.length;S++){const y=h[S].ownedBy.indexOf(p);if(y!==-1){h[S].ownedBy.length===1?(h[S].atlas.dispose(),h.splice(S,1)):h[S].ownedBy.splice(y,1);break}}}},197:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,h,p,S,y,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:y.customGlyphs,devicePixelRatio:n,letterSpacing:y.letterSpacing,lineHeight:y.lineHeight,deviceCellWidth:_,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:S,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,fontWeightBold:y.fontWeightBold,allowTransparency:y.allowTransparency,drawBoldTextInBrightColors:y.drawBoldTextInBrightColors,minimumContrastRatio:y.minimumContrastRatio,colors:a}},i.configEquals=function(_,h){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===h.devicePixelRatio&&_.customGlyphs===h.customGlyphs&&_.lineHeight===h.lineHeight&&_.letterSpacing===h.letterSpacing&&_.fontFamily===h.fontFamily&&_.fontSize===h.fontSize&&_.fontWeight===h.fontWeight&&_.fontWeightBold===h.fontWeightBold&&_.allowTransparency===h.allowTransparency&&_.deviceCharWidth===h.deviceCharWidth&&_.deviceCharHeight===h.deviceCharHeight&&_.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&_.minimumContrastRatio===h.minimumContrastRatio&&_.colors.foreground.rgba===h.colors.foreground.rgba&&_.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,l,c,m,w,v){const b=i.blockElementDefinitions[n];if(b)return function(R,k,D,T,N,$){for(let F=0;F<k.length;F++){const B=k[F],M=N/8,A=$/8;R.fillRect(D+B.x*M,T+B.y*A,B.w*M,B.h*A)}}(u,b,a,l,c,m),!0;const C=_[n];if(C)return function(R,k,D,T,N,$){let F=h.get(k);F||(F=new Map,h.set(k,F));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let M=F.get(B);if(!M){const A=k[0].length,O=k.length,I=R.canvas.ownerDocument.createElement("canvas");I.width=A,I.height=O;const z=(0,f.throwIfFalsy)(I.getContext("2d")),U=new ImageData(A,O);let Q,Y,j,P;if(B.startsWith("#"))Q=parseInt(B.slice(1,3),16),Y=parseInt(B.slice(3,5),16),j=parseInt(B.slice(5,7),16),P=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[Q,Y,j,P]=B.substring(5,B.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<O;W++)for(let G=0;G<A;G++)U.data[4*(W*A+G)]=Q,U.data[4*(W*A+G)+1]=Y,U.data[4*(W*A+G)+2]=j,U.data[4*(W*A+G)+3]=k[W][G]*(255*P);z.putImageData(U,0,0),M=(0,f.throwIfFalsy)(R.createPattern(I,null)),F.set(B,M)}R.fillStyle=M,R.fillRect(D,T,N,$)}(u,C,a,l,c,m),!0;const L=i.boxDrawingDefinitions[n];if(L)return function(R,k,D,T,N,$,F){R.strokeStyle=R.fillStyle;for(const[B,M]of Object.entries(k)){let A;R.beginPath(),R.lineWidth=F*Number.parseInt(B),A=typeof M=="function"?M(.15,.15/$*N):M;for(const O of A.split(" ")){const I=O[0],z=S[I];if(!z){console.error(`Could not find drawing instructions for "${I}"`);continue}const U=O.substring(1).split(",");U[0]&&U[1]&&z(R,y(U,N,$,D,T,!0,F))}R.stroke(),R.closePath()}}(u,L,a,l,c,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,D,T,N,$,F,B){const M=new Path2D;M.rect(D,T,N,$),R.clip(M),R.beginPath();const A=F/12;R.lineWidth=B*A;for(const O of k.d.split(" ")){const I=O[0],z=S[I];if(!z){console.error(`Could not find drawing instructions for "${I}"`);continue}const U=O.substring(1).split(",");U[0]&&U[1]&&z(R,y(U,N,$,D,T,!1,B,(k.leftPadding??0)*(A/2),(k.rightPadding??0)*(A/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(u,E,a,l,c,m,w,v),!0)};const h=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const S={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function y(u,n,a,l,c,m,w,v=0,b=0){const C=u.map(L=>parseFloat(L)||parseInt(L));if(C.length<2)throw new Error("Too few arguments for instruction");for(let L=0;L<C.length;L+=2)C[L]*=n-v*w-b*w,m&&C[L]!==0&&(C[L]=p(Math.round(C[L]+.5)-.5,n,0)),C[L]+=l+v*w;for(let L=1;L<C.length;L+=2)C[L]*=a,m&&C[L]!==0&&(C[L]=p(Math.round(C[L]+.5)-.5,a,0)),C[L]+=c;return C}},56:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,h,p){let S=new h.ResizeObserver(y=>{const u=y.find(l=>l.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return S?.disconnect(),void(S=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{S.observe(_,{box:["device-pixel-content-box"]})}catch{S.disconnect(),S=void 0}return(0,f.toDisposable)(()=>S?.disconnect())}},374:(x,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,S){return h===1&&p>Math.ceil(1.5*S)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(y){return 57344<=y&&y<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},296:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,S=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const y=_.buffers.active.ydisp,u=h[1]-y,n=p[1]-y,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),h=o(374),p=o(160),S=o(345),y=o(485),u=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let c;class m{get pages(){return this._pages}constructor(L,E,R){this._document=L,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new y.FourKeyMap,this._cacheMapCombined=new y.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new S.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new S.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(L,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const L of this.pages)L.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const L=new u.IdleTaskQueue;for(let E=33;E<126;E++)L.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const L of this._pages)L.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(F=>2*F.canvas.width<=(m.maxTextureSize||4096)).sort((F,B)=>B.canvas.width!==F.canvas.width?B.canvas.width-F.canvas.width:B.percentageUsed-F.percentageUsed);let R=-1,k=0;for(let F=0;F<E.length;F++)if(E[F].canvas.width!==k)R=F,k=E[F].canvas.width;else if(F-R==3)break;const D=E.slice(R,R+4),T=D.map(F=>F.glyphs[0].texturePage).sort((F,B)=>F>B?1:-1),N=this.pages.length-D.length,$=this._mergePages(D,N);$.version++;for(let F=T.length-1;F>=0;F--)this._deletePage(T[F]);this.pages.push($),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)}const L=new w(this._document,this._textureSize);return this._pages.push(L),this._activePages.push(L),this._onAddTextureAtlasCanvas.fire(L.canvas),L}_mergePages(L,E){const R=2*L[0].canvas.width,k=new w(this._document,R,L);for(const[D,T]of L.entries()){const N=D*T.canvas.width%R,$=Math.floor(D/2)*T.canvas.height;k.ctx.drawImage(T.canvas,N,$);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=N,B.texturePosition.y+=$,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const F=this._activePages.indexOf(T);F!==-1&&this._activePages.splice(F,1)}return k}_deletePage(L){this._pages.splice(L,1);for(let E=L;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(L,E,R,k,D){return this._getFromCacheMap(this._cacheMapCombined,L,E,R,k,D)}getRasterizedGlyph(L,E,R,k,D){return this._getFromCacheMap(this._cacheMap,L,E,R,k,D)}_getFromCacheMap(L,E,R,k,D,T=!1){return c=L.get(E,R,k,D),c||(c=this._drawToCache(E,R,k,D,T),L.set(E,R,k,D,c)),c}_getColorFromAnsiIndex(L){if(L>=this._config.colors.ansi.length)throw new Error("No color found for idx "+L);return this._config.colors.ansi[L]}_getBackgroundColor(L,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(L){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(L,E,R,k,D,T,N,$,F,B){const M=this._getMinimumContrastColor(L,E,R,k,D,T,N,F,$,B);if(M)return M;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&F&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const O=n.AttributeData.toColorRGB(T);A=p.channels.toColor(O[0],O[1],O[2]);break;default:A=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),$&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(L,E,R){switch(L){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(L,E,R,k){switch(L){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(L,E,R,k,D,T,N,$,F,B){if(this._config.minimumContrastRatio===1||B)return;const M=this._getContrastCache(F),A=M.getColor(L,k);if(A!==void 0)return A||void 0;const O=this._resolveBackgroundRgba(E,R,N),I=this._resolveForegroundRgba(D,T,N,$),z=p.rgba.ensureContrastRatio(O,I,this._config.minimumContrastRatio/(F?2:1));if(!z)return void M.setColor(L,k,null);const U=p.channels.toColor(z>>24&255,z>>16&255,z>>8&255);return M.setColor(L,k,U),U}_getContrastCache(L){return L?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(L,E,R,k,D=!1){const T=typeof L=="number"?String.fromCharCode(L):L,N=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<N&&(this._tmpCanvas.width=N);const $=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<$&&(this._tmpCanvas.height=$),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return l;const F=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),M=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),I=!!this._workAttributeData.isStrikethrough(),z=!!this._workAttributeData.isOverline();let U=this._workAttributeData.getFgColor(),Q=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),j=this._workAttributeData.getBgColorMode();if(B){const V=U;U=Y,Y=V;const se=Q;Q=j,j=se}const P=this._getBackgroundColor(j,Y,B,M);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const W=F?this._config.fontWeightBold:this._config.fontWeight,G=A?"italic":"";this._tmpCtx.font=`${G} ${W} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Z=T.length===1&&(0,h.isPowerlineGlyph)(T.charCodeAt(0)),X=T.length===1&&(0,h.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),ae=this._getForegroundColor(E,j,Y,R,Q,U,B,M,F,(0,h.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=ae.css;const J=X?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,T,J,J,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let me,ne=!Z;if(me=typeof L=="number"?this._unicodeService.wcwidth(L):this._unicodeService.getStringCellWidth(L),O){this._tmpCtx.save();const V=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=V%2==1?.5:0;if(this._tmpCtx.lineWidth=V,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ne=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ne=!1;let _e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&_e<8&&(_e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(_e).css}this._tmpCtx.beginPath();const de=J,ce=Math.ceil(J+this._config.deviceCharHeight)-se-(D?2*V:0),qe=ce+V,Re=ce+2*V;let Me=this._workAttributeData.getUnderlineVariantOffset();for(let _e=0;_e<me;_e++){this._tmpCtx.save();const le=de+_e*this._config.deviceCellWidth,oe=de+(_e+1)*this._config.deviceCellWidth,Bt=le+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce),this._tmpCtx.moveTo(le,Re),this._tmpCtx.lineTo(oe,Re);break;case 3:const Pt=V<=1?Re:Math.ceil(J+this._config.deviceCharHeight-V/2)-se,Ot=V<=1?ce:Math.ceil(J+this._config.deviceCharHeight+V/2)-se,mi=new Path2D;mi.rect(le,ce,this._config.deviceCellWidth,Re-ce),this._tmpCtx.clip(mi),this._tmpCtx.moveTo(le-this._config.deviceCellWidth/2,qe),this._tmpCtx.bezierCurveTo(le-this._config.deviceCellWidth/2,Ot,le,Ot,le,qe),this._tmpCtx.bezierCurveTo(le,Pt,Bt,Pt,Bt,qe),this._tmpCtx.bezierCurveTo(Bt,Ot,oe,Ot,oe,qe),this._tmpCtx.bezierCurveTo(oe,Pt,oe+this._config.deviceCellWidth/2,Pt,oe+this._config.deviceCellWidth/2,qe);break;case 4:const It=Me===0?0:Me>=V?2*V-Me:V-Me;Me>=V||It===0?(this._tmpCtx.setLineDash([Math.round(V),Math.round(V)]),this._tmpCtx.moveTo(le+It,ce),this._tmpCtx.lineTo(oe,ce)):(this._tmpCtx.setLineDash([Math.round(V),Math.round(V)]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(le+It,ce),this._tmpCtx.moveTo(le+It+V,ce),this._tmpCtx.lineTo(oe,ce)),Me=(0,h.computeNextVariantOffset)(oe-le,V,Me);break;case 5:const io=.6,so=.3,Cr=oe-le,Ci=Math.floor(io*Cr),yi=Math.floor(so*Cr),no=Cr-Ci-yi;this._tmpCtx.setLineDash([Ci,yi,no]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce);break;default:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const _e=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in _e&&_e.actualBoundingBoxDescent>0){this._tmpCtx.save();const le=new Path2D;le.rect(de,ce-Math.ceil(V/2),this._config.deviceCellWidth*me,Re-ce+Math.ceil(V/2)),this._tmpCtx.clip(le),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(T,J,J+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(z){const V=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=V%2==1?.5:0;this._tmpCtx.lineWidth=V,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(J,J+se),this._tmpCtx.lineTo(J+this._config.deviceCharWidth*me,J+se),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(T,J,J+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let V=v(this._tmpCtx.getImageData(J,J,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,ne);if(V)for(let se=1;se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,J,J+this._config.deviceCharHeight-se),V=v(this._tmpCtx.getImageData(J,J,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,ne),V);se++);}if(I){const V=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=V,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(J,J+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.lineTo(J+this._config.deviceCharWidth*me,J+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ge=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Tt;if(Tt=this._config.allowTransparency?function(V){for(let se=0;se<V.data.length;se+=4)if(V.data[se+3]>0)return!1;return!0}(Ge):v(Ge,P,ae,ne),Tt)return l;const ie=this._findGlyphBoundingBox(Ge,this._workBoundingBox,N,X,ue,J);let ee,te;for(;;){if(this._activePages.length===0){const V=this._createNewPage();ee=V,te=V.currentRow,te.height=ie.size.y;break}ee=this._activePages[this._activePages.length-1],te=ee.currentRow;for(const V of this._activePages)ie.size.y<=V.currentRow.height&&(ee=V,te=V.currentRow);for(let V=this._activePages.length-1;V>=0;V--)for(const se of this._activePages[V].fixedRows)se.height<=te.height&&ie.size.y<=se.height&&(ee=this._activePages[V],te=se);if(te.y+ie.size.y>=ee.canvas.height||te.height>ie.size.y+2){let V=!1;if(ee.currentRow.y+ee.currentRow.height+ie.size.y>=ee.canvas.height){let se;for(const de of this._activePages)if(de.currentRow.y+de.currentRow.height+ie.size.y<de.canvas.height){se=de;break}if(se)ee=se;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&te.y+ie.size.y<=ee.canvas.height&&te.height>=ie.size.y&&te.x+ie.size.x<=ee.canvas.width)V=!0;else{const de=this._createNewPage();ee=de,te=de.currentRow,te.height=ie.size.y,V=!0}}V||(ee.currentRow.height>0&&ee.fixedRows.push(ee.currentRow),te={x:0,y:ee.currentRow.y+ee.currentRow.height,height:ie.size.y},ee.fixedRows.push(te),ee.currentRow={x:0,y:te.y+te.height,height:0})}if(te.x+ie.size.x<=ee.canvas.width)break;te===ee.currentRow?(te.x=0,te.y+=te.height,te.height=0):ee.fixedRows.splice(ee.fixedRows.indexOf(te),1)}return ie.texturePage=this._pages.indexOf(ee),ie.texturePosition.x=te.x,ie.texturePosition.y=te.y,ie.texturePositionClipSpace.x=te.x/ee.canvas.width,ie.texturePositionClipSpace.y=te.y/ee.canvas.height,ie.sizeClipSpace.x/=ee.canvas.width,ie.sizeClipSpace.y/=ee.canvas.height,te.height=Math.max(te.height,ie.size.y),te.x+=ie.size.x,ee.ctx.putImageData(Ge,ie.texturePosition.x-this._workBoundingBox.left,ie.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ie.size.x,ie.size.y),ee.addGlyph(ie),ee.version++,ie}_findGlyphBoundingBox(L,E,R,k,D,T){E.top=0;const N=k?this._config.deviceCellHeight:this._tmpCanvas.height,$=k?this._config.deviceCellWidth:R;let F=!1;for(let B=0;B<N;B++){for(let M=0;M<$;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(L.data[A]!==0){E.top=B,F=!0;break}}if(F)break}E.left=0,F=!1;for(let B=0;B<T+$;B++){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(L.data[A]!==0){E.left=B,F=!0;break}}if(F)break}E.right=$,F=!1;for(let B=T+$-1;B>=T;B--){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(L.data[A]!==0){E.right=B,F=!0;break}}if(F)break}E.bottom=N,F=!1;for(let B=N-1;B>=0;B--){for(let M=0;M<$;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(L.data[A]!==0){E.bottom=B,F=!0;break}}if(F)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class w{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(L){this._glyphs.push(L),this._usedPixels+=L.size.x*L.size.y}constructor(L,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=b(L,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(C,L,E,R){const k=L.rgba>>>24,D=L.rgba>>>16&255,T=L.rgba>>>8&255,N=E.rgba>>>24,$=E.rgba>>>16&255,F=E.rgba>>>8&255,B=Math.floor((Math.abs(k-N)+Math.abs(D-$)+Math.abs(T-F))/12);let M=!0;for(let A=0;A<C.data.length;A+=4)C.data[A]===k&&C.data[A+1]===D&&C.data[A+2]===T||R&&Math.abs(C.data[A]-k)+Math.abs(C.data[A+1]-D)+Math.abs(C.data[A+2]-T)<B?C.data[A+3]=0:M=!1;return M}function b(C,L,E){const R=C.createElement("canvas");return R.width=L,R.height=E,R}},577:function(x,i,o){var f=this&&this.__decorate||function(a,l,c,m){var w,v=arguments.length,b=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(w=a[C])&&(b=(v<3?w(b):v>3?w(l,c,b):w(l,c))||b);return v>3&&b&&Object.defineProperty(l,c,b),b},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=o(147),p=o(855),S=o(782),y=o(97);class u extends h.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class vf{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],w=c.translateToString(!0);let v=0,b=0,C=0,L=c.getFg(0),E=c.getBg(0);for(let R=0;R<c.getTrimmedLength();R++)if(c.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==E){if(R-v>1){const k=this._getJoinedRanges(w,C,b,c,v);for(let D=0;D<k.length;D++)m.push(k[D])}v=R,C=b,L=this._workCell.fg,E=this._workCell.bg}b+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const R=this._getJoinedRanges(w,C,b,c,v);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(l,c,m,w,v){const b=l.substring(c,m);let C=[];try{C=this._characterJoiners[0].handler(b)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const E=this._characterJoiners[L].handler(b);for(let R=0;R<E.length;R++)vf._mergeRanges(C,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(C,w,v),C}_stringRangesToCellRanges(l,c,m){let w=0,v=!1,b=0,C=l[w];if(C){for(let L=m;L<this._bufferService.cols;L++){const E=c.getWidth(L),R=c.getString(L).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&C[0]<=b&&(C[0]=L,v=!0),C[1]<=b){if(C[1]=L,C=l[++w],!C)break;C[0]<=b?(C[0]=L,v=!0):v=!1}b+=R}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let w=0;w<l.length;w++){const v=l[w];if(m){if(c[1]<=v[0])return l[w-1][1]=c[1],l;if(c[1]<=v[1])return l[w-1][1]=Math.max(c[1],v[1]),l.splice(w,1),l;l.splice(w,1),w--}else{if(c[1]<=v[0])return l.splice(w,0,c),l;if(c[1]<=v[1])return v[0]=Math.min(c[0],v[0]),l;c[0]<v[1]&&(v[0]=Math.min(c[0],v[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([_(0,y.IBufferService)],n)},160:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,S,y,u,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,w,v,b){return b!==void 0?`#${a(m)}${a(w)}${a(v)}${a(b)}`:`#${a(m)}${a(w)}${a(v)}`},c.toRgba=function(m,w,v,b=255){return(m<<24|w<<16|v<<8|b)>>>0},c.toColor=function(m,w,v,b){return{css:c.toCss(m,w,v,b),rgba:c.toRgba(m,w,v,b)}}}(p||(i.channels=p={})),function(c){function m(w,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(w.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}c.blend=function(w,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const b=v.rgba>>24&255,C=v.rgba>>16&255,L=v.rgba>>8&255,E=w.rgba>>24&255,R=w.rgba>>16&255,k=w.rgba>>8&255;return o=E+Math.round((b-E)*h),f=R+Math.round((C-R)*h),_=k+Math.round((L-k)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(w){return(255&w.rgba)==255},c.ensureContrastRatio=function(w,v,b){const C=n.ensureContrastRatio(w.rgba,v.rgba,b);if(C)return p.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(w){const v=(255|w.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(w,v){return h=255&w.rgba,m(w,h*v/255)},c.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(S||(i.color=S={})),function(c){let m,w;try{const v=document.createElement("canvas");v.width=1,v.height=1;const b=v.getContext("2d",{willReadFrequently:!0});b&&(m=b,m.globalCompositeOperation="copy",w=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const b=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return o=parseInt(b[1]),f=parseInt(b[2]),_=parseInt(b[3]),h=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),p.toColor(o,f,_,h);if(!m||!w)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=w,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(y||(i.css=y={})),function(c){function m(w,v,b){const C=w/255,L=v/255,E=b/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(w){return m(w>>16&255,w>>8&255,255&w)},c.relativeLuminance2=m}(u||(i.rgb=u={})),function(c){function m(v,b,C){const L=v>>24&255,E=v>>16&255,R=v>>8&255;let k=b>>24&255,D=b>>16&255,T=b>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));for(;N<C&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function w(v,b,C){const L=v>>24&255,E=v>>16&255,R=v>>8&255;let k=b>>24&255,D=b>>16&255,T=b>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));for(;N<C&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(L,E,R));return(k<<24|D<<16|T<<8|255)>>>0}c.blend=function(v,b){if(h=(255&b)/255,h===1)return b;const C=b>>24&255,L=b>>16&255,E=b>>8&255,R=v>>24&255,k=v>>16&255,D=v>>8&255;return o=R+Math.round((C-R)*h),f=k+Math.round((L-k)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,b,C){const L=u.relativeLuminance(v>>8),E=u.relativeLuminance(b>>8);if(l(L,E)<C){if(E<L){const D=m(v,b,C),T=l(L,u.relativeLuminance(D>>8));if(T<C){const N=w(v,b,C);return T>l(L,u.relativeLuminance(N>>8))?D:N}return D}const R=w(v,b,C),k=l(L,u.relativeLuminance(R>>8));if(k<C){const D=m(v,b,C);return k>l(L,u.relativeLuminance(D>>8))?R:D}return R}},c.reduceLuminance=m,c.increaseLuminance=w,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(x,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,S){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,S)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},399:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let y=0,u=0,n=S.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),u=Math.max(y,u),a=S.timeRemaining(),1.5*u>a)return n-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-y))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const y=Date.now()+S;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),h=o(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const u=new p;return u.setFromCharData(y),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(y[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(y[_.CHAR_DATA_CHAR_INDEX].length===2){const n=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|y[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=y[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let S=o[p];S>65535?(S-=65536,h+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):h+=String.fromCharCode(S)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const S=o.charCodeAt(p++);56320<=S&&S<=57343?f[h++]=1024*(this._interim-55296)+S-56320+65536:(f[h++]=this._interim,f[h++]=S),this._interim=0}for(let S=p;S<_;++S){const y=o.charCodeAt(S);if(55296<=y&&y<=56319){if(++S>=_)return this._interim=y,h;const u=o.charCodeAt(S);56320<=u&&u<=57343?f[h++]=1024*(y-55296)+u-56320+65536:(f[h++]=y,f[h++]=u)}else y!==65279&&(f[h++]=y)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,S,y,u=0,n=0,a=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let v,b=0;for(;(v=63&this.interim[++b])&&b<4;)w<<=6,w|=v;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=C-b;for(;a<L;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[b++]=v,w<<=6,w|=63&v}m||(C===2?w<128?a--:f[u++]=w:C===3?w<2048||w>=55296&&w<=57343||w===65279||(f[u++]=w):w<65536||w>1114111||(f[u++]=w)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(h=o[c])||128&(p=o[c+1])||128&(S=o[c+2])||128&(y=o[c+3]));)f[u++]=h,f[u++]=p,f[u++]=S,f[u++]=y,c+=4;if(h=o[c++],h<128)f[u++]=h;else if((224&h)==192){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&h)<<6|63&p,n<128){c--;continue}f[u++]=n}else if((240&h)==224){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(15&h)<<12|(63&p)<<6|63&S,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(S=o[c++],(192&S)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=S,u;if(y=o[c++],(192&y)!=128){c--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&S)<<6|63&y,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(x,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,w=arguments.length,v=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var b=n.length-1;b>=0;b--)(m=n[b])&&(v=(w<3?m(v):w>3?m(a,l,v):m(a,l))||v);return w>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(859),p=o(97),S={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let y,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){y=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(y.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);y.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const w=c.apply(this,m);return y.trace(`GlyphRenderer#${c.name} return`,w),w}}},726:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,S,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,y)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},97:(x,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(x){var i=s[x];if(i!==void 0)return i.exports;var o=s[x]={exports:{}};return r[x].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.CanvasAddon=void 0;const i=d(345),o=d(859),f=d(776),_=d(949);class h extends o.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){return this._renderer?.textureAtlas}activate(S){const y=S._core;if(!S.element)return void this.register(y.onWillOpen(()=>this.activate(S)));this._terminal=S;const u=y.coreService,n=y.optionsService,a=y.screenElement,l=y.linkifier,c=y,m=c._bufferService,w=c._renderService,v=c._characterJoinerService,b=c._charSizeService,C=c._coreBrowserService,L=c._decorationService,E=c._logService,R=c._themeService;(0,f.setTraceLogger)(E),this._renderer=new _.CanvasRenderer(S,a,l,m,b,n,v,u,C,L,R),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),w.setRenderer(this._renderer),w.handleResize(m.cols,m.rows),this.register((0,o.toDisposable)(()=>{w.setRenderer(this._terminal._core._createRenderer()),w.handleResize(S.cols,S.rows),this._renderer?.dispose(),this._renderer=void 0}))}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}x.CanvasAddon=h})(),g})())})(gf);var Eh=gf.exports;const Om=8,Im=24,kh=12,Fm=()=>{const e=K.useRef(null),t=K.useRef(null),r=K.useRef(null),{subscribeOutput:s,sendInput:d,resize:g}=vr(),[x,i]=K.useState(()=>{const y=localStorage.getItem("terminal_font_size");return y?parseInt(y,10):kh}),o=K.useRef({initialDistance:0,initialFontSize:kh}),f=K.useCallback(()=>{if(r.current&&t.current){r.current.fit();const{cols:y,rows:u}=t.current;g(y,u)}},[g]),_=K.useCallback(y=>{const u=Math.max(Om,Math.min(Im,Math.round(y)));t.current&&u!==t.current.options.fontSize&&(t.current.options.fontSize=u,i(u),localStorage.setItem("terminal_font_size",String(u)),f())},[f]),h=y=>{if(y.length<2)return 0;const u=y[0].clientX-y[1].clientX,n=y[0].clientY-y[1].clientY;return Math.sqrt(u*u+n*n)},p=K.useCallback(y=>{y.touches.length===2&&(o.current={initialDistance:h(y.touches),initialFontSize:x})},[x]),S=K.useCallback(y=>{if(y.touches.length===2){const u=h(y.touches),{initialDistance:n,initialFontSize:a}=o.current;if(n>0){const l=u/n,c=a*l;_(c)}}},[_]);return K.useEffect(()=>{if(!e.current)return;const y=new Tm.Terminal({fontSize:x,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0d1117",foreground:"#e6edf3",cursor:"#58a6ff",cursorAccent:"#0d1117",selectionBackground:"rgba(163, 113, 247, 0.3)",black:"#484f58",red:"#f85149",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#a371f7",cyan:"#39c5cf",white:"#b1bac4",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#e3b341",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#56d4dd",brightWhite:"#f0f6fc"},scrollback:1e3,cursorBlink:!0,allowProposedApi:!0});t.current=y;const u=new Bm.FitAddon;r.current=u,y.loadAddon(u);let n="dom";try{const m=new Pm.WebglAddon;m.onContextLoss(()=>{console.warn("[Terminal] WebGL context lost, falling back to canvas"),m.dispose();try{y.loadAddon(new Eh.CanvasAddon)}catch{}}),y.loadAddon(m),n="webgl"}catch{try{y.loadAddon(new Eh.CanvasAddon),n="canvas"}catch{n="dom"}}console.log(`[Terminal] Using ${n} renderer`),y.open(e.current),setTimeout(()=>{u.fit();const{cols:m,rows:w}=y;g(m,w)},0);const a=y.onData(m=>{d(m)}),l=s(m=>{m instanceof Uint8Array,y.write(m)});window.addEventListener("resize",f);const c=e.current;return c.addEventListener("touchstart",p,{passive:!0}),c.addEventListener("touchmove",S,{passive:!0}),()=>{l(),a.dispose(),window.removeEventListener("resize",f),c.removeEventListener("touchstart",p),c.removeEventListener("touchmove",S),y.dispose()}},[s,d,g,f,p,S]),H.jsx("div",{ref:e,className:"w-full h-full bg-bg-primary overflow-hidden",style:{padding:"4px"}})};function Nm(){return K.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),H.jsx(Kp,{children:H.jsx(Am,{children:H.jsx(Fm,{})})})}No.createRoot(document.getElementById("root")).render(H.jsx(Bf.StrictMode,{children:H.jsx(Nm,{})}));</script>
    <style rel="stylesheet" crossorigin>/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */.xterm{cursor:text;position:relative;-moz-user-select:none;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::-moz-selection{color:transparent}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;-moz-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}html,body,#root{height:100dvh;width:100%;overflow:hidden;margin:0;padding:0}body{background-color:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.left-0{left:0}.top-0{top:0}.top-full{top:100%}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-3{margin-top:.75rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-1\.5{height:.375rem}.h-12{height:3rem}.h-2{height:.5rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[100dvh\]{height:100dvh}.h-\[40px\]{height:40px}.h-\[50vh\]{height:50vh}.h-\[90vh\]{height:90vh}.h-auto{height:auto}.h-full{height:100%}.max-h-\[200px\]{max-height:200px}.max-h-\[400px\]{max-height:400px}.max-h-\[70vh\]{max-height:70vh}.max-h-\[80vh\]{max-height:80vh}.min-h-0{min-height:0px}.min-h-\[44px\]{min-height:44px}.w-1\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-2{width:.5rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[160px\]{min-width:160px}.min-w-\[32px\]{min-width:32px}.max-w-\[120px\]{max-width:120px}.max-w-\[200px\]{max-width:200px}.max-w-lg{max-width:32rem}.max-w-sm{max-width:24rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.resize-none{resize:none}.resize{resize:both}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-border-subtle>:not([hidden])~:not([hidden]){border-color:var(--border-subtle)}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-accent-blue{border-color:var(--accent-blue)}.border-accent-purple{border-color:var(--accent-purple)}.border-border-subtle{border-color:var(--border-subtle)}.border-t-transparent{border-top-color:transparent}.bg-accent-blue{background-color:var(--accent-blue)}.bg-accent-green{background-color:var(--accent-green)}.bg-accent-purple{background-color:var(--accent-purple)}.bg-accent-red{background-color:var(--accent-red)}.bg-bg-primary{background-color:var(--bg-primary)}.bg-bg-secondary{background-color:var(--bg-secondary)}.bg-bg-tertiary{background-color:var(--bg-tertiary)}.bg-black\/50{background-color:#00000080}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-text-muted{background-color:var(--text-muted)}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-\[env\(safe-area-inset-bottom\)\]{padding-bottom:env(safe-area-inset-bottom)}.pr-2{padding-right:.5rem}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-wider{letter-spacing:.05em}.text-accent-blue{color:var(--accent-blue)}.text-accent-green{color:var(--accent-green)}.text-accent-purple{color:var(--accent-purple)}.text-accent-red{color:var(--accent-red)}.text-border-subtle{color:var(--border-subtle)}.text-text-muted{color:var(--text-muted)}.text-text-primary{color:var(--text-primary)}.text-text-secondary{color:var(--text-secondary)}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.mask-gradient-right{mask-image:linear-gradient(to right,black 90%,transparent 100%);-webkit-mask-image:linear-gradient(to right,black 90%,transparent 100%)}.animate-in.fade-in{animation:fadeIn .2s ease-out forwards}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #21262d;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-red: #f85149;--accent-purple: #a371f7;--accent-orange: #d29922;--text-primary: #e6edf3;--text-secondary: #8b949e;--text-muted: #6e7681;--border-subtle: #30363d;--glow-ai: rgba(163, 113, 247, .15)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--bg-secondary)}::-webkit-scrollbar-thumb{background:var(--bg-tertiary);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--border-subtle)}::-moz-selection{background-color:var(--accent-purple);color:#fff}::selection{background-color:var(--accent-purple);color:#fff}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.placeholder\:text-text-muted::-moz-placeholder{color:var(--text-muted)}.placeholder\:text-text-muted::placeholder{color:var(--text-muted)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:start-\[2px\]:after{content:var(--tw-content);inset-inline-start:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:border:after{content:var(--tw-content);border-width:1px}.after\:border-gray-300:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.hover\:bg-bg-tertiary:hover{background-color:var(--bg-tertiary)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:text-accent-red:hover{color:var(--accent-red)}.hover\:text-text-primary:hover{color:var(--text-primary)}.focus\:border-accent-blue:focus{border-color:var(--accent-blue)}.focus\:border-accent-purple:focus{border-color:var(--accent-purple)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:bg-bg-tertiary:active{background-color:var(--bg-tertiary)}.active\:opacity-70:active{opacity:.7}.active\:opacity-80:active{opacity:.8}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-30:disabled{opacity:.3}.disabled\:opacity-50:disabled{opacity:.5}.peer:checked~.peer-checked\:bg-accent-green{background-color:var(--accent-green)}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:checked~.rtl\:peer-checked\:after\:-translate-x-full:where([dir=rtl],[dir=rtl] *):after{content:var(--tw-content);--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>

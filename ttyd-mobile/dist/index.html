<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>VibeTerm - Mobile Terminal</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function r(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(d){if(d.ep)return;d.ep=!0;const g=r(d);fetch(d.href,g)}})();var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ih(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}),r}var Fh={exports:{}},Tn={},Nh={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=Symbol.for("react.element"),Rf=Symbol.for("react.portal"),Mf=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),Tf=Symbol.for("react.provider"),Bf=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),If=Symbol.for("react.memo"),Ff=Symbol.for("react.lazy"),zl=Symbol.iterator;function Nf(e){return e===null||typeof e!="object"?null:(e=zl&&e[zl]||e["@@iterator"],typeof e=="function"?e:null)}var Hh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$h=Object.assign,jh={};function fi(e,t,r){this.props=e,this.context=t,this.refs=jh,this.updater=r||Hh}fi.prototype.isReactComponent={};fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wh(){}Wh.prototype=fi.prototype;function Fa(e,t,r){this.props=e,this.context=t,this.refs=jh,this.updater=r||Hh}var Na=Fa.prototype=new Wh;Na.constructor=Fa;$h(Na,fi.prototype);Na.isPureReactComponent=!0;var Ul=Array.isArray,zh=Object.prototype.hasOwnProperty,Ha={current:null},Uh={key:!0,ref:!0,__self:!0,__source:!0};function Vh(e,t,r){var s,d={},g=null,y=null;if(t!=null)for(s in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(g=""+t.key),t)zh.call(t,s)&&!Uh.hasOwnProperty(s)&&(d[s]=t[s]);var i=arguments.length-2;if(i===1)d.children=r;else if(1<i){for(var o=Array(i),f=0;f<i;f++)o[f]=arguments[f+2];d.children=o}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)d[s]===void 0&&(d[s]=i[s]);return{$$typeof:hs,type:e,key:g,ref:y,props:d,_owner:Ha.current}}function Hf(e,t){return{$$typeof:hs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $a(e){return typeof e=="object"&&e!==null&&e.$$typeof===hs}function $f(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vl=/\/+/g;function oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$f(""+e.key):t.toString(36)}function js(e,t,r,s,d){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(g){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case hs:case Rf:y=!0}}if(y)return y=e,d=d(y),e=s===""?"."+oo(y,0):s,Ul(d)?(r="",e!=null&&(r=e.replace(Vl,"$&/")+"/"),js(d,t,r,"",function(f){return f})):d!=null&&($a(d)&&(d=Hf(d,r+(!d.key||y&&y.key===d.key?"":(""+d.key).replace(Vl,"$&/")+"/")+e)),t.push(d)),1;if(y=0,s=s===""?".":s+":",Ul(e))for(var i=0;i<e.length;i++){g=e[i];var o=s+oo(g,i);y+=js(g,t,r,o,d)}else if(o=Nf(e),typeof o=="function")for(e=o.call(e),i=0;!(g=e.next()).done;)g=g.value,o=s+oo(g,i++),y+=js(g,t,r,o,d);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function ws(e,t,r){if(e==null)return e;var s=[],d=0;return js(e,s,"","",function(g){return t.call(r,g,d++)}),s}function jf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ye={current:null},Ws={transition:null},Wf={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Ws,ReactCurrentOwner:Ha};function Gh(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ws,forEach:function(e,t,r){ws(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ws(e,function(){t++}),t},toArray:function(e){return ws(e,function(t){return t})||[]},only:function(e){if(!$a(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=fi;he.Fragment=Mf;he.Profiler=Af;he.PureComponent=Fa;he.StrictMode=Df;he.Suspense=Pf;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wf;he.act=Gh;he.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=$h({},e.props),d=e.key,g=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,y=Ha.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(o in t)zh.call(t,o)&&!Uh.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&i!==void 0?i[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){i=Array(o);for(var f=0;f<o;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:hs,type:e.type,key:d,ref:g,props:s,_owner:y}};he.createContext=function(e){return e={$$typeof:Bf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tf,_context:e},e.Consumer=e};he.createElement=Vh;he.createFactory=function(e){var t=Vh.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:Of,render:e}};he.isValidElement=$a;he.lazy=function(e){return{$$typeof:Ff,_payload:{_status:-1,_result:e},_init:jf}};he.memo=function(e,t){return{$$typeof:If,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Ws.transition;Ws.transition={};try{e()}finally{Ws.transition=t}};he.unstable_act=Gh;he.useCallback=function(e,t){return Ye.current.useCallback(e,t)};he.useContext=function(e){return Ye.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return Ye.current.useDeferredValue(e)};he.useEffect=function(e,t){return Ye.current.useEffect(e,t)};he.useId=function(){return Ye.current.useId()};he.useImperativeHandle=function(e,t,r){return Ye.current.useImperativeHandle(e,t,r)};he.useInsertionEffect=function(e,t){return Ye.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return Ye.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return Ye.current.useMemo(e,t)};he.useReducer=function(e,t,r){return Ye.current.useReducer(e,t,r)};he.useRef=function(e){return Ye.current.useRef(e)};he.useState=function(e){return Ye.current.useState(e)};he.useSyncExternalStore=function(e,t,r){return Ye.current.useSyncExternalStore(e,t,r)};he.useTransition=function(){return Ye.current.useTransition()};he.version="18.3.1";Nh.exports=he;var V=Nh.exports;const zf=Ph(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=V,Vf=Symbol.for("react.element"),Gf=Symbol.for("react.fragment"),Kf=Object.prototype.hasOwnProperty,qf=Uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xf={key:!0,ref:!0,__self:!0,__source:!0};function Kh(e,t,r){var s,d={},g=null,y=null;r!==void 0&&(g=""+r),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(y=t.ref);for(s in t)Kf.call(t,s)&&!Xf.hasOwnProperty(s)&&(d[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)d[s]===void 0&&(d[s]=t[s]);return{$$typeof:Vf,type:e,key:g,ref:y,props:d,_owner:qf.current}}Tn.Fragment=Gf;Tn.jsx=Kh;Tn.jsxs=Kh;Fh.exports=Tn;var P=Fh.exports,Fo={},qh={exports:{}},ht={},Xh={exports:{}},Jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,D){var T=B.length;B.push(D);e:for(;0<T;){var I=T-1>>>1,F=B[I];if(0<d(F,D))B[I]=D,B[T]=F,T=I;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var D=B[0],T=B.pop();if(T!==D){B[0]=T;e:for(var I=0,F=B.length,z=F>>>1;I<z;){var U=2*(I+1)-1,Z=B[U],J=U+1,j=B[J];if(0>d(Z,T))J<F&&0>d(j,Z)?(B[I]=j,B[J]=T,I=J):(B[I]=Z,B[U]=T,I=U);else if(J<F&&0>d(j,T))B[I]=j,B[J]=T,I=J;else break e}}return D}function d(B,D){var T=B.sortIndex-D.sortIndex;return T!==0?T:B.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var y=Date,i=y.now();e.unstable_now=function(){return y.now()-i}}var o=[],f=[],_=1,u=null,p=3,w=!1,S=!1,h=!1,n=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(B){for(var D=r(f);D!==null;){if(D.callback===null)s(f);else if(D.startTime<=B)s(f),D.sortIndex=D.expirationTime,t(o,D);else break;D=r(f)}}function m(B){if(h=!1,c(B),!S)if(r(o)!==null)S=!0,$(x);else{var D=r(f);D!==null&&N(m,D.startTime-B)}}function x(B,D){S=!1,h&&(h=!1,a(C),C=-1),w=!0;var T=p;try{for(c(D),u=r(o);u!==null&&(!(u.expirationTime>D)||B&&!R());){var I=u.callback;if(typeof I=="function"){u.callback=null,p=u.priorityLevel;var F=I(u.expirationTime<=D);D=e.unstable_now(),typeof F=="function"?u.callback=F:u===r(o)&&s(o),c(D)}else s(o);u=r(o)}if(u!==null)var z=!0;else{var U=r(f);U!==null&&N(m,U.startTime-D),z=!1}return z}finally{u=null,p=T,w=!1}}var v=!1,L=null,C=-1,b=5,E=-1;function R(){return!(e.unstable_now()-E<b)}function k(){if(L!==null){var B=e.unstable_now();E=B;var D=!0;try{D=L(!0,B)}finally{D?M():(v=!1,L=null)}}else v=!1}var M;if(typeof l=="function")M=function(){l(k)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,H=A.port2;A.port1.onmessage=k,M=function(){H.postMessage(null)}}else M=function(){n(k,0)};function $(B){L=B,v||(v=!0,M())}function N(B,D){C=n(function(){B(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){S||w||(S=!0,$(x))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var T=p;p=D;try{return B()}finally{p=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,D){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var T=p;p=B;try{return D()}finally{p=T}},e.unstable_scheduleCallback=function(B,D,T){var I=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?I+T:I):T=I,B){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=T+F,B={id:_++,callback:D,priorityLevel:B,startTime:T,expirationTime:F,sortIndex:-1},T>I?(B.sortIndex=T,t(f,B),r(o)===null&&B===r(f)&&(h?(a(C),C=-1):h=!0,N(m,T-I))):(B.sortIndex=F,t(o,B),S||w||(S=!0,$(x))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var D=p;return function(){var T=p;p=D;try{return B.apply(this,arguments)}finally{p=T}}}})(Jh);Xh.exports=Jh;var Jf=Xh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=V,ct=Jf;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yh=new Set,Ui={};function Or(e,t){ni(e,t),ni(e+"Capture",t)}function ni(e,t){for(Ui[e]=t,e=0;e<t.length;e++)Yh.add(t[e])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),No=Object.prototype.hasOwnProperty,Zf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gl={},Kl={};function Qf(e){return No.call(Kl,e)?!0:No.call(Gl,e)?!1:Zf.test(e)?Kl[e]=!0:(Gl[e]=!0,!1)}function e_(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t_(e,t,r,s){if(t===null||typeof t>"u"||e_(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,r,s,d,g,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=y}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var ja=/[\-:]([a-z])/g;function Wa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ja,Wa);je[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ja,Wa);je[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ja,Wa);je[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function za(e,t,r,s){var d=je.hasOwnProperty(t)?je[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t_(t,r,d,s)&&(r=null),s||d===null?Qf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Kt=Yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xs=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),Ua=Symbol.for("react.strict_mode"),Ho=Symbol.for("react.profiler"),Zh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),Va=Symbol.for("react.forward_ref"),$o=Symbol.for("react.suspense"),jo=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),eu=Symbol.for("react.offscreen"),ql=Symbol.iterator;function wi(e){return e===null||typeof e!="object"?null:(e=ql&&e[ql]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,ao;function Ai(e){if(ao===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ao=t&&t[1]||""}return`
`+ao+e}var lo=!1;function co(e,t){if(!e||lo)return"";lo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var d=f.stack.split(`
`),g=s.stack.split(`
`),y=d.length-1,i=g.length-1;1<=y&&0<=i&&d[y]!==g[i];)i--;for(;1<=y&&0<=i;y--,i--)if(d[y]!==g[i]){if(y!==1||i!==1)do if(y--,i--,0>i||d[y]!==g[i]){var o=`
`+d[y].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=y&&0<=i);break}}}finally{lo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ai(e):""}function r_(e){switch(e.tag){case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 2:case 15:return e=co(e.type,!1),e;case 11:return e=co(e.type.render,!1),e;case 1:return e=co(e.type,!0),e;default:return""}}function Wo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $r:return"Fragment";case Hr:return"Portal";case Ho:return"Profiler";case Ua:return"StrictMode";case $o:return"Suspense";case jo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qh:return(e.displayName||"Context")+".Consumer";case Zh:return(e._context.displayName||"Context")+".Provider";case Va:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return t=e.displayName||null,t!==null?t:Wo(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return Wo(e(t))}catch{}}return null}function i_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wo(t);case 8:return t===Ua?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s_(e){var t=tu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,g=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){s=""+y,g.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){e._valueTracker||(e._valueTracker=s_(e))}function ru(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=tu(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function sn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zo(e,t){var r=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=dr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iu(e,t){t=t.checked,t!=null&&za(e,"checked",t,!1)}function Uo(e,t){iu(e,t);var r=dr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vo(e,t.type,dr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vo(e,t,r){(t!=="number"||sn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ti=Array.isArray;function Yr(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+dr(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Go(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(q(92));if(Ti(r)){if(1<r.length)throw Error(q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:dr(r)}}function su(e,t){var r=dr(t.value),s=dr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Zl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ko(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ls,ou=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ls=Ls||document.createElement("div"),Ls.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ls.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n_=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(e){n_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pi[t]=Pi[e]})});function au(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pi.hasOwnProperty(e)&&Pi[e]?(""+t).trim():t+"px"}function lu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=au(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var o_=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qo(e,t){if(t){if(o_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Xo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function Ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yo=null,Zr=null,Qr=null;function Ql(e){if(e=fs(e)){if(typeof Yo!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Fn(t),Yo(e.stateNode,e.type,t))}}function cu(e){Zr?Qr?Qr.push(e):Qr=[e]:Zr=e}function hu(){if(Zr){var e=Zr,t=Qr;if(Qr=Zr=null,Ql(e),t)for(e=0;e<t.length;e++)Ql(t[e])}}function uu(e,t){return e(t)}function du(){}var ho=!1;function fu(e,t,r){if(ho)return e(t,r);ho=!0;try{return uu(e,t,r)}finally{ho=!1,(Zr!==null||Qr!==null)&&(du(),hu())}}function Gi(e,t){var r=e.stateNode;if(r===null)return null;var s=Fn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(q(231,t,typeof r));return r}var Zo=!1;if(zt)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{Zo=!1}function a_(e,t,r,s,d,g,y,i,o){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(_){this.onError(_)}}var Ii=!1,nn=null,on=!1,Qo=null,l_={onError:function(e){Ii=!0,nn=e}};function c_(e,t,r,s,d,g,y,i,o){Ii=!1,nn=null,a_.apply(l_,arguments)}function h_(e,t,r,s,d,g,y,i,o){if(c_.apply(this,arguments),Ii){if(Ii){var f=nn;Ii=!1,nn=null}else throw Error(q(198));on||(on=!0,Qo=f)}}function Pr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ec(e){if(Pr(e)!==e)throw Error(q(188))}function u_(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(q(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var g=d.alternate;if(g===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===r)return ec(d),e;if(g===s)return ec(d),t;g=g.sibling}throw Error(q(188))}if(r.return!==s.return)r=d,s=g;else{for(var y=!1,i=d.child;i;){if(i===r){y=!0,r=d,s=g;break}if(i===s){y=!0,s=d,r=g;break}i=i.sibling}if(!y){for(i=g.child;i;){if(i===r){y=!0,r=g,s=d;break}if(i===s){y=!0,s=g,r=d;break}i=i.sibling}if(!y)throw Error(q(189))}}if(r.alternate!==s)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?e:t}function pu(e){return e=u_(e),e!==null?gu(e):null}function gu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gu(e);if(t!==null)return t;e=e.sibling}return null}var vu=ct.unstable_scheduleCallback,tc=ct.unstable_cancelCallback,d_=ct.unstable_shouldYield,f_=ct.unstable_requestPaint,ke=ct.unstable_now,__=ct.unstable_getCurrentPriorityLevel,qa=ct.unstable_ImmediatePriority,mu=ct.unstable_UserBlockingPriority,an=ct.unstable_NormalPriority,p_=ct.unstable_LowPriority,Cu=ct.unstable_IdlePriority,Bn=null,Mt=null;function g_(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Bn,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:C_,v_=Math.log,m_=Math.LN2;function C_(e){return e>>>=0,e===0?32:31-(v_(e)/m_|0)|0}var Es=64,ks=4194304;function Bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ln(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,g=e.pingedLanes,y=r&268435455;if(y!==0){var i=y&~d;i!==0?s=Bi(i):(g&=y,g!==0&&(s=Bi(g)))}else y=r&~d,y!==0?s=Bi(y):g!==0&&(s=Bi(g));if(s===0)return 0;if(t!==0&&t!==s&&!(t&d)&&(d=s&-s,g=t&-t,d>=g||d===16&&(g&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-wt(t),d=1<<r,s|=e[r],t&=~d;return s}function y_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes;0<g;){var y=31-wt(g),i=1<<y,o=d[y];o===-1?(!(i&r)||i&s)&&(d[y]=y_(i,t)):o<=t&&(e.expiredLanes|=i),g&=~i}}function ea(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yu(){var e=Es;return Es<<=1,!(Es&4194240)&&(Es=64),e}function uo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function us(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wt(t),e[t]=r}function w_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-wt(r),g=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~g}}function Xa(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-wt(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var ve=0;function Su(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wu,Ja,xu,bu,Lu,ta=!1,Rs=[],ir=null,sr=null,nr=null,Ki=new Map,qi=new Map,Zt=[],x_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Ki.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(t.pointerId)}}function bi(e,t,r,s,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:g,targetContainers:[d]},t!==null&&(t=fs(t),t!==null&&Ja(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function b_(e,t,r,s,d){switch(t){case"focusin":return ir=bi(ir,e,t,r,s,d),!0;case"dragenter":return sr=bi(sr,e,t,r,s,d),!0;case"mouseover":return nr=bi(nr,e,t,r,s,d),!0;case"pointerover":var g=d.pointerId;return Ki.set(g,bi(Ki.get(g)||null,e,t,r,s,d)),!0;case"gotpointercapture":return g=d.pointerId,qi.set(g,bi(qi.get(g)||null,e,t,r,s,d)),!0}return!1}function Eu(e){var t=wr(e.target);if(t!==null){var r=Pr(t);if(r!==null){if(t=r.tag,t===13){if(t=_u(r),t!==null){e.blockedOn=t,Lu(e.priority,function(){xu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ra(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Jo=s,r.target.dispatchEvent(s),Jo=null}else return t=fs(r),t!==null&&Ja(t),e.blockedOn=r,!1;t.shift()}return!0}function ic(e,t,r){zs(e)&&r.delete(t)}function L_(){ta=!1,ir!==null&&zs(ir)&&(ir=null),sr!==null&&zs(sr)&&(sr=null),nr!==null&&zs(nr)&&(nr=null),Ki.forEach(ic),qi.forEach(ic)}function Li(e,t){e.blockedOn===t&&(e.blockedOn=null,ta||(ta=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,L_)))}function Xi(e){function t(d){return Li(d,e)}if(0<Rs.length){Li(Rs[0],e);for(var r=1;r<Rs.length;r++){var s=Rs[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ir!==null&&Li(ir,e),sr!==null&&Li(sr,e),nr!==null&&Li(nr,e),Ki.forEach(t),qi.forEach(t),r=0;r<Zt.length;r++)s=Zt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Zt.length&&(r=Zt[0],r.blockedOn===null);)Eu(r),r.blockedOn===null&&Zt.shift()}var ei=Kt.ReactCurrentBatchConfig,cn=!0;function E_(e,t,r,s){var d=ve,g=ei.transition;ei.transition=null;try{ve=1,Ya(e,t,r,s)}finally{ve=d,ei.transition=g}}function k_(e,t,r,s){var d=ve,g=ei.transition;ei.transition=null;try{ve=4,Ya(e,t,r,s)}finally{ve=d,ei.transition=g}}function Ya(e,t,r,s){if(cn){var d=ra(e,t,r,s);if(d===null)wo(e,t,s,hn,r),rc(e,s);else if(b_(d,e,t,r,s))s.stopPropagation();else if(rc(e,s),t&4&&-1<x_.indexOf(e)){for(;d!==null;){var g=fs(d);if(g!==null&&wu(g),g=ra(e,t,r,s),g===null&&wo(e,t,s,hn,r),g===d)break;d=g}d!==null&&s.stopPropagation()}else wo(e,t,s,null,r)}}var hn=null;function ra(e,t,r,s){if(hn=null,e=Ka(s),e=wr(e),e!==null)if(t=Pr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_u(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hn=e,null}function ku(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(__()){case qa:return 1;case mu:return 4;case an:case p_:return 16;case Cu:return 536870912;default:return 16}default:return 16}}var er=null,Za=null,Us=null;function Ru(){if(Us)return Us;var e,t=Za,r=t.length,s,d="value"in er?er.value:er.textContent,g=d.length;for(e=0;e<r&&t[e]===d[e];e++);var y=r-e;for(s=1;s<=y&&t[r-s]===d[g-s];s++);return Us=d.slice(e,1<s?1-s:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ms(){return!0}function sc(){return!1}function ut(e){function t(r,s,d,g,y){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=g,this.target=y,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(g):g[i]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ms:sc,this.isPropagationStopped=sc,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),t}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=ut(_i),ds=Le({},_i,{view:0,detail:0}),R_=ut(ds),fo,_o,Ei,On=Le({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(fo=e.screenX-Ei.screenX,_o=e.screenY-Ei.screenY):_o=fo=0,Ei=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:_o}}),nc=ut(On),M_=Le({},On,{dataTransfer:0}),D_=ut(M_),A_=Le({},ds,{relatedTarget:0}),po=ut(A_),T_=Le({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),B_=ut(T_),O_=Le({},_i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P_=ut(O_),I_=Le({},_i,{data:0}),oc=ut(I_),F_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=H_[e])?!!t[e]:!1}function el(){return $_}var j_=Le({},ds,{key:function(e){if(e.key){var t=F_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W_=ut(j_),z_=Le({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ac=ut(z_),U_=Le({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),V_=ut(U_),G_=Le({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),K_=ut(G_),q_=Le({},On,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X_=ut(q_),J_=[9,13,27,32],tl=zt&&"CompositionEvent"in window,Fi=null;zt&&"documentMode"in document&&(Fi=document.documentMode);var Y_=zt&&"TextEvent"in window&&!Fi,Mu=zt&&(!tl||Fi&&8<Fi&&11>=Fi),lc=" ",cc=!1;function Du(e,t){switch(e){case"keyup":return J_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jr=!1;function Z_(e,t){switch(e){case"compositionend":return Au(t);case"keypress":return t.which!==32?null:(cc=!0,lc);case"textInput":return e=t.data,e===lc&&cc?null:e;default:return null}}function Q_(e,t){if(jr)return e==="compositionend"||!tl&&Du(e,t)?(e=Ru(),Us=Za=er=null,jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mu&&t.locale!=="ko"?null:t.data;default:return null}}var ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ep[e.type]:t==="textarea"}function Tu(e,t,r,s){cu(s),t=un(t,"onChange"),0<t.length&&(r=new Qa("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ni=null,Ji=null;function tp(e){zu(e,0)}function Pn(e){var t=Ur(e);if(ru(t))return e}function rp(e,t){if(e==="change")return t}var Bu=!1;if(zt){var go;if(zt){var vo="oninput"in document;if(!vo){var uc=document.createElement("div");uc.setAttribute("oninput","return;"),vo=typeof uc.oninput=="function"}go=vo}else go=!1;Bu=go&&(!document.documentMode||9<document.documentMode)}function dc(){Ni&&(Ni.detachEvent("onpropertychange",Ou),Ji=Ni=null)}function Ou(e){if(e.propertyName==="value"&&Pn(Ji)){var t=[];Tu(t,Ji,e,Ka(e)),fu(tp,t)}}function ip(e,t,r){e==="focusin"?(dc(),Ni=t,Ji=r,Ni.attachEvent("onpropertychange",Ou)):e==="focusout"&&dc()}function sp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pn(Ji)}function np(e,t){if(e==="click")return Pn(t)}function op(e,t){if(e==="input"||e==="change")return Pn(t)}function ap(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:ap;function Yi(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!No.call(t,d)||!bt(e[d],t[d]))return!1}return!0}function fc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _c(e,t){var r=fc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fc(r)}}function Pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iu(){for(var e=window,t=sn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=sn(e.document)}return t}function rl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lp(e){var t=Iu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Pu(r.ownerDocument.documentElement,r)){if(s!==null&&rl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,g=Math.min(s.start,d);s=s.end===void 0?g:Math.min(s.end,d),!e.extend&&g>s&&(d=s,s=g,g=d),d=_c(r,g);var y=_c(r,s);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),g>s?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cp=zt&&"documentMode"in document&&11>=document.documentMode,Wr=null,ia=null,Hi=null,sa=!1;function pc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sa||Wr==null||Wr!==sn(s)||(s=Wr,"selectionStart"in s&&rl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Hi&&Yi(Hi,s)||(Hi=s,s=un(ia,"onSelect"),0<s.length&&(t=new Qa("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Wr)))}function Ds(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zr={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionend:Ds("Transition","TransitionEnd")},mo={},Fu={};zt&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function In(e){if(mo[e])return mo[e];if(!zr[e])return e;var t=zr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fu)return mo[e]=t[r];return e}var Nu=In("animationend"),Hu=In("animationiteration"),$u=In("animationstart"),ju=In("transitionend"),Wu=new Map,gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Wu.set(e,t),Or(t,[e])}for(var Co=0;Co<gc.length;Co++){var yo=gc[Co],hp=yo.toLowerCase(),up=yo[0].toUpperCase()+yo.slice(1);_r(hp,"on"+up)}_r(Nu,"onAnimationEnd");_r(Hu,"onAnimationIteration");_r($u,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(ju,"onTransitionEnd");ni("onMouseEnter",["mouseout","mouseover"]);ni("onMouseLeave",["mouseout","mouseover"]);ni("onPointerEnter",["pointerout","pointerover"]);ni("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function vc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,h_(s,t,void 0,e),e.currentTarget=null}function zu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var g=void 0;if(t)for(var y=s.length-1;0<=y;y--){var i=s[y],o=i.instance,f=i.currentTarget;if(i=i.listener,o!==g&&d.isPropagationStopped())break e;vc(d,i,f),g=o}else for(y=0;y<s.length;y++){if(i=s[y],o=i.instance,f=i.currentTarget,i=i.listener,o!==g&&d.isPropagationStopped())break e;vc(d,i,f),g=o}}}if(on)throw e=Qo,on=!1,Qo=null,e}function ye(e,t){var r=t[ca];r===void 0&&(r=t[ca]=new Set);var s=e+"__bubble";r.has(s)||(Uu(t,e,2,!1),r.add(s))}function So(e,t,r){var s=0;t&&(s|=4),Uu(r,e,s,t)}var As="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[As]){e[As]=!0,Yh.forEach(function(r){r!=="selectionchange"&&(dp.has(r)||So(r,!1,e),So(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[As]||(t[As]=!0,So("selectionchange",!1,t))}}function Uu(e,t,r,s){switch(ku(t)){case 1:var d=E_;break;case 4:d=k_;break;default:d=Ya}r=d.bind(null,t,r,e),d=void 0,!Zo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function wo(e,t,r,s,d){var g=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var i=s.stateNode.containerInfo;if(i===d||i.nodeType===8&&i.parentNode===d)break;if(y===4)for(y=s.return;y!==null;){var o=y.tag;if((o===3||o===4)&&(o=y.stateNode.containerInfo,o===d||o.nodeType===8&&o.parentNode===d))return;y=y.return}for(;i!==null;){if(y=wr(i),y===null)return;if(o=y.tag,o===5||o===6){s=g=y;continue e}i=i.parentNode}}s=s.return}fu(function(){var f=g,_=Ka(r),u=[];e:{var p=Wu.get(e);if(p!==void 0){var w=Qa,S=e;switch(e){case"keypress":if(Vs(r)===0)break e;case"keydown":case"keyup":w=W_;break;case"focusin":S="focus",w=po;break;case"focusout":S="blur",w=po;break;case"beforeblur":case"afterblur":w=po;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=D_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=V_;break;case Nu:case Hu:case $u:w=B_;break;case ju:w=K_;break;case"scroll":w=R_;break;case"wheel":w=X_;break;case"copy":case"cut":case"paste":w=P_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ac}var h=(t&4)!==0,n=!h&&e==="scroll",a=h?p!==null?p+"Capture":null:p;h=[];for(var l=f,c;l!==null;){c=l;var m=c.stateNode;if(c.tag===5&&m!==null&&(c=m,a!==null&&(m=Gi(l,a),m!=null&&h.push(Qi(l,m,c)))),n)break;l=l.return}0<h.length&&(p=new w(p,S,null,r,_),u.push({event:p,listeners:h}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&r!==Jo&&(S=r.relatedTarget||r.fromElement)&&(wr(S)||S[Ut]))break e;if((w||p)&&(p=_.window===_?_:(p=_.ownerDocument)?p.defaultView||p.parentWindow:window,w?(S=r.relatedTarget||r.toElement,w=f,S=S?wr(S):null,S!==null&&(n=Pr(S),S!==n||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=f),w!==S)){if(h=nc,m="onMouseLeave",a="onMouseEnter",l="mouse",(e==="pointerout"||e==="pointerover")&&(h=ac,m="onPointerLeave",a="onPointerEnter",l="pointer"),n=w==null?p:Ur(w),c=S==null?p:Ur(S),p=new h(m,l+"leave",w,r,_),p.target=n,p.relatedTarget=c,m=null,wr(_)===f&&(h=new h(a,l+"enter",S,r,_),h.target=c,h.relatedTarget=n,m=h),n=m,w&&S)t:{for(h=w,a=S,l=0,c=h;c;c=Fr(c))l++;for(c=0,m=a;m;m=Fr(m))c++;for(;0<l-c;)h=Fr(h),l--;for(;0<c-l;)a=Fr(a),c--;for(;l--;){if(h===a||a!==null&&h===a.alternate)break t;h=Fr(h),a=Fr(a)}h=null}else h=null;w!==null&&mc(u,p,w,h,!1),S!==null&&n!==null&&mc(u,n,S,h,!0)}}e:{if(p=f?Ur(f):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var x=rp;else if(hc(p))if(Bu)x=op;else{x=sp;var v=ip}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=np);if(x&&(x=x(e,f))){Tu(u,x,r,_);break e}v&&v(e,p,f),e==="focusout"&&(v=p._wrapperState)&&v.controlled&&p.type==="number"&&Vo(p,"number",p.value)}switch(v=f?Ur(f):window,e){case"focusin":(hc(v)||v.contentEditable==="true")&&(Wr=v,ia=f,Hi=null);break;case"focusout":Hi=ia=Wr=null;break;case"mousedown":sa=!0;break;case"contextmenu":case"mouseup":case"dragend":sa=!1,pc(u,r,_);break;case"selectionchange":if(cp)break;case"keydown":case"keyup":pc(u,r,_)}var L;if(tl)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else jr?Du(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Mu&&r.locale!=="ko"&&(jr||C!=="onCompositionStart"?C==="onCompositionEnd"&&jr&&(L=Ru()):(er=_,Za="value"in er?er.value:er.textContent,jr=!0)),v=un(f,C),0<v.length&&(C=new oc(C,e,null,r,_),u.push({event:C,listeners:v}),L?C.data=L:(L=Au(r),L!==null&&(C.data=L)))),(L=Y_?Z_(e,r):Q_(e,r))&&(f=un(f,"onBeforeInput"),0<f.length&&(_=new oc("onBeforeInput","beforeinput",null,r,_),u.push({event:_,listeners:f}),_.data=L))}zu(u,t)})}function Qi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function un(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=Gi(e,r),g!=null&&s.unshift(Qi(e,g,d)),g=Gi(e,t),g!=null&&s.push(Qi(e,g,d))),e=e.return}return s}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mc(e,t,r,s,d){for(var g=t._reactName,y=[];r!==null&&r!==s;){var i=r,o=i.alternate,f=i.stateNode;if(o!==null&&o===s)break;i.tag===5&&f!==null&&(i=f,d?(o=Gi(r,g),o!=null&&y.unshift(Qi(r,o,i))):d||(o=Gi(r,g),o!=null&&y.push(Qi(r,o,i)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var fp=/\r\n?/g,_p=/\u0000|\uFFFD/g;function Cc(e){return(typeof e=="string"?e:""+e).replace(fp,`
`).replace(_p,"")}function Ts(e,t,r){if(t=Cc(t),Cc(e)!==t&&r)throw Error(q(425))}function dn(){}var na=null,oa=null;function aa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var la=typeof setTimeout=="function"?setTimeout:void 0,pp=typeof clearTimeout=="function"?clearTimeout:void 0,yc=typeof Promise=="function"?Promise:void 0,gp=typeof queueMicrotask=="function"?queueMicrotask:typeof yc<"u"?function(e){return yc.resolve(null).then(e).catch(vp)}:la;function vp(e){setTimeout(function(){throw e})}function xo(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),Xi(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);Xi(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),Rt="__reactFiber$"+pi,es="__reactProps$"+pi,Ut="__reactContainer$"+pi,ca="__reactEvents$"+pi,mp="__reactListeners$"+pi,Cp="__reactHandles$"+pi;function wr(e){var t=e[Rt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ut]||r[Rt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Sc(e);e!==null;){if(r=e[Rt])return r;e=Sc(e)}return t}e=r,r=e.parentNode}return null}function fs(e){return e=e[Rt]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Fn(e){return e[es]||null}var ha=[],Vr=-1;function pr(e){return{current:e}}function Se(e){0>Vr||(e.current=ha[Vr],ha[Vr]=null,Vr--)}function Ce(e,t){Vr++,ha[Vr]=e.current,e.current=t}var fr={},Ge=pr(fr),tt=pr(!1),Rr=fr;function oi(e,t){var r=e.type.contextTypes;if(!r)return fr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in r)d[g]=t[g];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function rt(e){return e=e.childContextTypes,e!=null}function fn(){Se(tt),Se(Ge)}function wc(e,t,r){if(Ge.current!==fr)throw Error(q(168));Ce(Ge,t),Ce(tt,r)}function Vu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(q(108,i_(e)||"Unknown",d));return Le({},r,s)}function _n(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fr,Rr=Ge.current,Ce(Ge,e),Ce(tt,tt.current),!0}function xc(e,t,r){var s=e.stateNode;if(!s)throw Error(q(169));r?(e=Vu(e,t,Rr),s.__reactInternalMemoizedMergedChildContext=e,Se(tt),Se(Ge),Ce(Ge,e)):Se(tt),Ce(tt,r)}var Nt=null,Nn=!1,bo=!1;function Gu(e){Nt===null?Nt=[e]:Nt.push(e)}function yp(e){Nn=!0,Gu(e)}function gr(){if(!bo&&Nt!==null){bo=!0;var e=0,t=ve;try{var r=Nt;for(ve=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Nt=null,Nn=!1}catch(d){throw Nt!==null&&(Nt=Nt.slice(e+1)),vu(qa,gr),d}finally{ve=t,bo=!1}}return null}var Gr=[],Kr=0,pn=null,gn=0,dt=[],ft=0,Mr=null,Ht=1,$t="";function yr(e,t){Gr[Kr++]=gn,Gr[Kr++]=pn,pn=e,gn=t}function Ku(e,t,r){dt[ft++]=Ht,dt[ft++]=$t,dt[ft++]=Mr,Mr=e;var s=Ht;e=$t;var d=32-wt(s)-1;s&=~(1<<d),r+=1;var g=32-wt(t)+d;if(30<g){var y=d-d%5;g=(s&(1<<y)-1).toString(32),s>>=y,d-=y,Ht=1<<32-wt(t)+d|r<<d|s,$t=g+e}else Ht=1<<g|r<<d|s,$t=e}function il(e){e.return!==null&&(yr(e,1),Ku(e,1,0))}function sl(e){for(;e===pn;)pn=Gr[--Kr],Gr[Kr]=null,gn=Gr[--Kr],Gr[Kr]=null;for(;e===Mr;)Mr=dt[--ft],dt[ft]=null,$t=dt[--ft],dt[ft]=null,Ht=dt[--ft],dt[ft]=null}var at=null,ot=null,we=!1,St=null;function qu(e,t){var r=_t(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function bc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,ot=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Mr!==null?{id:Ht,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=_t(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,at=e,ot=null,!0):!1;default:return!1}}function ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function da(e){if(we){var t=ot;if(t){var r=t;if(!bc(e,t)){if(ua(e))throw Error(q(418));t=or(r.nextSibling);var s=at;t&&bc(e,t)?qu(s,r):(e.flags=e.flags&-4097|2,we=!1,at=e)}}else{if(ua(e))throw Error(q(418));e.flags=e.flags&-4097|2,we=!1,at=e}}}function Lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function Bs(e){if(e!==at)return!1;if(!we)return Lc(e),we=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!aa(e.type,e.memoizedProps)),t&&(t=ot)){if(ua(e))throw Xu(),Error(q(418));for(;t;)qu(e,t),t=or(t.nextSibling)}if(Lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ot=or(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ot=null}}else ot=at?or(e.stateNode.nextSibling):null;return!0}function Xu(){for(var e=ot;e;)e=or(e.nextSibling)}function ai(){ot=at=null,we=!1}function nl(e){St===null?St=[e]:St.push(e)}var Sp=Kt.ReactCurrentBatchConfig;function ki(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var s=r.stateNode}if(!s)throw Error(q(147,e));var d=s,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(y){var i=d.refs;y===null?delete i[g]:i[g]=y},t._stringRef=g,t)}if(typeof e!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,e))}return e}function Os(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ec(e){var t=e._init;return t(e._payload)}function Ju(e){function t(a,l){if(e){var c=a.deletions;c===null?(a.deletions=[l],a.flags|=16):c.push(l)}}function r(a,l){if(!e)return null;for(;l!==null;)t(a,l),l=l.sibling;return null}function s(a,l){for(a=new Map;l!==null;)l.key!==null?a.set(l.key,l):a.set(l.index,l),l=l.sibling;return a}function d(a,l){return a=hr(a,l),a.index=0,a.sibling=null,a}function g(a,l,c){return a.index=c,e?(c=a.alternate,c!==null?(c=c.index,c<l?(a.flags|=2,l):c):(a.flags|=2,l)):(a.flags|=1048576,l)}function y(a){return e&&a.alternate===null&&(a.flags|=2),a}function i(a,l,c,m){return l===null||l.tag!==6?(l=Ao(c,a.mode,m),l.return=a,l):(l=d(l,c),l.return=a,l)}function o(a,l,c,m){var x=c.type;return x===$r?_(a,l,c.props.children,m,c.key):l!==null&&(l.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Jt&&Ec(x)===l.type)?(m=d(l,c.props),m.ref=ki(a,l,c),m.return=a,m):(m=Zs(c.type,c.key,c.props,null,a.mode,m),m.ref=ki(a,l,c),m.return=a,m)}function f(a,l,c,m){return l===null||l.tag!==4||l.stateNode.containerInfo!==c.containerInfo||l.stateNode.implementation!==c.implementation?(l=To(c,a.mode,m),l.return=a,l):(l=d(l,c.children||[]),l.return=a,l)}function _(a,l,c,m,x){return l===null||l.tag!==7?(l=kr(c,a.mode,m,x),l.return=a,l):(l=d(l,c),l.return=a,l)}function u(a,l,c){if(typeof l=="string"&&l!==""||typeof l=="number")return l=Ao(""+l,a.mode,c),l.return=a,l;if(typeof l=="object"&&l!==null){switch(l.$$typeof){case xs:return c=Zs(l.type,l.key,l.props,null,a.mode,c),c.ref=ki(a,null,l),c.return=a,c;case Hr:return l=To(l,a.mode,c),l.return=a,l;case Jt:var m=l._init;return u(a,m(l._payload),c)}if(Ti(l)||wi(l))return l=kr(l,a.mode,c,null),l.return=a,l;Os(a,l)}return null}function p(a,l,c,m){var x=l!==null?l.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return x!==null?null:i(a,l,""+c,m);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case xs:return c.key===x?o(a,l,c,m):null;case Hr:return c.key===x?f(a,l,c,m):null;case Jt:return x=c._init,p(a,l,x(c._payload),m)}if(Ti(c)||wi(c))return x!==null?null:_(a,l,c,m,null);Os(a,c)}return null}function w(a,l,c,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return a=a.get(c)||null,i(l,a,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case xs:return a=a.get(m.key===null?c:m.key)||null,o(l,a,m,x);case Hr:return a=a.get(m.key===null?c:m.key)||null,f(l,a,m,x);case Jt:var v=m._init;return w(a,l,c,v(m._payload),x)}if(Ti(m)||wi(m))return a=a.get(c)||null,_(l,a,m,x,null);Os(l,m)}return null}function S(a,l,c,m){for(var x=null,v=null,L=l,C=l=0,b=null;L!==null&&C<c.length;C++){L.index>C?(b=L,L=null):b=L.sibling;var E=p(a,L,c[C],m);if(E===null){L===null&&(L=b);break}e&&L&&E.alternate===null&&t(a,L),l=g(E,l,C),v===null?x=E:v.sibling=E,v=E,L=b}if(C===c.length)return r(a,L),we&&yr(a,C),x;if(L===null){for(;C<c.length;C++)L=u(a,c[C],m),L!==null&&(l=g(L,l,C),v===null?x=L:v.sibling=L,v=L);return we&&yr(a,C),x}for(L=s(a,L);C<c.length;C++)b=w(L,a,C,c[C],m),b!==null&&(e&&b.alternate!==null&&L.delete(b.key===null?C:b.key),l=g(b,l,C),v===null?x=b:v.sibling=b,v=b);return e&&L.forEach(function(R){return t(a,R)}),we&&yr(a,C),x}function h(a,l,c,m){var x=wi(c);if(typeof x!="function")throw Error(q(150));if(c=x.call(c),c==null)throw Error(q(151));for(var v=x=null,L=l,C=l=0,b=null,E=c.next();L!==null&&!E.done;C++,E=c.next()){L.index>C?(b=L,L=null):b=L.sibling;var R=p(a,L,E.value,m);if(R===null){L===null&&(L=b);break}e&&L&&R.alternate===null&&t(a,L),l=g(R,l,C),v===null?x=R:v.sibling=R,v=R,L=b}if(E.done)return r(a,L),we&&yr(a,C),x;if(L===null){for(;!E.done;C++,E=c.next())E=u(a,E.value,m),E!==null&&(l=g(E,l,C),v===null?x=E:v.sibling=E,v=E);return we&&yr(a,C),x}for(L=s(a,L);!E.done;C++,E=c.next())E=w(L,a,C,E.value,m),E!==null&&(e&&E.alternate!==null&&L.delete(E.key===null?C:E.key),l=g(E,l,C),v===null?x=E:v.sibling=E,v=E);return e&&L.forEach(function(k){return t(a,k)}),we&&yr(a,C),x}function n(a,l,c,m){if(typeof c=="object"&&c!==null&&c.type===$r&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case xs:e:{for(var x=c.key,v=l;v!==null;){if(v.key===x){if(x=c.type,x===$r){if(v.tag===7){r(a,v.sibling),l=d(v,c.props.children),l.return=a,a=l;break e}}else if(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Jt&&Ec(x)===v.type){r(a,v.sibling),l=d(v,c.props),l.ref=ki(a,v,c),l.return=a,a=l;break e}r(a,v);break}else t(a,v);v=v.sibling}c.type===$r?(l=kr(c.props.children,a.mode,m,c.key),l.return=a,a=l):(m=Zs(c.type,c.key,c.props,null,a.mode,m),m.ref=ki(a,l,c),m.return=a,a=m)}return y(a);case Hr:e:{for(v=c.key;l!==null;){if(l.key===v)if(l.tag===4&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){r(a,l.sibling),l=d(l,c.children||[]),l.return=a,a=l;break e}else{r(a,l);break}else t(a,l);l=l.sibling}l=To(c,a.mode,m),l.return=a,a=l}return y(a);case Jt:return v=c._init,n(a,l,v(c._payload),m)}if(Ti(c))return S(a,l,c,m);if(wi(c))return h(a,l,c,m);Os(a,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,l!==null&&l.tag===6?(r(a,l.sibling),l=d(l,c),l.return=a,a=l):(r(a,l),l=Ao(c,a.mode,m),l.return=a,a=l),y(a)):r(a,l)}return n}var li=Ju(!0),Yu=Ju(!1),vn=pr(null),mn=null,qr=null,ol=null;function al(){ol=qr=mn=null}function ll(e){var t=vn.current;Se(vn),e._currentValue=t}function fa(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ti(e,t){mn=e,ol=qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(ol!==e)if(e={context:e,memoizedValue:t,next:null},qr===null){if(mn===null)throw Error(q(308));qr=e,mn.dependencies={lanes:0,firstContext:e}}else qr=qr.next=e;return t}var xr=null;function cl(e){xr===null?xr=[e]:xr.push(e)}function Zu(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,cl(t)):(r.next=d.next,d.next=r),t.interleaved=r,Vt(e,s)}function Vt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Yt=!1;function hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ar(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,Vt(e,r)}return d=s.interleaved,d===null?(t.next=t,cl(s)):(t.next=d.next,d.next=t),s.interleaved=t,Vt(e,r)}function Gs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Xa(e,r)}}function kc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};g===null?d=g=y:g=g.next=y,r=r.next}while(r!==null);g===null?d=g=t:g=g.next=t}else d=g=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cn(e,t,r,s){var d=e.updateQueue;Yt=!1;var g=d.firstBaseUpdate,y=d.lastBaseUpdate,i=d.shared.pending;if(i!==null){d.shared.pending=null;var o=i,f=o.next;o.next=null,y===null?g=f:y.next=f,y=o;var _=e.alternate;_!==null&&(_=_.updateQueue,i=_.lastBaseUpdate,i!==y&&(i===null?_.firstBaseUpdate=f:i.next=f,_.lastBaseUpdate=o))}if(g!==null){var u=d.baseState;y=0,_=f=o=null,i=g;do{var p=i.lane,w=i.eventTime;if((s&p)===p){_!==null&&(_=_.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var S=e,h=i;switch(p=t,w=r,h.tag){case 1:if(S=h.payload,typeof S=="function"){u=S.call(w,u,p);break e}u=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=h.payload,p=typeof S=="function"?S.call(w,u,p):S,p==null)break e;u=Le({},u,p);break e;case 2:Yt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=d.effects,p===null?d.effects=[i]:p.push(i))}else w={eventTime:w,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},_===null?(f=_=w,o=u):_=_.next=w,y|=p;if(i=i.next,i===null){if(i=d.shared.pending,i===null)break;p=i,i=p.next,p.next=null,d.lastBaseUpdate=p,d.shared.pending=null}}while(!0);if(_===null&&(o=u),d.baseState=o,d.firstBaseUpdate=f,d.lastBaseUpdate=_,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else g===null&&(d.shared.lanes=0);Ar|=y,e.lanes=y,e.memoizedState=u}}function Rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(q(191,d));d.call(s)}}}var _s={},Dt=pr(_s),ts=pr(_s),rs=pr(_s);function br(e){if(e===_s)throw Error(q(174));return e}function ul(e,t){switch(Ce(rs,t),Ce(ts,e),Ce(Dt,_s),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ko(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ko(t,e)}Se(Dt),Ce(Dt,t)}function ci(){Se(Dt),Se(ts),Se(rs)}function ed(e){br(rs.current);var t=br(Dt.current),r=Ko(t,e.type);t!==r&&(Ce(ts,e),Ce(Dt,r))}function dl(e){ts.current===e&&(Se(Dt),Se(ts))}var xe=pr(0);function yn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lo=[];function fl(){for(var e=0;e<Lo.length;e++)Lo[e]._workInProgressVersionPrimary=null;Lo.length=0}var Ks=Kt.ReactCurrentDispatcher,Eo=Kt.ReactCurrentBatchConfig,Dr=0,be=null,Te=null,Ie=null,Sn=!1,$i=!1,is=0,wp=0;function We(){throw Error(q(321))}function _l(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bt(e[r],t[r]))return!1;return!0}function pl(e,t,r,s,d,g){if(Dr=g,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ks.current=e===null||e.memoizedState===null?Ep:kp,e=r(s,d),$i){g=0;do{if($i=!1,is=0,25<=g)throw Error(q(301));g+=1,Ie=Te=null,t.updateQueue=null,Ks.current=Rp,e=r(s,d)}while($i)}if(Ks.current=wn,t=Te!==null&&Te.next!==null,Dr=0,Ie=Te=be=null,Sn=!1,t)throw Error(q(300));return e}function gl(){var e=is!==0;return is=0,e}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?be.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function vt(){if(Te===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Ie===null?be.memoizedState:Ie.next;if(t!==null)Ie=t,Te=e;else{if(e===null)throw Error(q(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ie===null?be.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function ss(e,t){return typeof t=="function"?t(e):t}function ko(e){var t=vt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var s=Te,d=s.baseQueue,g=r.pending;if(g!==null){if(d!==null){var y=d.next;d.next=g.next,g.next=y}s.baseQueue=d=g,r.pending=null}if(d!==null){g=d.next,s=s.baseState;var i=y=null,o=null,f=g;do{var _=f.lane;if((Dr&_)===_)o!==null&&(o=o.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var u={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};o===null?(i=o=u,y=s):o=o.next=u,be.lanes|=_,Ar|=_}f=f.next}while(f!==null&&f!==g);o===null?y=s:o.next=i,bt(s,t.memoizedState)||(et=!0),t.memoizedState=s,t.baseState=y,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do g=d.lane,be.lanes|=g,Ar|=g,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ro(e){var t=vt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,g=t.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do g=e(g,y.action),y=y.next;while(y!==d);bt(g,t.memoizedState)||(et=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),r.lastRenderedState=g}return[g,s]}function td(){}function rd(e,t){var r=be,s=vt(),d=t(),g=!bt(s.memoizedState,d);if(g&&(s.memoizedState=d,et=!0),s=s.queue,vl(nd.bind(null,r,s,e),[e]),s.getSnapshot!==t||g||Ie!==null&&Ie.memoizedState.tag&1){if(r.flags|=2048,ns(9,sd.bind(null,r,s,d,t),void 0,null),Fe===null)throw Error(q(349));Dr&30||id(r,t,d)}return d}function id(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sd(e,t,r,s){t.value=r,t.getSnapshot=s,od(t)&&ad(e)}function nd(e,t,r){return r(function(){od(t)&&ad(e)})}function od(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bt(e,r)}catch{return!0}}function ad(e){var t=Vt(e,1);t!==null&&xt(t,e,1,-1)}function Mc(e){var t=Et();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},t.queue=e,e=e.dispatch=Lp.bind(null,be,e),[t.memoizedState,e]}function ns(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function ld(){return vt().memoizedState}function qs(e,t,r,s){var d=Et();be.flags|=e,d.memoizedState=ns(1|t,r,void 0,s===void 0?null:s)}function Hn(e,t,r,s){var d=vt();s=s===void 0?null:s;var g=void 0;if(Te!==null){var y=Te.memoizedState;if(g=y.destroy,s!==null&&_l(s,y.deps)){d.memoizedState=ns(t,r,g,s);return}}be.flags|=e,d.memoizedState=ns(1|t,r,g,s)}function Dc(e,t){return qs(8390656,8,e,t)}function vl(e,t){return Hn(2048,8,e,t)}function cd(e,t){return Hn(4,2,e,t)}function hd(e,t){return Hn(4,4,e,t)}function ud(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dd(e,t,r){return r=r!=null?r.concat([e]):null,Hn(4,4,ud.bind(null,t,e),r)}function ml(){}function fd(e,t){var r=vt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&_l(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function _d(e,t){var r=vt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&_l(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function pd(e,t,r){return Dr&21?(bt(r,t)||(r=yu(),be.lanes|=r,Ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=r)}function xp(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var s=Eo.transition;Eo.transition={};try{e(!1),t()}finally{ve=r,Eo.transition=s}}function gd(){return vt().memoizedState}function bp(e,t,r){var s=cr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},vd(e))md(t,r);else if(r=Zu(e,t,r,s),r!==null){var d=Je();xt(r,e,s,d),Cd(r,t,s)}}function Lp(e,t,r){var s=cr(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(vd(e))md(t,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var y=t.lastRenderedState,i=g(y,r);if(d.hasEagerState=!0,d.eagerState=i,bt(i,y)){var o=t.interleaved;o===null?(d.next=d,cl(t)):(d.next=o.next,o.next=d),t.interleaved=d;return}}catch{}finally{}r=Zu(e,t,d,s),r!==null&&(d=Je(),xt(r,e,s,d),Cd(r,t,s))}}function vd(e){var t=e.alternate;return e===be||t!==null&&t===be}function md(e,t){$i=Sn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Cd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Xa(e,r)}}var wn={readContext:gt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},Ep={readContext:gt,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Dc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qs(4194308,4,ud.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return qs(4,2,e,t)},useMemo:function(e,t){var r=Et();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Et();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=bp.bind(null,be,e),[s.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:Mc,useDebugValue:ml,useDeferredValue:function(e){return Et().memoizedState=e},useTransition:function(){var e=Mc(!1),t=e[0];return e=xp.bind(null,e[1]),Et().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=be,d=Et();if(we){if(r===void 0)throw Error(q(407));r=r()}else{if(r=t(),Fe===null)throw Error(q(349));Dr&30||id(s,t,r)}d.memoizedState=r;var g={value:r,getSnapshot:t};return d.queue=g,Dc(nd.bind(null,s,g,e),[e]),s.flags|=2048,ns(9,sd.bind(null,s,g,r,t),void 0,null),r},useId:function(){var e=Et(),t=Fe.identifierPrefix;if(we){var r=$t,s=Ht;r=(s&~(1<<32-wt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=is++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kp={readContext:gt,useCallback:fd,useContext:gt,useEffect:vl,useImperativeHandle:dd,useInsertionEffect:cd,useLayoutEffect:hd,useMemo:_d,useReducer:ko,useRef:ld,useState:function(){return ko(ss)},useDebugValue:ml,useDeferredValue:function(e){var t=vt();return pd(t,Te.memoizedState,e)},useTransition:function(){var e=ko(ss)[0],t=vt().memoizedState;return[e,t]},useMutableSource:td,useSyncExternalStore:rd,useId:gd,unstable_isNewReconciler:!1},Rp={readContext:gt,useCallback:fd,useContext:gt,useEffect:vl,useImperativeHandle:dd,useInsertionEffect:cd,useLayoutEffect:hd,useMemo:_d,useReducer:Ro,useRef:ld,useState:function(){return Ro(ss)},useDebugValue:ml,useDeferredValue:function(e){var t=vt();return Te===null?t.memoizedState=e:pd(t,Te.memoizedState,e)},useTransition:function(){var e=Ro(ss)[0],t=vt().memoizedState;return[e,t]},useMutableSource:td,useSyncExternalStore:rd,useId:gd,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _a(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Le({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $n={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Je(),d=cr(e),g=Wt(s,d);g.payload=t,r!=null&&(g.callback=r),t=ar(e,g,d),t!==null&&(xt(t,e,d,s),Gs(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Je(),d=cr(e),g=Wt(s,d);g.tag=1,g.payload=t,r!=null&&(g.callback=r),t=ar(e,g,d),t!==null&&(xt(t,e,d,s),Gs(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Je(),s=cr(e),d=Wt(r,s);d.tag=2,t!=null&&(d.callback=t),t=ar(e,d,s),t!==null&&(xt(t,e,s,r),Gs(t,e,s))}};function Ac(e,t,r,s,d,g,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,y):t.prototype&&t.prototype.isPureReactComponent?!Yi(r,s)||!Yi(d,g):!0}function yd(e,t,r){var s=!1,d=fr,g=t.contextType;return typeof g=="object"&&g!==null?g=gt(g):(d=rt(t)?Rr:Ge.current,s=t.contextTypes,g=(s=s!=null)?oi(e,d):fr),t=new t(r,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$n,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=g),t}function Tc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&$n.enqueueReplaceState(t,t.state,null)}function pa(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},hl(e);var g=t.contextType;typeof g=="object"&&g!==null?d.context=gt(g):(g=rt(t)?Rr:Ge.current,d.context=oi(e,g)),d.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(_a(e,t,g,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&$n.enqueueReplaceState(d,d.state,null),Cn(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function hi(e,t){try{var r="",s=t;do r+=r_(s),s=s.return;while(s);var d=r}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:d,digest:null}}function Mo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ga(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Mp=typeof WeakMap=="function"?WeakMap:Map;function Sd(e,t,r){r=Wt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){bn||(bn=!0,Ea=s),ga(e,t)},r}function wd(e,t,r){r=Wt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){ga(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){ga(e,t),typeof s!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function Bc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Mp;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=zp.bind(null,e,t,r),t.then(e,e))}function Oc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pc(e,t,r,s,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wt(-1,1),t.tag=2,ar(r,t,1))),r.lanes|=1),e)}var Dp=Kt.ReactCurrentOwner,et=!1;function Xe(e,t,r,s){t.child=e===null?Yu(t,null,r,s):li(t,e.child,r,s)}function Ic(e,t,r,s,d){r=r.render;var g=t.ref;return ti(t,d),s=pl(e,t,r,s,g,d),r=gl(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Gt(e,t,d)):(we&&r&&il(t),t.flags|=1,Xe(e,t,s,d),t.child)}function Fc(e,t,r,s,d){if(e===null){var g=r.type;return typeof g=="function"&&!El(g)&&g.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=g,xd(e,t,g,s,d)):(e=Zs(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&d)){var y=g.memoizedProps;if(r=r.compare,r=r!==null?r:Yi,r(y,s)&&e.ref===t.ref)return Gt(e,t,d)}return t.flags|=1,e=hr(g,s),e.ref=t.ref,e.return=t,t.child=e}function xd(e,t,r,s,d){if(e!==null){var g=e.memoizedProps;if(Yi(g,s)&&e.ref===t.ref)if(et=!1,t.pendingProps=s=g,(e.lanes&d)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Gt(e,t,d)}return va(e,t,r,s,d)}function bd(e,t,r){var s=t.pendingProps,d=s.children,g=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Jr,nt),nt|=r;else{if(!(r&1073741824))return e=g!==null?g.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Jr,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=g!==null?g.baseLanes:r,Ce(Jr,nt),nt|=s}else g!==null?(s=g.baseLanes|r,t.memoizedState=null):s=r,Ce(Jr,nt),nt|=s;return Xe(e,t,d,r),t.child}function Ld(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function va(e,t,r,s,d){var g=rt(r)?Rr:Ge.current;return g=oi(t,g),ti(t,d),r=pl(e,t,r,s,g,d),s=gl(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Gt(e,t,d)):(we&&s&&il(t),t.flags|=1,Xe(e,t,r,d),t.child)}function Nc(e,t,r,s,d){if(rt(r)){var g=!0;_n(t)}else g=!1;if(ti(t,d),t.stateNode===null)Xs(e,t),yd(t,r,s),pa(t,r,s,d),s=!0;else if(e===null){var y=t.stateNode,i=t.memoizedProps;y.props=i;var o=y.context,f=r.contextType;typeof f=="object"&&f!==null?f=gt(f):(f=rt(r)?Rr:Ge.current,f=oi(t,f));var _=r.getDerivedStateFromProps,u=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function";u||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(i!==s||o!==f)&&Tc(t,y,s,f),Yt=!1;var p=t.memoizedState;y.state=p,Cn(t,s,y,d),o=t.memoizedState,i!==s||p!==o||tt.current||Yt?(typeof _=="function"&&(_a(t,r,_,s),o=t.memoizedState),(i=Yt||Ac(t,r,i,s,p,o,f))?(u||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),y.props=s,y.state=o,y.context=f,s=i):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{y=t.stateNode,Qu(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:Ct(t.type,i),y.props=f,u=t.pendingProps,p=y.context,o=r.contextType,typeof o=="object"&&o!==null?o=gt(o):(o=rt(r)?Rr:Ge.current,o=oi(t,o));var w=r.getDerivedStateFromProps;(_=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(i!==u||p!==o)&&Tc(t,y,s,o),Yt=!1,p=t.memoizedState,y.state=p,Cn(t,s,y,d);var S=t.memoizedState;i!==u||p!==S||tt.current||Yt?(typeof w=="function"&&(_a(t,r,w,s),S=t.memoizedState),(f=Yt||Ac(t,r,f,s,p,S,o)||!1)?(_||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,S,o),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,S,o)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=S),y.props=s,y.state=S,y.context=o,s=f):(typeof y.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return ma(e,t,r,s,g,d)}function ma(e,t,r,s,d,g){Ld(e,t);var y=(t.flags&128)!==0;if(!s&&!y)return d&&xc(t,r,!1),Gt(e,t,g);s=t.stateNode,Dp.current=t;var i=y&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&y?(t.child=li(t,e.child,null,g),t.child=li(t,null,i,g)):Xe(e,t,i,g),t.memoizedState=s.state,d&&xc(t,r,!0),t.child}function Ed(e){var t=e.stateNode;t.pendingContext?wc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wc(e,t.context,!1),ul(e,t.containerInfo)}function Hc(e,t,r,s,d){return ai(),nl(d),t.flags|=256,Xe(e,t,r,s),t.child}var Ca={dehydrated:null,treeContext:null,retryLane:0};function ya(e){return{baseLanes:e,cachePool:null,transitions:null}}function kd(e,t,r){var s=t.pendingProps,d=xe.current,g=!1,y=(t.flags&128)!==0,i;if((i=y)||(i=e!==null&&e.memoizedState===null?!1:(d&2)!==0),i?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ce(xe,d&1),e===null)return da(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=s.children,e=s.fallback,g?(s=t.mode,g=t.child,y={mode:"hidden",children:y},!(s&1)&&g!==null?(g.childLanes=0,g.pendingProps=y):g=zn(y,s,0,null),e=kr(e,s,r,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=ya(r),t.memoizedState=Ca,e):Cl(t,y));if(d=e.memoizedState,d!==null&&(i=d.dehydrated,i!==null))return Ap(e,t,y,s,i,d,r);if(g){g=s.fallback,y=t.mode,d=e.child,i=d.sibling;var o={mode:"hidden",children:s.children};return!(y&1)&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=hr(d,o),s.subtreeFlags=d.subtreeFlags&14680064),i!==null?g=hr(i,g):(g=kr(g,y,r,null),g.flags|=2),g.return=t,s.return=t,s.sibling=g,t.child=s,s=g,g=t.child,y=e.child.memoizedState,y=y===null?ya(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},g.memoizedState=y,g.childLanes=e.childLanes&~r,t.memoizedState=Ca,s}return g=e.child,e=g.sibling,s=hr(g,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Cl(e,t){return t=zn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ps(e,t,r,s){return s!==null&&nl(s),li(t,e.child,null,r),e=Cl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ap(e,t,r,s,d,g,y){if(r)return t.flags&256?(t.flags&=-257,s=Mo(Error(q(422))),Ps(e,t,y,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=s.fallback,d=t.mode,s=zn({mode:"visible",children:s.children},d,0,null),g=kr(g,d,y,null),g.flags|=2,s.return=t,g.return=t,s.sibling=g,t.child=s,t.mode&1&&li(t,e.child,null,y),t.child.memoizedState=ya(y),t.memoizedState=Ca,g);if(!(t.mode&1))return Ps(e,t,y,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var i=s.dgst;return s=i,g=Error(q(419)),s=Mo(g,s,void 0),Ps(e,t,y,s)}if(i=(y&e.childLanes)!==0,et||i){if(s=Fe,s!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(s.suspendedLanes|y)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Vt(e,d),xt(s,e,d,-1))}return Ll(),s=Mo(Error(q(421))),Ps(e,t,y,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Up.bind(null,e),d._reactRetry=t,null):(e=g.treeContext,ot=or(d.nextSibling),at=t,we=!0,St=null,e!==null&&(dt[ft++]=Ht,dt[ft++]=$t,dt[ft++]=Mr,Ht=e.id,$t=e.overflow,Mr=t),t=Cl(t,s.children),t.flags|=4096,t)}function $c(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),fa(e.return,t,r)}function Do(e,t,r,s,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=r,g.tailMode=d)}function Rd(e,t,r){var s=t.pendingProps,d=s.revealOrder,g=s.tail;if(Xe(e,t,s.children,r),s=xe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$c(e,r,t);else if(e.tag===19)$c(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ce(xe,s),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&yn(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Do(t,!1,d,r,g);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&yn(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Do(t,!0,r,null,g);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,r=hr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Tp(e,t,r){switch(t.tag){case 3:Ed(t),ai();break;case 5:ed(t);break;case 1:rt(t.type)&&_n(t);break;case 4:ul(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;Ce(vn,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ce(xe,xe.current&1),t.flags|=128,null):r&t.child.childLanes?kd(e,t,r):(Ce(xe,xe.current&1),e=Gt(e,t,r),e!==null?e.sibling:null);Ce(xe,xe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Rd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(xe,xe.current),s)break;return null;case 22:case 23:return t.lanes=0,bd(e,t,r)}return Gt(e,t,r)}var Md,Sa,Dd,Ad;Md=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sa=function(){};Dd=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,br(Dt.current);var g=null;switch(r){case"input":d=zo(e,d),s=zo(e,s),g=[];break;case"select":d=Le({},d,{value:void 0}),s=Le({},s,{value:void 0}),g=[];break;case"textarea":d=Go(e,d),s=Go(e,s),g=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=dn)}qo(r,s);var y;r=null;for(f in d)if(!s.hasOwnProperty(f)&&d.hasOwnProperty(f)&&d[f]!=null)if(f==="style"){var i=d[f];for(y in i)i.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ui.hasOwnProperty(f)?g||(g=[]):(g=g||[]).push(f,null));for(f in s){var o=s[f];if(i=d?.[f],s.hasOwnProperty(f)&&o!==i&&(o!=null||i!=null))if(f==="style")if(i){for(y in i)!i.hasOwnProperty(y)||o&&o.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in o)o.hasOwnProperty(y)&&i[y]!==o[y]&&(r||(r={}),r[y]=o[y])}else r||(g||(g=[]),g.push(f,r)),r=o;else f==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(g=g||[]).push(f,o)):f==="children"?typeof o!="string"&&typeof o!="number"||(g=g||[]).push(f,""+o):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ui.hasOwnProperty(f)?(o!=null&&f==="onScroll"&&ye("scroll",e),g||i===o||(g=[])):(g=g||[]).push(f,o))}r&&(g=g||[]).push("style",r);var f=g;(t.updateQueue=f)&&(t.flags|=4)}};Ad=function(e,t,r,s){r!==s&&(t.flags|=4)};function Ri(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Bp(e,t,r){var s=t.pendingProps;switch(sl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return rt(t.type)&&fn(),ze(t),null;case 3:return s=t.stateNode,ci(),Se(tt),Se(Ge),fl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Bs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(Ma(St),St=null))),Sa(e,t),ze(t),null;case 5:dl(t);var d=br(rs.current);if(r=t.type,e!==null&&t.stateNode!=null)Dd(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(q(166));return ze(t),null}if(e=br(Dt.current),Bs(t)){s=t.stateNode,r=t.type;var g=t.memoizedProps;switch(s[Rt]=t,s[es]=g,e=(t.mode&1)!==0,r){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(d=0;d<Oi.length;d++)ye(Oi[d],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":Xl(s,g),ye("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!g.multiple},ye("invalid",s);break;case"textarea":Yl(s,g),ye("invalid",s)}qo(r,g),d=null;for(var y in g)if(g.hasOwnProperty(y)){var i=g[y];y==="children"?typeof i=="string"?s.textContent!==i&&(g.suppressHydrationWarning!==!0&&Ts(s.textContent,i,e),d=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(g.suppressHydrationWarning!==!0&&Ts(s.textContent,i,e),d=["children",""+i]):Ui.hasOwnProperty(y)&&i!=null&&y==="onScroll"&&ye("scroll",s)}switch(r){case"input":bs(s),Jl(s,g,!0);break;case"textarea":bs(s),Zl(s);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(s.onclick=dn)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=y.createElement(r,{is:s.is}):(e=y.createElement(r),r==="select"&&(y=e,s.multiple?y.multiple=!0:s.size&&(y.size=s.size))):e=y.createElementNS(e,r),e[Rt]=t,e[es]=s,Md(e,t,!1,!1),t.stateNode=e;e:{switch(y=Xo(r,s),r){case"dialog":ye("cancel",e),ye("close",e),d=s;break;case"iframe":case"object":case"embed":ye("load",e),d=s;break;case"video":case"audio":for(d=0;d<Oi.length;d++)ye(Oi[d],e);d=s;break;case"source":ye("error",e),d=s;break;case"img":case"image":case"link":ye("error",e),ye("load",e),d=s;break;case"details":ye("toggle",e),d=s;break;case"input":Xl(e,s),d=zo(e,s),ye("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=Le({},s,{value:void 0}),ye("invalid",e);break;case"textarea":Yl(e,s),d=Go(e,s),ye("invalid",e);break;default:d=s}qo(r,d),i=d;for(g in i)if(i.hasOwnProperty(g)){var o=i[g];g==="style"?lu(e,o):g==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&ou(e,o)):g==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Vi(e,o):typeof o=="number"&&Vi(e,""+o):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Ui.hasOwnProperty(g)?o!=null&&g==="onScroll"&&ye("scroll",e):o!=null&&za(e,g,o,y))}switch(r){case"input":bs(e),Jl(e,s,!1);break;case"textarea":bs(e),Zl(e);break;case"option":s.value!=null&&e.setAttribute("value",""+dr(s.value));break;case"select":e.multiple=!!s.multiple,g=s.value,g!=null?Yr(e,!!s.multiple,g,!1):s.defaultValue!=null&&Yr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=dn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)Ad(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(q(166));if(r=br(rs.current),br(Dt.current),Bs(t)){if(s=t.stateNode,r=t.memoizedProps,s[Rt]=t,(g=s.nodeValue!==r)&&(e=at,e!==null))switch(e.tag){case 3:Ts(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ts(s.nodeValue,r,(e.mode&1)!==0)}g&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Rt]=t,t.stateNode=s}return ze(t),null;case 13:if(Se(xe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&ot!==null&&t.mode&1&&!(t.flags&128))Xu(),ai(),t.flags|=98560,g=!1;else if(g=Bs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!g)throw Error(q(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(q(317));g[Rt]=t}else ai(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),g=!1}else St!==null&&(Ma(St),St=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Be===0&&(Be=3):Ll())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return ci(),Sa(e,t),e===null&&Zi(t.stateNode.containerInfo),ze(t),null;case 10:return ll(t.type._context),ze(t),null;case 17:return rt(t.type)&&fn(),ze(t),null;case 19:if(Se(xe),g=t.memoizedState,g===null)return ze(t),null;if(s=(t.flags&128)!==0,y=g.rendering,y===null)if(s)Ri(g,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=yn(e),y!==null){for(t.flags|=128,Ri(g,!1),s=y.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)g=r,e=s,g.flags&=14680066,y=g.alternate,y===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=y.childLanes,g.lanes=y.lanes,g.child=y.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=y.memoizedProps,g.memoizedState=y.memoizedState,g.updateQueue=y.updateQueue,g.type=y.type,e=y.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ce(xe,xe.current&1|2),t.child}e=e.sibling}g.tail!==null&&ke()>ui&&(t.flags|=128,s=!0,Ri(g,!1),t.lanes=4194304)}else{if(!s)if(e=yn(y),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ri(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!we)return ze(t),null}else 2*ke()-g.renderingStartTime>ui&&r!==1073741824&&(t.flags|=128,s=!0,Ri(g,!1),t.lanes=4194304);g.isBackwards?(y.sibling=t.child,t.child=y):(r=g.last,r!==null?r.sibling=y:t.child=y,g.last=y)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=ke(),t.sibling=null,r=xe.current,Ce(xe,s?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return bl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?nt&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function Op(e,t){switch(sl(t),t.tag){case 1:return rt(t.type)&&fn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ci(),Se(tt),Se(Ge),fl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dl(t),null;case 13:if(Se(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(xe),null;case 4:return ci(),null;case 10:return ll(t.type._context),null;case 22:case 23:return bl(),null;case 24:return null;default:return null}}var Is=!1,Ve=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,re=null;function Xr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ee(e,t,s)}else r.current=null}function wa(e,t,r){try{r()}catch(s){Ee(e,t,s)}}var jc=!1;function Ip(e,t){if(na=cn,e=Iu(),rl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var y=0,i=-1,o=-1,f=0,_=0,u=e,p=null;t:for(;;){for(var w;u!==r||d!==0&&u.nodeType!==3||(i=y+d),u!==g||s!==0&&u.nodeType!==3||(o=y+s),u.nodeType===3&&(y+=u.nodeValue.length),(w=u.firstChild)!==null;)p=u,u=w;for(;;){if(u===e)break t;if(p===r&&++f===d&&(i=y),p===g&&++_===s&&(o=y),(w=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=w}r=i===-1||o===-1?null:{start:i,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(oa={focusedElem:e,selectionRange:r},cn=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var h=S.memoizedProps,n=S.memoizedState,a=t.stateNode,l=a.getSnapshotBeforeUpdate(t.elementType===t.type?h:Ct(t.type,h),n);a.__reactInternalSnapshotBeforeUpdate=l}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(m){Ee(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return S=jc,jc=!1,S}function ji(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var g=d.destroy;d.destroy=void 0,g!==void 0&&wa(t,r,g)}d=d.next}while(d!==s)}}function jn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function xa(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Td(e){var t=e.alternate;t!==null&&(e.alternate=null,Td(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[es],delete t[ca],delete t[mp],delete t[Cp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bd(e){return e.tag===5||e.tag===3||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ba(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=dn));else if(s!==4&&(e=e.child,e!==null))for(ba(e,t,r),e=e.sibling;e!==null;)ba(e,t,r),e=e.sibling}function La(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(La(e,t,r),e=e.sibling;e!==null;)La(e,t,r),e=e.sibling}var Ne=null,yt=!1;function Xt(e,t,r){for(r=r.child;r!==null;)Od(e,t,r),r=r.sibling}function Od(e,t,r){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Bn,r)}catch{}switch(r.tag){case 5:Ve||Xr(r,t);case 6:var s=Ne,d=yt;Ne=null,Xt(e,t,r),Ne=s,yt=d,Ne!==null&&(yt?(e=Ne,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ne.removeChild(r.stateNode));break;case 18:Ne!==null&&(yt?(e=Ne,r=r.stateNode,e.nodeType===8?xo(e.parentNode,r):e.nodeType===1&&xo(e,r),Xi(e)):xo(Ne,r.stateNode));break;case 4:s=Ne,d=yt,Ne=r.stateNode.containerInfo,yt=!0,Xt(e,t,r),Ne=s,yt=d;break;case 0:case 11:case 14:case 15:if(!Ve&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var g=d,y=g.destroy;g=g.tag,y!==void 0&&(g&2||g&4)&&wa(r,t,y),d=d.next}while(d!==s)}Xt(e,t,r);break;case 1:if(!Ve&&(Xr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){Ee(r,t,i)}Xt(e,t,r);break;case 21:Xt(e,t,r);break;case 22:r.mode&1?(Ve=(s=Ve)||r.memoizedState!==null,Xt(e,t,r),Ve=s):Xt(e,t,r);break;default:Xt(e,t,r)}}function zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Pp),t.forEach(function(s){var d=Vp.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function mt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var g=e,y=t,i=y;e:for(;i!==null;){switch(i.tag){case 5:Ne=i.stateNode,yt=!1;break e;case 3:Ne=i.stateNode.containerInfo,yt=!0;break e;case 4:Ne=i.stateNode.containerInfo,yt=!0;break e}i=i.return}if(Ne===null)throw Error(q(160));Od(g,y,d),Ne=null,yt=!1;var o=d.alternate;o!==null&&(o.return=null),d.return=null}catch(f){Ee(d,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pd(t,e),t=t.sibling}function Pd(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),Lt(e),s&4){try{ji(3,e,e.return),jn(3,e)}catch(h){Ee(e,e.return,h)}try{ji(5,e,e.return)}catch(h){Ee(e,e.return,h)}}break;case 1:mt(t,e),Lt(e),s&512&&r!==null&&Xr(r,r.return);break;case 5:if(mt(t,e),Lt(e),s&512&&r!==null&&Xr(r,r.return),e.flags&32){var d=e.stateNode;try{Vi(d,"")}catch(h){Ee(e,e.return,h)}}if(s&4&&(d=e.stateNode,d!=null)){var g=e.memoizedProps,y=r!==null?r.memoizedProps:g,i=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{i==="input"&&g.type==="radio"&&g.name!=null&&iu(d,g),Xo(i,y);var f=Xo(i,g);for(y=0;y<o.length;y+=2){var _=o[y],u=o[y+1];_==="style"?lu(d,u):_==="dangerouslySetInnerHTML"?ou(d,u):_==="children"?Vi(d,u):za(d,_,u,f)}switch(i){case"input":Uo(d,g);break;case"textarea":su(d,g);break;case"select":var p=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var w=g.value;w!=null?Yr(d,!!g.multiple,w,!1):p!==!!g.multiple&&(g.defaultValue!=null?Yr(d,!!g.multiple,g.defaultValue,!0):Yr(d,!!g.multiple,g.multiple?[]:"",!1))}d[es]=g}catch(h){Ee(e,e.return,h)}}break;case 6:if(mt(t,e),Lt(e),s&4){if(e.stateNode===null)throw Error(q(162));d=e.stateNode,g=e.memoizedProps;try{d.nodeValue=g}catch(h){Ee(e,e.return,h)}}break;case 3:if(mt(t,e),Lt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Xi(t.containerInfo)}catch(h){Ee(e,e.return,h)}break;case 4:mt(t,e),Lt(e);break;case 13:mt(t,e),Lt(e),d=e.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(wl=ke())),s&4&&zc(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(Ve=(f=Ve)||_,mt(t,e),Ve=f):mt(t,e),Lt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!_&&e.mode&1)for(re=e,_=e.child;_!==null;){for(u=re=_;re!==null;){switch(p=re,w=p.child,p.tag){case 0:case 11:case 14:case 15:ji(4,p,p.return);break;case 1:Xr(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(h){Ee(s,r,h)}}break;case 5:Xr(p,p.return);break;case 22:if(p.memoizedState!==null){Vc(u);continue}}w!==null?(w.return=p,re=w):Vc(u)}_=_.sibling}e:for(_=null,u=e;;){if(u.tag===5){if(_===null){_=u;try{d=u.stateNode,f?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(i=u.stateNode,o=u.memoizedProps.style,y=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=au("display",y))}catch(h){Ee(e,e.return,h)}}}else if(u.tag===6){if(_===null)try{u.stateNode.nodeValue=f?"":u.memoizedProps}catch(h){Ee(e,e.return,h)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;_===u&&(_=null),u=u.return}_===u&&(_=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:mt(t,e),Lt(e),s&4&&zc(e);break;case 21:break;default:mt(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Bd(r)){var s=r;break e}r=r.return}throw Error(q(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(Vi(d,""),s.flags&=-33);var g=Wc(e);La(e,g,d);break;case 3:case 4:var y=s.stateNode.containerInfo,i=Wc(e);ba(e,i,y);break;default:throw Error(q(161))}}catch(o){Ee(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fp(e,t,r){re=e,Id(e)}function Id(e,t,r){for(var s=(e.mode&1)!==0;re!==null;){var d=re,g=d.child;if(d.tag===22&&s){var y=d.memoizedState!==null||Is;if(!y){var i=d.alternate,o=i!==null&&i.memoizedState!==null||Ve;i=Is;var f=Ve;if(Is=y,(Ve=o)&&!f)for(re=d;re!==null;)y=re,o=y.child,y.tag===22&&y.memoizedState!==null?Gc(d):o!==null?(o.return=y,re=o):Gc(d);for(;g!==null;)re=g,Id(g),g=g.sibling;re=d,Is=i,Ve=f}Uc(e)}else d.subtreeFlags&8772&&g!==null?(g.return=d,re=g):Uc(e)}}function Uc(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||jn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ve)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Ct(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&Rc(t,g,s);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Rc(t,y,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var u=_.dehydrated;u!==null&&Xi(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ve||t.flags&512&&xa(t)}catch(p){Ee(t,t.return,p)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function Vc(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function Gc(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{jn(4,t)}catch(o){Ee(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(o){Ee(t,d,o)}}var g=t.return;try{xa(t)}catch(o){Ee(t,g,o)}break;case 5:var y=t.return;try{xa(t)}catch(o){Ee(t,y,o)}}}catch(o){Ee(t,t.return,o)}if(t===e){re=null;break}var i=t.sibling;if(i!==null){i.return=t.return,re=i;break}re=t.return}}var Np=Math.ceil,xn=Kt.ReactCurrentDispatcher,yl=Kt.ReactCurrentOwner,pt=Kt.ReactCurrentBatchConfig,fe=0,Fe=null,Ae=null,$e=0,nt=0,Jr=pr(0),Be=0,os=null,Ar=0,Wn=0,Sl=0,Wi=null,Qe=null,wl=0,ui=1/0,Ft=null,bn=!1,Ea=null,lr=null,Fs=!1,tr=null,Ln=0,zi=0,ka=null,Js=-1,Ys=0;function Je(){return fe&6?ke():Js!==-1?Js:Js=ke()}function cr(e){return e.mode&1?fe&2&&$e!==0?$e&-$e:Sp.transition!==null?(Ys===0&&(Ys=yu()),Ys):(e=ve,e!==0||(e=window.event,e=e===void 0?16:ku(e.type)),e):1}function xt(e,t,r,s){if(50<zi)throw zi=0,ka=null,Error(q(185));us(e,r,s),(!(fe&2)||e!==Fe)&&(e===Fe&&(!(fe&2)&&(Wn|=r),Be===4&&Qt(e,$e)),it(e,s),r===1&&fe===0&&!(t.mode&1)&&(ui=ke()+500,Nn&&gr()))}function it(e,t){var r=e.callbackNode;S_(e,t);var s=ln(e,e===Fe?$e:0);if(s===0)r!==null&&tc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&tc(r),t===1)e.tag===0?yp(Kc.bind(null,e)):Gu(Kc.bind(null,e)),gp(function(){!(fe&6)&&gr()}),r=null;else{switch(Su(s)){case 1:r=qa;break;case 4:r=mu;break;case 16:r=an;break;case 536870912:r=Cu;break;default:r=an}r=Ud(r,Fd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fd(e,t){if(Js=-1,Ys=0,fe&6)throw Error(q(327));var r=e.callbackNode;if(ri()&&e.callbackNode!==r)return null;var s=ln(e,e===Fe?$e:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=En(e,s);else{t=s;var d=fe;fe|=2;var g=Hd();(Fe!==e||$e!==t)&&(Ft=null,ui=ke()+500,Er(e,t));do try{jp();break}catch(i){Nd(e,i)}while(!0);al(),xn.current=g,fe=d,Ae!==null?t=0:(Fe=null,$e=0,t=Be)}if(t!==0){if(t===2&&(d=ea(e),d!==0&&(s=d,t=Ra(e,d))),t===1)throw r=os,Er(e,0),Qt(e,s),it(e,ke()),r;if(t===6)Qt(e,s);else{if(d=e.current.alternate,!(s&30)&&!Hp(d)&&(t=En(e,s),t===2&&(g=ea(e),g!==0&&(s=g,t=Ra(e,g))),t===1))throw r=os,Er(e,0),Qt(e,s),it(e,ke()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(q(345));case 2:Sr(e,Qe,Ft);break;case 3:if(Qt(e,s),(s&130023424)===s&&(t=wl+500-ke(),10<t)){if(ln(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){Je(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=la(Sr.bind(null,e,Qe,Ft),t);break}Sr(e,Qe,Ft);break;case 4:if(Qt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var y=31-wt(s);g=1<<y,y=t[y],y>d&&(d=y),s&=~g}if(s=d,s=ke()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Np(s/1960))-s,10<s){e.timeoutHandle=la(Sr.bind(null,e,Qe,Ft),s);break}Sr(e,Qe,Ft);break;case 5:Sr(e,Qe,Ft);break;default:throw Error(q(329))}}}return it(e,ke()),e.callbackNode===r?Fd.bind(null,e):null}function Ra(e,t){var r=Wi;return e.current.memoizedState.isDehydrated&&(Er(e,t).flags|=256),e=En(e,t),e!==2&&(t=Qe,Qe=r,t!==null&&Ma(t)),e}function Ma(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function Hp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],g=d.getSnapshot;d=d.value;try{if(!bt(g(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qt(e,t){for(t&=~Sl,t&=~Wn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wt(t),s=1<<r;e[r]=-1,t&=~s}}function Kc(e){if(fe&6)throw Error(q(327));ri();var t=ln(e,0);if(!(t&1))return it(e,ke()),null;var r=En(e,t);if(e.tag!==0&&r===2){var s=ea(e);s!==0&&(t=s,r=Ra(e,s))}if(r===1)throw r=os,Er(e,0),Qt(e,t),it(e,ke()),r;if(r===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sr(e,Qe,Ft),it(e,ke()),null}function xl(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(ui=ke()+500,Nn&&gr())}}function Tr(e){tr!==null&&tr.tag===0&&!(fe&6)&&ri();var t=fe;fe|=1;var r=pt.transition,s=ve;try{if(pt.transition=null,ve=1,e)return e()}finally{ve=s,pt.transition=r,fe=t,!(fe&6)&&gr()}}function bl(){nt=Jr.current,Se(Jr)}function Er(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pp(r)),Ae!==null)for(r=Ae.return;r!==null;){var s=r;switch(sl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&fn();break;case 3:ci(),Se(tt),Se(Ge),fl();break;case 5:dl(s);break;case 4:ci();break;case 13:Se(xe);break;case 19:Se(xe);break;case 10:ll(s.type._context);break;case 22:case 23:bl()}r=r.return}if(Fe=e,Ae=e=hr(e.current,null),$e=nt=t,Be=0,os=null,Sl=Wn=Ar=0,Qe=Wi=null,xr!==null){for(t=0;t<xr.length;t++)if(r=xr[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,g=r.pending;if(g!==null){var y=g.next;g.next=d,s.next=y}r.pending=s}xr=null}return e}function Nd(e,t){do{var r=Ae;try{if(al(),Ks.current=wn,Sn){for(var s=be.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}Sn=!1}if(Dr=0,Ie=Te=be=null,$i=!1,is=0,yl.current=null,r===null||r.return===null){Be=1,os=t,Ae=null;break}e:{var g=e,y=r.return,i=r,o=t;if(t=$e,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=o,_=i,u=_.tag;if(!(_.mode&1)&&(u===0||u===11||u===15)){var p=_.alternate;p?(_.updateQueue=p.updateQueue,_.memoizedState=p.memoizedState,_.lanes=p.lanes):(_.updateQueue=null,_.memoizedState=null)}var w=Oc(y);if(w!==null){w.flags&=-257,Pc(w,y,i,g,t),w.mode&1&&Bc(g,f,t),t=w,o=f;var S=t.updateQueue;if(S===null){var h=new Set;h.add(o),t.updateQueue=h}else S.add(o);break e}else{if(!(t&1)){Bc(g,f,t),Ll();break e}o=Error(q(426))}}else if(we&&i.mode&1){var n=Oc(y);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Pc(n,y,i,g,t),nl(hi(o,i));break e}}g=o=hi(o,i),Be!==4&&(Be=2),Wi===null?Wi=[g]:Wi.push(g),g=y;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var a=Sd(g,o,t);kc(g,a);break e;case 1:i=o;var l=g.type,c=g.stateNode;if(!(g.flags&128)&&(typeof l.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(lr===null||!lr.has(c)))){g.flags|=65536,t&=-t,g.lanes|=t;var m=wd(g,i,t);kc(g,m);break e}}g=g.return}while(g!==null)}jd(r)}catch(x){t=x,Ae===r&&r!==null&&(Ae=r=r.return);continue}break}while(!0)}function Hd(){var e=xn.current;return xn.current=wn,e===null?wn:e}function Ll(){(Be===0||Be===3||Be===2)&&(Be=4),Fe===null||!(Ar&268435455)&&!(Wn&268435455)||Qt(Fe,$e)}function En(e,t){var r=fe;fe|=2;var s=Hd();(Fe!==e||$e!==t)&&(Ft=null,Er(e,t));do try{$p();break}catch(d){Nd(e,d)}while(!0);if(al(),fe=r,xn.current=s,Ae!==null)throw Error(q(261));return Fe=null,$e=0,Be}function $p(){for(;Ae!==null;)$d(Ae)}function jp(){for(;Ae!==null&&!d_();)$d(Ae)}function $d(e){var t=zd(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?jd(e):Ae=t,yl.current=null}function jd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Op(r,t),r!==null){r.flags&=32767,Ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,Ae=null;return}}else if(r=Bp(r,t,nt),r!==null){Ae=r;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Be===0&&(Be=5)}function Sr(e,t,r){var s=ve,d=pt.transition;try{pt.transition=null,ve=1,Wp(e,t,r,s)}finally{pt.transition=d,ve=s}return null}function Wp(e,t,r,s){do ri();while(tr!==null);if(fe&6)throw Error(q(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var g=r.lanes|r.childLanes;if(w_(e,g),e===Fe&&(Ae=Fe=null,$e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fs||(Fs=!0,Ud(an,function(){return ri(),null})),g=(r.flags&15990)!==0,r.subtreeFlags&15990||g){g=pt.transition,pt.transition=null;var y=ve;ve=1;var i=fe;fe|=4,yl.current=null,Ip(e,r),Pd(r,e),lp(oa),cn=!!na,oa=na=null,e.current=r,Fp(r),f_(),fe=i,ve=y,pt.transition=g}else e.current=r;if(Fs&&(Fs=!1,tr=e,Ln=d),g=e.pendingLanes,g===0&&(lr=null),g_(r.stateNode),it(e,ke()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(bn)throw bn=!1,e=Ea,Ea=null,e;return Ln&1&&e.tag!==0&&ri(),g=e.pendingLanes,g&1?e===ka?zi++:(zi=0,ka=e):zi=0,gr(),null}function ri(){if(tr!==null){var e=Su(Ln),t=pt.transition,r=ve;try{if(pt.transition=null,ve=16>e?16:e,tr===null)var s=!1;else{if(e=tr,tr=null,Ln=0,fe&6)throw Error(q(331));var d=fe;for(fe|=4,re=e.current;re!==null;){var g=re,y=g.child;if(re.flags&16){var i=g.deletions;if(i!==null){for(var o=0;o<i.length;o++){var f=i[o];for(re=f;re!==null;){var _=re;switch(_.tag){case 0:case 11:case 15:ji(8,_,g)}var u=_.child;if(u!==null)u.return=_,re=u;else for(;re!==null;){_=re;var p=_.sibling,w=_.return;if(Td(_),_===f){re=null;break}if(p!==null){p.return=w,re=p;break}re=w}}}var S=g.alternate;if(S!==null){var h=S.child;if(h!==null){S.child=null;do{var n=h.sibling;h.sibling=null,h=n}while(h!==null)}}re=g}}if(g.subtreeFlags&2064&&y!==null)y.return=g,re=y;else e:for(;re!==null;){if(g=re,g.flags&2048)switch(g.tag){case 0:case 11:case 15:ji(9,g,g.return)}var a=g.sibling;if(a!==null){a.return=g.return,re=a;break e}re=g.return}}var l=e.current;for(re=l;re!==null;){y=re;var c=y.child;if(y.subtreeFlags&2064&&c!==null)c.return=y,re=c;else e:for(y=l;re!==null;){if(i=re,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:jn(9,i)}}catch(x){Ee(i,i.return,x)}if(i===y){re=null;break e}var m=i.sibling;if(m!==null){m.return=i.return,re=m;break e}re=i.return}}if(fe=d,gr(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Bn,e)}catch{}s=!0}return s}finally{ve=r,pt.transition=t}}return!1}function qc(e,t,r){t=hi(r,t),t=Sd(e,t,1),e=ar(e,t,1),t=Je(),e!==null&&(us(e,1,t),it(e,t))}function Ee(e,t,r){if(e.tag===3)qc(e,e,r);else for(;t!==null;){if(t.tag===3){qc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(lr===null||!lr.has(s))){e=hi(r,e),e=wd(t,e,1),t=ar(t,e,1),e=Je(),t!==null&&(us(t,1,e),it(t,e));break}}t=t.return}}function zp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&r,Fe===e&&($e&r)===r&&(Be===4||Be===3&&($e&130023424)===$e&&500>ke()-wl?Er(e,0):Sl|=r),it(e,t)}function Wd(e,t){t===0&&(e.mode&1?(t=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):t=1);var r=Je();e=Vt(e,t),e!==null&&(us(e,t,r),it(e,r))}function Up(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Wd(e,r)}function Vp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(q(314))}s!==null&&s.delete(t),Wd(e,r)}var zd;zd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return et=!1,Tp(e,t,r);et=!!(e.flags&131072)}else et=!1,we&&t.flags&1048576&&Ku(t,gn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xs(e,t),e=t.pendingProps;var d=oi(t,Ge.current);ti(t,r),d=pl(null,t,s,e,d,r);var g=gl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(s)?(g=!0,_n(t)):g=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,hl(t),d.updater=$n,t.stateNode=d,d._reactInternals=t,pa(t,s,e,r),t=ma(null,t,s,!0,g,r)):(t.tag=0,we&&g&&il(t),Xe(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Xs(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=Kp(s),e=Ct(s,e),d){case 0:t=va(null,t,s,e,r);break e;case 1:t=Nc(null,t,s,e,r);break e;case 11:t=Ic(null,t,s,e,r);break e;case 14:t=Fc(null,t,s,Ct(s.type,e),r);break e}throw Error(q(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),va(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),Nc(e,t,s,d,r);case 3:e:{if(Ed(t),e===null)throw Error(q(387));s=t.pendingProps,g=t.memoizedState,d=g.element,Qu(e,t),Cn(t,s,null,r);var y=t.memoizedState;if(s=y.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){d=hi(Error(q(423)),t),t=Hc(e,t,s,r,d);break e}else if(s!==d){d=hi(Error(q(424)),t),t=Hc(e,t,s,r,d);break e}else for(ot=or(t.stateNode.containerInfo.firstChild),at=t,we=!0,St=null,r=Yu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ai(),s===d){t=Gt(e,t,r);break e}Xe(e,t,s,r)}t=t.child}return t;case 5:return ed(t),e===null&&da(t),s=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,y=d.children,aa(s,d)?y=null:g!==null&&aa(s,g)&&(t.flags|=32),Ld(e,t),Xe(e,t,y,r),t.child;case 6:return e===null&&da(t),null;case 13:return kd(e,t,r);case 4:return ul(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=li(t,null,s,r):Xe(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),Ic(e,t,s,d,r);case 7:return Xe(e,t,t.pendingProps,r),t.child;case 8:return Xe(e,t,t.pendingProps.children,r),t.child;case 12:return Xe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,g=t.memoizedProps,y=d.value,Ce(vn,s._currentValue),s._currentValue=y,g!==null)if(bt(g.value,y)){if(g.children===d.children&&!tt.current){t=Gt(e,t,r);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var i=g.dependencies;if(i!==null){y=g.child;for(var o=i.firstContext;o!==null;){if(o.context===s){if(g.tag===1){o=Wt(-1,r&-r),o.tag=2;var f=g.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?o.next=o:(o.next=_.next,_.next=o),f.pending=o}}g.lanes|=r,o=g.alternate,o!==null&&(o.lanes|=r),fa(g.return,r,t),i.lanes|=r;break}o=o.next}}else if(g.tag===10)y=g.type===t.type?null:g.child;else if(g.tag===18){if(y=g.return,y===null)throw Error(q(341));y.lanes|=r,i=y.alternate,i!==null&&(i.lanes|=r),fa(y,r,t),y=g.sibling}else y=g.child;if(y!==null)y.return=g;else for(y=g;y!==null;){if(y===t){y=null;break}if(g=y.sibling,g!==null){g.return=y.return,y=g;break}y=y.return}g=y}Xe(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,ti(t,r),d=gt(d),s=s(d),t.flags|=1,Xe(e,t,s,r),t.child;case 14:return s=t.type,d=Ct(s,t.pendingProps),d=Ct(s.type,d),Fc(e,t,s,d,r);case 15:return xd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Ct(s,d),Xs(e,t),t.tag=1,rt(s)?(e=!0,_n(t)):e=!1,ti(t,r),yd(t,s,d),pa(t,s,d,r),ma(null,t,s,!0,e,r);case 19:return Rd(e,t,r);case 22:return bd(e,t,r)}throw Error(q(156,t.tag))};function Ud(e,t){return vu(e,t)}function Gp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,r,s){return new Gp(e,t,r,s)}function El(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kp(e){if(typeof e=="function")return El(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Va)return 11;if(e===Ga)return 14}return 2}function hr(e,t){var r=e.alternate;return r===null?(r=_t(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Zs(e,t,r,s,d,g){var y=2;if(s=e,typeof e=="function")El(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case $r:return kr(r.children,d,g,t);case Ua:y=8,d|=8;break;case Ho:return e=_t(12,r,t,d|2),e.elementType=Ho,e.lanes=g,e;case $o:return e=_t(13,r,t,d),e.elementType=$o,e.lanes=g,e;case jo:return e=_t(19,r,t,d),e.elementType=jo,e.lanes=g,e;case eu:return zn(r,d,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zh:y=10;break e;case Qh:y=9;break e;case Va:y=11;break e;case Ga:y=14;break e;case Jt:y=16,s=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=_t(y,r,t,d),t.elementType=e,t.type=s,t.lanes=g,t}function kr(e,t,r,s){return e=_t(7,e,s,t),e.lanes=r,e}function zn(e,t,r,s){return e=_t(22,e,s,t),e.elementType=eu,e.lanes=r,e.stateNode={isHidden:!1},e}function Ao(e,t,r){return e=_t(6,e,null,t),e.lanes=r,e}function To(e,t,r){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qp(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function kl(e,t,r,s,d,g,y,i,o){return e=new qp(e,t,r,i,o),t===1?(t=1,g===!0&&(t|=8)):t=0,g=_t(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hl(g),e}function Xp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Vd(e){if(!e)return fr;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var r=e.type;if(rt(r))return Vu(e,r,t)}return t}function Gd(e,t,r,s,d,g,y,i,o){return e=kl(r,s,!0,e,d,g,y,i,o),e.context=Vd(null),r=e.current,s=Je(),d=cr(r),g=Wt(s,d),g.callback=t??null,ar(r,g,d),e.current.lanes=d,us(e,d,s),it(e,s),e}function Un(e,t,r,s){var d=t.current,g=Je(),y=cr(d);return r=Vd(r),t.context===null?t.context=r:t.pendingContext=r,t=Wt(g,y),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ar(d,t,y),e!==null&&(xt(e,d,y,g),Gs(e,d,y)),y}function kn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Rl(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}function Jp(){return null}var Kd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ml(e){this._internalRoot=e}Vn.prototype.render=Ml.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Un(e,t,null,null)};Vn.prototype.unmount=Ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tr(function(){Un(null,e,null,null)}),t[Ut]=null}};function Vn(e){this._internalRoot=e}Vn.prototype.unstable_scheduleHydration=function(e){if(e){var t=bu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Zt.length&&t!==0&&t<Zt[r].priority;r++);Zt.splice(r,0,e),r===0&&Eu(e)}};function Dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jc(){}function Yp(e,t,r,s,d){if(d){if(typeof s=="function"){var g=s;s=function(){var f=kn(y);g.call(f)}}var y=Gd(t,s,e,0,null,!1,!1,"",Jc);return e._reactRootContainer=y,e[Ut]=y.current,Zi(e.nodeType===8?e.parentNode:e),Tr(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var i=s;s=function(){var f=kn(o);i.call(f)}}var o=kl(e,0,!1,null,null,!1,!1,"",Jc);return e._reactRootContainer=o,e[Ut]=o.current,Zi(e.nodeType===8?e.parentNode:e),Tr(function(){Un(t,o,r,s)}),o}function Kn(e,t,r,s,d){var g=r._reactRootContainer;if(g){var y=g;if(typeof d=="function"){var i=d;d=function(){var o=kn(y);i.call(o)}}Un(t,y,e,d)}else y=Yp(r,t,e,d,s);return kn(y)}wu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bi(t.pendingLanes);r!==0&&(Xa(t,r|1),it(t,ke()),!(fe&6)&&(ui=ke()+500,gr()))}break;case 13:Tr(function(){var s=Vt(e,1);if(s!==null){var d=Je();xt(s,e,1,d)}}),Rl(e,1)}};Ja=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var r=Je();xt(t,e,134217728,r)}Rl(e,134217728)}};xu=function(e){if(e.tag===13){var t=cr(e),r=Vt(e,t);if(r!==null){var s=Je();xt(r,e,t,s)}Rl(e,t)}};bu=function(){return ve};Lu=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};Yo=function(e,t,r){switch(t){case"input":if(Uo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=Fn(s);if(!d)throw Error(q(90));ru(s),Uo(s,d)}}}break;case"textarea":su(e,r);break;case"select":t=r.value,t!=null&&Yr(e,!!r.multiple,t,!1)}};uu=xl;du=Tr;var Zp={usingClientEntryPoint:!1,Events:[fs,Ur,Fn,cu,hu,xl]},Mi={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qp={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pu(e),e===null?null:e.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||Jp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{Bn=Ns.inject(Qp),Mt=Ns}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zp;ht.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dl(t))throw Error(q(200));return Xp(e,t,null,r)};ht.createRoot=function(e,t){if(!Dl(e))throw Error(q(299));var r=!1,s="",d=Kd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=kl(e,1,!1,null,null,r,!1,s,d),e[Ut]=t.current,Zi(e.nodeType===8?e.parentNode:e),new Ml(t)};ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=pu(t),e=e===null?null:e.stateNode,e};ht.flushSync=function(e){return Tr(e)};ht.hydrate=function(e,t,r){if(!Gn(t))throw Error(q(200));return Kn(null,e,t,!0,r)};ht.hydrateRoot=function(e,t,r){if(!Dl(e))throw Error(q(405));var s=r!=null&&r.hydratedSources||null,d=!1,g="",y=Kd;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=Gd(t,null,e,1,r??null,d,!1,g,y),e[Ut]=t.current,Zi(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new Vn(t)};ht.render=function(e,t,r){if(!Gn(t))throw Error(q(200));return Kn(null,e,t,!1,r)};ht.unmountComponentAtNode=function(e){if(!Gn(e))throw Error(q(40));return e._reactRootContainer?(Tr(function(){Kn(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};ht.unstable_batchedUpdates=xl;ht.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Gn(r))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Kn(e,t,r,!1,s)};ht.version="18.3.1-next-f1338f8080-20240426";function qd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qd)}catch(e){console.error(e)}}qd(),qh.exports=ht;var eg=qh.exports,Yc=eg;Fo.createRoot=Yc.createRoot,Fo.hydrateRoot=Yc.hydrateRoot;const tg=7683,Xd=V.createContext(null),vr=()=>{const e=V.useContext(Xd);if(!e)throw new Error("useTerminal must be used within a TerminalProvider");return e},rg={ESC:"\x1B",TAB:"	",ENTER:"\r",CTRL_C:"",ARROW_UP:"\x1B[A",ARROW_DOWN:"\x1B[B",ARROW_RIGHT:"\x1B[C",ARROW_LEFT:"\x1B[D",PAGE_UP:"\x1B[5~",PAGE_DOWN:"\x1B[6~",CTRL_L:"\f"},ig=10,sg=[500,1e3,2e3,3e3,5e3,5e3,1e4,1e4,15e3,3e4],Zc="ttyd_last_tmux_session",ng=({children:e})=>{const t=V.useRef(null),r=V.useRef(null),s=V.useRef(new Set),[d,g]=V.useState("connecting"),[y,i]=V.useState(0),o=V.useRef(null),f=V.useRef(!1),_=V.useRef(!1),u=V.useRef(0),p=V.useRef({cols:80,rows:24}),w=V.useRef([]),S=V.useRef(0),h=V.useRef(null),n=V.useCallback(()=>{const b=w.current;if(b.length===0)return;h.current=null;let E;if(b.length===1)E=b[0];else{E=new Uint8Array(S.current);let R=0;for(const k of b)E.set(k,R),R+=k.length}w.current=[],S.current=0,s.current.forEach(R=>R(E))},[]),a=V.useCallback(async b=>{const E=localStorage.getItem(Zc);if(E){console.log(`[Terminal] Attempting to restore tmux session: ${E}`),await new Promise(R=>setTimeout(R,500));try{const R=`http://${location.hostname}:${tg}/api/tmux/list`,k=await fetch(R,{signal:AbortSignal.timeout(3e3)});if(k.ok)if(((await k.json()).sessions||[]).some($=>$.name===E)){if(b.readyState===WebSocket.OPEN){const $=`tmux attach -t ${E}\r`,N=new TextEncoder().encode($),B=new Uint8Array(N.length+1);B[0]=48,B.set(N,1),b.send(B),console.log(`[Terminal] Restored tmux session: ${E}`);return}}else console.log(`[Terminal] Saved session "${E}" no longer exists`),localStorage.removeItem(Zc)}catch{if(b.readyState===WebSocket.OPEN){const R=`tmux attach -t ${E} 2>/dev/null || true\r`,k=new TextEncoder().encode(R),M=new Uint8Array(k.length+1);M[0]=48,M.set(k,1),b.send(M),console.log("[Terminal] Sent tmux attach command (fallback)")}}}},[]),l=V.useCallback(()=>{if(r.current?.readyState===WebSocket.OPEN)return;const b=_.current;g(b?"reconnecting":"connecting");const E=window.location.protocol==="https:"?"wss:":"ws:",R=window.location.host,k=window.location.pathname.replace(/\/$/,""),M=`${E}//${R}${k}/ws`,A=new WebSocket(M,["tty"]);A.binaryType="arraybuffer",r.current=A,A.onopen=()=>{console.log("[Terminal] WebSocket connected"),g("connected"),i(0),u.current=Date.now();const{cols:H,rows:$}=p.current,N=JSON.stringify({AuthToken:"",columns:H,rows:$});A.send(new TextEncoder().encode(N)),b&&(_.current=!1,a(A))},A.onmessage=H=>{const $=new Uint8Array(H.data);if($.length===0)return;const N=String.fromCharCode($[0]);if(N==="0"){const B=$.subarray(1);w.current.push(B),S.current+=B.length;const D=512*1024;S.current>D?n():h.current===null&&(h.current=requestAnimationFrame(n))}else if(N==="1"){const B=new TextDecoder().decode($.subarray(1));document.title=B}},A.onclose=()=>{if(console.log("[Terminal] WebSocket closed"),r.current=null,n(),h.current!==null&&(cancelAnimationFrame(h.current),h.current=null),f.current){f.current=!1,g("disconnected");return}g("disconnected"),_.current=!0,i(H=>{const $=H+1;if($<=ig){const N=sg[H]||3e4;console.log(`[Terminal] Reconnecting in ${N}ms (attempt ${$})`),o.current=window.setTimeout(()=>{l()},N)}return $})},A.onerror=H=>{console.error("[Terminal] WebSocket error",H)}},[a,n]),c=V.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),l()},[l]);V.useEffect(()=>{const b=()=>{if(document.visibilityState==="visible"){const E=r.current;if(!E||E.readyState===WebSocket.CLOSED||E.readyState===WebSocket.CLOSING)console.log("[Terminal] Page became visible, connection lost  reconnecting immediately"),o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),l();else if(E&&E.readyState===WebSocket.OPEN&&Date.now()-u.current>3e4){const{cols:M,rows:A}=p.current,H=JSON.stringify({AuthToken:"",columns:M,rows:A}),$=new TextEncoder().encode(H),N=new Uint8Array($.length+1);N[0]=49,N.set($,1);try{E.send(N)}catch{console.log("[Terminal] Connection stale on visibility change  forcing reconnect"),E.close()}}}};return document.addEventListener("visibilitychange",b),()=>document.removeEventListener("visibilitychange",b)},[l]),V.useEffect(()=>(l(),()=>{f.current=!0,o.current&&clearTimeout(o.current),h.current!==null&&(cancelAnimationFrame(h.current),h.current=null),r.current&&r.current.close()}),[l]);const m=V.useCallback(b=>{if(r.current&&r.current.readyState===WebSocket.OPEN){const E=new TextEncoder().encode(b),R=new Uint8Array(E.length+1);R[0]=48,R.set(E,1),r.current.send(R)}},[]),x=V.useCallback(b=>{const E=rg[b];E&&m(E)},[m]),v=V.useCallback(b=>(s.current.add(b),()=>{s.current.delete(b)}),[]),L=V.useCallback(b=>{r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(new Uint8Array([b]))},[]),C=V.useCallback((b,E)=>{if(p.current={cols:b,rows:E},r.current&&r.current.readyState===WebSocket.OPEN){const R=JSON.stringify({AuthToken:"",columns:b,rows:E}),k=new TextEncoder().encode(R),M=new Uint8Array(k.length+1);M[0]=49,M.set(k,1),r.current.send(M)}},[]);return P.jsx(Xd.Provider,{value:{connectionState:d,sendInput:m,sendKey:x,subscribeOutput:v,sendControl:L,terminalRef:t,resize:C,reconnect:c,reconnectAttempt:y},children:e})},Qc=7683,og=5e3,Jd=V.createContext(null),Yd=()=>{const e=V.useContext(Jd);if(!e)throw new Error("useServerEvents must be used within a ServerEventsProvider");return e},ag=({children:e})=>{const[t,r]=V.useState(""),[s,d]=V.useState(""),[g,y]=V.useState([]),[i,o]=V.useState(null),[f,_]=V.useState(!1),u=V.useRef(null),p=V.useRef(null),w=V.useRef(!0),S=V.useCallback(c=>{r(c.branch||""),d(c.path||""),y(c.tmux?.sessions||[]),o(c.tmux?.currentSession||null),_(!1)},[]),h=V.useCallback(async()=>{try{const c=`http://${location.hostname}:${Qc}`,[m,x]=await Promise.all([fetch(`${c}/api/diff`,{signal:AbortSignal.timeout(3e3)}),fetch(`${c}/api/tmux/list`,{signal:AbortSignal.timeout(3e3)})]);let v="",L="";if(m.ok){const E=await m.json();v=E.branch||"",L=E.git_root||E.cwd||""}let C=[],b=null;if(x.ok){const E=await x.json();C=E.sessions||[],b=E.currentSession||null}r(v),d(L),y(C),o(b),_(!1)}catch{_(!0)}},[]),n=V.useCallback(()=>{p.current||(h(),p.current=window.setInterval(h,og))},[h]),a=V.useCallback(()=>{p.current&&(clearInterval(p.current),p.current=null)},[]),l=V.useCallback(()=>{h()},[h]);return V.useEffect(()=>{const c=`http://${location.hostname}:${Qc}/api/events`,m=new EventSource(c);return u.current=m,m.onmessage=x=>{try{const v=JSON.parse(x.data);S(v)}catch{}},m.onerror=()=>{m.close(),u.current=null,w.current=!1,n()},()=>{m.close(),u.current=null,a()}},[S,n,a]),P.jsx(Jd.Provider,{value:{branch:t,path:s,tmuxSessions:g,currentTmuxSession:i,isOffline:f,refresh:l},children:e})},eh={defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]},lg=({isOpen:e,onClose:t,onConfigChange:r})=>{const[s,d]=V.useState(eh),[g,y]=V.useState(""),[i,o]=V.useState(""),[f,_]=V.useState(()=>localStorage.getItem("terminal_predictive_echo")==="on");V.useEffect(()=>{if(e){const h=localStorage.getItem("ttyd_commands");if(h)try{d(JSON.parse(h))}catch(n){console.error("Failed to parse ttyd_commands",n)}else d(eh)}},[e]);const u=h=>{d(h),localStorage.setItem("ttyd_commands",JSON.stringify(h)),r()},p=h=>{const n=[...s.defaultCommands];n[h].visible=!n[h].visible,u({...s,defaultCommands:n})},w=h=>{const n=s.customCommands.filter((a,l)=>l!==h);u({...s,customCommands:n})},S=h=>{if(h.preventDefault(),!g.trim()||!i.trim())return;const n=[...s.customCommands,{name:g.trim(),cmd:i.trim()}];u({...s,customCommands:n}),y(""),o("")};return e?P.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:P.jsxs("div",{className:"bg-bg-secondary w-full max-w-sm mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col max-h-[80vh]",onClick:h=>h.stopPropagation(),children:[P.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[P.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Command Settings"}),P.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),P.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[P.jsxs("section",{children:[P.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Built-in Commands"}),P.jsx("div",{className:"space-y-2",children:s.defaultCommands.map((h,n)=>P.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[P.jsx("span",{className:"font-mono text-sm text-text-primary",children:h.name}),P.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[P.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h.visible,onChange:()=>p(n)}),P.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]},h.name))})]}),P.jsxs("section",{children:[P.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Custom Commands"}),s.customCommands.length===0?P.jsx("p",{className:"text-sm text-text-muted italic",children:"No custom commands added"}):P.jsx("div",{className:"space-y-2",children:s.customCommands.map((h,n)=>P.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[P.jsxs("div",{className:"flex flex-col min-w-0 mr-2",children:[P.jsx("span",{className:"font-mono text-sm text-text-primary truncate",children:h.name}),P.jsx("span",{className:"font-mono text-xs text-text-muted truncate",children:h.cmd})]}),P.jsx("button",{onClick:()=>w(n),className:"p-2 text-text-secondary hover:text-accent-red transition-colors",children:""})]},n))})]}),P.jsxs("section",{children:[P.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Performance"}),P.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[P.jsxs("div",{className:"flex flex-col",children:[P.jsx("span",{className:"text-sm text-text-primary",children:"Predictive Echo"}),P.jsx("span",{className:"text-xs text-text-muted",children:"Show keystrokes before server confirms"})]}),P.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[P.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:()=>{const h=!f;_(h),localStorage.setItem("terminal_predictive_echo",h?"on":"off"),window.dispatchEvent(new CustomEvent("predictive-echo-changed",{detail:h}))}}),P.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]})]}),P.jsxs("section",{children:[P.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Add New Command"}),P.jsxs("form",{onSubmit:S,className:"space-y-3",children:[P.jsx("div",{children:P.jsx("input",{type:"text",placeholder:"Button Name (e.g. ls -la)",value:g,onChange:h=>y(h.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),P.jsx("div",{children:P.jsx("input",{type:"text",placeholder:"Command (e.g. ls -la\\r)",value:i,onChange:h=>o(h.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),P.jsx("button",{type:"submit",disabled:!g.trim()||!i.trim(),className:"w-full py-2 bg-accent-blue/10 text-accent-blue border border-accent-blue/30 rounded font-medium hover:bg-accent-blue/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Command"})]})]})]})]})}):null},cg=({isOpen:e,onClose:t,onSend:r})=>{const[s,d]=V.useState(""),g=V.useRef(null);V.useEffect(()=>{e?setTimeout(()=>{g.current&&g.current.focus()},50):d("")},[e]);const y=()=>{s&&(r(s),t())},i=o=>{o.key==="Enter"&&(o.metaKey||o.ctrlKey)&&(o.preventDefault(),y())};return e?P.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:P.jsxs("div",{className:"bg-bg-secondary w-full max-w-lg mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col h-[50vh]",onClick:o=>o.stopPropagation(),children:[P.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[P.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Input Text"}),P.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),P.jsx("div",{className:"flex-1 p-4",children:P.jsx("textarea",{ref:g,value:s,onChange:o=>d(o.target.value),onKeyDown:i,placeholder:"Type or paste long text here...",className:"w-full h-full bg-bg-primary border border-border-subtle rounded p-3 font-mono text-sm text-text-primary focus:outline-none focus:border-accent-blue resize-none"})}),P.jsxs("div",{className:"p-4 border-t border-border-subtle flex justify-end gap-3",children:[P.jsx("button",{onClick:t,className:"px-4 py-2 rounded text-text-secondary hover:bg-bg-tertiary transition-colors",children:"Cancel"}),P.jsx("button",{onClick:y,disabled:!s,className:"px-4 py-2 bg-accent-blue text-white rounded font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send (Cmd+Enter)"})]})]})}):null};var Zd={},Qd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var g="",y=0;y<arguments.length;y++){var i=arguments[y];i&&(g=d(g,s(i)))}return g}function s(g){if(typeof g=="string"||typeof g=="number")return g;if(typeof g!="object")return"";if(Array.isArray(g))return r.apply(null,g);if(g.toString!==Object.prototype.toString&&!g.toString.toString().includes("[native code]"))return g.toString();var y="";for(var i in g)t.call(g,i)&&g[i]&&(y=d(y,i));return y}function d(g,y){return y?g?g+" "+y:g+y:g}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Qd);var hg=Qd.exports,ur={},ef={},qt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){}t.prototype={diff:function(d,g){var y,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var f=this;function _(L){return o?(setTimeout(function(){o(void 0,L)},0),!0):L}d=this.castInput(d),g=this.castInput(g),d=this.removeEmpty(this.tokenize(d)),g=this.removeEmpty(this.tokenize(g));var u=g.length,p=d.length,w=1,S=u+p;i.maxEditLength&&(S=Math.min(S,i.maxEditLength));var h=(y=i.timeout)!==null&&y!==void 0?y:1/0,n=Date.now()+h,a=[{oldPos:-1,lastComponent:void 0}],l=this.extractCommon(a[0],g,d,0);if(a[0].oldPos+1>=p&&l+1>=u)return _([{value:this.join(g),count:g.length}]);var c=-1/0,m=1/0;function x(){for(var L=Math.max(c,-w);L<=Math.min(m,w);L+=2){var C=void 0,b=a[L-1],E=a[L+1];b&&(a[L-1]=void 0);var R=!1;if(E){var k=E.oldPos-L;R=E&&0<=k&&k<u}var M=b&&b.oldPos+1<p;if(!R&&!M){a[L]=void 0;continue}if(!M||R&&b.oldPos+1<E.oldPos?C=f.addToPath(E,!0,void 0,0):C=f.addToPath(b,void 0,!0,1),l=f.extractCommon(C,g,d,L),C.oldPos+1>=p&&l+1>=u)return _(r(f,C.lastComponent,g,d,f.useLongestToken));a[L]=C,C.oldPos+1>=p&&(m=Math.min(m,L-1)),l+1>=u&&(c=Math.max(c,L+1))}w++}if(o)(function L(){setTimeout(function(){if(w>S||Date.now()>n)return o();x()||L()},0)})();else for(;w<=S&&Date.now()<=n;){var v=x();if(v)return v}},addToPath:function(d,g,y,i){var o=d.lastComponent;return o&&o.added===g&&o.removed===y?{oldPos:d.oldPos+i,lastComponent:{count:o.count+1,added:g,removed:y,previousComponent:o.previousComponent}}:{oldPos:d.oldPos+i,lastComponent:{count:1,added:g,removed:y,previousComponent:o}}},extractCommon:function(d,g,y,i){for(var o=g.length,f=y.length,_=d.oldPos,u=_-i,p=0;u+1<o&&_+1<f&&this.equals(g[u+1],y[_+1]);)u++,_++,p++;return p&&(d.lastComponent={count:p,previousComponent:d.lastComponent}),d.oldPos=_,u},equals:function(d,g){return this.options.comparator?this.options.comparator(d,g):d===g||this.options.ignoreCase&&d.toLowerCase()===g.toLowerCase()},removeEmpty:function(d){for(var g=[],y=0;y<d.length;y++)d[y]&&g.push(d[y]);return g},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};function r(s,d,g,y,i){for(var o=[],f;d;)o.push(d),f=d.previousComponent,delete d.previousComponent,d=f;o.reverse();for(var _=0,u=o.length,p=0,w=0;_<u;_++){var S=o[_];if(S.removed){if(S.value=s.join(y.slice(w,w+S.count)),w+=S.count,_&&o[_-1].added){var n=o[_-1];o[_-1]=o[_],o[_]=n}}else{if(!S.added&&i){var h=g.slice(p,p+S.count);h=h.map(function(l,c){var m=y[w+c];return m.length>l.length?m:l}),S.value=s.join(h)}else S.value=s.join(g.slice(p,p+S.count));p+=S.count,S.added||(w+=S.count)}}var a=o[u-1];return u>1&&typeof a.value=="string"&&(a.added||a.removed)&&s.equals("",a.value)&&(o[u-2].value+=a.value,o.pop()),o}})(qt);var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.diffChars=fg;ps.characterDiff=void 0;var ug=dg(qt);function dg(e){return e&&e.__esModule?e:{default:e}}var tf=new ug.default;ps.characterDiff=tf;function fg(e,t,r){return tf.diff(e,t,r)}var gi={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.generateOptions=_g;function _g(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Object.defineProperty(gi,"__esModule",{value:!0});gi.diffWords=mg;gi.diffWordsWithSpace=Cg;gi.wordDiff=void 0;var pg=vg(qt),gg=qn;function vg(e){return e&&e.__esModule?e:{default:e}}var th=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,rh=/\S/,gs=new pg.default;gi.wordDiff=gs;gs.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!rh.test(e)&&!rh.test(t)};gs.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&th.test(t[r])&&th.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function mg(e,t,r){return r=(0,gg.generateOptions)(r,{ignoreWhitespace:!0}),gs.diff(e,t,r)}function Cg(e,t,r){return gs.diff(e,t,r)}var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.diffLines=xg;mr.diffTrimmedLines=bg;mr.lineDiff=void 0;var yg=wg(qt),Sg=qn;function wg(e){return e&&e.__esModule?e:{default:e}}var Xn=new yg.default;mr.lineDiff=Xn;Xn.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var s=0;s<r.length;s++){var d=r[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=d:(this.options.ignoreWhitespace&&(d=d.trim()),t.push(d))}return t};function xg(e,t,r){return Xn.diff(e,t,r)}function bg(e,t,r){var s=(0,Sg.generateOptions)(r,{ignoreWhitespace:!0});return Xn.diff(e,t,s)}var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.diffSentences=kg;vs.sentenceDiff=void 0;var Lg=Eg(qt);function Eg(e){return e&&e.__esModule?e:{default:e}}var Al=new Lg.default;vs.sentenceDiff=Al;Al.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function kg(e,t,r){return Al.diff(e,t,r)}var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.diffCss=Dg;ms.cssDiff=void 0;var Rg=Mg(qt);function Mg(e){return e&&e.__esModule?e:{default:e}}var Tl=new Rg.default;ms.cssDiff=Tl;Tl.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Dg(e,t,r){return Tl.diff(e,t,r)}var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.diffJson=Og;vi.canonicalize=Rn;vi.jsonDiff=void 0;var rf=Tg(qt),Ag=mr;function Tg(e){return e&&e.__esModule?e:{default:e}}function Qs(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qs=function(r){return typeof r}:Qs=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qs(e)}var Bg=Object.prototype.toString,Br=new rf.default;vi.jsonDiff=Br;Br.useLongestToken=!0;Br.tokenize=Ag.lineDiff.tokenize;Br.castInput=function(e){var t=this.options,r=t.undefinedReplacement,s=t.stringifyReplacer,d=s===void 0?function(g,y){return typeof y>"u"?r:y}:s;return typeof e=="string"?e:JSON.stringify(Rn(e,null,null,d),d,"  ")};Br.equals=function(e,t){return rf.default.prototype.equals.call(Br,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Og(e,t,r){return Br.diff(e,t,r)}function Rn(e,t,r,s,d){t=t||[],r=r||[],s&&(e=s(d,e));var g;for(g=0;g<t.length;g+=1)if(t[g]===e)return r[g];var y;if(Bg.call(e)==="[object Array]"){for(t.push(e),y=new Array(e.length),r.push(y),g=0;g<e.length;g+=1)y[g]=Rn(e[g],t,r,s,d);return t.pop(),r.pop(),y}if(e&&e.toJSON&&(e=e.toJSON()),Qs(e)==="object"&&e!==null){t.push(e),y={},r.push(y);var i=[],o;for(o in e)e.hasOwnProperty(o)&&i.push(o);for(i.sort(),g=0;g<i.length;g+=1)o=i[g],y[o]=Rn(e[o],t,r,s,o);t.pop(),r.pop()}else y=e;return y}var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.diffArrays=Fg;Cs.arrayDiff=void 0;var Pg=Ig(qt);function Ig(e){return e&&e.__esModule?e:{default:e}}var as=new Pg.default;Cs.arrayDiff=as;as.tokenize=function(e){return e.slice()};as.join=as.removeEmpty=function(e){return e};function Fg(e,t,r){return as.diff(e,t,r)}var Jn={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.parsePatch=Ng;function Ng(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],d=[],g=0;function y(){var f={};for(d.push(f);g<r.length;){var _=r[g];if(/^(\-\-\-|\+\+\+|@@)\s/.test(_))break;var u=/^(?:Index:|diff(?: -r \w+)+)\s+/.exec(_);u&&(f.index=_.substring(u[0].length).trim()),g++}for(i(f),i(f),f.hunks=[];g<r.length;){var p=r[g];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))f.hunks.push(o());else{if(p&&t.strict)throw new Error("Unknown line "+(g+1)+" "+JSON.stringify(p));g++}}}function i(f){var _=/^(---|\+\+\+)\s+/.exec(r[g]);if(_){var u=_[1]==="---"?"old":"new",p=r[g].substring(3).trim().split("	",2),w=p[0].replace(/\\\\/g,"\\");w.startsWith('"')&&w.endsWith('"')&&(w=w.substr(1,w.length-2)),f[u+"FileName"]=w,f[u+"Header"]=(p[1]||"").trim(),g++}}function o(){var f=g,_=r[g++],u=_.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+u[1],oldLines:typeof u[2]>"u"?1:+u[2],newStart:+u[3],newLines:typeof u[4]>"u"?1:+u[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var w=0,S=0;g<r.length&&!(r[g].indexOf("--- ")===0&&g+2<r.length&&r[g+1].indexOf("+++ ")===0&&r[g+2].indexOf("@@")===0);g++){var h=r[g].length==0&&g!=r.length-1?" ":r[g][0];if(h==="+"||h==="-"||h===" "||h==="\\")p.lines.push(r[g]),p.linedelimiters.push(s[g]||`
`),h==="+"?w++:h==="-"?S++:h===" "&&(w++,S++);else break}if(!w&&p.newLines===1&&(p.newLines=0),!S&&p.oldLines===1&&(p.oldLines=0),t.strict){if(w!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(S!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return p}for(;g<r.length;)y();return d}var sf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,s,d){var g=!0,y=!1,i=!1,o=1;return function f(){if(g&&!i){if(y?o++:g=!1,r+o<=d)return o;i=!0}if(!y)return i||(g=!0),s<=r-o?-o++:(y=!0,f())}}})(sf);Object.defineProperty(Jn,"__esModule",{value:!0});Jn.applyPatch=of;Jn.applyPatches=jg;var nf=ys,Hg=$g(sf);function $g(e){return e&&e.__esModule?e:{default:e}}function of(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=(0,nf.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var s=e.split(/\r\n|[\n\v\f\r\x85]/),d=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],g=t.hunks,y=r.compareLine||function(H,$,N,B){return $===B},i=0,o=r.fuzzFactor||0,f=0,_=0,u,p;function w(H,$){for(var N=0;N<H.lines.length;N++){var B=H.lines[N],D=B.length>0?B[0]:" ",T=B.length>0?B.substr(1):B;if(D===" "||D==="-"){if(!y($+1,s[$],D,T)&&(i++,i>o))return!1;$++}}return!0}for(var S=0;S<g.length;S++){for(var h=g[S],n=s.length-h.oldLines,a=0,l=_+h.oldStart-1,c=(0,Hg.default)(l,f,n);a!==void 0;a=c())if(w(h,l+a)){h.offset=_+=a;break}if(a===void 0)return!1;f=h.offset+h.oldStart+h.oldLines}for(var m=0,x=0;x<g.length;x++){var v=g[x],L=v.oldStart+v.offset+m-1;m+=v.newLines-v.oldLines;for(var C=0;C<v.lines.length;C++){var b=v.lines[C],E=b.length>0?b[0]:" ",R=b.length>0?b.substr(1):b,k=v.linedelimiters&&v.linedelimiters[C]||`
`;if(E===" ")L++;else if(E==="-")s.splice(L,1),d.splice(L,1);else if(E==="+")s.splice(L,0,R),d.splice(L,0,k),L++;else if(E==="\\"){var M=v.lines[C-1]?v.lines[C-1][0]:null;M==="+"?u=!0:M==="-"&&(p=!0)}}}if(u)for(;!s[s.length-1];)s.pop(),d.pop();else p&&(s.push(""),d.push(`
`));for(var A=0;A<s.length-1;A++)s[A]=s[A]+d[A];return s.join("")}function jg(e,t){typeof e=="string"&&(e=(0,nf.parsePatch)(e));var r=0;function s(){var d=e[r++];if(!d)return t.complete();t.loadFile(d,function(g,y){if(g)return t.complete(g);var i=of(y,d,t);t.patched(d,i,function(o){if(o)return t.complete(o);s()})})}s()}var Yn={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.structuredPatch=af;Ir.formatPatch=Bl;Ir.createTwoFilesPatch=lf;Ir.createPatch=Kg;var Wg=mr;function Bo(e){return Gg(e)||Vg(e)||Ug(e)||zg()}function zg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ug(e,t){if(e){if(typeof e=="string")return Da(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Da(e,t)}}function Vg(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Gg(e){if(Array.isArray(e))return Da(e)}function Da(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function af(e,t,r,s,d,g,y){y||(y={}),typeof y.context>"u"&&(y.context=4);var i=(0,Wg.diffLines)(r,s,y);if(!i)return;i.push({value:"",lines:[]});function o(a){return a.map(function(l){return" "+l})}for(var f=[],_=0,u=0,p=[],w=1,S=1,h=function(l){var c=i[l],m=c.lines||c.value.replace(/\n$/,"").split(`
`);if(c.lines=m,c.added||c.removed){var x;if(!_){var v=i[l-1];_=w,u=S,v&&(p=y.context>0?o(v.lines.slice(-y.context)):[],_-=p.length,u-=p.length)}(x=p).push.apply(x,Bo(m.map(function(A){return(c.added?"+":"-")+A}))),c.added?S+=m.length:w+=m.length}else{if(_)if(m.length<=y.context*2&&l<i.length-2){var L;(L=p).push.apply(L,Bo(o(m)))}else{var C,b=Math.min(m.length,y.context);(C=p).push.apply(C,Bo(o(m.slice(0,b))));var E={oldStart:_,oldLines:w-_+b,newStart:u,newLines:S-u+b,lines:p};if(l>=i.length-2&&m.length<=y.context){var R=/\n$/.test(r),k=/\n$/.test(s),M=m.length==0&&p.length>E.oldLines;!R&&M&&r.length>0&&p.splice(E.oldLines,0,"\\ No newline at end of file"),(!R&&!M||!k)&&p.push("\\ No newline at end of file")}f.push(E),_=0,u=0,p=[]}w+=m.length,S+=m.length}},n=0;n<i.length;n++)h(n);return{oldFileName:e,newFileName:t,oldHeader:d,newHeader:g,hunks:f}}function Bl(e){if(Array.isArray(e))return e.map(Bl).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var s=e.hunks[r];s.oldLines===0&&(s.oldStart-=1),s.newLines===0&&(s.newStart-=1),t.push("@@ -"+s.oldStart+","+s.oldLines+" +"+s.newStart+","+s.newLines+" @@"),t.push.apply(t,s.lines)}return t.join(`
`)+`
`}function lf(e,t,r,s,d,g,y){return Bl(af(e,t,r,s,d,g,y))}function Kg(e,t,r,s,d,g){return lf(e,e,t,r,s,d,g)}var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.arrayEqual=qg;Zn.arrayStartsWith=cf;function qg(e,t){return e.length!==t.length?!1:cf(e,t)}function cf(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(Yn,"__esModule",{value:!0});Yn.calcLineCount=hf;Yn.merge=tv;var Xg=Ir,Jg=ys,Oo=Zn;function ii(e){return ev(e)||Qg(e)||Zg(e)||Yg()}function Yg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zg(e,t){if(e){if(typeof e=="string")return Aa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Aa(e,t)}}function Qg(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ev(e){if(Array.isArray(e))return Aa(e)}function Aa(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function hf(e){var t=Ta(e.lines),r=t.oldLines,s=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,s!==void 0?e.newLines=s:delete e.newLines}function tv(e,t,r){e=ih(e,r),t=ih(t,r);var s={};(e.index||t.index)&&(s.index=e.index||t.index),(e.newFileName||t.newFileName)&&(sh(e)?sh(t)?(s.oldFileName=Hs(s,e.oldFileName,t.oldFileName),s.newFileName=Hs(s,e.newFileName,t.newFileName),s.oldHeader=Hs(s,e.oldHeader,t.oldHeader),s.newHeader=Hs(s,e.newHeader,t.newHeader)):(s.oldFileName=e.oldFileName,s.newFileName=e.newFileName,s.oldHeader=e.oldHeader,s.newHeader=e.newHeader):(s.oldFileName=t.oldFileName||e.oldFileName,s.newFileName=t.newFileName||e.newFileName,s.oldHeader=t.oldHeader||e.oldHeader,s.newHeader=t.newHeader||e.newHeader)),s.hunks=[];for(var d=0,g=0,y=0,i=0;d<e.hunks.length||g<t.hunks.length;){var o=e.hunks[d]||{oldStart:1/0},f=t.hunks[g]||{oldStart:1/0};if(nh(o,f))s.hunks.push(oh(o,y)),d++,i+=o.newLines-o.oldLines;else if(nh(f,o))s.hunks.push(oh(f,i)),g++,y+=f.newLines-f.oldLines;else{var _={oldStart:Math.min(o.oldStart,f.oldStart),oldLines:0,newStart:Math.min(o.newStart+y,f.oldStart+i),newLines:0,lines:[]};rv(_,o.oldStart,o.lines,f.oldStart,f.lines),g++,d++,s.hunks.push(_)}}return s}function ih(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,Jg.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,Xg.structuredPatch)(void 0,void 0,t,e)}return e}function sh(e){return e.newFileName&&e.newFileName!==e.oldFileName}function Hs(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function nh(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function oh(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function rv(e,t,r,s,d){var g={offset:t,lines:r,index:0},y={offset:s,lines:d,index:0};for(lh(e,g,y),lh(e,y,g);g.index<g.lines.length&&y.index<y.lines.length;){var i=g.lines[g.index],o=y.lines[y.index];if((i[0]==="-"||i[0]==="+")&&(o[0]==="-"||o[0]==="+"))iv(e,g,y);else if(i[0]==="+"&&o[0]===" "){var f;(f=e.lines).push.apply(f,ii(Lr(g)))}else if(o[0]==="+"&&i[0]===" "){var _;(_=e.lines).push.apply(_,ii(Lr(y)))}else i[0]==="-"&&o[0]===" "?ah(e,g,y):o[0]==="-"&&i[0]===" "?ah(e,y,g,!0):i===o?(e.lines.push(i),g.index++,y.index++):Ol(e,Lr(g),Lr(y))}ch(e,g),ch(e,y),hf(e)}function iv(e,t,r){var s=Lr(t),d=Lr(r);if(hh(s)&&hh(d)){if((0,Oo.arrayStartsWith)(s,d)&&uh(r,s,s.length-d.length)){var g;(g=e.lines).push.apply(g,ii(s));return}else if((0,Oo.arrayStartsWith)(d,s)&&uh(t,d,d.length-s.length)){var y;(y=e.lines).push.apply(y,ii(d));return}}else if((0,Oo.arrayEqual)(s,d)){var i;(i=e.lines).push.apply(i,ii(s));return}Ol(e,s,d)}function ah(e,t,r,s){var d=Lr(t),g=sv(r,d);if(g.merged){var y;(y=e.lines).push.apply(y,ii(g.merged))}else Ol(e,s?g:d,s?d:g)}function Ol(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function lh(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var s=t.lines[t.index++];e.lines.push(s),t.offset++}}function ch(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function Lr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var s=e.lines[e.index];if(r==="-"&&s[0]==="+"&&(r="+"),r===s[0])t.push(s),e.index++;else break}return t}function sv(e,t){for(var r=[],s=[],d=0,g=!1,y=!1;d<t.length&&e.index<e.lines.length;){var i=e.lines[e.index],o=t[d];if(o[0]==="+")break;if(g=g||i[0]!==" ",s.push(o),d++,i[0]==="+")for(y=!0;i[0]==="+";)r.push(i),i=e.lines[++e.index];o.substr(1)===i.substr(1)?(r.push(i),e.index++):y=!0}if((t[d]||"")[0]==="+"&&g&&(y=!0),y)return r;for(;d<t.length;)s.push(t[d++]);return{merged:s,changes:r}}function hh(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function uh(e,t,r){for(var s=0;s<r;s++){var d=t[t.length-r+s].substr(1);if(e.lines[e.index+s]!==" "+d)return!1}return e.index+=r,!0}function Ta(e){var t=0,r=0;return e.forEach(function(s){if(typeof s!="string"){var d=Ta(s.mine),g=Ta(s.theirs);t!==void 0&&(d.oldLines===g.oldLines?t+=d.oldLines:t=void 0),r!==void 0&&(d.newLines===g.newLines?r+=d.newLines:r=void 0)}else r!==void 0&&(s[0]==="+"||s[0]===" ")&&r++,t!==void 0&&(s[0]==="-"||s[0]===" ")&&t++}),{oldLines:t,newLines:r}}var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.reversePatch=uf;function dh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,s)}return r}function fh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dh(Object(r),!0).forEach(function(s){nv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dh(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uf(e){return Array.isArray(e)?e.map(uf).reverse():fh(fh({},e),{},{oldFileName:e.newFileName,oldHeader:e.newHeader,newFileName:e.oldFileName,newHeader:e.oldHeader,hunks:e.hunks.map(function(t){return{oldLines:t.newLines,oldStart:t.newStart,newLines:t.oldLines,newStart:t.oldStart,linedelimiters:t.linedelimiters,lines:t.lines.map(function(r){return r.startsWith("-")?"+".concat(r.slice(1)):r.startsWith("+")?"-".concat(r.slice(1)):r})}})})}var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.convertChangesToDMP=ov;function ov(e){for(var t=[],r,s,d=0;d<e.length;d++)r=e[d],r.added?s=1:r.removed?s=-1:s=0,t.push([s,r.value]);return t}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.convertChangesToXML=av;function av(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];s.added?t.push("<ins>"):s.removed&&t.push("<del>"),t.push(lv(s.value)),s.added?t.push("</ins>"):s.removed&&t.push("</del>")}return t.join("")}function lv(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Diff",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"diffChars",{enumerable:!0,get:function(){return r.diffChars}}),Object.defineProperty(e,"diffWords",{enumerable:!0,get:function(){return s.diffWords}}),Object.defineProperty(e,"diffWordsWithSpace",{enumerable:!0,get:function(){return s.diffWordsWithSpace}}),Object.defineProperty(e,"diffLines",{enumerable:!0,get:function(){return d.diffLines}}),Object.defineProperty(e,"diffTrimmedLines",{enumerable:!0,get:function(){return d.diffTrimmedLines}}),Object.defineProperty(e,"diffSentences",{enumerable:!0,get:function(){return g.diffSentences}}),Object.defineProperty(e,"diffCss",{enumerable:!0,get:function(){return y.diffCss}}),Object.defineProperty(e,"diffJson",{enumerable:!0,get:function(){return i.diffJson}}),Object.defineProperty(e,"canonicalize",{enumerable:!0,get:function(){return i.canonicalize}}),Object.defineProperty(e,"diffArrays",{enumerable:!0,get:function(){return o.diffArrays}}),Object.defineProperty(e,"applyPatch",{enumerable:!0,get:function(){return f.applyPatch}}),Object.defineProperty(e,"applyPatches",{enumerable:!0,get:function(){return f.applyPatches}}),Object.defineProperty(e,"parsePatch",{enumerable:!0,get:function(){return _.parsePatch}}),Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return u.merge}}),Object.defineProperty(e,"reversePatch",{enumerable:!0,get:function(){return p.reversePatch}}),Object.defineProperty(e,"structuredPatch",{enumerable:!0,get:function(){return w.structuredPatch}}),Object.defineProperty(e,"createTwoFilesPatch",{enumerable:!0,get:function(){return w.createTwoFilesPatch}}),Object.defineProperty(e,"createPatch",{enumerable:!0,get:function(){return w.createPatch}}),Object.defineProperty(e,"formatPatch",{enumerable:!0,get:function(){return w.formatPatch}}),Object.defineProperty(e,"convertChangesToDMP",{enumerable:!0,get:function(){return S.convertChangesToDMP}}),Object.defineProperty(e,"convertChangesToXML",{enumerable:!0,get:function(){return h.convertChangesToXML}});var t=n(qt),r=ps,s=gi,d=mr,g=vs,y=ms,i=vi,o=Cs,f=Jn,_=ys,u=Yn,p=Pl,w=Ir,S=Il,h=Fl;function n(a){return a&&a.__esModule?a:{default:a}}})(ef);var cv=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r);var d=Object.getOwnPropertyDescriptor(t,r);(!d||("get"in d?!t.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,d)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),hv=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),uv=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&cv(t,e,r);return hv(t,e),t};Object.defineProperty(ur,"__esModule",{value:!0});ur.computeLineInformation=ur.DiffMethod=ur.DiffType=void 0;const Ba=uv(ef),dv=Ba;var jt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADDED=1]="ADDED",e[e.REMOVED=2]="REMOVED",e[e.CHANGED=3]="CHANGED"})(jt||(ur.DiffType=jt={}));var Mn;(function(e){e.CHARS="diffChars",e.WORDS="diffWords",e.WORDS_WITH_SPACE="diffWordsWithSpace",e.LINES="diffLines",e.TRIMMED_LINES="diffTrimmedLines",e.SENTENCES="diffSentences",e.CSS="diffCss",e.JSON="diffJson"})(Mn||(ur.DiffMethod=Mn={}));const _h=e=>e===""?[]:e.replace(/\n$/,"").split(`
`),fv=(e,t,r=Mn.CHARS)=>{const s=dv[r](e,t),d={left:[],right:[]};return s.forEach(({added:g,removed:y,value:i})=>{const o={};return g&&(o.type=jt.ADDED,o.value=i,d.right.push(o)),y&&(o.type=jt.REMOVED,o.value=i,d.left.push(o)),!y&&!g&&(o.type=jt.DEFAULT,o.value=i,d.right.push(o),d.left.push(o)),o}),d},_v=(e,t,r=!1,s=Mn.CHARS,d=0,g=[])=>{let y=[];typeof e=="string"&&typeof t=="string"?y=Ba.diffLines(e.trimRight(),t.trimRight(),{newlineIsToken:!1,ignoreWhitespace:!1,ignoreCase:!1}):y=Ba.diffJson(e,t);let i=d,o=d,f=[],_=0;const u=[],p=[],w=(S,h,n,a,l)=>_h(S).map((m,x)=>{const v={},L={};if(!(p.includes(`${h}-${x}`)||l&&x!==0)){if(n||a){let C=!0;if(a){o+=1,v.lineNumber=o,v.type=jt.REMOVED,v.value=m||" ";const b=y[h+1];if(b&&b.added){const E=_h(b.value)[x];if(E){const R=w(E,h,!0,!1,!0),{value:k,lineNumber:M,type:A}=R[0].right;if(p.push(`${h+1}-${x}`),L.lineNumber=M,v.value===k)C=!1,L.type=0,v.type=0,L.value=k;else if(L.type=A,r)L.value=k;else{const H=fv(m,k,s);L.value=H.right,v.value=H.left}}}}else i+=1,L.lineNumber=i,L.type=jt.ADDED,L.value=m;C&&!l&&(u.includes(_)||u.push(_))}else o+=1,i+=1,v.lineNumber=o,v.type=jt.DEFAULT,v.value=m,L.lineNumber=i,L.type=jt.DEFAULT,L.value=m;return(g?.includes(`L-${v.lineNumber}`)||g?.includes(`R-${L.lineNumber}`)&&!u.includes(_))&&u.push(_),l||(_+=1),{right:L,left:v}}}).filter(Boolean);return y.forEach(({added:S,removed:h,value:n},a)=>{f=[...f,...w(n,a,S,h)]}),{lineInformation:f,diffLines:u}};ur.computeLineInformation=_v;var Nl={};function pv(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function gv(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var vv=function(){function e(r){var s=this;this._insertTag=function(d){var g;s.tags.length===0?s.insertionPoint?g=s.insertionPoint.nextSibling:s.prepend?g=s.container.firstChild:g=s.before:g=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(d,g),s.tags.push(d)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gv(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var g=pv(d);try{g.insertRule(s,g.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var d;return(d=s.parentNode)==null?void 0:d.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Ue="-ms-",Dn="-moz-",pe="-webkit-",df="comm",Hl="rule",$l="decl",mv="@import",ff="@keyframes",Cv="@layer",yv=Math.abs,Qn=String.fromCharCode,Sv=Object.assign;function wv(e,t){return He(e,0)^45?(((t<<2^He(e,0))<<2^He(e,1))<<2^He(e,2))<<2^He(e,3):0}function _f(e){return e.trim()}function xv(e,t){return(e=t.exec(e))?e[0]:e}function ge(e,t,r){return e.replace(t,r)}function Oa(e,t){return e.indexOf(t)}function He(e,t){return e.charCodeAt(t)|0}function ls(e,t,r){return e.slice(t,r)}function kt(e){return e.length}function jl(e){return e.length}function $s(e,t){return t.push(e),e}function bv(e,t){return e.map(t).join("")}var eo=1,di=1,pf=0,st=0,De=0,mi="";function to(e,t,r,s,d,g,y){return{value:e,root:t,parent:r,type:s,props:d,children:g,line:eo,column:di,length:y,return:""}}function Di(e,t){return Sv(to("",null,null,"",null,null,0),e,{length:-e.length},t)}function Lv(){return De}function Ev(){return De=st>0?He(mi,--st):0,di--,De===10&&(di=1,eo--),De}function lt(){return De=st<pf?He(mi,st++):0,di++,De===10&&(di=1,eo++),De}function At(){return He(mi,st)}function en(){return st}function Ss(e,t){return ls(mi,e,t)}function cs(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gf(e){return eo=di=1,pf=kt(mi=e),st=0,[]}function vf(e){return mi="",e}function tn(e){return _f(Ss(st-1,Pa(e===91?e+2:e===40?e+1:e)))}function kv(e){for(;(De=At())&&De<33;)lt();return cs(e)>2||cs(De)>3?"":" "}function Rv(e,t){for(;--t&&lt()&&!(De<48||De>102||De>57&&De<65||De>70&&De<97););return Ss(e,en()+(t<6&&At()==32&&lt()==32))}function Pa(e){for(;lt();)switch(De){case e:return st;case 34:case 39:e!==34&&e!==39&&Pa(De);break;case 40:e===41&&Pa(e);break;case 92:lt();break}return st}function Mv(e,t){for(;lt()&&e+De!==57;)if(e+De===84&&At()===47)break;return"/*"+Ss(t,st-1)+"*"+Qn(e===47?e:lt())}function Dv(e){for(;!cs(At());)lt();return Ss(e,st)}function Av(e){return vf(rn("",null,null,null,[""],e=gf(e),0,[0],e))}function rn(e,t,r,s,d,g,y,i,o){for(var f=0,_=0,u=y,p=0,w=0,S=0,h=1,n=1,a=1,l=0,c="",m=d,x=g,v=s,L=c;n;)switch(S=l,l=lt()){case 40:if(S!=108&&He(L,u-1)==58){Oa(L+=ge(tn(l),"&","&\f"),"&\f")!=-1&&(a=-1);break}case 34:case 39:case 91:L+=tn(l);break;case 9:case 10:case 13:case 32:L+=kv(S);break;case 92:L+=Rv(en()-1,7);continue;case 47:switch(At()){case 42:case 47:$s(Tv(Mv(lt(),en()),t,r),o);break;default:L+="/"}break;case 123*h:i[f++]=kt(L)*a;case 125*h:case 59:case 0:switch(l){case 0:case 125:n=0;case 59+_:a==-1&&(L=ge(L,/\f/g,"")),w>0&&kt(L)-u&&$s(w>32?gh(L+";",s,r,u-1):gh(ge(L," ","")+";",s,r,u-2),o);break;case 59:L+=";";default:if($s(v=ph(L,t,r,f,_,d,i,c,m=[],x=[],u),g),l===123)if(_===0)rn(L,t,v,v,m,g,u,i,x);else switch(p===99&&He(L,3)===110?100:p){case 100:case 108:case 109:case 115:rn(e,v,v,s&&$s(ph(e,v,v,0,0,d,i,c,d,m=[],u),x),d,x,u,i,s?m:x);break;default:rn(L,v,v,v,[""],x,0,i,x)}}f=_=w=0,h=a=1,c=L="",u=y;break;case 58:u=1+kt(L),w=S;default:if(h<1){if(l==123)--h;else if(l==125&&h++==0&&Ev()==125)continue}switch(L+=Qn(l),l*h){case 38:a=_>0?1:(L+="\f",-1);break;case 44:i[f++]=(kt(L)-1)*a,a=1;break;case 64:At()===45&&(L+=tn(lt())),p=At(),_=u=kt(c=L+=Dv(en())),l++;break;case 45:S===45&&kt(L)==2&&(h=0)}}return g}function ph(e,t,r,s,d,g,y,i,o,f,_){for(var u=d-1,p=d===0?g:[""],w=jl(p),S=0,h=0,n=0;S<s;++S)for(var a=0,l=ls(e,u+1,u=yv(h=y[S])),c=e;a<w;++a)(c=_f(h>0?p[a]+" "+l:ge(l,/&\f/g,p[a])))&&(o[n++]=c);return to(e,t,r,d===0?Hl:i,o,f,_)}function Tv(e,t,r){return to(e,t,r,df,Qn(Lv()),ls(e,2,-2),0)}function gh(e,t,r,s){return to(e,t,r,$l,ls(e,0,s),ls(e,s+1,-1),s)}function si(e,t){for(var r="",s=jl(e),d=0;d<s;d++)r+=t(e[d],d,e,t)||"";return r}function Bv(e,t,r,s){switch(e.type){case Cv:if(e.children.length)break;case mv:case $l:return e.return=e.return||e.value;case df:return"";case ff:return e.return=e.value+"{"+si(e.children,s)+"}";case Hl:e.value=e.props.join(",")}return kt(r=si(e.children,s))?e.return=e.value+"{"+r+"}":""}function Ov(e){var t=jl(e);return function(r,s,d,g){for(var y="",i=0;i<t;i++)y+=e[i](r,s,d,g)||"";return y}}function Pv(e){return function(t){t.root||(t=t.return)&&e(t)}}function Iv(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Fv=function(t,r,s){for(var d=0,g=0;d=g,g=At(),d===38&&g===12&&(r[s]=1),!cs(g);)lt();return Ss(t,st)},Nv=function(t,r){var s=-1,d=44;do switch(cs(d)){case 0:d===38&&At()===12&&(r[s]=1),t[s]+=Fv(st-1,r,s);break;case 2:t[s]+=tn(d);break;case 4:if(d===44){t[++s]=At()===58?"&\f":"",r[s]=t[s].length;break}default:t[s]+=Qn(d)}while(d=lt());return t},Hv=function(t,r){return vf(Nv(gf(t),r))},vh=new WeakMap,$v=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,s=t.parent,d=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!vh.get(s))&&!d){vh.set(t,!0);for(var g=[],y=Hv(r,g),i=s.props,o=0,f=0;o<y.length;o++)for(var _=0;_<i.length;_++,f++)t.props[f]=g[o]?y[o].replace(/&\f/g,i[_]):i[_]+" "+y[o]}}},jv=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function mf(e,t){switch(wv(e,t)){case 5103:return pe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return pe+e+Dn+e+Ue+e+e;case 6828:case 4268:return pe+e+Ue+e+e;case 6165:return pe+e+Ue+"flex-"+e+e;case 5187:return pe+e+ge(e,/(\w+).+(:[^]+)/,pe+"box-$1$2"+Ue+"flex-$1$2")+e;case 5443:return pe+e+Ue+"flex-item-"+ge(e,/flex-|-self/,"")+e;case 4675:return pe+e+Ue+"flex-line-pack"+ge(e,/align-content|flex-|-self/,"")+e;case 5548:return pe+e+Ue+ge(e,"shrink","negative")+e;case 5292:return pe+e+Ue+ge(e,"basis","preferred-size")+e;case 6060:return pe+"box-"+ge(e,"-grow","")+pe+e+Ue+ge(e,"grow","positive")+e;case 4554:return pe+ge(e,/([^-])(transform)/g,"$1"+pe+"$2")+e;case 6187:return ge(ge(ge(e,/(zoom-|grab)/,pe+"$1"),/(image-set)/,pe+"$1"),e,"")+e;case 5495:case 3959:return ge(e,/(image-set\([^]*)/,pe+"$1$`$1");case 4968:return ge(ge(e,/(.+:)(flex-)?(.*)/,pe+"box-pack:$3"+Ue+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pe+e+e;case 4095:case 3583:case 4068:case 2532:return ge(e,/(.+)-inline(.+)/,pe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(kt(e)-1-t>6)switch(He(e,t+1)){case 109:if(He(e,t+4)!==45)break;case 102:return ge(e,/(.+:)(.+)-([^]+)/,"$1"+pe+"$2-$3$1"+Dn+(He(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Oa(e,"stretch")?mf(ge(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(He(e,t+1)!==115)break;case 6444:switch(He(e,kt(e)-3-(~Oa(e,"!important")&&10))){case 107:return ge(e,":",":"+pe)+e;case 101:return ge(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pe+(He(e,14)===45?"inline-":"")+"box$3$1"+pe+"$2$3$1"+Ue+"$2box$3")+e}break;case 5936:switch(He(e,t+11)){case 114:return pe+e+Ue+ge(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return pe+e+Ue+ge(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return pe+e+Ue+ge(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return pe+e+Ue+e+e}return e}var Wv=function(t,r,s,d){if(t.length>-1&&!t.return)switch(t.type){case $l:t.return=mf(t.value,t.length);break;case ff:return si([Di(t,{value:ge(t.value,"@","@"+pe)})],d);case Hl:if(t.length)return bv(t.props,function(g){switch(xv(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return si([Di(t,{props:[ge(g,/:(read-\w+)/,":"+Dn+"$1")]})],d);case"::placeholder":return si([Di(t,{props:[ge(g,/:(plac\w+)/,":"+pe+"input-$1")]}),Di(t,{props:[ge(g,/:(plac\w+)/,":"+Dn+"$1")]}),Di(t,{props:[ge(g,/:(plac\w+)/,Ue+"input-$1")]})],d)}return""})}},zv=[Wv],Uv=function(t){var r=t.key;if(r==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(h){var n=h.getAttribute("data-emotion");n.indexOf(" ")!==-1&&(document.head.appendChild(h),h.setAttribute("data-s",""))})}var d=t.stylisPlugins||zv,g={},y,i=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(h){for(var n=h.getAttribute("data-emotion").split(" "),a=1;a<n.length;a++)g[n[a]]=!0;i.push(h)});var o,f=[$v,jv];{var _,u=[Bv,Pv(function(h){_.insert(h)})],p=Ov(f.concat(d,u)),w=function(n){return si(Av(n),p)};o=function(n,a,l,c){_=l,w(n?n+"{"+a.styles+"}":a.styles),c&&(S.inserted[a.name]=!0)}}var S={key:r,sheet:new vv({key:r,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:g,registered:{},insert:o};return S.sheet.hydrate(i),S};function Vv(e){for(var t=0,r,s=0,d=e.length;d>=4;++s,d-=4)r=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Gv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Kv=/[A-Z]|^ms/g,qv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Cf=function(t){return t.charCodeAt(1)===45},mh=function(t){return t!=null&&typeof t!="boolean"},Po=Iv(function(e){return Cf(e)?e:e.replace(Kv,"-$&").toLowerCase()}),Ch=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(qv,function(s,d,g){return rr={name:d,styles:g,next:rr},d})}return Gv[t]!==1&&!Cf(t)&&typeof r=="number"&&r!==0?r+"px":r};function An(e,t,r){if(r==null)return"";var s=r;if(s.__emotion_styles!==void 0)return s;switch(typeof r){case"boolean":return"";case"object":{var d=r;if(d.anim===1)return rr={name:d.name,styles:d.styles,next:rr},d.name;var g=r;if(g.styles!==void 0){var y=g.next;if(y!==void 0)for(;y!==void 0;)rr={name:y.name,styles:y.styles,next:rr},y=y.next;var i=g.styles+";";return i}return Xv(e,t,r)}}var o=r;if(t==null)return o;var f=t[o];return f!==void 0?f:o}function Xv(e,t,r){var s="";if(Array.isArray(r))for(var d=0;d<r.length;d++)s+=An(e,t,r[d])+";";else for(var g in r){var y=r[g];if(typeof y!="object"){var i=y;t!=null&&t[i]!==void 0?s+=g+"{"+t[i]+"}":mh(i)&&(s+=Po(g)+":"+Ch(g,i)+";")}else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var o=0;o<y.length;o++)mh(y[o])&&(s+=Po(g)+":"+Ch(g,y[o])+";");else{var f=An(e,t,y);switch(g){case"animation":case"animationName":{s+=Po(g)+":"+f+";";break}default:s+=g+"{"+f+"}"}}}return s}var yh=/label:\s*([^\s;{]+)\s*(;|$)/g,rr;function Io(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,d="";rr=void 0;var g=e[0];if(g==null||g.raw===void 0)s=!1,d+=An(r,t,g);else{var y=g;d+=y[0]}for(var i=1;i<e.length;i++)if(d+=An(r,t,e[i]),s){var o=g;d+=o[i]}yh.lastIndex=0;for(var f="",_;(_=yh.exec(d))!==null;)f+="-"+_[1];var u=Vv(d)+f;return{name:u,styles:d,next:rr}}function yf(e,t,r){var s="";return r.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):d&&(s+=d+" ")}),s}var Jv=function(t,r,s){var d=t.key+"-"+r.name;t.registered[d]===void 0&&(t.registered[d]=r.styles)},Yv=function(t,r,s){Jv(t,r);var d=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var g=r;do t.insert(r===g?"."+d:"",g,t.sheet,!0),g=g.next;while(g!==void 0)}};function Sh(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function wh(e,t,r){var s=[],d=yf(e,s,r);return s.length<2?r:d+t(s)}var Zv=function(t){var r=Uv(t);r.sheet.speedy=function(i){this.isSpeedy=i},r.compat=!0;var s=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var u=Io(f,r.registered,void 0);return Yv(r,u),r.key+"-"+u.name},d=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var u=Io(f,r.registered),p="animation-"+u.name;return Sh(r,{name:u.name,styles:"@keyframes "+p+"{"+u.styles+"}"}),p},g=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var u=Io(f,r.registered);Sh(r,u)},y=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];return wh(r.registered,s,Qv(f))};return{css:s,cx:y,injectGlobal:g,keyframes:d,hydrate:function(o){o.forEach(function(f){r.inserted[f]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:yf.bind(null,r.registered),merge:wh.bind(null,r.registered,s)}},Qv=function e(t){for(var r="",s=0;s<t.length;s++){var d=t[s];if(d!=null){var g=void 0;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))g=e(d);else{g="";for(var y in d)d[y]&&y&&(g&&(g+=" "),g+=y)}break}default:g=d}g&&(r&&(r+=" "),r+=g)}}return r};const em=Object.freeze(Object.defineProperty({__proto__:null,default:Zv},Symbol.toStringTag,{value:"Module"})),tm=Ih(em);var rm=Pe&&Pe.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(r[s[d]]=e[s[d]]);return r},im=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nl,"__esModule",{value:!0});const sm=im(tm);Nl.default=(e,t=!1,r="")=>{const{variables:s={}}=e,d=rm(e,["variables"]),g={light:Object.assign({diffViewerBackground:"#fff",diffViewerColor:"#212529",addedBackground:"#e6ffed",addedColor:"#24292e",removedBackground:"#ffeef0",removedColor:"#24292e",changedBackground:"#fffbdd",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0",addedGutterBackground:"#cdffd8",removedGutterBackground:"#ffdce0",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",codeFoldGutterBackground:"#dbedff",codeFoldBackground:"#f1f8ff",emptyLineBackground:"#fafbfc",gutterColor:"#212529",addedGutterColor:"#212529",removedGutterColor:"#212529",codeFoldContentColor:"#212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleColor:"#212529",diffViewerTitleBorderColor:"#eee"},s.light||{}),dark:Object.assign({diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",addedBackground:"#044B53",addedColor:"white",removedBackground:"#632F34",removedColor:"white",changedBackground:"#3e302c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f",addedGutterBackground:"#034148",removedGutterBackground:"#632b30",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",codeFoldGutterBackground:"#21232b",codeFoldBackground:"#262831",emptyLineBackground:"#363946",gutterColor:"#666c87",addedGutterColor:"#8c8c8c",removedGutterColor:"#8c8c8c",codeFoldContentColor:"#656a8b",diffViewerTitleBackground:"#2f323e",diffViewerTitleColor:"#555a7b",diffViewerTitleBorderColor:"#353846"},s.dark||{})},y=t?g.dark:g.light,{css:i,cx:o}=(0,sm.default)({key:"react-diff",nonce:r}),f=i({width:"100%",label:"content"}),_=i({[`.${f}`]:{width:"50%"},label:"split-view"}),u=i({width:"100%",background:y.diffViewerBackground,pre:{margin:0,whiteSpace:"pre-wrap",lineHeight:"25px"},label:"diff-container",borderCollapse:"collapse"}),p=i({color:y.codeFoldContentColor,label:"code-fold-content"}),w=i({color:y.diffViewerColor,label:"content-text"}),S=i({background:y.diffViewerTitleBackground,padding:10,borderBottom:`1px solid ${y.diffViewerTitleBorderColor}`,label:"title-block",":last-child":{borderLeft:`1px solid ${y.diffViewerTitleBorderColor}`},[`.${w}`]:{color:y.diffViewerTitleColor}}),h=i({color:y.gutterColor,label:"line-number"}),n=i({background:y.removedBackground,color:y.removedColor,pre:{color:y.removedColor},[`.${h}`]:{color:y.removedGutterColor},label:"diff-removed"}),a=i({background:y.addedBackground,color:y.addedColor,pre:{color:y.addedColor},[`.${h}`]:{color:y.addedGutterColor},label:"diff-added"}),l=i({background:y.changedBackground,[`.${h}`]:{color:y.gutterColor},label:"diff-changed"}),c=i({padding:2,display:"inline-flex",borderRadius:4,wordBreak:"break-all",label:"word-diff"}),m=i({background:y.wordAddedBackground,label:"word-added"}),x=i({background:y.wordRemovedBackground,label:"word-removed"}),v=i({backgroundColor:y.codeFoldGutterBackground,label:"code-fold-gutter"}),L=i({backgroundColor:y.codeFoldBackground,height:40,fontSize:14,fontWeight:700,label:"code-fold",a:{textDecoration:"underline !important",cursor:"pointer",pre:{display:"inline"}}}),C=i({backgroundColor:y.emptyLineBackground,label:"empty-line"}),b=i({width:25,paddingLeft:10,paddingRight:10,userSelect:"none",label:"marker",[`&.${a}`]:{pre:{color:y.addedColor}},[`&.${n}`]:{pre:{color:y.removedColor}}}),E=i({background:y.highlightBackground,label:"highlighted-line",[`.${m}, .${x}`]:{backgroundColor:"initial"}}),R=i({label:"highlighted-gutter"}),k=i({userSelect:"none",minWidth:50,padding:"0 10px",whiteSpace:"nowrap",label:"gutter",textAlign:"right",background:y.gutterBackground,"&:hover":{cursor:"pointer",background:y.gutterBackgroundDark,pre:{opacity:1}},pre:{opacity:.5},[`&.${a}`]:{background:y.addedGutterBackground},[`&.${n}`]:{background:y.removedGutterBackground},[`&.${R}`]:{background:y.highlightGutterBackground,"&:hover":{background:y.highlightGutterBackground}}}),M=i({"&:hover":{background:y.gutterBackground,cursor:"initial"},label:"empty-gutter"}),A=i({verticalAlign:"baseline",label:"line"}),H={diffContainer:u,diffRemoved:n,diffAdded:a,diffChanged:l,splitView:_,marker:b,highlightedGutter:R,highlightedLine:E,gutter:k,line:A,wordDiff:c,wordAdded:m,wordRemoved:x,codeFoldGutter:v,codeFold:L,emptyGutter:M,emptyLine:C,lineNumber:h,contentText:w,content:f,codeFoldContent:p,titleBlock:S},$=Object.keys(d).reduce((N,B)=>Object.assign(Object.assign({},N),{[B]:i(d[B])}),{});return Object.keys(H).reduce((N,B)=>Object.assign(Object.assign({},N),{[B]:$[B]?o(H[B],$[B]):H[B]}),{})};var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.computeHiddenBlocks=void 0;function nm(e,t,r){let s=0,d,g={},y=[];return e.forEach((i,o)=>{const f=t.some(_=>_>=o-r&&_<=o+r);!f&&d==null?(d={index:s,startLine:o,endLine:o,lines:1},y.push(d),g[o]=d.index,s++):f?d=void 0:(d.endLine=o,d.lines++,g[o]=d.index)}),{lineBlocks:g,blocks:y}}ro.computeHiddenBlocks=nm;var xh=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function om(e,t){return!!(e===t||xh(e)&&xh(t))}function am(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!om(e[r],t[r]))return!1;return!0}function lm(e,t){t===void 0&&(t=am);var r=null;function s(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];if(r&&r.lastThis===this&&t(d,r.lastArgs))return r.lastResult;var y=e.apply(this,d);return r={lastResult:y,lastArgs:d,lastThis:this},y}return s.clear=function(){r=null},s}const cm=Object.freeze(Object.defineProperty({__proto__:null,default:lm},Symbol.toStringTag,{value:"Module"})),hm=Ih(cm);(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(h,n,a,l){l===void 0&&(l=a);var c=Object.getOwnPropertyDescriptor(n,a);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(h,l,c)}:function(h,n,a,l){l===void 0&&(l=a),h[l]=n[a]}),r=Pe&&Pe.__setModuleDefault||(Object.create?function(h,n){Object.defineProperty(h,"default",{enumerable:!0,value:n})}:function(h,n){h.default=n}),s=Pe&&Pe.__importStar||function(h){if(h&&h.__esModule)return h;var n={};if(h!=null)for(var a in h)a!=="default"&&Object.prototype.hasOwnProperty.call(h,a)&&t(n,h,a);return r(n,h),n},d=Pe&&Pe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.DiffMethod=e.LineNumberPrefix=void 0;const g=P,y=s(V),i=d(hg),o=ur;Object.defineProperty(e,"DiffMethod",{enumerable:!0,get:function(){return o.DiffMethod}});const f=d(Nl),_=ro,u=hm,p=u.default||u;var w;(function(h){h.LEFT="L",h.RIGHT="R"})(w||(e.LineNumberPrefix=w={}));class S extends y.Component{constructor(n){super(n),this.resetCodeBlocks=()=>this.state.expandedBlocks.length>0?(this.setState({expandedBlocks:[]}),!0):!1,this.onBlockExpand=a=>{const l=this.state.expandedBlocks.slice();l.push(a),this.setState({expandedBlocks:l})},this.computeStyles=p(f.default),this.onLineNumberClickProxy=a=>this.props.onLineNumberClick?l=>this.props.onLineNumberClick(a,l):()=>{},this.renderWordDiff=(a,l)=>a.map((c,m)=>(0,g.jsx)("span",{className:(0,i.default)(this.styles.wordDiff,{[this.styles.wordAdded]:c.type===o.DiffType.ADDED,[this.styles.wordRemoved]:c.type===o.DiffType.REMOVED}),children:l?l(c.value):c.value},m)),this.renderLine=(a,l,c,m,x,v)=>{const L=`${c}-${a}`,C=`${v}-${x}`,b=this.props.highlightLines.includes(L)||this.props.highlightLines.includes(C),E=l===o.DiffType.ADDED,R=l===o.DiffType.REMOVED,k=l===o.DiffType.CHANGED;let M;return Array.isArray(m)?M=this.renderWordDiff(m,this.props.renderContent):this.props.renderContent?M=this.props.renderContent(m):M=m,(0,g.jsxs)(y.Fragment,{children:[!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:a&&this.onLineNumberClickProxy(L),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!a,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:b}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:a})}),!this.props.splitView&&!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:x&&this.onLineNumberClickProxy(C),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!x,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:b}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:x})}),this.props.renderGutter?this.props.renderGutter({lineNumber:a,type:l,prefix:c,value:m,additionalLineNumber:x,additionalPrefix:v,styles:this.styles}):null,!this.props.hideMarkers&&(0,g.jsx)("td",{className:(0,i.default)(this.styles.marker,{[this.styles.emptyLine]:!M,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:b}),children:(0,g.jsxs)("pre",{children:[E&&"+",R&&"-"]})}),(0,g.jsx)("td",{className:(0,i.default)(this.styles.content,{[this.styles.emptyLine]:!M,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:b}),children:(0,g.jsx)("pre",{className:this.styles.contentText,children:M})})]})},this.renderSplitView=({left:a,right:l},c)=>(0,g.jsxs)("tr",{className:this.styles.line,children:[this.renderLine(a.lineNumber,a.type,w.LEFT,a.value),this.renderLine(l.lineNumber,l.type,w.RIGHT,l.value)]},c),this.renderInlineView=({left:a,right:l},c)=>{let m;return a.type===o.DiffType.REMOVED&&l.type===o.DiffType.ADDED?(0,g.jsxs)(y.Fragment,{children:[(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)}),(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(null,l.type,w.RIGHT,l.value,l.lineNumber)})]},c):(a.type===o.DiffType.REMOVED&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)),a.type===o.DiffType.DEFAULT&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,l.lineNumber,w.RIGHT)),l.type===o.DiffType.ADDED&&(m=this.renderLine(null,l.type,w.RIGHT,l.value,l.lineNumber)),(0,g.jsx)("tr",{className:this.styles.line,children:m},c))},this.onBlockClickProxy=a=>()=>this.onBlockExpand(a),this.renderSkippedLineIndicator=(a,l,c,m)=>{const{hideLineNumbers:x,splitView:v}=this.props,L=this.props.codeFoldMessageRenderer?this.props.codeFoldMessageRenderer(a,c,m):(0,g.jsxs)("pre",{className:this.styles.codeFoldContent,children:["Expand ",a," lines ..."]}),C=(0,g.jsx)("td",{children:(0,g.jsx)("a",{onClick:this.onBlockClickProxy(l),tabIndex:0,children:L})}),b=!v&&!x;return(0,g.jsxs)("tr",{className:this.styles.codeFold,children:[!x&&(0,g.jsx)("td",{className:this.styles.codeFoldGutter}),this.props.renderGutter?(0,g.jsx)("td",{className:this.styles.codeFoldGutter}):null,(0,g.jsx)("td",{className:(0,i.default)({[this.styles.codeFoldGutter]:b})}),b?(0,g.jsxs)(y.Fragment,{children:[(0,g.jsx)("td",{}),C]}):(0,g.jsxs)(y.Fragment,{children:[C,this.props.renderGutter?(0,g.jsx)("td",{}):null,(0,g.jsx)("td",{})]}),(0,g.jsx)("td",{}),(0,g.jsx)("td",{})]},`${c}-${m}`)},this.renderDiff=()=>{const{oldValue:a,newValue:l,splitView:c,disableWordDiff:m,compareMethod:x,linesOffset:v}=this.props,{lineInformation:L,diffLines:C}=(0,o.computeLineInformation)(a,l,m,x,v,this.props.alwaysShowLines),b=this.props.extraLinesSurroundingDiff<0?0:Math.round(this.props.extraLinesSurroundingDiff),{lineBlocks:E,blocks:R}=(0,_.computeHiddenBlocks)(L,C,b);return L.map((k,M)=>{if(this.props.showDiffOnly){const H=E[M];if(H!==void 0){const $=R[H].endLine===M;if(!this.state.expandedBlocks.includes(H)&&$)return(0,g.jsx)(y.Fragment,{children:this.renderSkippedLineIndicator(R[H].lines,H,k.left.lineNumber,k.right.lineNumber)},M);if(!this.state.expandedBlocks.includes(H))return null}}return c?this.renderSplitView(k,M):this.renderInlineView(k,M)})},this.render=()=>{const{oldValue:a,newValue:l,useDarkTheme:c,leftTitle:m,rightTitle:x,splitView:v,hideLineNumbers:L,hideMarkers:C,nonce:b}=this.props;if(this.props.compareMethod!==o.DiffMethod.JSON&&(typeof a!="string"||typeof l!="string"))throw Error('"oldValue" and "newValue" should be strings');this.styles=this.computeStyles(this.props.styles,c,b);const E=this.renderDiff();let R=L?2:3,k=L?2:4;C&&(R-=1,k-=1);const M=this.props.renderGutter?1:0,A=(m||x)&&(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{colSpan:(v?R:k)+M,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:m})}),v&&(0,g.jsx)("td",{colSpan:R+M,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:x})})]});return(0,g.jsx)("table",{className:(0,i.default)(this.styles.diffContainer,{[this.styles.splitView]:v}),children:(0,g.jsxs)("tbody",{children:[A,E]})})},this.state={expandedBlocks:[]}}}S.defaultProps={oldValue:"",newValue:"",splitView:!0,highlightLines:[],disableWordDiff:!1,compareMethod:o.DiffMethod.CHARS,styles:{},hideLineNumbers:!1,hideMarkers:!1,extraLinesSurroundingDiff:3,showDiffOnly:!0,useDarkTheme:!1,linesOffset:0,nonce:""},e.default=S})(Zd);const um=Ph(Zd),dm=7683,fm={variables:{dark:{diffViewerBackground:"#0d1117",diffViewerColor:"#e6edf3",addedBackground:"rgba(63, 185, 80, 0.15)",addedColor:"#e6edf3",removedBackground:"rgba(248, 81, 73, 0.15)",removedColor:"#e6edf3",wordAddedBackground:"rgba(63, 185, 80, 0.4)",wordRemovedBackground:"rgba(248, 81, 73, 0.4)",addedGutterBackground:"#1a4d2e",removedGutterBackground:"#4d1a1a",gutterBackground:"#161b22",gutterBackgroundDark:"#0d1117",highlightBackground:"#21262d",highlightGutterBackground:"#21262d",codeFoldGutterBackground:"#161b22",codeFoldBackground:"#161b22",emptyLineBackground:"#161b22",gutterColor:"#6e7681",addedGutterColor:"#3fb950",removedGutterColor:"#f85149",codeFoldContentColor:"#8b949e",diffViewerTitleBackground:"#161b22",diffViewerTitleColor:"#e6edf3",diffViewerTitleBorderColor:"#30363d"}}},_m={A:"Added",M:"Modified",D:"Deleted"},pm={A:"bg-accent-green text-white",M:"bg-accent-blue text-white",D:"bg-accent-red text-white"};function gm(e){const t=e.querySelectorAll("td");for(const r of t){const s=r.querySelector("pre");if(s){const d=s.textContent?.trim();if(d==="+"||d==="-")return!0}}return!1}function vm(e){return e.textContent?.includes("hidden lines")||!1}function mm(e){const t=[],r=Array.from(e.querySelectorAll("tr"));let s=!1;for(const d of r){if(vm(d)){s=!1;continue}const g=gm(d);g&&!s&&t.push(d),s=g}return t}function Cm({file:e,defaultExpanded:t}){const[r,s]=V.useState(t),[d,g]=V.useState(-1),[y,i]=V.useState(0),o=V.useRef(null),f=V.useRef([]);V.useEffect(()=>{if(r&&o.current){const u=setTimeout(()=>{o.current&&(f.current=mm(o.current),i(f.current.length),g(f.current.length>0?0:-1))},200);return()=>clearTimeout(u)}else f.current=[],i(0),g(-1)},[r]);const _=u=>{if(f.current.length===0)return;let p;u==="prev"?p=Math.max(0,d-1):p=Math.min(f.current.length-1,d+1),p!==d&&(g(p),f.current[p]?.scrollIntoView({behavior:"smooth",block:"center"}))};return P.jsxs("div",{className:"border border-border-subtle rounded-lg overflow-hidden mb-3",children:[P.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-bg-tertiary",children:[P.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>s(!r),children:[P.jsx("span",{className:"text-text-secondary shrink-0",children:r?"":""}),P.jsx("span",{className:"text-sm truncate",children:e.filename}),P.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded shrink-0 ${pm[e.status]||"bg-bg-secondary"}`,children:_m[e.status]||e.status})]}),P.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[P.jsxs("span",{className:"text-xs text-text-secondary",children:[e.additions>0&&P.jsxs("span",{className:"text-accent-green mr-1",children:["+",e.additions]}),e.deletions>0&&P.jsxs("span",{className:"text-accent-red",children:["-",e.deletions]})]}),r&&y>0&&P.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[P.jsx("button",{onClick:u=>{u.stopPropagation(),_("prev")},disabled:d<=0,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""}),P.jsxs("span",{className:"text-xs text-text-muted min-w-[32px] text-center",children:[d+1,"/",y]}),P.jsx("button",{onClick:u=>{u.stopPropagation(),_("next")},disabled:d>=y-1,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]}),r&&P.jsx("div",{ref:o,className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:e.binary?P.jsx("div",{className:"p-4 text-center text-text-muted",children:"Binary file"}):P.jsx(um,{oldValue:e.oldValue||"",newValue:e.newValue||"",splitView:!1,useDarkTheme:!0,styles:fm,showDiffOnly:!0,extraLinesSurroundingDiff:3,codeFoldMessageRenderer:u=>P.jsxs("span",{children:[u," hidden lines"]})})})]})}const ym=({isOpen:e,onClose:t})=>{const[r,s]=V.useState(null),[d,g]=V.useState(!1),y=V.useCallback(async()=>{g(!0);try{const u=`http://${location.hostname}:${dm}/api/diff`,p=await fetch(u,{signal:AbortSignal.timeout(5e3)});if(!p.ok)throw new Error(`HTTP ${p.status}`);const w=await p.json();s(w)}catch(u){s({error:"connection_failed",message:u instanceof Error?u.message:"Cannot connect to diff server"})}finally{g(!1)}},[]);if(V.useEffect(()=>{e&&y()},[e,y]),V.useEffect(()=>{const u=p=>{e&&p.key==="Escape"&&(t(),p.preventDefault())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e,t]),!e)return null;const i=r?.files||[],o=i.length,f=r?.summary?.totalAdditions||0,_=r?.summary?.totalDeletions||0;return P.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end justify-center",onClick:u=>u.target===u.currentTarget&&t(),children:P.jsxs("div",{className:"w-full h-[90vh] bg-bg-primary rounded-t-2xl flex flex-col overflow-hidden",children:[P.jsxs("div",{className:"shrink-0 px-4 py-3 border-b border-border-subtle flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("h2",{className:"text-lg font-semibold",children:"Git Diff"}),r?.branch&&P.jsx("span",{className:"text-sm text-accent-purple",children:r.branch})]}),P.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary text-text-secondary",children:""})]}),P.jsxs("div",{className:"shrink-0 px-4 py-2 border-b border-border-subtle flex items-center justify-between text-xs text-text-secondary",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[r?.git_root&&P.jsx("span",{className:"truncate max-w-[200px]",title:r.git_root,children:r.git_root}),P.jsxs("span",{children:[o," file",o!==1?"s":""]})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsxs("span",{className:"text-accent-green",children:["+",f]}),P.jsxs("span",{className:"text-accent-red",children:["-",_]})]})]}),P.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?P.jsx("div",{className:"flex items-center justify-center h-full",children:P.jsx("div",{className:"text-text-muted",children:"Loading..."})}):r?.error?P.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[P.jsx("span",{className:"text-2xl",children:""}),P.jsx("span",{className:"text-text-muted",children:r.message||"Error loading diff"})]}):i.length===0?P.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[P.jsx("span",{className:"text-2xl text-accent-green",children:""}),P.jsx("span",{className:"text-text-muted",children:"No changes"})]}):i.map((u,p)=>P.jsx(Cm,{file:u,defaultExpanded:p===0},u.filename))})]})})},bh=()=>{try{navigator.vibrate?.(8)}catch{}},Sm=()=>{const{sendKey:e,sendInput:t}=vr(),[r,s]=V.useState(null),[d,g]=V.useState(!1),[y,i]=V.useState(!1),[o,f]=V.useState(!1),[_,u]=V.useState(()=>localStorage.getItem("ttyd_toolbar_expanded")!=="false"),p=()=>{u(a=>(localStorage.setItem("ttyd_toolbar_expanded",String(!a)),!a))},w=()=>{const a=localStorage.getItem("ttyd_commands");if(a)try{s(JSON.parse(a))}catch(l){console.error("Failed to parse ttyd_commands",l)}else s({defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]})};V.useEffect(()=>{w()},[]);const S=a=>{t(a+"\r")},h=a=>{bh(),e(a)},n=a=>{bh(),S(a)};return P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"bg-bg-secondary border-t border-border-subtle shrink-0 pb-[env(safe-area-inset-bottom)]",children:P.jsx("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:_?P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar",children:[P.jsx(Lh,{expanded:!0,onClick:p}),P.jsx(Oe,{label:"ESC",onClick:()=>h("ESC")}),P.jsx(Oe,{label:"^C",onClick:()=>h("CTRL_C"),className:"text-accent-red"}),P.jsx(Oe,{label:"^L",onClick:()=>h("CTRL_L")}),P.jsx(Ia,{}),P.jsx(Eh,{config:r,onCmd:n}),P.jsx(Nr,{label:"",onClick:()=>i(!0),"aria-label":"Text input"}),P.jsx(Nr,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),P.jsx(Nr,{label:"",onClick:()=>g(!0),"aria-label":"Settings"})]}),P.jsxs("div",{className:"flex items-center gap-1.5",children:[P.jsx(Oe,{label:"Tab",onClick:()=>h("TAB"),wide:!0}),P.jsx(Oe,{label:"Enter",onClick:()=>h("ENTER"),wide:!0}),P.jsx(Oe,{label:"PgUp",onClick:()=>h("PAGE_UP")}),P.jsx(Oe,{label:"PgDn",onClick:()=>h("PAGE_DOWN")}),P.jsx("div",{className:"flex-1"}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_UP")})]}),P.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[P.jsx(Oe,{label:"",onClick:()=>h("ARROW_LEFT")}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_DOWN")}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_RIGHT")})]})]}):P.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar mask-gradient-right",children:[P.jsx(Lh,{expanded:!1,onClick:p}),P.jsx(Oe,{label:"ESC",onClick:()=>h("ESC")}),P.jsx(Oe,{label:"Tab",onClick:()=>h("TAB")}),P.jsx(Oe,{label:"^C",onClick:()=>h("CTRL_C"),className:"text-accent-red"}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_UP")}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_DOWN")}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_LEFT")}),P.jsx(Oe,{label:"",onClick:()=>h("ARROW_RIGHT")}),P.jsx(Ia,{}),P.jsx(Eh,{config:r,onCmd:n}),P.jsx(Nr,{label:"",onClick:()=>i(!0),"aria-label":"Text input"}),P.jsx(Nr,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),P.jsx(Nr,{label:"",onClick:()=>g(!0),"aria-label":"Settings"})]})})}),P.jsx(lg,{isOpen:d,onClose:()=>g(!1),onConfigChange:w}),P.jsx(cg,{isOpen:y,onClose:()=>i(!1),onSend:a=>t(a)}),P.jsx(ym,{isOpen:o,onClose:()=>f(!1)})]})},Wl="min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border border-border-subtle text-sm font-mono active:scale-95 active:bg-accent-blue/20 transition-all whitespace-nowrap select-none",Lh=({expanded:e,onClick:t})=>P.jsx("button",{onClick:t,className:`min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border text-sm active:scale-95 transition-all shrink-0 select-none ${e?"bg-accent-blue/20 border-accent-blue text-accent-blue":"bg-bg-tertiary/50 border-border-subtle text-text-secondary"}`,"aria-label":e?"Collapse toolbar":"Expand toolbar",children:e?"":""}),Ia=()=>P.jsx("div",{className:"w-px h-5 bg-border-subtle shrink-0"}),Eh=({config:e,onCmd:t})=>{if(!e)return null;const r=[...e.defaultCommands.filter(s=>s.visible),...e.customCommands];return r.length===0?null:P.jsxs(P.Fragment,{children:[r.map(s=>P.jsx(wm,{label:s.name,onClick:()=>t(s.cmd)},s.name)),P.jsx(Ia,{})]})},Oe=({label:e,onClick:t,className:r="",wide:s})=>P.jsx("button",{onClick:t,className:`${Wl} bg-bg-tertiary text-text-primary ${s?"px-4":"min-w-[36px] px-2"} ${r}`,children:e}),wm=({label:e,onClick:t})=>P.jsx("button",{onClick:t,className:`${Wl} bg-bg-tertiary text-accent-blue px-3`,children:e}),Nr=({label:e,onClick:t,className:r="",...s})=>P.jsx("button",{onClick:t,"aria-label":s["aria-label"],className:`${Wl} bg-bg-tertiary/50 text-text-secondary min-w-[36px] px-2 ${r}`,children:e}),xm=7683,kh=({isOpen:e,onClose:t})=>{const{sendInput:r}=vr(),[s,d]=V.useState(""),g=V.useRef(null);V.useEffect(()=>{e&&(d(""),setTimeout(()=>g.current?.focus(),100))},[e]);const y=async()=>{const o=s.trim();if(o){t();try{const f=`http://${location.hostname}:${xm}/api/tmux/create?name=${encodeURIComponent(o)}`;if(!(await fetch(f,{signal:AbortSignal.timeout(5e3)})).ok)throw new Error("API failed")}catch{r(`[ -n "$TMUX" ] && { tmux new-session -d -s ${o} 2>/dev/null; tmux switch-client -t ${o}; } || tmux new -A -s ${o}\r`)}}},i=o=>{o.key==="Enter"?(o.preventDefault(),y()):o.key==="Escape"&&t()};return e?P.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:o=>o.target===o.currentTarget&&t(),children:P.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[P.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Tmux Session"}),P.jsx("input",{ref:g,type:"text",value:s,onChange:o=>d(o.target.value),onKeyDown:i,placeholder:"Session name (e.g. work, claude)",className:"w-full px-3 py-2 bg-bg-tertiary border border-border-subtle rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple mb-4"}),P.jsxs("div",{className:"flex gap-2 justify-end",children:[P.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),P.jsx("button",{onClick:y,disabled:!s.trim(),className:"px-4 py-2 rounded-lg bg-accent-purple text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Create & Attach"})]})]})}):null},Rh=7683,bm=1500,Lm=({sessionName:e,onConfirm:t,onCancel:r})=>P.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:s=>s.target===s.currentTarget&&r(),children:P.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[P.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Kill Session?"}),P.jsxs("p",{className:"text-text-secondary text-sm mb-4",children:["Are you sure you want to kill session ",P.jsxs("span",{className:"text-accent-red font-mono",children:['"',e,'"']}),"? This action cannot be undone."]}),P.jsxs("div",{className:"flex gap-2 justify-end",children:[P.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),P.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-accent-red text-white",children:"Kill Session"})]})]})}),Em=()=>{const{sendInput:e}=vr(),{tmuxSessions:t,currentTmuxSession:r,refresh:s}=Yd(),[d,g]=V.useState(!1),[y,i]=V.useState(!1),[o,f]=V.useState(null),_=V.useRef(null),u=V.useRef(null),p=V.useRef(!1);V.useEffect(()=>{const x=v=>{_.current&&!_.current.contains(v.target)&&g(!1)};if(d)return document.addEventListener("mousedown",x),document.addEventListener("touchstart",x,{passive:!0}),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("touchstart",x)}},[d]);const w=async x=>{g(!1);try{const v=`http://${location.hostname}:${Rh}/api/tmux/switch?session=${encodeURIComponent(x)}`;if(!(await fetch(v,{signal:AbortSignal.timeout(5e3)})).ok)throw new Error("API failed");s()}catch{e(`[ -n "$TMUX" ] && tmux switch-client -t ${x} || tmux attach -t ${x}\r`)}},S=async x=>{try{const v=`http://${location.hostname}:${Rh}/api/tmux/kill?name=${encodeURIComponent(x)}`;await fetch(v,{signal:AbortSignal.timeout(5e3)}),s()}catch{}f(null)},h=x=>{p.current=!1,u.current=window.setTimeout(()=>{p.current=!0,f(x),g(!1)},bm)},n=()=>{u.current&&(clearTimeout(u.current),u.current=null)},a=x=>{p.current||w(x)},l=()=>{g(!1),i(!0)};if(t.length===0)return P.jsxs(P.Fragment,{children:[P.jsx("button",{onTouchEnd:x=>{x.preventDefault(),l()},onClick:l,className:"flex items-center gap-1.5 px-2.5 py-1 text-accent-purple text-xs font-medium active:opacity-70",children:"+ New Session"}),P.jsx(kh,{isOpen:y,onClose:()=>i(!1)})]});const m=t.find(x=>x.name===r)?.name||t[0]?.name||"Select";return P.jsxs(P.Fragment,{children:[P.jsxs("div",{ref:_,className:"relative",children:[P.jsxs("button",{onClick:()=>g(!d),className:"flex items-center gap-1.5 px-2.5 py-1 bg-accent-purple rounded-md text-white text-xs font-medium whitespace-nowrap",children:[P.jsx("span",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),m,P.jsx("span",{className:"ml-1 text-[10px] opacity-70",children:d?"":""})]}),d&&P.jsxs("div",{className:"absolute top-full left-0 mt-1 min-w-[160px] bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[P.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:t.map(x=>P.jsxs("button",{onClick:()=>a(x.name),onTouchStart:()=>h(x.name),onTouchEnd:n,onMouseDown:()=>h(x.name),onMouseUp:n,onMouseLeave:n,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm transition-colors ${x.name===r?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[P.jsx("span",{className:`w-2 h-2 rounded-full ${x.attached?"bg-accent-green":"bg-text-muted opacity-50"}`}),P.jsx("span",{className:"flex-1 truncate",children:x.name}),P.jsxs("span",{className:"text-xs text-text-muted",children:[x.windows,"w"]})]},x.name))}),P.jsx("div",{className:"border-t border-border-subtle",children:P.jsxs("button",{onTouchEnd:x=>{x.preventDefault(),l()},onClick:l,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-accent-purple hover:bg-bg-tertiary active:bg-bg-tertiary",children:[P.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:"+"}),P.jsx("span",{children:"New Session"})]})})]})]}),P.jsx(kh,{isOpen:y,onClose:()=>i(!1)}),o&&P.jsx(Lm,{sessionName:o,onConfirm:()=>S(o),onCancel:()=>f(null)})]})},Mh=7683,km=({currentBranch:e,onBranchChange:t})=>{const[r,s]=V.useState(!1),[d,g]=V.useState({local:[],remote:[],current:""}),[y,i]=V.useState(""),[o,f]=V.useState(!1),_=V.useRef(null),u=V.useRef(null),p=V.useCallback(async()=>{f(!0);try{const a=`http://${location.hostname}:${Mh}/api/git/branches`,l=await fetch(a,{signal:AbortSignal.timeout(5e3)});if(l.ok){const c=await l.json();g(c)}}catch{g({local:[],remote:[],current:""})}finally{f(!1)}},[]);V.useEffect(()=>{r?(p(),setTimeout(()=>u.current?.focus(),100)):i("")},[r,p]),V.useEffect(()=>{const a=l=>{_.current&&!_.current.contains(l.target)&&s(!1)};if(r)return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[r]);const w=async a=>{s(!1);try{const l=`http://${location.hostname}:${Mh}/api/git/checkout?branch=${encodeURIComponent(a)}`;(await fetch(l,{signal:AbortSignal.timeout(1e4)})).ok&&t?.()}catch{}},S=a=>{if(!y)return a;const l=y.toLowerCase();return a.filter(c=>c.toLowerCase().includes(l))},h=S(d.local),n=S(d.remote);return e?P.jsxs("div",{ref:_,className:"relative",children:[P.jsxs("button",{onClick:()=>s(!r),className:"text-accent-purple hover:text-accent-purple/80 text-xs font-mono flex items-center gap-1",children:[P.jsx("span",{children:e}),P.jsx("span",{className:"text-[10px] opacity-70",children:r?"":""})]}),r&&P.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[P.jsx("div",{className:"p-2 border-b border-border-subtle",children:P.jsx("input",{ref:u,type:"text",value:y,onChange:a=>i(a.target.value),placeholder:"Search branches...",className:"w-full px-2 py-1.5 bg-bg-tertiary border border-border-subtle rounded text-sm text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple"})}),P.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:o?P.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"Loading..."}):P.jsxs(P.Fragment,{children:[h.length>0&&P.jsxs("div",{children:[P.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Local"}),h.map(a=>P.jsxs("button",{onClick:()=>w(a),className:`w-full px-3 py-2 text-left text-sm truncate ${a===d.current?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[a===d.current&&P.jsx("span",{className:"mr-1",children:""}),a]},a))]}),n.length>0&&P.jsxs("div",{children:[P.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Remote"}),n.map(a=>P.jsx("button",{onClick:()=>w(a),className:"w-full px-3 py-2 text-left text-sm text-text-secondary hover:bg-bg-tertiary truncate",children:a},a))]}),h.length===0&&n.length===0&&P.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"No branches found"})]})})]})]}):null};function Rm(e,t=20){if(e.length<=t)return e;const r=e.split("/");return r.length<=2?"..."+e.slice(-t+3):"~/"+r.slice(-2).join("/")}const Mm=()=>{const{connectionState:e}=vr(),{branch:t,path:r,isOffline:s,refresh:d}=Yd(),g=V.useCallback(()=>{setTimeout(()=>d(),500)},[d]),y=e==="connected";return P.jsx("div",{className:"h-[40px] shrink-0 border-b border-border-subtle flex items-center px-3 bg-bg-secondary overflow-visible",children:P.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary font-mono w-full",children:[P.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${y?"bg-accent-green":"bg-accent-red"}`,title:y?"Connected":"Disconnected"}),P.jsx(Em,{}),P.jsx("span",{className:"text-border-subtle shrink-0",children:""}),s?P.jsx("span",{className:"text-text-muted",children:"(offline)"}):P.jsxs(P.Fragment,{children:[P.jsx(km,{currentBranch:t||"-",onBranchChange:g}),P.jsx("span",{className:"text-border-subtle shrink-0",children:""}),P.jsx("span",{className:"truncate",title:r,children:Rm(r)})]})]})})},Sf="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9L1tcdTAwMUJcdTAwOUJdW1tcXSgpIzs/XSooPzooPzooPzooPzo7Wy1hLXpBLVpcZFwvIyYuOj0/JUB+X10rKSp8W2EtekEtWlxkXSsoPzo7Wy1hLXpBLVpcZFwvIyYuOj0/JUB+X10rKSopP1x1MDAwNyl8KD86KD86XGR7MSw0fSg/OjtcZHswLDR9KSopP1tcZEEtUFItVFpjZi1ucS11eT0+PH5dKSkvZztmdW5jdGlvbiBsKHQpe3JldHVybiB0LnJlcGxhY2UodSwiIil9Y29uc3QgYz1be3BhdHRlcm46L15SZWFkaW5nXHMrKC4rKSQvaSx0eXBlOiJyZWFkaW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15Xcm90ZVxzKyguKz8pKD86XHMrXCguKlwpKT8kL2ksdHlwZToid3JpdGluZyIsZmlsZUdyb3VwOjF9LHtwYXR0ZXJuOi9eQ3JlYXRlZFxzKyguKykkL2ksdHlwZToid3JpdGluZyIsZmlsZUdyb3VwOjF9LHtwYXR0ZXJuOi9eRWRpdGVkXHMrKC4rKSQvaSx0eXBlOiJ3cml0aW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15SdW5uaW5nXHMrKC4rKSQvaSx0eXBlOiJleGVjdXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXkV4ZWN1dGluZ1xzKyguKykkL2ksdHlwZToiZXhlY3V0aW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15UaGlua2luZ1wuezN9JC9pLHR5cGU6InRoaW5raW5nIn0se3BhdHRlcm46L15BbmFseXppbmdccysoLispL2ksdHlwZToidGhpbmtpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXlxbcmVhZFxdXHMrKC4rKSQvaSx0eXBlOiJyZWFkaW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15cW3dyaXRlXF1ccysoLispJC9pLHR5cGU6IndyaXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXlxbZXhlY1xdXHMrKC4rKSQvaSx0eXBlOiJleGVjdXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXuKck1xzKyguKykkL2ksdHlwZToiY29tcGxldGUiLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXuKcl1xzKyguKykkL2ksdHlwZToiZXJyb3IiLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXkVycm9yOlxzKyguKykvaSx0eXBlOiJlcnJvciIsZmlsZUdyb3VwOjF9XSxhPTFlMztsZXQgZT0iIjtmdW5jdGlvbiBmKHQpe2NvbnN0IG49dC50cmltKCk7aWYoIW4pcmV0dXJuIG51bGw7Zm9yKGNvbnN0e3BhdHRlcm46cCx0eXBlOm8sZmlsZUdyb3VwOml9b2YgYyl7Y29uc3Qgcz1uLm1hdGNoKHApO2lmKHMpe2NvbnN0IHI9aT9zW2ldOnZvaWQgMDtyZXR1cm57dHlwZTpvLG1lc3NhZ2U6cnx8bixmaWxlOnJ9fX1yZXR1cm4gbnVsbH1zZWxmLm9ubWVzc2FnZT10PT57aWYodC5kYXRhLnR5cGUhPT0iZGF0YSIpcmV0dXJuO2NvbnN0IG49bCh0LmRhdGEucGF5bG9hZCk7ZSs9bixlLmxlbmd0aD5hJiYoZT1lLnNsaWNlKC1hKSk7Y29uc3QgcD1lLnNwbGl0KC9ccj9cbi8pO2U9cC5wb3AoKXx8IiI7Y29uc3Qgbz1wLnNsaWNlKDAsNTApLGk9W107Zm9yKGNvbnN0IHMgb2Ygbyl7Y29uc3Qgcj1mKHMpO3ImJmkucHVzaChyKX1pLmxlbmd0aD4wJiZzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJhY3Rpdml0eSIsYWN0aXZpdGllczppfSl9fSkoKTsK",Dm=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),Dh=typeof self<"u"&&self.Blob&&new Blob([Dm(Sf)],{type:"text/javascript;charset=utf-8"});function Am(e){let t;try{if(t=Dh&&(self.URL||self.webkitURL).createObjectURL(Dh),!t)throw"";const r=new Worker(t,{name:e?.name});return r.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),r}catch{return new Worker("data:text/javascript;base64,"+Sf,{name:e?.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const Tm=10;function Bm(){const[e,t]=V.useState([]),{subscribeOutput:r}=vr(),s=V.useRef(0),d=V.useRef(null),g=V.useCallback((y,i,o)=>{const f={id:`activity-${++s.current}`,type:y,message:i,file:o,timestamp:new Date};t(_=>[f,..._].slice(0,Tm))},[]);return V.useEffect(()=>{const y=new Am;d.current=y,y.onmessage=o=>{if(o.data.type==="activity")for(const f of o.data.activities)g(f.type,f.message,f.file)};const i=r(o=>{const f=typeof o=="string"?o:new TextDecoder().decode(o);y.postMessage({type:"data",payload:f})});return()=>{i(),y.terminate(),d.current=null}},[r,g]),V.useEffect(()=>(typeof window<"u"&&(window.__addMockActivity=g),()=>{typeof window<"u"&&delete window.__addMockActivity}),[g]),{activities:e,addActivity:g}}const Ah={reading:"",writing:"",thinking:"",executing:"",complete:"",error:""},Th={reading:"text-text-secondary",writing:"text-accent-green",thinking:"text-accent-purple",executing:"text-accent-blue",complete:"text-accent-green",error:"text-accent-red"},Om=()=>{const[e,t]=V.useState(!1),{activities:r}=Bm(),s=r.length>0,d=r[0];return!s&&!e?P.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:P.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2",children:[P.jsx("span",{children:""}),P.jsx("span",{children:"No recent activity"})]})}):e?P.jsxs("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle max-h-[200px] overflow-y-auto",children:[P.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2 cursor-pointer sticky top-0 bg-bg-secondary border-b border-border-subtle",onClick:()=>t(!1),children:[P.jsx("span",{children:""}),P.jsxs("span",{children:[r.length," activities"]})]}),P.jsx("div",{className:"divide-y divide-border-subtle",children:r.map((g,y)=>{const i=y===0&&(g.type==="reading"||g.type==="thinking"||g.type==="executing");return P.jsxs("div",{className:`px-3 py-2 text-xs flex items-center gap-2 ${i?"bg-glow-ai border-l-2 border-accent-purple":""}`,style:i?{boxShadow:"0 0 12px var(--glow-ai)"}:void 0,children:[P.jsx("span",{className:Th[g.type],children:Ah[g.type]}),P.jsx("span",{className:"text-text-primary truncate flex-1",children:g.message}),g.file&&g.file!==g.message&&P.jsx("span",{className:"text-text-muted truncate max-w-[120px]",title:g.file,children:g.file}),P.jsx("span",{className:"text-text-muted shrink-0",children:Pm(g.timestamp)})]},g.id)})}),!s&&P.jsx("div",{className:"px-3 py-4 text-xs text-text-muted text-center",children:"No recent activity"})]}):P.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:P.jsxs("div",{className:"px-3 py-2 text-xs flex items-center gap-2",children:[P.jsx("span",{className:"text-text-muted",children:""}),P.jsxs("span",{className:"text-text-secondary",children:[r.length," activities"]}),d&&P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"text-border-subtle",children:""}),P.jsxs("span",{className:Th[d.type],children:[Ah[d.type]," ",d.message]})]})]})})};function Pm(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}const Im=()=>{const{connectionState:e,reconnect:t,reconnectAttempt:r}=vr(),s=V.useCallback(i=>{i.key==="Enter"&&e==="disconnected"&&t()},[e,t]);if(V.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s]),e==="connected")return null;const d=e==="reconnecting",g=e==="connecting",y=e==="disconnected";return P.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center pointer-events-auto",children:P.jsxs("div",{className:"bg-bg-secondary rounded-xl p-6 max-w-xs w-full mx-4 text-center shadow-xl border border-border-subtle",children:[(g||d)&&P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"w-8 h-8 border-2 border-accent-purple border-t-transparent rounded-full animate-spin mx-auto mb-4"}),P.jsx("h3",{className:"text-lg font-semibold mb-2",children:d?"Reconnecting...":"Connecting..."}),d&&P.jsxs("p",{className:"text-sm text-text-secondary",children:["Attempt ",r," of 10"]})]}),y&&r>=10&&P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-red/20 flex items-center justify-center mx-auto mb-4",children:P.jsx("span",{className:"text-2xl",children:""})}),P.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Failed"}),P.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Could not connect after 10 attempts"}),P.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Try Again"})]}),y&&r<10&&r>0&&P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:P.jsx("span",{className:"text-2xl",children:""})}),P.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),P.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reconnecting automatically..."}),P.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect Now"}),P.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]}),y&&r===0&&P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:P.jsx("span",{className:"text-2xl",children:""})}),P.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),P.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Connection lost"}),P.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect"}),P.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]})]})})},Fm=({children:e})=>{const{terminalRef:t}=vr(),[r,s]=V.useState(null),d=V.useCallback(()=>{const y=window.visualViewport;y&&s(y.height)},[]);V.useEffect(()=>{const y=window.visualViewport;if(y)return y.addEventListener("resize",d),y.addEventListener("scroll",d),d(),()=>{y.removeEventListener("resize",d),y.removeEventListener("scroll",d)}},[d]);const g=r?{height:`${r}px`}:{height:"100dvh"};return P.jsxs("div",{className:"flex flex-col bg-bg-primary overflow-hidden text-text-primary font-sans selection:bg-accent-blue/30",style:g,children:[P.jsx(Mm,{}),P.jsx(Om,{}),P.jsx("div",{ref:t,className:"flex-1 min-h-0 relative bg-bg-primary overflow-hidden",children:e}),P.jsx(Sm,{}),P.jsx(Im,{})]})};var wf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(y,i,o){var f=this&&this.__decorate||function(l,c,m,x){var v,L=arguments.length,C=L<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,x);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(C=(L<3?v(C):L>3?v(c,m,C):v(c,m))||C);return L>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,x){c(m,x,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const u=o(9042),p=o(9924),w=o(844),S=o(4725),h=o(2585),n=o(3656);let a=i.AccessibilityManager=class extends w.Disposable{constructor(l,c,m,x){super(),this._terminal=l,this._coreBrowserService=m,this._renderService=x,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let c=0;c<l;c++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),/\p{Control}/u.test(l)||this._charsToConsume.push(l)}_refreshRows(l,c){this._liveRegionDebouncer.refresh(l,c,this._terminal.rows)}_renderRows(l,c){const m=this._terminal.buffer,x=m.lines.length.toString();for(let v=l;v<=c;v++){const L=m.lines.get(m.ydisp+v),C=[],b=L?.translateToString(!0,void 0,void 0,C)||"",E=(m.ydisp+v+1).toString(),R=this._rowElements[v];R&&(b.length===0?(R.innerText="",this._rowColumns.set(R,[0,1])):(R.textContent=b,this._rowColumns.set(R,C)),R.setAttribute("aria-posinset",E),R.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,c){const m=l.target,x=this._rowElements[c===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==x)return;let v,L;if(c===0?(v=m,L=this._rowElements.pop(),this._rowContainer.removeChild(L)):(v=this._rowElements.shift(),L=m,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),L.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:l.anchorNode,offset:l.anchorOffset},m={node:l.focusNode,offset:l.focusOffset};if((c.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===m.node&&c.offset>m.offset)&&([c,m]=[m,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const x=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(x)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:x,offset:x.textContent?.length??0}),!this._rowContainer.contains(m.node))return;const v=({node:b,offset:E})=>{const R=b instanceof Text?b.parentNode:b;let k=parseInt(R?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;const M=this._rowColumns.get(R);if(!M)return console.warn("columns is null. Race condition?"),null;let A=E<M.length?M[E]:M.slice(-1)[0]+1;return A>=this._terminal.cols&&(++k,A=0),{row:k,column:A}},L=v(c),C=v(m);if(L&&C){if(L.row>C.row||L.row===C.row&&L.column>=C.column)throw new Error("invalid range");this._terminal.select(L.column,L.row,(C.row-L.row)*this._terminal.cols-L.column+C.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=f([_(1,h.IInstantiationService),_(2,S.ICoreBrowserService),_(3,S.IRenderService)],a)},3614:(y,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function f(p,w){return w?"\x1B[200~"+p+"\x1B[201~":p}function _(p,w,S,h){p=f(p=o(p),S.decPrivateModes.bracketedPasteMode&&h.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(p,!0),w.value=""}function u(p,w,S){const h=S.getBoundingClientRect(),n=p.clientX-h.left-10,a=p.clientY-h.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${n}px`,w.style.top=`${a}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(p,w){p.clipboardData&&p.clipboardData.setData("text/plain",w.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,w,S,h){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),w,S,h)},i.paste=_,i.moveTextAreaUnderMouseCursor=u,i.rightClickHandler=function(p,w,S,h,n){u(p,w,S),n&&h.rightClickSelect(p),w.value=h.selectionText,w.select()}},7239:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(_,u,p){this._css.set(_,u,p)}getCss(_,u){return this._css.get(_,u)}setColor(_,u,p){this._color.set(_,u,p)}getColor(_,u){return this._color.get(_,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,u){o.addEventListener(f,_,u);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,u))}}}},3551:function(y,i,o){var f=this&&this.__decorate||function(a,l,c,m){var x,v=arguments.length,L=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(L=(v<3?x(L):v>3?x(l,c,L):x(l,c))||L);return v>3&&L&&Object.defineProperty(l,c,L),L},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const u=o(3656),p=o(8460),w=o(844),S=o(2585),h=o(4725);let n=i.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(a,l,c,m,x){super(),this._element=a,this._mouseService=l,this._renderService=c,this._bufferService=m,this._linkProviderService=x,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=a.composedPath();for(let m=0;m<c.length;m++){const x=c[m];if(x.classList.contains("xterm"))break;if(x.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,l){this._activeProviderReplies&&l||(this._activeProviderReplies?.forEach(m=>{m?.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let c=!1;for(const[m,x]of this._linkProviderService.linkProviders.entries())l?this._activeProviderReplies?.get(m)&&(c=this._checkLinkProviderResult(m,a,c)):x.provideLinks(a.y,v=>{if(this._isMouseOut)return;const L=v?.map(C=>({link:C}));this._activeProviderReplies?.set(m,L),c=this._checkLinkProviderResult(m,a,c),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,l){const c=new Set;for(let m=0;m<l.size;m++){const x=l.get(m);if(x)for(let v=0;v<x.length;v++){const L=x[v],C=L.link.range.start.y<a?0:L.link.range.start.x,b=L.link.range.end.y>a?this._bufferService.cols:L.link.range.end.x;for(let E=C;E<=b;E++){if(c.has(E)){x.splice(v--,1);break}c.add(E)}}}}_checkLinkProviderResult(a,l,c){if(!this._activeProviderReplies)return c;const m=this._activeProviderReplies.get(a);let x=!1;for(let v=0;v<a;v++)this._activeProviderReplies.has(v)&&!this._activeProviderReplies.get(v)||(x=!0);if(!x&&m){const v=m.find(L=>this._linkAtPosition(L.link,l));v&&(c=!0,this._handleNewLink(v))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let v=0;v<this._activeProviderReplies.size;v++){const L=this._activeProviderReplies.get(v)?.find(C=>this._linkAtPosition(C.link,l));if(L){c=!0,this._handleNewLink(L);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,l){this._currentLink&&this._lastMouseEvent&&(!a||!l||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(a.link,l)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:c=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:c=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const m=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,x=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=x&&(this._clearCurrentLink(m,x),this._lastMouseEvent)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(a,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(a,l){const c=a.range,m=this._bufferService.buffer.ydisp,x=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-m-1,c.end.x,c.end.y-m-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(x)}_linkLeave(a,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(a,l){const c=a.range.start.y*this._bufferService.cols+a.range.start.x,m=a.range.end.y*this._bufferService.cols+a.range.end.x,x=l.y*this._bufferService.cols+l.x;return c<=x&&x<=m}_positionFromMouseEvent(a,l,c){const m=c.getCoords(a,l,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,l,c,m,x){return{x1:a,y1:l,x2:c,y2:m,cols:this._bufferService.cols,fg:x}}};i.Linkifier=n=f([_(1,h.IMouseService),_(2,h.IRenderService),_(3,S.IBufferService),_(4,h.ILinkProviderService)],n)},9042:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(y,i,o){var f=this&&this.__decorate||function(h,n,a,l){var c,m=arguments.length,x=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,n,a,l);else for(var v=h.length-1;v>=0;v--)(c=h[v])&&(x=(m<3?c(x):m>3?c(n,a,x):c(n,a))||x);return m>3&&x&&Object.defineProperty(n,a,x),x},_=this&&this.__param||function(h,n){return function(a,l){n(a,l,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const u=o(511),p=o(2585);let w=i.OscLinkProvider=class{constructor(h,n,a){this._bufferService=h,this._optionsService=n,this._oscLinkService=a}provideLinks(h,n){const a=this._bufferService.buffer.lines.get(h-1);if(!a)return void n(void 0);const l=[],c=this._optionsService.rawOptions.linkHandler,m=new u.CellData,x=a.getTrimmedLength();let v=-1,L=-1,C=!1;for(let b=0;b<x;b++)if(L!==-1||a.hasContent(b)){if(a.loadCell(b,m),m.hasExtendedAttrs()&&m.extended.urlId){if(L===-1){L=b,v=m.extended.urlId;continue}C=m.extended.urlId!==v}else L!==-1&&(C=!0);if(C||L!==-1&&b===x-1){const E=this._oscLinkService.getLinkData(v)?.uri;if(E){const R={start:{x:L+1,y:h},end:{x:b+(C||b!==x-1?0:1),y:h}};let k=!1;if(!c?.allowNonHttpProtocols)try{const M=new URL(E);["http:","https:"].includes(M.protocol)||(k=!0)}catch{k=!0}k||l.push({text:E,range:R,activate:(M,A)=>c?c.activate(M,A,R):S(0,A),hover:(M,A)=>c?.hover?.(M,A,R),leave:(M,A)=>c?.leave?.(M,A,R)})}C=!1,m.hasExtendedAttrs()&&m.extended.urlId?(L=b,v=m.extended.urlId):(L=-1,v=-1)}}n(l)}};function S(h,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=w=f([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],w)},6193:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),_=o(3656),u=o(3551),p=o(9042),w=o(3730),S=o(1680),h=o(3107),n=o(5744),a=o(2950),l=o(1296),c=o(428),m=o(4269),x=o(5114),v=o(8934),L=o(3230),C=o(9312),b=o(4725),E=o(6731),R=o(8055),k=o(8969),M=o(8460),A=o(844),H=o(6114),$=o(8437),N=o(2584),B=o(7399),D=o(5941),T=o(9074),I=o(2585),F=o(5435),z=o(4567),U=o(779);class Z extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(j={}){super(j),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new A.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(U.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((O,W)=>this.refresh(O,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(O=>this._reportWindowsOptions(O))),this.register(this._inputHandler.onColor(O=>this._handleColorEvent(O))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(O=>this._afterResize(O.cols,O.rows))),this.register((0,A.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(j){if(this._themeService)for(const O of j){let W,K="";switch(O.index){case 256:W="foreground",K="10";break;case 257:W="background",K="11";break;case 258:W="cursor",K="12";break;default:W="ansi",K="4;"+O.index}switch(O.type){case 0:const Q=R.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${K};${(0,D.toRgbString)(Q)}${N.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(X=>X.ansi[O.index]=R.channels.toColor(...O.color));else{const X=W;this._themeService.modifyColors(ae=>ae[X]=R.channels.toColor(...O.color))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(j){j?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(j){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const j=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get(j);if(!O)return;const W=Math.min(this.buffer.x,this.cols-1),K=this._renderService.dimensions.css.cell.height,Q=O.getWidth(W),X=this._renderService.dimensions.css.cell.width*Q,ae=this.buffer.y*this._renderService.dimensions.css.cell.height,Y=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Y+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=X+"px",this.textarea.style.height=K+"px",this.textarea.style.lineHeight=K+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",O=>{this.hasSelection()&&(0,f.copyHandler)(O,this._selectionService)}));const j=O=>(0,f.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",j)),this.register((0,_.addDisposableDomListener)(this.element,"paste",j)),H.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",O=>{O.button===2&&(0,f.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",O=>{(0,f.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",O=>{O.button===1&&(0,f.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",j=>this._keyUp(j),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",j=>this._keyDown(j),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",j=>this._keyPress(j),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",j=>this._compositionHelper.compositionupdate(j))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",j=>this._inputEvent(j),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(j){if(!j)throw new Error("Terminal requires a parent element.");if(j.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=j.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),j.appendChild(this.element);const O=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),O.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",W=>this.updateCursorStyle(W))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),O.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(x.CoreBrowserService,this.textarea,j.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",W=>this._handleTextAreaFocus(W))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(W=>this._onRender.fire(W))),this.onResize(W=>this._renderService.resize(W.cols,W.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(u.Linkifier,this.screenElement)),this.element.appendChild(O);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(W=>this._renderService.handleSelectionChanged(W.start,W.end,W.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(W=>{this.textarea.value=W,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(W=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(h.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",W=>this._selectionService.handleMouseDown(W))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",W=>this._handleScreenReaderModeOptionChange(W))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",W=>{!this._overviewRulerRenderer&&W&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const j=this,O=this.element;function W(X){const ae=j._mouseService.getMouseReportCoords(X,j.screenElement);if(!ae)return!1;let Y,ue;switch(X.overrideType||X.type){case"mousemove":ue=32,X.buttons===void 0?(Y=3,X.button!==void 0&&(Y=X.button<3?X.button:3)):Y=1&X.buttons?0:4&X.buttons?1:2&X.buttons?2:3;break;case"mouseup":ue=0,Y=X.button<3?X.button:3;break;case"mousedown":ue=1,Y=X.button<3?X.button:3;break;case"wheel":if(j._customWheelEventHandler&&j._customWheelEventHandler(X)===!1||j.viewport.getLinesScrolled(X)===0)return!1;ue=X.deltaY<0?0:1,Y=4;break;default:return!1}return!(ue===void 0||Y===void 0||Y>4)&&j.coreMouseService.triggerMouseEvent({col:ae.col,row:ae.row,x:ae.x,y:ae.y,button:Y,action:ue,ctrl:X.ctrlKey,alt:X.altKey,shift:X.shiftKey})}const K={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:X=>(W(X),X.buttons||(this._document.removeEventListener("mouseup",K.mouseup),K.mousedrag&&this._document.removeEventListener("mousemove",K.mousedrag)),this.cancel(X)),wheel:X=>(W(X),this.cancel(X,!0)),mousedrag:X=>{X.buttons&&W(X)},mousemove:X=>{X.buttons||W(X)}};this.register(this.coreMouseService.onProtocolChange(X=>{X?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(X)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&X?K.mousemove||(O.addEventListener("mousemove",Q.mousemove),K.mousemove=Q.mousemove):(O.removeEventListener("mousemove",K.mousemove),K.mousemove=null),16&X?K.wheel||(O.addEventListener("wheel",Q.wheel,{passive:!1}),K.wheel=Q.wheel):(O.removeEventListener("wheel",K.wheel),K.wheel=null),2&X?K.mouseup||(K.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",K.mouseup),K.mouseup=null),4&X?K.mousedrag||(K.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",K.mousedrag),K.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(O,"mousedown",X=>{if(X.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(X))return W(X),K.mouseup&&this._document.addEventListener("mouseup",K.mouseup),K.mousedrag&&this._document.addEventListener("mousemove",K.mousedrag),this.cancel(X)})),this.register((0,_.addDisposableDomListener)(O,"wheel",X=>{if(!K.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(X)===!1)return!1;if(!this.buffer.hasScrollback){const ae=this.viewport.getLinesScrolled(X);if(ae===0)return;const Y=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(X.deltaY<0?"A":"B");let ue="";for(let me=0;me<Math.abs(ae);me++)ue+=Y;return this.coreService.triggerDataEvent(ue,!0),this.cancel(X,!0)}return this.viewport.handleWheel(X)?this.cancel(X):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(O,"touchstart",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(X),this.cancel(X)},{passive:!0})),this.register((0,_.addDisposableDomListener)(O,"touchmove",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(X)?void 0:this.cancel(X)},{passive:!1}))}refresh(j,O){this._renderService?.refreshRows(j,O)}updateCursorStyle(j){this._selectionService?.shouldColumnSelect(j)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(j,O,W=0){W===1?(super.scrollLines(j,O,W),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(j)}paste(j){(0,f.paste)(j,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(j){this._customKeyEventHandler=j}attachCustomWheelEventHandler(j){this._customWheelEventHandler=j}registerLinkProvider(j){return this._linkProviderService.registerLinkProvider(j)}registerCharacterJoiner(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const O=this._characterJoinerService.register(j);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(j)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(j){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+j)}registerDecoration(j){return this._decorationService.registerDecoration(j)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(j,O,W){this._selectionService.setSelection(j,O,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(j,O){this._selectionService?.selectLines(j,O)}_keyDown(j){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;const O=this.browser.isMac&&this.options.macOptionIsMeta&&j.altKey;if(!O&&!this._compositionHelper.keydown(j))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||j.key!=="Dead"&&j.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const W=(0,B.evaluateKeyboardEvent)(j,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(j),W.type===3||W.type===2){const K=this.rows-1;return this.scrollLines(W.type===2?-K:K),this.cancel(j,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,j)||(W.cancel&&this.cancel(j,!0),!W.key||!!(j.key&&!j.ctrlKey&&!j.altKey&&!j.metaKey&&j.key.length===1&&j.key.charCodeAt(0)>=65&&j.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==N.C0.ETX&&W.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||j.altKey||j.ctrlKey?this.cancel(j,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(j,O){const W=j.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||j.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||j.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?W:W&&(!O.keyCode||O.keyCode>47)}_keyUp(j){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1||(function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18}(j)||this.focus(),this.updateCursorStyle(j),this._keyPressHandled=!1)}_keyPress(j){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(this.cancel(j),j.charCode)O=j.charCode;else if(j.which===null||j.which===void 0)O=j.keyCode;else{if(j.which===0||j.charCode===0)return!1;O=j.which}return!(!O||(j.altKey||j.ctrlKey||j.metaKey)&&!this._isThirdLevelShift(this.browser,j)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(j){if(j.data&&j.inputType==="insertText"&&(!j.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const O=j.data;return this.coreService.triggerDataEvent(O,!0),this.cancel(j),!0}return!1}resize(j,O){j!==this.cols||O!==this.rows?super.resize(j,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(j,O){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let j=1;j<this.rows;j++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const j=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(j){if(this._renderService)switch(j){case F.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const O=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${W};${O}t`);break;case F.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const K=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${Q};${K}t`)}}cancel(j,O){if(this.options.cancelEvents||O)return j.preventDefault(),j.stopPropagation(),!1}}i.Terminal=Z},9924:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=u-this._lastRefreshMs,w=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(y,i,o){var f=this&&this.__decorate||function(a,l,c,m){var x,v=arguments.length,L=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(L=(v<3?x(L):v>3?x(l,c,L):x(l,c))||L);return v>3&&L&&Object.defineProperty(l,c,L),L},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const u=o(3656),p=o(4725),w=o(8460),S=o(844),h=o(2585);let n=i.Viewport=class extends S.Disposable{constructor(a,l,c,m,x,v,L,C){super(),this._viewportElement=a,this._scrollArea=l,this._bufferService=c,this._optionsService=m,this._charSizeService=x,this._renderService=v,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,l){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&c<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const l=this._getPixelsScrolled(a);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(a,l){let c,m="";const x=[],v=l??this._bufferService.buffer.lines.length,L=this._bufferService.buffer.lines;for(let C=a;C<v;C++){const b=L.get(C);if(!b)continue;const E=L.get(C+1)?.isWrapped;if(m+=b.translateToString(!E),!E||C===L.length-1){const R=document.createElement("div");R.textContent=m,x.push(R),m.length>0&&(c=R),m=""}}return{bufferElements:x,cursorElement:c}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(a,l){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&l.altKey||c==="ctrl"&&l.ctrlKey||c==="shift"&&l.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const l=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}};i.Viewport=n=f([_(2,h.IBufferService),_(3,h.IOptionsService),_(4,p.ICharSizeService),_(5,p.IRenderService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],n)},3107:function(y,i,o){var f=this&&this.__decorate||function(h,n,a,l){var c,m=arguments.length,x=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,n,a,l);else for(var v=h.length-1;v>=0;v--)(c=h[v])&&(x=(m<3?c(x):m>3?c(n,a,x):c(n,a))||x);return m>3&&x&&Object.defineProperty(n,a,x),x},_=this&&this.__param||function(h,n){return function(a,l){n(a,l,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const u=o(4725),p=o(844),w=o(2585);let S=i.BufferDecorationRenderer=class extends p.Disposable{constructor(h,n,a,l,c){super(),this._screenElement=h,this._bufferService=n,this._coreBrowserService=a,this._decorationService=l,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const h of this._decorationService.decorations)this._renderDecoration(h);this._dimensionsChanged=!1}_renderDecoration(h){this._refreshStyle(h),this._dimensionsChanged&&this._refreshXPosition(h)}_createElement(h){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",h?.options?.layer==="top"),n.style.width=`${Math.round((h.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(h.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(h.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=h.options.x??0;return a&&a>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(h,n),n}_refreshStyle(h){const n=h.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)h.element&&(h.element.style.display="none",h.onRenderEmitter.fire(h.element));else{let a=this._decorationElements.get(h);a||(a=this._createElement(h),h.element=a,this._decorationElements.set(h,a),this._container.appendChild(a),h.onDispose(()=>{this._decorationElements.delete(h),a.remove()})),a.style.top=n*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",h.onRenderEmitter.fire(a)}}_refreshXPosition(h,n=h.element){if(!n)return;const a=h.options.x??0;(h.options.anchor||"left")==="right"?n.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(h){this._decorationElements.get(h)?.remove(),this._decorationElements.delete(h),h.dispose()}};i.BufferDecorationRenderer=S=f([_(1,w.IBufferService),_(2,u.ICoreBrowserService),_(3,w.IDecorationService),_(4,u.IRenderService)],S)},5871:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,_){return f>=o.startBufferLine-this._linePadding[_||"full"]&&f<=o.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(y,i,o){var f=this&&this.__decorate||function(c,m,x,v){var L,C=arguments.length,b=C<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,x):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,m,x,v);else for(var E=c.length-1;E>=0;E--)(L=c[E])&&(b=(C<3?L(b):C>3?L(m,x,b):L(m,x))||b);return C>3&&b&&Object.defineProperty(m,x,b),b},_=this&&this.__param||function(c,m){return function(x,v){m(x,v,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const u=o(5871),p=o(4725),w=o(844),S=o(2585),h={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let l=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,m,x,v,L,C,b){super(),this._viewportElement=c,this._screenElement=m,this._bufferService=x,this._decorationService=v,this._renderService=L,this._optionsService=C,this._coreBrowserService=b,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=c,n.center=m,n.right=c,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=n.left,a.right=n.left+n.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);h.left=m,h.center=m,h.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const m of c)m.position!=="full"&&this._renderColorZone(m);for(const m of c)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(a[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-h[c.position||"full"]/2),n[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[c.position||"full"]))}_queueRefresh(c,m){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=l=f([_(2,S.IBufferService),_(3,S.IDecorationService),_(4,p.IRenderService),_(5,S.IOptionsService),_(6,p.ICoreBrowserService)],l)},2950:function(y,i,o){var f=this&&this.__decorate||function(h,n,a,l){var c,m=arguments.length,x=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,n,a,l);else for(var v=h.length-1;v>=0;v--)(c=h[v])&&(x=(m<3?c(x):m>3?c(n,a,x):c(n,a))||x);return m>3&&x&&Object.defineProperty(n,a,x),x},_=this&&this.__param||function(h,n){return function(a,l){n(a,l,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const u=o(4725),p=o(2585),w=o(2584);let S=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(h,n,a,l,c,m){this._textarea=h,this._compositionView=n,this._bufferService=a,this._optionsService=l,this._coreService=c,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(h){this._compositionView.textContent=h.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(h){if(this._isComposing||this._isSendingComposition){if(h.keyCode===229||h.keyCode===16||h.keyCode===17||h.keyCode===18)return!1;this._finalizeComposition(!1)}return h.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(h){if(this._compositionView.classList.remove("active"),this._isComposing=!1,h){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const h=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,a=n.replace(h,"");this._dataAlreadySent=a,n.length>h.length?this._coreService.triggerDataEvent(a,!0):n.length<h.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):n.length===h.length&&n!==h&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(h){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}h||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=S=f([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,u.IRenderService)],S)},9806:(y,i)=>{function o(f,_,u){const p=u.getBoundingClientRect(),w=f.getComputedStyle(u),S=parseInt(w.getPropertyValue("padding-left")),h=parseInt(w.getPropertyValue("padding-top"));return[_.clientX-p.left-S,_.clientY-p.top-h]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,_,u,p,w,S,h,n,a){if(!S)return;const l=o(f,_,u);return l?(l[0]=Math.ceil((l[0]+(a?h/2:0))/h),l[1]=Math.ceil(l[1]/n),l[0]=Math.min(Math.max(l[0],1),p+(a?1:0)),l[1]=Math.min(Math.max(l[1],1),w),l):void 0}},9504:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function _(n,a,l,c){const m=n-u(n,l),x=a-u(a,l),v=Math.abs(m-x)-function(L,C,b){let E=0;const R=L-u(L,b),k=C-u(C,b);for(let M=0;M<Math.abs(R-k);M++){const A=p(L,C)==="A"?-1:1;b.buffer.lines.get(R+A*M)?.isWrapped&&E++}return E}(n,a,l);return h(v,S(p(n,a),c))}function u(n,a){let l=0,c=a.buffer.lines.get(n),m=c?.isWrapped;for(;m&&n>=0&&n<a.rows;)l++,c=a.buffer.lines.get(--n),m=c?.isWrapped;return l}function p(n,a){return n>a?"A":"B"}function w(n,a,l,c,m,x){let v=n,L=a,C="";for(;v!==l||L!==c;)v+=m?1:-1,m&&v>x.cols-1?(C+=x.buffer.translateBufferLineToString(L,!1,n,v),v=0,n=0,L++):!m&&v<0&&(C+=x.buffer.translateBufferLineToString(L,!1,0,n+1),v=x.cols-1,n=v,L--);return C+x.buffer.translateBufferLineToString(L,!1,n,v)}function S(n,a){const l=a?"O":"[";return f.C0.ESC+l+n}function h(n,a){n=Math.floor(n);let l="";for(let c=0;c<n;c++)l+=a;return l}i.moveToCellSequence=function(n,a,l,c){const m=l.buffer.x,x=l.buffer.y;if(!l.buffer.hasScrollback)return function(C,b,E,R,k,M){return _(b,R,k,M).length===0?"":h(w(C,b,C,b-u(b,k),!1,k).length,S("D",M))}(m,x,0,a,l,c)+_(x,a,l,c)+function(C,b,E,R,k,M){let A;A=_(b,R,k,M).length>0?R-u(R,k):b;const H=R,$=function(N,B,D,T,I,F){let z;return z=_(D,T,I,F).length>0?T-u(T,I):B,N<D&&z<=T||N>=D&&z<T?"C":"D"}(C,b,E,R,k,M);return h(w(C,A,E,H,$==="C",k).length,S($,M))}(m,x,n,a,l,c);let v;if(x===a)return v=m>n?"D":"C",h(Math.abs(m-n),S(v,c));v=x>a?"D":"C";const L=Math.abs(x-a);return h(function(C,b){return b.cols-C}(x>a?n:m,l)+(L-1)*l.cols+1+((x>a?m:n)-1),S(v,c))}},1296:function(y,i,o){var f=this&&this.__decorate||function(M,A,H,$){var N,B=arguments.length,D=B<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,H):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(M,A,H,$);else for(var T=M.length-1;T>=0;T--)(N=M[T])&&(D=(B<3?N(D):B>3?N(A,H,D):N(A,H))||D);return B>3&&D&&Object.defineProperty(A,H,D),D},_=this&&this.__param||function(M,A){return function(H,$){A(H,$,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const u=o(3787),p=o(2550),w=o(2223),S=o(6171),h=o(6052),n=o(4725),a=o(8055),l=o(8460),c=o(844),m=o(2585),x="xterm-dom-renderer-owner-",v="xterm-rows",L="xterm-fg-",C="xterm-bg-",b="xterm-focus",E="xterm-selection";let R=1,k=i.DomRenderer=class extends c.Disposable{constructor(M,A,H,$,N,B,D,T,I,F,z,U,Z){super(),this._terminal=M,this._document=A,this._element=H,this._screenElement=$,this._viewportElement=N,this._helperContainer=B,this._linkifier2=D,this._charSizeService=I,this._optionsService=F,this._bufferService=z,this._coreBrowserService=U,this._themeService=Z,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,h.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(J=>this._injectCss(J))),this._injectCss(this._themeService.colors),this._rowFactory=T.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(x+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(J=>this._handleLinkHover(J))),this.register(this._linkifier2.onHideLinkUnderline(J=>this._handleLinkLeave(J))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(x+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const M=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*M,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*M),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/M),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/M),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const A=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(M){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${v} { color: ${M.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${v} .xterm-dim { color: ${a.color.multiplyOpacity(M.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const H=`blink_underline_${this._terminalClass}`,$=`blink_bar_${this._terminalClass}`,N=`blink_block_${this._terminalClass}`;A+=`@keyframes ${H} { 50% {  border-bottom-style: hidden; }}`,A+=`@keyframes ${$} { 50% {  box-shadow: none; }}`,A+=`@keyframes ${N} { 0% {  background-color: ${M.cursor.css};  color: ${M.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${M.cursor.css}; }}`,A+=`${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${M.cursor.css}; color: ${M.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${M.cursor.css} !important; color: ${M.cursorAccent.css} !important;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${M.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${M.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${M.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${M.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${M.selectionInactiveBackgroundOpaque.css};}`;for(const[B,D]of M.ansi.entries())A+=`${this._terminalSelector} .${L}${B} { color: ${D.css}; }${this._terminalSelector} .${L}${B}.xterm-dim { color: ${a.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${C}${B} { background-color: ${D.css}; }`;A+=`${this._terminalSelector} .${L}${w.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(M.background).css}; }${this._terminalSelector} .${L}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(M.background),.5).css}; }${this._terminalSelector} .${C}${w.INVERTED_DEFAULT_COLOR} { background-color: ${M.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){const M=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${M}px`,this._rowFactory.defaultSpacing=M}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(M,A){for(let H=this._rowElements.length;H<=A;H++){const $=this._document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(M,A){this._refreshRowElements(M,A),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(M,A,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(M,A,H),this.renderRows(0,this._bufferService.rows-1),!M||!A)return;this._selectionRenderModel.update(this._terminal,M,A,H);const $=this._selectionRenderModel.viewportStartRow,N=this._selectionRenderModel.viewportEndRow,B=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(B>=this._bufferService.rows||D<0)return;const T=this._document.createDocumentFragment();if(H){const I=M[0]>A[0];T.appendChild(this._createSelectionElement(B,I?A[0]:M[0],I?M[0]:A[0],D-B+1))}else{const I=$===B?M[0]:0,F=B===N?A[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(B,I,F));const z=D-B-1;if(T.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,z)),B!==D){const U=N===D?A[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(D,0,U))}}this._selectionContainer.appendChild(T)}_createSelectionElement(M,A,H,$=1){const N=this._document.createElement("div"),B=A*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(H-A);return B+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-B),N.style.height=$*this.dimensions.css.cell.height+"px",N.style.top=M*this.dimensions.css.cell.height+"px",N.style.left=`${B}px`,N.style.width=`${D}px`,N}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const M of this._rowElements)M.replaceChildren()}renderRows(M,A){const H=this._bufferService.buffer,$=H.ybase+H.y,N=Math.min(H.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let I=M;I<=A;I++){const F=I+H.ydisp,z=this._rowElements[I],U=H.lines.get(F);if(!z||!U)break;z.replaceChildren(...this._rowFactory.createRow(U,F,F===$,D,T,N,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${x}${this._terminalClass}`}_handleLinkHover(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!0)}_handleLinkLeave(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!1)}_setCellUnderline(M,A,H,$,N,B){H<0&&(M=0),$<0&&(A=0);const D=this._bufferService.rows-1;H=Math.max(Math.min(H,D),0),$=Math.max(Math.min($,D),0),N=Math.min(N,this._bufferService.cols);const T=this._bufferService.buffer,I=T.ybase+T.y,F=Math.min(T.x,N-1),z=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let J=H;J<=$;++J){const j=J+T.ydisp,O=this._rowElements[J],W=T.lines.get(j);if(!O||!W)break;O.replaceChildren(...this._rowFactory.createRow(W,j,j===I,U,Z,F,z,this.dimensions.css.cell.width,this._widthCache,B?J===H?M:0:-1,B?(J===$?A:N)-1:-1))}}};i.DomRenderer=k=f([_(7,m.IInstantiationService),_(8,n.ICharSizeService),_(9,m.IOptionsService),_(10,m.IBufferService),_(11,n.ICoreBrowserService),_(12,n.IThemeService)],k)},3787:function(y,i,o){var f=this&&this.__decorate||function(v,L,C,b){var E,R=arguments.length,k=R<3?L:b===null?b=Object.getOwnPropertyDescriptor(L,C):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(v,L,C,b);else for(var M=v.length-1;M>=0;M--)(E=v[M])&&(k=(R<3?E(k):R>3?E(L,C,k):E(L,C))||k);return R>3&&k&&Object.defineProperty(L,C,k),k},_=this&&this.__param||function(v,L){return function(C,b){L(C,b,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const u=o(2223),p=o(643),w=o(511),S=o(2585),h=o(8055),n=o(4725),a=o(4269),l=o(6171),c=o(3734);let m=i.DomRendererRowFactory=class{constructor(v,L,C,b,E,R,k){this._document=v,this._characterJoinerService=L,this._optionsService=C,this._coreBrowserService=b,this._coreService=E,this._decorationService=R,this._themeService=k,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(v,L,C){this._selectionStart=v,this._selectionEnd=L,this._columnSelectMode=C}createRow(v,L,C,b,E,R,k,M,A,H,$){const N=[],B=this._characterJoinerService.getJoinedCharacters(L),D=this._themeService.colors;let T,I=v.getNoBgTrimmedLength();C&&I<R+1&&(I=R+1);let F=0,z="",U=0,Z=0,J=0,j=!1,O=0,W=!1,K=0;const Q=[],X=H!==-1&&$!==-1;for(let ae=0;ae<I;ae++){v.loadCell(ae,this._workCell);let Y=this._workCell.getWidth();if(Y===0)continue;let ue=!1,me=ae,ne=this._workCell;if(B.length>0&&ae===B[0][0]){ue=!0;const oe=B.shift();ne=new a.JoinedCellData(this._workCell,v.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),me=oe[1]-1,Y=ne.getWidth()}const Ke=this._isCellInSelection(ae,L),Tt=C&&ae===R,ie=X&&ae>=H&&ae<=$;let ee=!1;this._decorationService.forEachDecorationAtCell(ae,L,void 0,oe=>{ee=!0});let te=ne.getChars()||p.WHITESPACE_CELL_CHAR;if(te===" "&&(ne.isUnderline()||ne.isOverline())&&(te=""),K=Y*M-A.get(te,ne.isBold(),ne.isItalic()),T){if(F&&(Ke&&W||!Ke&&!W&&ne.bg===U)&&(Ke&&W&&D.selectionForeground||ne.fg===Z)&&ne.extended.ext===J&&ie===j&&K===O&&!Tt&&!ue&&!ee){ne.isInvisible()?z+=p.WHITESPACE_CELL_CHAR:z+=te,F++;continue}F&&(T.textContent=z),T=this._document.createElement("span"),F=0,z=""}else T=this._document.createElement("span");if(U=ne.bg,Z=ne.fg,J=ne.extended.ext,j=ie,O=K,W=Ke,ue&&R>=ae&&R<=me&&(R=ae),!this._coreService.isCursorHidden&&Tt&&this._coreService.isCursorInitialized){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&Q.push("xterm-cursor-blink"),Q.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(ne.isBold()&&Q.push("xterm-bold"),ne.isItalic()&&Q.push("xterm-italic"),ne.isDim()&&Q.push("xterm-dim"),z=ne.isInvisible()?p.WHITESPACE_CELL_CHAR:ne.getChars()||p.WHITESPACE_CELL_CHAR,ne.isUnderline()&&(Q.push(`xterm-underline-${ne.extended.underlineStyle}`),z===" "&&(z=""),!ne.isUnderlineColorDefault()))if(ne.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(ne.getUnderlineColor()).join(",")})`;else{let oe=ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ne.isBold()&&oe<8&&(oe+=8),T.style.textDecorationColor=D.ansi[oe].css}ne.isOverline()&&(Q.push("xterm-overline"),z===" "&&(z="")),ne.isStrikethrough()&&Q.push("xterm-strikethrough"),ie&&(T.style.textDecoration="underline");let G=ne.getFgColor(),se=ne.getFgColorMode(),de=ne.getBgColor(),ce=ne.getBgColorMode();const qe=!!ne.isInverse();if(qe){const oe=G;G=de,de=oe;const Bt=se;se=ce,ce=Bt}let Re,Me,_e,le=!1;switch(this._decorationService.forEachDecorationAtCell(ae,L,void 0,oe=>{oe.options.layer!=="top"&&le||(oe.backgroundColorRGB&&(ce=50331648,de=oe.backgroundColorRGB.rgba>>8&16777215,Re=oe.backgroundColorRGB),oe.foregroundColorRGB&&(se=50331648,G=oe.foregroundColorRGB.rgba>>8&16777215,Me=oe.foregroundColorRGB),le=oe.options.layer==="top")}),!le&&Ke&&(Re=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,de=Re.rgba>>8&16777215,ce=50331648,le=!0,D.selectionForeground&&(se=50331648,G=D.selectionForeground.rgba>>8&16777215,Me=D.selectionForeground)),le&&Q.push("xterm-decoration-top"),ce){case 16777216:case 33554432:_e=D.ansi[de],Q.push(`xterm-bg-${de}`);break;case 50331648:_e=h.channels.toColor(de>>16,de>>8&255,255&de),this._addStyle(T,`background-color:#${x((de>>>0).toString(16),"0",6)}`);break;default:qe?(_e=D.foreground,Q.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):_e=D.background}switch(Re||ne.isDim()&&(Re=h.color.multiplyOpacity(_e,.5)),se){case 16777216:case 33554432:ne.isBold()&&G<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(G+=8),this._applyMinimumContrast(T,_e,D.ansi[G],ne,Re,void 0)||Q.push(`xterm-fg-${G}`);break;case 50331648:const oe=h.channels.toColor(G>>16&255,G>>8&255,255&G);this._applyMinimumContrast(T,_e,oe,ne,Re,Me)||this._addStyle(T,`color:#${x(G.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,_e,D.foreground,ne,Re,Me)||qe&&Q.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}Q.length&&(T.className=Q.join(" "),Q.length=0),Tt||ue||ee?T.textContent=z:F++,K!==this.defaultSpacing&&(T.style.letterSpacing=`${K}px`),N.push(T),ae=me}return T&&F&&(T.textContent=z),N}_applyMinimumContrast(v,L,C,b,E,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(b.getCode()))return!1;const k=this._getContrastCache(b);let M;if(E||R||(M=k.getColor(L.rgba,C.rgba)),M===void 0){const A=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=h.color.ensureContrastRatio(E||L,R||C,A),k.setColor((E||L).rgba,(R||C).rgba,M??null)}return!!M&&(this._addStyle(v,`color:${M.css}`),!0)}_getContrastCache(v){return v.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(v,L){v.setAttribute("style",`${v.getAttribute("style")||""}${L};`)}_isCellInSelection(v,L){const C=this._selectionStart,b=this._selectionEnd;return!(!C||!b)&&(this._columnSelectMode?C[0]<=b[0]?v>=C[0]&&L>=C[1]&&v<b[0]&&L<=b[1]:v<C[0]&&L>=C[1]&&v>=b[0]&&L<=b[1]:L>C[1]&&L<b[1]||C[1]===b[1]&&L===C[1]&&v>=C[0]&&v<b[0]||C[1]<b[1]&&L===b[1]&&v<b[0]||C[1]<b[1]&&L===C[1]&&v>=C[0])}};function x(v,L,C){for(;v.length<C;)v=L+v;return v}i.DomRendererRowFactory=m=f([_(1,n.ICharacterJoinerService),_(2,S.IOptionsService),_(3,n.ICoreBrowserService),_(4,S.ICoreService),_(5,S.IDecorationService),_(6,n.IThemeService)],m)},2550:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=o.createElement("span");_.classList.add("xterm-char-measure-element");const u=o.createElement("span");u.classList.add("xterm-char-measure-element"),u.style.fontWeight="bold";const p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";const w=o.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[_,u,p,w],this._container.appendChild(_),this._container.appendChild(u),this._container.appendChild(p),this._container.appendChild(w),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,_,u){o===this._font&&f===this._fontSize&&_===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=f,this._weight=_,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,f,_){let u=0;if(!f&&!_&&o.length===1&&(u=o.charCodeAt(0))<256){if(this._flat[u]!==-9999)return this._flat[u];const S=this._measure(o,0);return S>0&&(this._flat[u]=S),S}let p=o;f&&(p+="B"),_&&(p+="I");let w=this._holey.get(p);if(w===void 0){let S=0;f&&(S|=1),_&&(S|=2),w=this._measure(o,S),w>0&&this._holey.set(p,w)}return w}_measure(o,f){const _=this._measureElements[f];return _.textContent=o.repeat(32),_.offsetWidth/32}}},2223:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(y,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,u,p,w){return u===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(u){return 9472<=u&&u<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,u,p=0){return(_-(2*Math.round(u)-p))%(2*Math.round(u))}},6052:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,u,p,w=!1){if(this.selectionStart=u,this.selectionEnd=p,!u||!p||u[0]===p[0]&&u[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,h=u[1]-S,n=p[1]-S,a=Math.max(h,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=h,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=u[0],this.endCol=p[0])}isCellSelected(_,u,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&p>=this.viewportCappedStartRow&&u<this.endCol&&p<=this.viewportCappedEndRow:u<this.startCol&&p>=this.viewportCappedStartRow&&u>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(y,i,o){var f=this&&this.__decorate||function(l,c,m,x){var v,L=arguments.length,C=L<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,x);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(C=(L<3?v(C):L>3?v(c,m,C):v(c,m))||C);return L>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,x){c(m,x,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const u=o(2585),p=o(8460),w=o(844);let S=i.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,c,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new n(l,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=S=f([_(2,u.IOptionsService)],S);class h extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,m){c!==void 0&&c>0&&m!==void 0&&m>0&&(this._result.width=c,this._result.height=m)}}class n extends h{constructor(c,m,x){super(),this._document=c,this._parentElement=m,this._optionsService=x,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends h{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(y,i,o){var f=this&&this.__decorate||function(a,l,c,m){var x,v=arguments.length,L=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(L=(v<3?x(L):v>3?x(l,c,L):x(l,c))||L);return v>3&&L&&Object.defineProperty(l,c,L),L},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const u=o(3734),p=o(643),w=o(511),S=o(2585);class h extends u.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=h;let n=i.CharacterJoinerService=class xf{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],x=c.translateToString(!0);let v=0,L=0,C=0,b=c.getFg(0),E=c.getBg(0);for(let R=0;R<c.getTrimmedLength();R++)if(c.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(R-v>1){const k=this._getJoinedRanges(x,C,L,c,v);for(let M=0;M<k.length;M++)m.push(k[M])}v=R,C=L,b=this._workCell.fg,E=this._workCell.bg}L+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const R=this._getJoinedRanges(x,C,L,c,v);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(l,c,m,x,v){const L=l.substring(c,m);let C=[];try{C=this._characterJoiners[0].handler(L)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(L);for(let R=0;R<E.length;R++)xf._mergeRanges(C,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(C,x,v),C}_stringRangesToCellRanges(l,c,m){let x=0,v=!1,L=0,C=l[x];if(C){for(let b=m;b<this._bufferService.cols;b++){const E=c.getWidth(b),R=c.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&C[0]<=L&&(C[0]=b,v=!0),C[1]<=L){if(C[1]=b,C=l[++x],!C)break;C[0]<=L?(C[0]=b,v=!0):v=!1}L+=R}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let x=0;x<l.length;x++){const v=l[x];if(m){if(c[1]<=v[0])return l[x-1][1]=c[1],l;if(c[1]<=v[1])return l[x-1][1]=Math.max(c[1],v[1]),l.splice(x,1),l;l.splice(x,1),x--}else{if(c[1]<=v[0])return l.splice(x,0,c),l;if(c[1]<=v[1])return v[0]=Math.min(c[0],v[0]),l;c[0]<v[1]&&(v[0]=Math.min(c[0],v[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([_(0,S.IBufferService)],n)},5114:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),_=o(8460),u=o(3656);class p extends f.Disposable{constructor(h,n,a){super(),this._textarea=h,this._window=n,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(h){this._window!==h&&(this._window=h,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class w extends f.Disposable{constructor(h){super(),this._parentWindow=h,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(h){this._parentWindow=h,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,u.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class _ extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{const w=this.linkProviders.indexOf(p);w!==-1&&this.linkProviders.splice(w,1)}}}}i.LinkProviderService=_},8934:function(y,i,o){var f=this&&this.__decorate||function(S,h,n,a){var l,c=arguments.length,m=c<3?h:a===null?a=Object.getOwnPropertyDescriptor(h,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(S,h,n,a);else for(var x=S.length-1;x>=0;x--)(l=S[x])&&(m=(c<3?l(m):c>3?l(h,n,m):l(h,n))||m);return c>3&&m&&Object.defineProperty(h,n,m),m},_=this&&this.__param||function(S,h){return function(n,a){h(n,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const u=o(4725),p=o(9806);let w=i.MouseService=class{constructor(S,h){this._renderService=S,this._charSizeService=h}getCoords(S,h,n,a,l){return(0,p.getCoords)(window,S,h,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(S,h){const n=(0,p.getCoordsRelativeToElement)(window,S,h);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=w=f([_(0,u.IRenderService),_(1,u.ICharSizeService)],w)},3230:function(y,i,o){var f=this&&this.__decorate||function(l,c,m,x){var v,L=arguments.length,C=L<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,x);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(C=(L<3?v(C):L>3?v(c,m,C):v(c,m))||C);return L>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,x){c(m,x,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const u=o(6193),p=o(4725),w=o(8460),S=o(844),h=o(7226),n=o(2585);let a=i.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,c,m,x,v,L,C,b){super(),this._rowCount=l,this._charSizeService=x,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer((E,R)=>this._renderRows(E,R),C),this.register(this._renderDebouncer),this.register(C.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(L.onResize(()=>this._fullRefresh())),this.register(L.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(L.buffer.y,L.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(C.window,c),this.register(C.onWindowChange(E=>this._registerIntersectionObserver(E,c)))}_registerIntersectionObserver(l,c){if("IntersectionObserver"in l){const m=new l.IntersectionObserver(x=>this._handleIntersectionChange(x[x.length-1]),{threshold:0});m.observe(c),this._observerDisposable.value=(0,S.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,c,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,c,this._rowCount))}_renderRows(l,c){this._renderer.value&&(l=Math.min(l,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(l,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:c}),this._onRender.fire({start:l,end:c}),this._isNextRenderRedrawOnly=!0)}resize(l,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(c=>this.refreshRows(c.start,c.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(l,c)):this._renderer.value.handleResize(l,c),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(l,c,m){this._selectionState.start=l,this._selectionState.end=c,this._selectionState.columnSelectMode=m,this._renderer.value?.handleSelectionChanged(l,c,m)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=a=f([_(2,n.IOptionsService),_(3,p.ICharSizeService),_(4,n.IDecorationService),_(5,n.IBufferService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],a)},9312:function(y,i,o){var f=this&&this.__decorate||function(C,b,E,R){var k,M=arguments.length,A=M<3?b:R===null?R=Object.getOwnPropertyDescriptor(b,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(C,b,E,R);else for(var H=C.length-1;H>=0;H--)(k=C[H])&&(A=(M<3?k(A):M>3?k(b,E,A):k(b,E))||A);return M>3&&A&&Object.defineProperty(b,E,A),A},_=this&&this.__param||function(C,b){return function(E,R){b(E,R,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const u=o(9806),p=o(9504),w=o(456),S=o(4725),h=o(8460),n=o(844),a=o(6114),l=o(4841),c=o(511),m=o(2585),x="",v=new RegExp(x,"g");let L=i.SelectionService=class extends n.Disposable{constructor(C,b,E,R,k,M,A,H,$){super(),this._element=C,this._screenElement=b,this._linkifier=E,this._bufferService=R,this._coreService=k,this._mouseService=M,this._optionsService=A,this._renderService=H,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new h.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new h.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new h.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new h.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(N=>this._handleTrim(N)),this.register(this._bufferService.buffers.onBufferActivate(N=>this._handleBufferActivate(N))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!C||!b||C[0]===b[0]&&C[1]===b[1])}get selectionText(){const C=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!C||!b)return"";const E=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(C[0]===b[0])return"";const k=C[0]<b[0]?C[0]:b[0],M=C[0]<b[0]?b[0]:C[0];for(let A=C[1];A<=b[1];A++){const H=E.translateBufferLineToString(A,!0,k,M);R.push(H)}}else{const k=C[1]===b[1]?b[0]:void 0;R.push(E.translateBufferLineToString(C[1],!0,C[0],k));for(let M=C[1]+1;M<=b[1]-1;M++){const A=E.lines.get(M),H=E.translateBufferLineToString(M,!0);A?.isWrapped?R[R.length-1]+=H:R.push(H)}if(C[1]!==b[1]){const M=E.lines.get(b[1]),A=E.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?R[R.length-1]+=A:R.push(A)}}return R.map(k=>k.replace(v," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const b=this._getMouseBufferCoords(C),E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(E&&R&&b)&&this._areCoordsInSelection(b,E,R)}isCellInSelection(C,b){const E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!E||!R)&&this._areCoordsInSelection([C,b],E,R)}_areCoordsInSelection(C,b,E){return C[1]>b[1]&&C[1]<E[1]||b[1]===E[1]&&C[1]===b[1]&&C[0]>=b[0]&&C[0]<E[0]||b[1]<E[1]&&C[1]===E[1]&&C[0]<E[0]||b[1]<E[1]&&C[1]===b[1]&&C[0]>=b[0]}_selectWordAtCursor(C,b){const E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(C);return!!R&&(this._selectWordAt(R,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,b){this._model.clearSelection(),C=Math.max(C,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const b=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(C){let b=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=E?0:(b>E&&(b-=E),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(C){return a.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const b=this._getMouseBufferCoords(C);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(C){return C.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const R=E.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const b=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const R=(0,p.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,E=!(!C||!b||C[0]===b[0]&&C[1]===b[1]);E?C&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,b,E)):this._oldHasSelection&&this._fireOnSelectionChange(C,b,E)}_fireOnSelectionChange(C,b,E){this._oldSelectionStart=C,this._oldSelectionEnd=b,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(C,b){let E=b;for(let R=0;b>=R;R++){const k=C.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:k>1&&b!==R&&(E+=k-1)}return E}setSelection(C,b,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,b],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,b,E=!0,R=!0){if(C[0]>=this._bufferService.cols)return;const k=this._bufferService.buffer,M=k.lines.get(C[1]);if(!M)return;const A=k.translateBufferLineToString(C[1],!1);let H=this._convertViewportColToCharacterIndex(M,C[0]),$=H;const N=C[0]-H;let B=0,D=0,T=0,I=0;if(A.charAt(H)===" "){for(;H>0&&A.charAt(H-1)===" ";)H--;for(;$<A.length&&A.charAt($+1)===" ";)$++}else{let U=C[0],Z=C[0];M.getWidth(U)===0&&(B++,U--),M.getWidth(Z)===2&&(D++,Z++);const J=M.getString(Z).length;for(J>1&&(I+=J-1,$+=J-1);U>0&&H>0&&!this._isCharWordSeparator(M.loadCell(U-1,this._workCell));){M.loadCell(U-1,this._workCell);const j=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,U--):j>1&&(T+=j-1,H-=j-1),H--,U--}for(;Z<M.length&&$+1<A.length&&!this._isCharWordSeparator(M.loadCell(Z+1,this._workCell));){M.loadCell(Z+1,this._workCell);const j=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,Z++):j>1&&(I+=j-1,$+=j-1),$++,Z++}}$++;let F=H+N-B+T,z=Math.min(this._bufferService.cols,$-H+B+D-T-I);if(b||A.slice(H,$).trim()!==""){if(E&&F===0&&M.getCodePoint(0)!==32){const U=k.lines.get(C[1]-1);if(U&&M.isWrapped&&U.getCodePoint(this._bufferService.cols-1)!==32){const Z=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(Z){const J=this._bufferService.cols-Z.start;F-=J,z+=J}}}if(R&&F+z===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){const U=k.lines.get(C[1]+1);if(U?.isWrapped&&U.getCodePoint(0)!==32){const Z=this._getWordAt([0,C[1]+1],!1,!1,!0);Z&&(z+=Z.length)}}return{start:F,length:z}}}_selectWordAt(C,b){const E=this._getWordAt(C,b);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[E.start,C[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(C){const b=this._getWordAt(C,!0);if(b){let E=C[1];for(;b.start<0;)b.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,E]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const b=this._bufferService.buffer.getWrappedRangeForLine(C),E={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=L=f([_(3,m.IBufferService),_(4,m.ICoreService),_(5,S.IMouseService),_(6,m.IOptionsService),_(7,S.IRenderService),_(8,S.ICoreBrowserService)],L)},4725:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(y,i,o){var f=this&&this.__decorate||function(L,C,b,E){var R,k=arguments.length,M=k<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(L,C,b,E);else for(var A=L.length-1;A>=0;A--)(R=L[A])&&(M=(k<3?R(M):k>3?R(C,b,M):R(C,b))||M);return k>3&&M&&Object.defineProperty(C,b,M),M},_=this&&this.__param||function(L,C){return function(b,E){C(b,E,L)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const u=o(7239),p=o(8055),w=o(8460),S=o(844),h=o(2585),n=p.css.toColor("#ffffff"),a=p.css.toColor("#000000"),l=p.css.toColor("#ffffff"),c=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let b=0;b<216;b++){const E=C[b/36%6|0],R=C[b/6%6|0],k=C[b%6];L.push({css:p.channels.toCss(E,R,k),rgba:p.channels.toRgba(E,R,k)})}for(let b=0;b<24;b++){const E=8+10*b;L.push({css:p.channels.toCss(E,E,E),rgba:p.channels.toRgba(E,E,E)})}return L})());let x=i.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:a,cursor:l,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(a,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(a,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const C=this._colors;if(C.foreground=v(L.foreground,n),C.background=v(L.background,a),C.cursor=v(L.cursor,l),C.cursorAccent=v(L.cursorAccent,c),C.selectionBackgroundTransparent=v(L.selectionBackground,m),C.selectionBackgroundOpaque=p.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=v(L.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=p.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=L.selectionForeground?v(L.selectionForeground,p.NULL_COLOR):void 0,C.selectionForeground===p.NULL_COLOR&&(C.selectionForeground=void 0),p.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=p.color.opacity(C.selectionBackgroundTransparent,.3)),p.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=p.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=i.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=v(L.black,i.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=v(L.red,i.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=v(L.green,i.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=v(L.yellow,i.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=v(L.blue,i.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=v(L.magenta,i.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=v(L.cyan,i.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=v(L.white,i.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=v(L.brightBlack,i.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=v(L.brightRed,i.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=v(L.brightGreen,i.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=v(L.brightYellow,i.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=v(L.brightBlue,i.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=v(L.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=v(L.brightCyan,i.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=v(L.brightWhite,i.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const b=Math.min(C.ansi.length-16,L.extendedAnsi.length);for(let E=0;E<b;E++)C.ansi[E+16]=v(L.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(L,C){if(L!==void 0)try{return p.css.toColor(L)}catch{}return C}i.ThemeService=x=f([_(0,h.IOptionsService)],x)},6349:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),_=o(844);class u extends _.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const S=new Array(w);for(let h=0;h<Math.min(w,this.length);h++)S[h]=this._array[this._getCyclicIndex(h)];this._array=S,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let S=this._length;S<w;S++)this._array[S]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,S){this._array[this._getCyclicIndex(w)]=S}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,S,...h){if(S){for(let n=w;n<this._length-S;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+S)];this._length-=S,this.onDeleteEmitter.fire({index:w,amount:S})}for(let n=this._length-1;n>=w;n--)this._array[this._getCyclicIndex(n+h.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<h.length;n++)this._array[this._getCyclicIndex(w+n)]=h[n];if(h.length&&this.onInsertEmitter.fire({index:w,amount:h.length}),this._length+h.length>this._maxLength){const n=this._length+h.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=h.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,S,h){if(!(S<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+h<0)throw new Error("Cannot shift elements in list beyond index 0");if(h>0){for(let a=S-1;a>=0;a--)this.set(w+a+h,this.get(w+a));const n=w+S+h-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<S;n++)this.set(w+n+h,this.get(w+n))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}i.CircularList=u},1439:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,_=5){if(typeof f!="object")return f;const u=Array.isArray(f)?[]:{};for(const p in f)u[p]=_<=1?f[p]:f[p]&&o(f[p],_-1);return u}},8055:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,u=0;var p,w,S,h,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,x,v,L){return L!==void 0?`#${a(m)}${a(x)}${a(v)}${a(L)}`:`#${a(m)}${a(x)}${a(v)}`},c.toRgba=function(m,x,v,L=255){return(m<<24|x<<16|v<<8|L)>>>0},c.toColor=function(m,x,v,L){return{css:c.toCss(m,x,v,L),rgba:c.toRgba(m,x,v,L)}}}(p||(i.channels=p={})),function(c){function m(x,v){return u=Math.round(255*v),[o,f,_]=n.toChannels(x.rgba),{css:p.toCss(o,f,_,u),rgba:p.toRgba(o,f,_,u)}}c.blend=function(x,v){if(u=(255&v.rgba)/255,u===1)return{css:v.css,rgba:v.rgba};const L=v.rgba>>24&255,C=v.rgba>>16&255,b=v.rgba>>8&255,E=x.rgba>>24&255,R=x.rgba>>16&255,k=x.rgba>>8&255;return o=E+Math.round((L-E)*u),f=R+Math.round((C-R)*u),_=k+Math.round((b-k)*u),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(x){return(255&x.rgba)==255},c.ensureContrastRatio=function(x,v,L){const C=n.ensureContrastRatio(x.rgba,v.rgba,L);if(C)return p.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(x){const v=(255|x.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(x,v){return u=255&x.rgba,m(x,u*v/255)},c.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}}(w||(i.color=w={})),function(c){let m,x;try{const v=document.createElement("canvas");v.width=1,v.height=1;const L=v.getContext("2d",{willReadFrequently:!0});L&&(m=L,m.globalCompositeOperation="copy",x=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),u=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,u);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const L=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return o=parseInt(L[1]),f=parseInt(L[2]),_=parseInt(L[3]),u=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),p.toColor(o,f,_,u);if(!m||!x)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=x,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,u]=m.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,u),css:v}}}(S||(i.css=S={})),function(c){function m(x,v,L){const C=x/255,b=v/255,E=L/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(x){return m(x>>16&255,x>>8&255,255&x)},c.relativeLuminance2=m}(h||(i.rgb=h={})),function(c){function m(v,L,C){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=L>>24&255,M=L>>16&255,A=L>>8&255,H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));for(;H<C&&(k>0||M>0||A>0);)k-=Math.max(0,Math.ceil(.1*k)),M-=Math.max(0,Math.ceil(.1*M)),A-=Math.max(0,Math.ceil(.1*A)),H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));return(k<<24|M<<16|A<<8|255)>>>0}function x(v,L,C){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=L>>24&255,M=L>>16&255,A=L>>8&255,H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));for(;H<C&&(k<255||M<255||A<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),M=Math.min(255,M+Math.ceil(.1*(255-M))),A=Math.min(255,A+Math.ceil(.1*(255-A))),H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));return(k<<24|M<<16|A<<8|255)>>>0}c.blend=function(v,L){if(u=(255&L)/255,u===1)return L;const C=L>>24&255,b=L>>16&255,E=L>>8&255,R=v>>24&255,k=v>>16&255,M=v>>8&255;return o=R+Math.round((C-R)*u),f=k+Math.round((b-k)*u),_=M+Math.round((E-M)*u),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,L,C){const b=h.relativeLuminance(v>>8),E=h.relativeLuminance(L>>8);if(l(b,E)<C){if(E<b){const M=m(v,L,C),A=l(b,h.relativeLuminance(M>>8));if(A<C){const H=x(v,L,C);return A>l(b,h.relativeLuminance(H>>8))?M:H}return M}const R=x(v,L,C),k=l(b,h.relativeLuminance(R>>8));if(k<C){const M=m(v,L,C);return k>l(b,h.relativeLuminance(M>>8))?R:M}return R}},c.reduceLuminance=m,c.increaseLuminance=x,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},8969:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),_=o(2585),u=o(4348),p=o(7866),w=o(744),S=o(7302),h=o(6975),n=o(8460),a=o(1753),l=o(1480),c=o(7994),m=o(9282),x=o(5435),v=o(5981),L=o(2660);let C=!1;class b extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(R=>{this._onScrollApi?.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const k in R)this.optionsService.options[k]=R[k]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new S.OptionsService(R)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(h.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new x.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((k,M)=>this._inputHandler.parse(k,M))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,k){this._writeBuffer.write(R,k)}writeSync(R,k){this._logService.logLevel<=_.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(R,k)}input(R,k=!0){this.coreService.triggerDataEvent(R,k)}resize(R,k){isNaN(R)||isNaN(k)||(R=Math.max(R,w.MINIMUM_COLS),k=Math.max(k,w.MINIMUM_ROWS),this._bufferService.resize(R,k))}scroll(R,k=!1){this._bufferService.scroll(R,k)}scrollLines(R,k,M){this._bufferService.scrollLines(R,k,M)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const k=R-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(R,k){return this._inputHandler.registerEscHandler(R,k)}registerDcsHandler(R,k){return this._inputHandler.registerDcsHandler(R,k)}registerCsiHandler(R,k){return this._inputHandler.registerCsiHandler(R,k)}registerOscHandler(R,k){return this._inputHandler.registerOscHandler(R,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?R=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const k of R)k.dispose()})}}}i.CoreTerminal=b},8460:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let u=0;u<this._listeners.length;u++)_.push(this._listeners[u]);for(let u=0;u<_.length;u++)_[u].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},5435:function(y,i,o){var f=this&&this.__decorate||function(B,D,T,I){var F,z=arguments.length,U=z<3?D:I===null?I=Object.getOwnPropertyDescriptor(D,T):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(B,D,T,I);else for(var Z=B.length-1;Z>=0;Z--)(F=B[Z])&&(U=(z<3?F(U):z>3?F(D,T,U):F(D,T))||U);return z>3&&U&&Object.defineProperty(D,T,U),U},_=this&&this.__param||function(B,D){return function(T,I){D(T,I,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const u=o(2584),p=o(7116),w=o(2015),S=o(844),h=o(482),n=o(8437),a=o(8460),l=o(643),c=o(511),m=o(3734),x=o(2585),v=o(1480),L=o(6242),C=o(6351),b=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function k(B,D){if(B>24)return D.setWinLines||!1;switch(B){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var M;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(M||(i.WindowsOptionsReportType=M={}));let A=0;class H extends S.Disposable{getAttrData(){return this._curAttrData}constructor(D,T,I,F,z,U,Z,J,j=new w.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=T,this._coreService=I,this._logService=F,this._optionsService=z,this._oscLinkService=U,this._coreMouseService=Z,this._unicodeService=J,this._parser=j,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new h.StringToUtf32,this._utf8Decoder=new h.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:W.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,W,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:W,data:K})}),this._parser.setDcsHandlerFallback((O,W,K)=>{W==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:W,payload:K})}),this._parser.setPrintHandler((O,W,K)=>this.print(O,W,K)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new L.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new L.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new L.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new L.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new L.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new L.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new L.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new L.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new L.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new L.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new L.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new L.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const O in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((O,W)=>this.requestStatusString(O,W)))}_preserveStack(D,T,I,F){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=I,this._parseStack.position=F}_logSlowResolvingAsync(D){this._logService.logLevel<=x.LogLevelEnum.WARN&&Promise.race([D,new Promise((T,I)=>setTimeout(()=>I("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,T){let I,F=this._activeBuffer.x,z=this._activeBuffer.y,U=0;const Z=this._parseStack.paused;if(Z){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(I),I;F=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>R&&(U=this._parseStack.position+R)}if(this._logService.logLevel<=x.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,O=>String.fromCharCode(O)).join("")}"`),typeof D=="string"?D.split("").map(O=>O.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(D.length,R))),Z||this._dirtyRowTracker.clearRange(),D.length>R)for(let O=U;O<D.length;O+=R){const W=O+R<D.length?O+R:D.length,K=typeof D=="string"?this._stringDecoder.decode(D.substring(O,W),this._parseBuffer):this._utf8Decoder.decode(D.subarray(O,W),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,K))return this._preserveStack(F,z,K,O),this._logSlowResolvingAsync(I),I}else if(!Z){const O=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,O))return this._preserveStack(F,z,O,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===F&&this._activeBuffer.y===z||this._onCursorMove.fire();const J=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),j=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);j<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(j,this._bufferService.rows-1),Math.min(J,this._bufferService.rows-1))}print(D,T,I){let F,z;const U=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,J=this._bufferService.cols,j=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,W=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-T>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodepoint(this._activeBuffer.x-1,0,1,W);let Q=this._parser.precedingJoinState;for(let X=T;X<I;++X){if(F=D[X],F<127&&U){const me=U[String.fromCharCode(F)];me&&(F=me.charCodeAt(0))}const ae=this._unicodeService.charProperties(F,Q);z=v.UnicodeService.extractWidth(ae);const Y=v.UnicodeService.extractShouldJoin(ae),ue=Y?v.UnicodeService.extractWidth(Q):0;if(Q=ae,Z&&this._onA11yChar.fire((0,h.stringFromCodePoint)(F)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+z-ue>J){if(j){const me=K;let ne=this._activeBuffer.x-ue;for(this._activeBuffer.x=ue,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ue>0&&K instanceof n.BufferLine&&K.copyCellsFrom(me,ne,0,ue,!1);ne<J;)me.setCellFromCodepoint(ne++,0,1,W)}else if(this._activeBuffer.x=J-1,z===2)continue}if(Y&&this._activeBuffer.x){const me=K.getWidth(this._activeBuffer.x-1)?1:2;K.addCodepointToCell(this._activeBuffer.x-me,F,z);for(let ne=z-ue;--ne>=0;)K.setCellFromCodepoint(this._activeBuffer.x++,0,0,W)}else if(O&&(K.insertCells(this._activeBuffer.x,z-ue,this._activeBuffer.getNullCell(W)),K.getWidth(J-1)===2&&K.setCellFromCodepoint(J-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,W)),K.setCellFromCodepoint(this._activeBuffer.x++,F,z,W),z>0)for(;--z;)K.setCellFromCodepoint(this._activeBuffer.x++,0,0,W)}this._parser.precedingJoinState=Q,this._activeBuffer.x<J&&I-T>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodepoint(this._activeBuffer.x,0,1,W),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,T){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,T):this._parser.registerCsiHandler(D,I=>!k(I.params[0],this._optionsService.rawOptions.windowOptions)||T(I))}registerDcsHandler(D,T){return this._parser.registerDcsHandler(D,new C.DcsHandler(T))}registerEscHandler(D,T){return this._parser.registerEscHandler(D,T)}registerOscHandler(D,T){return this._parser.registerOscHandler(D,new L.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=D,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+T)}cursorUp(D){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const T=D.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=D.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=D.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const T=D.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,T,I,F=!1,z=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);U.replaceCells(T,I,this._activeBuffer.getNullCell(this._eraseAttrData()),z),F&&(U.isWrapped=!1)}_resetBufferLine(D,T=!1){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);I&&(I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),I.isWrapped=!1)}eraseInDisplay(D,T=!1){let I;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);I<this._bufferService.rows;I++)this._resetBufferLine(I,T);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,T);this._dirtyRowTracker.markDirty(0);break;case 3:const F=this._activeBuffer.lines.length-this._bufferService.rows;F>0&&(this._activeBuffer.lines.trimStart(F),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-F,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-F,0),this._onScroll.fire(0))}return!0}eraseInLine(D,T=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let T=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y,F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-F+1;for(;T--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let T=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y;let F;for(F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-F;T--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let T=D.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let T=D.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=D.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);F.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=D.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);F.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=D.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);F.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=D.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);F.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const T=this._parser.precedingJoinState;if(!T)return!0;const I=D.params[0]||1,F=v.UnicodeService.extractWidth(T),z=this._activeBuffer.x-F,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(z),Z=new Uint32Array(U.length*I);let J=0;for(let O=0;O<U.length;){const W=U.codePointAt(O)||0;Z[J++]=W,O+=W>65535?2:1}let j=J;for(let O=1;O<I;++O)Z.copyWithin(j,0,J),j+=J;return this.print(Z,0,j),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let T=0;T<D.length;T++)switch(D.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let T=0;T<D.length;T++)switch(D.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let T=0;T<D.length;T++)switch(D.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let T=0;T<D.length;T++)switch(D.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,T){const I=this._coreService.decPrivateModes,{activeProtocol:F,activeEncoding:z}=this._coreMouseService,U=this._coreService,{buffers:Z,cols:J}=this._bufferService,{active:j,alt:O}=Z,W=this._optionsService.rawOptions,K=Y=>Y?1:2,Q=D.params[0];return X=Q,ae=T?Q===2?4:Q===4?K(U.modes.insertMode):Q===12?3:Q===20?K(W.convertEol):0:Q===1?K(I.applicationCursorKeys):Q===3?W.windowOptions.setWinLines?J===80?2:J===132?1:0:0:Q===6?K(I.origin):Q===7?K(I.wraparound):Q===8?3:Q===9?K(F==="X10"):Q===12?K(W.cursorBlink):Q===25?K(!U.isCursorHidden):Q===45?K(I.reverseWraparound):Q===66?K(I.applicationKeypad):Q===67?4:Q===1e3?K(F==="VT200"):Q===1002?K(F==="DRAG"):Q===1003?K(F==="ANY"):Q===1004?K(I.sendFocus):Q===1005?4:Q===1006?K(z==="SGR"):Q===1015?4:Q===1016?K(z==="SGR_PIXELS"):Q===1048?1:Q===47||Q===1047||Q===1049?K(j===O):Q===2004?K(I.bracketedPasteMode):0,U.triggerDataEvent(`${u.C0.ESC}[${T?"":"?"}${X};${ae}$y`),!0;var X,ae}_updateAttrColor(D,T,I,F,z){return T===2?(D|=50331648,D&=-16777216,D|=m.AttributeData.fromColorRGB([I,F,z])):T===5&&(D&=-50331904,D|=33554432|255&I),D}_extractColor(D,T,I){const F=[0,0,-1,0,0,0];let z=0,U=0;do{if(F[U+z]=D.params[T+U],D.hasSubParams(T+U)){const Z=D.getSubParams(T+U);let J=0;do F[1]===5&&(z=1),F[U+J+1+z]=Z[J];while(++J<Z.length&&J+U+1+z<F.length);break}if(F[1]===5&&U+z>=2||F[1]===2&&U+z>=5)break;F[1]&&(z=1)}while(++U+T<D.length&&U+z<F.length);for(let Z=2;Z<F.length;++Z)F[Z]===-1&&(F[Z]=0);switch(F[0]){case 38:I.fg=this._updateAttrColor(I.fg,F[1],F[3],F[4],F[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,F[1],F[3],F[4],F[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,F[1],F[3],F[4],F[5])}return U}_processUnderline(D,T){T.extended=T.extended.clone(),(!~D||D>5)&&(D=1),T.extended.underlineStyle=D,T.fg|=268435456,D===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(D){D.fg=n.DEFAULT_ATTR_DATA.fg,D.bg=n.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=D.length;let I;const F=this._curAttrData;for(let z=0;z<T;z++)I=D.params[z],I>=30&&I<=37?(F.fg&=-50331904,F.fg|=16777216|I-30):I>=40&&I<=47?(F.bg&=-50331904,F.bg|=16777216|I-40):I>=90&&I<=97?(F.fg&=-50331904,F.fg|=16777224|I-90):I>=100&&I<=107?(F.bg&=-50331904,F.bg|=16777224|I-100):I===0?this._processSGR0(F):I===1?F.fg|=134217728:I===3?F.bg|=67108864:I===4?(F.fg|=268435456,this._processUnderline(D.hasSubParams(z)?D.getSubParams(z)[0]:1,F)):I===5?F.fg|=536870912:I===7?F.fg|=67108864:I===8?F.fg|=1073741824:I===9?F.fg|=2147483648:I===2?F.bg|=134217728:I===21?this._processUnderline(2,F):I===22?(F.fg&=-134217729,F.bg&=-134217729):I===23?F.bg&=-67108865:I===24?(F.fg&=-268435457,this._processUnderline(0,F)):I===25?F.fg&=-536870913:I===27?F.fg&=-67108865:I===28?F.fg&=-1073741825:I===29?F.fg&=2147483647:I===39?(F.fg&=-67108864,F.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):I===49?(F.bg&=-67108864,F.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?z+=this._extractColor(D,z,F):I===53?F.bg|=1073741824:I===55?F.bg&=-1073741825:I===59?(F.extended=F.extended.clone(),F.extended.underlineColor=-1,F.updateExtended()):I===100?(F.fg&=-67108864,F.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,F.bg&=-67108864,F.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${T};${I}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const T=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${T};${I}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const T=D.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const I=T%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(D){const T=D.params[0]||1;let I;return(D.length<2||(I=D.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(D){if(!k(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(M.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(M.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const T=[],I=D.split(";");for(;I.length>1;){const F=I.shift(),z=I.shift();if(/^\d+$/.exec(F)){const U=parseInt(F);if(N(U))if(z==="?")T.push({type:0,index:U});else{const Z=(0,b.parseColor)(z);Z&&T.push({type:1,index:U,color:Z})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(D){const T=D.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(D,T){this._getCurrentLinkId()&&this._finishHyperlink();const I=D.split(":");let F;const z=I.findIndex(U=>U.startsWith("id="));return z!==-1&&(F=I[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:F,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,T){const I=D.split(";");for(let F=0;F<I.length&&!(T>=this._specialColors.length);++F,++T)if(I[F]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const z=(0,b.parseColor)(I[F]);z&&this._onColor.fire([{type:1,index:this._specialColors[T],color:z}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const T=[],I=D.split(";");for(let F=0;F<I.length;++F)if(/^\d+$/.exec(I[F])){const z=parseInt(I[F]);N(z)&&T.push({type:2,index:z})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(E[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new c.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const I=this._activeBuffer.ybase+this._activeBuffer.y+T,F=this._activeBuffer.lines.get(I);F&&(F.fill(D),F.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,T){const I=this._bufferService.buffer,F=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${z}${u.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[F.cursorStyle]-(F.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,T){this._dirtyRowTracker.markRangeDirty(D,T)}}i.InputHandler=H;let $=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,D){B>D&&(A=B,B=D,D=A),B<this.start&&(this.start=B),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function N(B){return 0<=B&&B<256}$=f([_(0,x.IBufferService)],$)},844:(y,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,u,p){this._data[_]||(this._data[_]={}),this._data[_][u]=p}get(_,u){return this._data[_]?this._data[_][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,u,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(u,p,w)}get(f,_,u,p){return this._data.get(f,_)?.get(u,p)}clear(){this._data.clear()}}},6114:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const _=this._getKey(f);if(_===void 0||(o=this._search(_),o===-1)||this._getKey(this._array[o])!==_)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===_);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,_){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do _(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let _=0,u=this._array.length-1;for(;u>=_;){let p=_+u>>1;const w=this._getKey(this._array[p]);if(w>f)u=p-1;else{if(!(w<f)){for(;p>0&&this._getKey(this._array[p-1])===f;)p--;return p}_=p+1}}return _}}},7226:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,h=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),h=Math.max(S,h),a=w.timeRemaining(),1.5*h>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class u extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(_){const u=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=u?.get(_.cols-1),w=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);w&&p&&(w.isWrapped=p[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&p[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){const u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),_=o(7226),u=o(3734),p=o(8437),w=o(4634),S=o(511),h=o(643),n=o(4863),a=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(l,c,m){this._hasScrollback=l,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,c){return new p.BufferLine(this._bufferService.cols,this.getNullCell(l),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const c=l+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=p.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,c){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let x=0;const v=this._getCorrectBufferLength(c);if(v>this.lines.maxLength&&(this.lines.maxLength=v),this.lines.length>0){if(this._cols<l)for(let C=0;C<this.lines.length;C++)x+=+this.lines.get(C).resize(l,m);let L=0;if(this._rows<c)for(let C=this._rows;C<c;C++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(l,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(l,m)));else for(let C=this._rows;C>c;C--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(v<this.lines.maxLength){const C=this.lines.length-v;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=v}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,c-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(l,c),this._cols>l))for(let L=0;L<this.lines.length;L++)x+=+this.lines.get(L).resize(l,m);this._cols=l,this._rows=c,this._memoryCleanupQueue.clear(),x>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,c){this._cols!==l&&(l>this._cols?this._reflowLarger(l,c):this._reflowSmaller(l,c))}_reflowLarger(l,c){const m=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const x=(0,w.reflowLargerCreateNewLayout)(this.lines,m);(0,w.reflowLargerApplyNewLayout)(this.lines,x.layout),this._reflowLargerAdjustViewport(l,c,x.countRemoved)}}_reflowLargerAdjustViewport(l,c,m){const x=this.getNullCell(p.DEFAULT_ATTR_DATA);let v=m;for(;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new p.BufferLine(l,x))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(l,c){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),x=[];let v=0;for(let L=this.lines.length-1;L>=0;L--){let C=this.lines.get(L);if(!C||!C.isWrapped&&C.getTrimmedLength()<=l)continue;const b=[C];for(;C.isWrapped&&L>0;)C=this.lines.get(--L),b.unshift(C);const E=this.ybase+this.y;if(E>=L&&E<L+b.length)continue;const R=b[b.length-1].getTrimmedLength(),k=(0,w.reflowSmallerGetNewLineLengths)(b,this._cols,l),M=k.length-b.length;let A;A=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);const H=[];for(let I=0;I<M;I++){const F=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);H.push(F)}H.length>0&&(x.push({start:L+b.length+v,newLines:H}),v+=H.length),b.push(...H);let $=k.length-1,N=k[$];N===0&&($--,N=k[$]);let B=b.length-M-1,D=R;for(;B>=0;){const I=Math.min(D,N);if(b[$]===void 0)break;if(b[$].copyCellsFrom(b[B],D-I,N-I,I,!0),N-=I,N===0&&($--,N=k[$]),D-=I,D===0){B--;const F=Math.max(B,0);D=(0,w.getWrappedLineTrimmedLength)(b,F,this._cols)}}for(let I=0;I<b.length;I++)k[I]<l&&b[I].setCell(k[I],m);let T=M-A;for(;T-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+c-1)}if(x.length>0){const L=[],C=[];for(let $=0;$<this.lines.length;$++)C.push(this.lines.get($));const b=this.lines.length;let E=b-1,R=0,k=x[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);let M=0;for(let $=Math.min(this.lines.maxLength-1,b+v-1);$>=0;$--)if(k&&k.start>E+M){for(let N=k.newLines.length-1;N>=0;N--)this.lines.set($--,k.newLines[N]);$++,L.push({index:E+1,amount:k.newLines.length}),M+=k.newLines.length,k=x[++R]}else this.lines.set($,C[E--]);let A=0;for(let $=L.length-1;$>=0;$--)L[$].index+=A,this.lines.onInsertEmitter.fire(L[$]),A+=L[$].amount;const H=Math.max(0,b+v-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(l,c,m=0,x){const v=this.lines.get(l);return v?v.translateToString(c,m,x):""}getWrappedRangeForLine(l){let c=l,m=l;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===l&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const c=new n.Marker(l);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),_=o(511),u=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let w=0;class S{constructor(n,a,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const c=a||_.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,c);this.length=n}get(n){const a=this._data[3*n+0],l=2097151&a;return[this._data[3*n+1],2097152&a?this._combined[n]:l?(0,p.stringFromCodePoint)(l):"",a>>22,2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):l]}set(n,a){this._data[3*n+1]=a[u.CHAR_DATA_ATTR_INDEX],a[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=a[1],this._data[3*n+0]=2097152|n|a[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=a[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&a}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n]:2097151&a?(0,p.stringFromCodePoint)(2097151&a):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,a){return w=3*n,a.content=this._data[w+0],a.fg=this._data[w+1],a.bg=this._data[w+2],2097152&a.content&&(a.combinedData=this._combined[n]),268435456&a.bg&&(a.extended=this._extendedAttrs[n]),a}setCell(n,a){2097152&a.content&&(this._combined[n]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[n]=a.extended),this._data[3*n+0]=a.content,this._data[3*n+1]=a.fg,this._data[3*n+2]=a.bg}setCellFromCodepoint(n,a,l,c){268435456&c.bg&&(this._extendedAttrs[n]=c.extended),this._data[3*n+0]=a|l<<22,this._data[3*n+1]=c.fg,this._data[3*n+2]=c.bg}addCodepointToCell(n,a,l){let c=this._data[3*n+0];2097152&c?this._combined[n]+=(0,p.stringFromCodePoint)(a):2097151&c?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&c)+(0,p.stringFromCodePoint)(a),c&=-2097152,c|=2097152):c=a|4194304,l&&(c&=-12582913,c|=l<<22),this._data[3*n+0]=c}insertCells(n,a,l){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length-n){const c=new _.CellData;for(let m=this.length-n-a-1;m>=0;--m)this.setCell(n+a+m,this.loadCell(n+m,c));for(let m=0;m<a;++m)this.setCell(n+m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(n,a,l){if(n%=this.length,a<this.length-n){const c=new _.CellData;for(let m=0;m<this.length-n-a;++m)this.setCell(n+m,this.loadCell(n+a+m,c));for(let m=this.length-a;m<this.length;++m)this.setCell(m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,l)}replaceCells(n,a,l,c=!1){if(c)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.isProtected(n)||this.setCell(n,l),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.setCell(n++,l)}resize(n,a){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const c=new Uint32Array(l);c.set(this._data),this._data=c}for(let c=this.length;c<n;++c)this.setCell(c,a)}else{this._data=this._data.subarray(0,l);const c=Object.keys(this._combined);for(let x=0;x<c.length;x++){const v=parseInt(c[x],10);v>=n&&delete this._combined[v]}const m=Object.keys(this._extendedAttrs);for(let x=0;x<m.length;x++){const v=parseInt(m[x],10);v>=n&&delete this._extendedAttrs[v]}}return this.length=n,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,a=!1){if(a)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,n);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const a in n._combined)this._combined[a]=n._combined[a];this._extendedAttrs={};for(const a in n._extendedAttrs)this._extendedAttrs[a]=n._extendedAttrs[a];this.isWrapped=n.isWrapped}clone(){const n=new S(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const a in this._combined)n._combined[a]=this._combined[a];for(const a in this._extendedAttrs)n._extendedAttrs[a]=this._extendedAttrs[a];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,a,l,c,m){const x=n._data;if(m)for(let L=c-1;L>=0;L--){for(let C=0;C<3;C++)this._data[3*(l+L)+C]=x[3*(a+L)+C];268435456&x[3*(a+L)+2]&&(this._extendedAttrs[l+L]=n._extendedAttrs[a+L])}else for(let L=0;L<c;L++){for(let C=0;C<3;C++)this._data[3*(l+L)+C]=x[3*(a+L)+C];268435456&x[3*(a+L)+2]&&(this._extendedAttrs[l+L]=n._extendedAttrs[a+L])}const v=Object.keys(n._combined);for(let L=0;L<v.length;L++){const C=parseInt(v[L],10);C>=a&&(this._combined[C-a+l]=n._combined[C])}}translateToString(n,a,l,c){a=a??0,l=l??this.length,n&&(l=Math.min(l,this.getTrimmedLength())),c&&(c.length=0);let m="";for(;a<l;){const x=this._data[3*a+0],v=2097151&x,L=2097152&x?this._combined[a]:v?(0,p.stringFromCodePoint)(v):u.WHITESPACE_CELL_CHAR;if(m+=L,c)for(let C=0;C<L.length;++C)c.push(a);a+=x>>22||1}return c&&c.push(a),m}}i.BufferLine=S},4841:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(y,i)=>{function o(f,_,u){if(_===f.length-1)return f[_].getTrimmedLength();const p=!f[_].hasContent(u-1)&&f[_].getWidth(u-1)===1,w=f[_+1].getWidth(0)===2;return p&&w?u-1:u}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,_,u,p,w){const S=[];for(let h=0;h<f.length-1;h++){let n=h,a=f.get(++n);if(!a.isWrapped)continue;const l=[f.get(h)];for(;n<f.length&&a.isWrapped;)l.push(a),a=f.get(++n);if(p>=h&&p<n){h+=l.length-1;continue}let c=0,m=o(l,c,_),x=1,v=0;for(;x<l.length;){const C=o(l,x,_),b=C-v,E=u-m,R=Math.min(b,E);l[c].copyCellsFrom(l[x],v,m,R,!1),m+=R,m===u&&(c++,m=0),v+=R,v===C&&(x++,v=0),m===0&&c!==0&&l[c-1].getWidth(u-1)===2&&(l[c].copyCellsFrom(l[c-1],u-1,m++,1,!1),l[c-1].setCell(u-1,w))}l[c].replaceCells(m,u,w);let L=0;for(let C=l.length-1;C>0&&(C>c||l[C].getTrimmedLength()===0);C--)L++;L>0&&(S.push(h+l.length-L),S.push(L)),h+=l.length-1}return S},i.reflowLargerCreateNewLayout=function(f,_){const u=[];let p=0,w=_[p],S=0;for(let h=0;h<f.length;h++)if(w===h){const n=_[++p];f.onDeleteEmitter.fire({index:h-S,amount:n}),h+=n-1,S+=n,w=_[++p]}else u.push(h);return{layout:u,countRemoved:S}},i.reflowLargerApplyNewLayout=function(f,_){const u=[];for(let p=0;p<_.length;p++)u.push(f.get(_[p]));for(let p=0;p<u.length;p++)f.set(p,u[p]);f.length=_.length},i.reflowSmallerGetNewLineLengths=function(f,_,u){const p=[],w=f.map((a,l)=>o(f,l,_)).reduce((a,l)=>a+l);let S=0,h=0,n=0;for(;n<w;){if(w-n<u){p.push(w-n);break}S+=u;const a=o(f,h,_);S>a&&(S-=a,h++);const l=f[h].getWidth(S-1)===2;l&&S--;const c=l?u-1:u;p.push(c),n+=c}return p},i.getWrappedLineTrimmedLength=o},5295:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),_=o(844),u=o(9092);class p extends _.Disposable{constructor(S,h){super(),this._optionsService=S,this._bufferService=h,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,h){this._normal.resize(S,h),this._alt.resize(S,h),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}i.BufferSet=p},511:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),_=o(643),u=o(3734);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const h=new p;return h.setFromCharData(S),h}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let h=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)h=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:h=!0}else h=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;h&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),_=o(844);class u{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}i.Marker=u,u._nextId=1},7116:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(y,i)=>{var o,f,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(o||(i.C0=o={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(f||(i.C1=f={})),function(u){u.ST=`${o.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(u,p,w,S){const h={type:0,cancel:!1,key:void 0},n=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?h.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?h.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?h.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(h.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:h.key=u.ctrlKey?"\b":f.C0.DEL,u.altKey&&(h.key=f.C0.ESC+h.key);break;case 9:if(u.shiftKey){h.key=f.C0.ESC+"[Z";break}h.key=f.C0.HT,h.cancel=!0;break;case 13:h.key=u.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,h.cancel=!0;break;case 27:h.key=f.C0.ESC,u.altKey&&(h.key=f.C0.ESC+f.C0.ESC),h.cancel=!0;break;case 37:if(u.metaKey)break;n?(h.key=f.C0.ESC+"[1;"+(n+1)+"D",h.key===f.C0.ESC+"[1;3D"&&(h.key=f.C0.ESC+(w?"b":"[1;5D"))):h.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(u.metaKey)break;n?(h.key=f.C0.ESC+"[1;"+(n+1)+"C",h.key===f.C0.ESC+"[1;3C"&&(h.key=f.C0.ESC+(w?"f":"[1;5C"))):h.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(u.metaKey)break;n?(h.key=f.C0.ESC+"[1;"+(n+1)+"A",w||h.key!==f.C0.ESC+"[1;3A"||(h.key=f.C0.ESC+"[1;5A")):h.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(u.metaKey)break;n?(h.key=f.C0.ESC+"[1;"+(n+1)+"B",w||h.key!==f.C0.ESC+"[1;3B"||(h.key=f.C0.ESC+"[1;5B")):h.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(h.key=f.C0.ESC+"[2~");break;case 46:h.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:h.key=n?f.C0.ESC+"[1;"+(n+1)+"H":p?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:h.key=n?f.C0.ESC+"[1;"+(n+1)+"F":p?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:u.shiftKey?h.type=2:u.ctrlKey?h.key=f.C0.ESC+"[5;"+(n+1)+"~":h.key=f.C0.ESC+"[5~";break;case 34:u.shiftKey?h.type=3:u.ctrlKey?h.key=f.C0.ESC+"[6;"+(n+1)+"~":h.key=f.C0.ESC+"[6~";break;case 112:h.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:h.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:h.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:h.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:h.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:h.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:h.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:h.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:h.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:h.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:h.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:h.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(w&&!S||!u.altKey||u.metaKey)!w||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?h.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(h.key=f.C0.US),u.key==="@"&&(h.key=f.C0.NUL)):u.keyCode===65&&(h.type=1);else{const a=_[u.keyCode],l=a?.[u.shiftKey?1:0];if(l)h.key=f.C0.ESC+l;else if(u.keyCode>=65&&u.keyCode<=90){const c=u.ctrlKey?u.keyCode-64:u.keyCode+32;let m=String.fromCharCode(c);u.shiftKey&&(m=m.toUpperCase()),h.key=f.C0.ESC+m}else if(u.keyCode===32)h.key=f.C0.ESC+(u.ctrlKey?f.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let c=u.code.slice(3,4);u.shiftKey||(c=c.toLowerCase()),h.key=f.C0.ESC+c,h.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?h.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?h.key=f.C0.NUL:u.keyCode>=51&&u.keyCode<=55?h.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?h.key=f.C0.DEL:u.keyCode===219?h.key=f.C0.ESC:u.keyCode===220?h.key=f.C0.FS:u.keyCode===221&&(h.key=f.C0.GS)}return h}},482:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let u="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,u+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):u+=String.fromCharCode(w)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let u=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[u++]=1024*(this._interim-55296)+w-56320+65536:(f[u++]=this._interim,f[u++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,u;const h=o.charCodeAt(w);56320<=h&&h<=57343?f[u++]=1024*(S-55296)+h-56320+65536:(f[u++]=S,f[u++]=h)}else S!==65279&&(f[u++]=S)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let u,p,w,S,h=0,n=0,a=0;if(this.interim[0]){let m=!1,x=this.interim[0];x&=(224&x)==192?31:(240&x)==224?15:7;let v,L=0;for(;(v=63&this.interim[++L])&&L<4;)x<<=6,x|=v;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=C-L;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[L++]=v,x<<=6,x|=63&v}m||(C===2?x<128?a--:f[h++]=x:C===3?x<2048||x>=55296&&x<=57343||x===65279||(f[h++]=x):x<65536||x>1114111||(f[h++]=x)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(u=o[c])||128&(p=o[c+1])||128&(w=o[c+2])||128&(S=o[c+3]));)f[h++]=u,f[h++]=p,f[h++]=w,f[h++]=S,c+=4;if(u=o[c++],u<128)f[h++]=u;else if((224&u)==192){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&u)<<6|63&p,n<128){c--;continue}f[h++]=n}else if((240&u)==224){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,h;if(w=o[c++],(192&w)!=128){c--;continue}if(n=(15&u)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[h++]=n}else if((248&u)==240){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,h;if(w=o[c++],(192&w)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=w,h;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[h++]=n}}return h}}},225:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let w=0;w<_.length;++w)p.fill(0,_[w][0],_[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?p[w]:function(S,h){let n,a=0,l=h.length-1;if(S<h[0][0]||S>h[l][1])return!1;for(;l>=a;)if(n=a+l>>1,S>h[n][1])a=n+1;else{if(!(S<h[n][0]))return!0;l=n-1}return!1}(w,u)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,S){let h=this.wcwidth(w),n=h===0&&S!==0;if(n){const a=f.UnicodeService.extractWidth(S);a===0?n=!1:a>h&&(h=a)}return f.UnicodeService.createPropertyValue(0,h,n)}}},5981:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),_=o(844);class u extends _.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let h;for(this._isSyncWriting=!0;h=this._writeBuffer.shift();){this._action(h);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S)}_innerWrite(w=0,S=!0){const h=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],a=this._action(n,S);if(a){const c=m=>Date.now()-h>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(h,m);return void a.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(c)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-h>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=u},5941:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function _(u,p){const w=u.toString(16),S=w.length<2?"0"+w:w;switch(p){case 4:return w[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}i.parseColor=function(u){if(!u)return;let p=u.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const w=o.exec(p);if(w){const S=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/S*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/S*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/S*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),f.exec(p)&&[3,6,9,12].includes(p.length))){const w=p.length/3,S=[0,0,0];for(let h=0;h<3;++h){const n=parseInt(p.slice(w*h,w*h+w),16);S[h]=w===1?n<<4:w===2?n:w===3?n>>4:n>>8}return S}},i.toRgbString=function(u,p=16){const[w,S,h]=u;return`rgb:${_(w,p)}/${_(S,p)}/${_(h,p)}`}},5770:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),_=o(8742),u=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(S,h){this._handlers[S]===void 0&&(this._handlers[S]=[]);const n=this._handlers[S];return n.push(h),{dispose:()=>{const a=n.indexOf(h);a!==-1&&n.splice(a,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(S,h){if(this.reset(),this._ident=S,this._active=this._handlers[S]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(h);else this._handlerFb(this._ident,"HOOK",h)}put(S,h,n){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(S,h,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(S,h,n))}unhook(S,h=!0){if(this._active.length){let n=!1,a=this._active.length-1,l=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=h,l=this._stack.fallThrough,this._stack.paused=!1),!l&&n===!1){for(;a>=0&&(n=this._active[a].unhook(S),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",S);this._active=p,this._ident=0}};const w=new _.Params;w.addParam(0),i.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=w,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():w,this._data="",this._hitLimit=!1}put(S,h,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(S,h,n),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let h=!1;if(this._hitLimit)h=!1;else if(S&&(h=this._handler(this._data,this._params),h instanceof Promise))return h.then(n=>(this._params=w,this._data="",this._hitLimit=!1,n));return this._params=w,this._data="",this._hitLimit=!1,h}}},2015:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),_=o(8742),u=o(6242),p=o(6351);class w{constructor(a){this.table=new Uint8Array(a)}setDefault(a,l){this.table.fill(a<<4|l)}add(a,l,c,m){this.table[l<<8|a]=c<<4|m}addMany(a,l,c,m){for(let x=0;x<a.length;x++)this.table[l<<8|a[x]]=c<<4|m}}i.TransitionTable=w;const S=160;i.VT500_TRANSITION_TABLE=function(){const n=new w(4095),a=Array.apply(null,Array(256)).map((L,C)=>C),l=(L,C)=>a.slice(L,C),c=l(32,127),m=l(0,24);m.push(25),m.push.apply(m,l(28,32));const x=l(0,14);let v;for(v in n.setDefault(1,0),n.addMany(c,0,2,0),x)n.addMany([24,26,153,154],v,3,0),n.addMany(l(128,144),v,3,0),n.addMany(l(144,152),v,3,0),n.add(156,v,0,0),n.add(27,v,11,1),n.add(157,v,4,8),n.addMany([152,158,159],v,0,7),n.add(155,v,11,3),n.add(144,v,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(c,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(l(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(c,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(l(64,127),3,7,0),n.addMany(l(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(l(48,60),4,8,4),n.addMany(l(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(l(32,64),6,0,6),n.add(127,6,0,6),n.addMany(l(64,127),6,0,0),n.addMany(l(32,48),3,9,5),n.addMany(l(32,48),5,9,5),n.addMany(l(48,64),5,0,6),n.addMany(l(64,127),5,7,0),n.addMany(l(32,48),4,9,5),n.addMany(l(32,48),1,9,2),n.addMany(l(32,48),2,9,2),n.addMany(l(48,127),2,10,0),n.addMany(l(48,80),1,10,0),n.addMany(l(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(l(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(l(28,32),9,0,9),n.addMany(l(32,48),9,9,12),n.addMany(l(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(l(32,128),11,0,11),n.addMany(l(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(l(28,32),10,0,10),n.addMany(l(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(l(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(l(28,32),12,0,12),n.addMany(l(32,48),12,9,12),n.addMany(l(48,64),12,0,11),n.addMany(l(64,127),12,12,13),n.addMany(l(64,127),10,12,13),n.addMany(l(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(c,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(S,0,2,0),n.add(S,8,5,8),n.add(S,6,0,6),n.add(S,11,0,11),n.add(S,13,13,13),n}();class h extends f.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,c,m)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,c)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,l=[64,126]){let c=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=a.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let x=0;x<a.intermediates.length;++x){const v=a.intermediates.charCodeAt(x);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=v}}if(a.final.length!==1)throw new Error("final must be a single byte");const m=a.final.charCodeAt(0);if(l[0]>m||m>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return c<<=8,c|=m,c}identToString(a){const l=[];for(;a;)l.push(String.fromCharCode(255&a)),a>>=8;return l.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,l){const c=this._identifier(a,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const m=this._escHandlers[c];return m.push(l),{dispose:()=>{const x=m.indexOf(l);x!==-1&&m.splice(x,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,l){this._executeHandlers[a.charCodeAt(0)]=l}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,l){const c=this._identifier(a);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const m=this._csiHandlers[c];return m.push(l),{dispose:()=>{const x=m.indexOf(l);x!==-1&&m.splice(x,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,l){return this._dcsParser.registerHandler(this._identifier(a),l)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,l){return this._oscParser.registerHandler(a,l)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,l,c,m,x){this._parseStack.state=a,this._parseStack.handlers=l,this._parseStack.handlerPos=c,this._parseStack.transition=m,this._parseStack.chunkPos=x}parse(a,l,c){let m,x=0,v=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&b>-1){for(;b>=0&&(m=C[b](this._params),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 4:if(c===!1&&b>-1){for(;b>=0&&(m=C[b](),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 6:if(x=a[this._parseStack.chunkPos],m=this._dcsParser.unhook(x!==24&&x!==26,c),m)return m;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(x=a[this._parseStack.chunkPos],m=this._oscParser.end(x!==24&&x!==26,c),m)return m;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let C=L;C<l;++C){switch(x=a[C],v=this._transitions.table[this.currentState<<8|(x<160?x:S)],v>>4){case 2:for(let M=C+1;;++M){if(M>=l||(x=a[M])<32||x>126&&x<S){this._printHandler(a,C,M),C=M-1;break}if(++M>=l||(x=a[M])<32||x>126&&x<S){this._printHandler(a,C,M),C=M-1;break}if(++M>=l||(x=a[M])<32||x>126&&x<S){this._printHandler(a,C,M),C=M-1;break}if(++M>=l||(x=a[M])<32||x>126&&x<S){this._printHandler(a,C,M),C=M-1;break}}break;case 3:this._executeHandlers[x]?this._executeHandlers[x]():this._executeHandlerFb(x),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:x,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|x];let E=b?b.length-1:-1;for(;E>=0&&(m=b[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,b,E,v,C),m;E<0&&this._csiHandlerFb(this._collect<<8|x,this._params),this.precedingJoinState=0;break;case 8:do switch(x){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(x-48)}while(++C<l&&(x=a[C])>47&&x<60);C--;break;case 9:this._collect<<=8,this._collect|=x;break;case 10:const R=this._escHandlers[this._collect<<8|x];let k=R?R.length-1:-1;for(;k>=0&&(m=R[k](),m!==!0);k--)if(m instanceof Promise)return this._preserveStack(4,R,k,v,C),m;k<0&&this._escHandlerFb(this._collect<<8|x),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|x,this._params);break;case 13:for(let M=C+1;;++M)if(M>=l||(x=a[M])===24||x===26||x===27||x>127&&x<S){this._dcsParser.put(a,C,M),C=M-1;break}break;case 14:if(m=this._dcsParser.unhook(x!==24&&x!==26),m)return this._preserveStack(6,[],0,v,C),m;x===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let M=C+1;;M++)if(M>=l||(x=a[M])<32||x>127&&x<S){this._oscParser.put(a,C,M),C=M-1;break}break;case 6:if(m=this._oscParser.end(x!==24&&x!==26),m)return this._preserveStack(5,[],0,v,C),m;x===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&v}}}i.EscapeSequenceParser=h},6242:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),_=o(482),u=[];i.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,w){this._handlers[p]===void 0&&(this._handlers[p]=[]);const S=this._handlers[p];return S.push(w),{dispose:()=>{const h=S.indexOf(w);h!==-1&&S.splice(h,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,w,S){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(p,w,S);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,w,S))}start(){this.reset(),this._state=1}put(p,w,S){if(this._state!==3){if(this._state===1)for(;w<S;){const h=p[w++];if(h===59){this._state=2,this._start();break}if(h<48||57<h)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+h-48}this._state===2&&S-w>0&&this._put(p,w,S)}}end(p,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,h=this._active.length-1,n=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,S=w,n=this._stack.fallThrough,this._stack.paused=!1),!n&&S===!1){for(;h>=0&&(S=this._active[h].end(p),S!==!0);h--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,S;h--}for(;h>=0;h--)if(S=this._active[h].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",p);this._active=u,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,w,S){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,w,S),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let w=!1;if(this._hitLimit)w=!1;else if(p&&(w=this._handler(this._data),w instanceof Promise))return w.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,w}}},8742:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(u){const p=new f;if(!u.length)return p;for(let w=Array.isArray(u[0])?1:0;w<u.length;++w){const S=u[w];if(Array.isArray(S))for(let h=0;h<S.length;++h)p.addSubParam(S[h]);else p.addParam(S)}return p}constructor(u=32,p=32){if(this.maxLength=u,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new f(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let p=0;p<this.length;++p){u.push(this.params[p]);const w=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];S-w>0&&u.push(Array.prototype.slice.call(this._subParams,w,S))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const p=this._subParamsIdx[u]>>8,w=255&this._subParamsIdx[u];return w-p>0?this._subParams.subarray(p,w):null}getSubParamsAll(){const u={};for(let p=0;p<this.length;++p){const w=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];S-w>0&&(u[p]=this._subParams.slice(w,S))}return u}addDigit(u){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,S=w[p-1];w[p-1]=~S?Math.min(10*S+u,o):u}}i.Params=f},5741:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const _={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=()=>this._wrappedAddonDispose(_),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===o){f=_;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),_=o(511);i.BufferApiView=class{constructor(u,p){this._buffer=u,this.type=p}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const p=this._buffer.lines.get(u);if(p)return new f.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,u){if(!(_<0||_>=this._line.length))return u?(this._line.loadCell(_,u),u):this._line.loadCell(_,new f.CellData)}translateToString(_,u,p){return this._line.translateToString(_,u,p)}}},8285:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),_=o(8460),u=o(844);class p extends u.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,_=>f(_.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(_,u)=>f(_,u.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(y,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,x=arguments.length,v=x<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var L=n.length-1;L>=0;L--)(m=n[L])&&(v=(x<3?m(v):x>3?m(a,l,v):m(a,l))||v);return x>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const u=o(8460),p=o(844),w=o(5295),S=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let h=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(n,this))}resize(n,a){this.cols=n,this.rows=a,this.buffers.resize(n,a),this._onResize.fire({cols:n,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,a=!1){const l=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===n.fg&&c.getBg(0)===n.bg||(c=l.getBlankLine(n,a),this._cachedBlankLine=c),c.isWrapped=a;const m=l.ybase+l.scrollTop,x=l.ybase+l.scrollBottom;if(l.scrollTop===0){const v=l.lines.isFull;x===l.lines.length-1?v?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(x+1,0,c.clone()),v?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const v=x-m+1;l.lines.shiftElements(m+1,v-1,-1),l.lines.set(x,c.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(n,a,l){const c=this.buffer;if(n<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else n+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const m=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+n,c.ybase),0),m!==c.ydisp&&(a||this._onScroll.fire(c.ydisp))}};i.BufferService=h=f([_(0,S.IOptionsService)],h)},7994:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(y,i,o){var f=this&&this.__decorate||function(c,m,x,v){var L,C=arguments.length,b=C<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,x):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,m,x,v);else for(var E=c.length-1;E>=0;E--)(L=c[E])&&(b=(C<3?L(b):C>3?L(m,x,b):L(m,x))||b);return C>3&&b&&Object.defineProperty(m,x,b),b},_=this&&this.__param||function(c,m){return function(x,v){m(x,v,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const u=o(2585),p=o(8460),w=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function h(c,m){let x=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(x|=64,x|=c.action):(x|=3&c.button,4&c.button&&(x|=64),8&c.button&&(x|=128),c.action===32?x|=32:c.action!==0||m||(x|=3)),x}const n=String.fromCharCode,a={DEFAULT:c=>{const m=[h(c,!1)+32,c.col+32,c.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${h(c,!0)};${c.col};${c.row}${m}`},SGR_PIXELS:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${h(c,!0)};${c.x};${c.y}${m}`}};let l=i.CoreMouseService=class extends w.Disposable{constructor(c,m){super(),this._bufferService=c,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const x of Object.keys(S))this.addProtocol(x,S[x]);for(const x of Object.keys(a))this.addEncoding(x,a[x]);this.reset()}addProtocol(c,m){this._protocols[c]=m}addEncoding(c,m){this._encodings[c]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const m=this._encodings[this._activeEncoding](c);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,m,x){if(x){if(c.x!==m.x||c.y!==m.y)return!1}else if(c.col!==m.col||c.row!==m.row)return!1;return c.button===m.button&&c.action===m.action&&c.ctrl===m.ctrl&&c.alt===m.alt&&c.shift===m.shift}};i.CoreMouseService=l=f([_(0,u.IBufferService),_(1,u.ICoreService)],l)},6975:function(y,i,o){var f=this&&this.__decorate||function(l,c,m,x){var v,L=arguments.length,C=L<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(l,c,m,x);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(C=(L<3?v(C):L>3?v(c,m,C):v(c,m))||C);return L>3&&C&&Object.defineProperty(c,m,C),C},_=this&&this.__param||function(l,c){return function(m,x){c(m,x,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const u=o(1439),p=o(8460),w=o(844),S=o(2585),h=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends w.Disposable{constructor(l,c,m){super(),this._bufferService=l,this._logService=c,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(h),this.decPrivateModes=(0,u.clone)(n)}reset(){this.modes=(0,u.clone)(h),this.decPrivateModes=(0,u.clone)(n)}triggerDataEvent(l,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(x=>x.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(l))}};i.CoreService=a=f([_(0,S.IBufferService),_(1,S.ILogService),_(2,S.IOptionsService)],a)},9074:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),_=o(8460),u=o(844),p=o(6106);let w=0,S=0;class h extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(l=>l?.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const c=new n(l);if(c){const m=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),m.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,c,m){let x=0,v=0;for(const L of this._decorations.getKeyIterator(c))x=L.options.x??0,v=x+(L.options.width??1),l>=x&&l<v&&(!m||(L.options.layer??"bottom")===m)&&(yield L)}forEachDecorationAtCell(l,c,m,x){this._decorations.forEachByKey(c,v=>{w=v.options.x??0,S=w+(v.options.width??1),l>=w&&l<S&&(!m||(v.options.layer??"bottom")===m)&&x(v)})}}i.DecorationService=h;class n extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),_=o(8343);class u{constructor(...w){this._entries=new Map;for(const[S,h]of w)this.set(S,h)}set(w,S){const h=this._entries.get(w);return this._entries.set(w,S),h}forEach(w){for(const[S,h]of this._entries.entries())w(S,h)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}i.ServiceCollection=u,i.InstantiationService=class{constructor(){this._services=new u,this._services.set(f.IInstantiationService,this)}setService(p,w){this._services.set(p,w)}getService(p){return this._services.get(p)}createInstance(p,...w){const S=(0,_.getServiceDependencies)(p).sort((a,l)=>a.index-l.index),h=[];for(const a of S){const l=this._services.get(a.id);if(!l)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${a.id}.`);h.push(l)}const n=S.length>0?S[0].index:w.length;if(w.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${w.length} static arguments`);return new p(...w,...h)}}},7866:function(y,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,x=arguments.length,v=x<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var L=n.length-1;L>=0;L--)(m=n[L])&&(v=(x<3?m(v):x>3?m(a,l,v):m(a,l))||v);return x>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const u=o(844),p=o(2585),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,h=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=h=f([_(0,p.IOptionsService)],h),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const x=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,x),x}}},7302:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),_=o(844),u=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends _.Disposable{constructor(h){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const a in h)if(a in n)try{const l=h[a];n[a]=this._sanitizeAndValidateOption(a,l)}catch(l){console.error(l)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(h,n){return this.onOptionChange(a=>{a===h&&n(this.rawOptions[h])})}onMultipleOptionChange(h,n){return this.onOptionChange(a=>{h.indexOf(a)!==-1&&n()})}_setupOptions(){const h=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},n=(a,l)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);l=this._sanitizeAndValidateOption(a,l),this.rawOptions[a]!==l&&(this.rawOptions[a]=l,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const l={get:h.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this.options,a,l)}}_sanitizeAndValidateOption(h,n){switch(h){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[h]),!function(a){return a==="block"||a==="underline"||a==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${h}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[h]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:i.DEFAULT_OPTIONS[h];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${h} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${h} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${h} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${h} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=w},2660:function(y,i,o){var f=this&&this.__decorate||function(w,S,h,n){var a,l=arguments.length,c=l<3?S:n===null?n=Object.getOwnPropertyDescriptor(S,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(w,S,h,n);else for(var m=w.length-1;m>=0;m--)(a=w[m])&&(c=(l<3?a(c):l>3?a(S,h,c):a(S,h))||c);return l>3&&c&&Object.defineProperty(S,h,c),c},_=this&&this.__param||function(w,S){return function(h,n){S(h,n,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const u=o(2585);let p=i.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const S=this._bufferService.buffer;if(w.id===void 0){const m=S.addMarker(S.ybase+S.y),x={data:w,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(x,m)),this._dataByLinkId.set(x.id,x),x.id}const h=w,n=this._getEntryIdKey(h),a=this._entriesWithId.get(n);if(a)return this.addLineToLink(a.id,S.ybase+S.y),a.id;const l=S.addMarker(S.ybase+S.y),c={id:this._nextId++,key:this._getEntryIdKey(h),data:h,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(w,S){const h=this._dataByLinkId.get(w);if(h&&h.lines.every(n=>n.line!==S)){const n=this._bufferService.buffer.addMarker(S);h.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(h,n))}}getLinkData(w){return this._dataByLinkId.get(w)?.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,S){const h=w.lines.indexOf(S);h!==-1&&(w.lines.splice(h,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};i.OscLinkService=p=f([_(0,u.IBufferService)],p)},8343:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const u=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(h,n,a){n[o]===n?n[f].push({id:h,index:a}):(n[f]=[{id:h,index:a}],n[o]=n)})(u,p,S)};return u.toString=()=>_,i.serviceRegistry.set(_,u),u}},2585:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),_=o(225);class u{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,S,h=!1){return(16777215&w)<<3|(3&S)<<1|(h?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const w=new _.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let S=0,h=0;const n=w.length;for(let a=0;a<n;++a){let l=w.charCodeAt(a);if(55296<=l&&l<=56319){if(++a>=n)return S+this.wcwidth(l);const x=w.charCodeAt(a);56320<=x&&x<=57343?l=1024*(l-55296)+x-56320+65536:S+=this.wcwidth(x)}const c=this.charProperties(l,h);let m=u.extractWidth(c);u.extractShouldJoin(c)&&(m-=u.extractWidth(h)),S+=m,h=c}return S}charProperties(w,S){return this._activeProvider.charProperties(w,S)}}i.UnicodeService=u}},s={};function d(y){var i=s[y];if(i!==void 0)return i.exports;var o=s[y]={exports:{}};return r[y].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var y=g;Object.defineProperty(y,"__esModule",{value:!0}),y.Terminal=void 0;const i=d(9042),o=d(3236),f=d(844),_=d(5741),u=d(8285),p=d(7975),w=d(7090),S=["cols","rows"];class h extends f.Disposable{constructor(a){super(),this._core=this.register(new o.Terminal(a)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const l=m=>this._core.options[m],c=(m,x)=>{this._checkReadonlyOptions(m),this._core.options[m]=x};for(const m in this._core.options){const x={get:l.bind(this,m),set:c.bind(this,m)};Object.defineProperty(this._publicOptions,m,x)}}_checkReadonlyOptions(a){if(S.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const l in a)this._publicOptions[l]=a[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,l=!0){this._core.input(a,l)}resize(a,l){this._verifyIntegers(a,l),this._core.resize(a,l)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,l,c){this._verifyIntegers(a,l,c),this._core.select(a,l,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,l){this._verifyIntegers(a,l),this._core.selectLines(a,l)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,l){this._core.write(a,l)}writeln(a,l){this._core.write(a),this._core.write(`\r
`,l)}paste(a){this._core.paste(a)}refresh(a,l){this._verifyIntegers(a,l),this._core.refresh(a,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const l of a)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const l of a)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}y.Terminal=h})(),g})())})(wf);var Nm=wf.exports,bf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const g=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(g._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,g=d._renderService.dimensions;if(g.css.cell.width===0||g.css.cell.height===0)return;const y=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),u=o-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=f-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-y;return{cols:Math.max(2,Math.floor(p/g.css.cell.width)),rows:Math.max(1,Math.floor(u/g.css.cell.height))}}}})(),r})())})(bf);var Hm=bf.exports,Lf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=o(374),_=o(509),u=o(855),p=o(859),w=o(381),S=11,h=S*Float32Array.BYTES_PER_ELEMENT;let n,a=0,l=0,c=0;class m extends p.Disposable{constructor(v,L,C,b){super(),this._terminal=v,this._gl=L,this._dimensions=C,this._optionsService=b,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const E=this._gl;_.TextureAtlas.maxAtlasPages===void 0&&(_.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),_.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,w.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function($){let N="";for(let B=1;B<$;B++)N+=` else if (v_texpage == ${B}) { outColor = texture(u_texture[${B}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${$}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${N}
}`}(_.TextureAtlas.maxAtlasPages))),this.register((0,p.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);const R=new Float32Array([0,0,1,0,0,1,1,1]),k=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(k))),E.bindBuffer(E.ARRAY_BUFFER,k),E.bufferData(E.ARRAY_BUFFER,R,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const M=new Uint8Array([0,1,2,3]),A=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(A))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,A),E.bufferData(E.ELEMENT_ARRAY_BUFFER,M,E.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(E.createBuffer()),this.register((0,p.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,h,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,h,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,h,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,h,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);const H=new Int32Array(_.TextureAtlas.maxAtlasPages);for(let $=0;$<_.TextureAtlas.maxAtlasPages;$++)H[$]=$;E.uniform1iv(this._textureLocation,H),E.uniformMatrix4fv(this._projectionLocation,!1,w.PROJECTION_MATRIX),this._atlasTextures=[];for(let $=0;$<_.TextureAtlas.maxAtlasPages;$++){const N=new w.GLTexture((0,f.throwIfFalsy)(E.createTexture()));this.register((0,p.toDisposable)(()=>E.deleteTexture(N.texture))),E.activeTexture(E.TEXTURE0+$),E.bindTexture(E.TEXTURE_2D,N.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[$]=N}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(v,L,C,b,E,R,k,M,A){this._updateCell(this._vertices.attributes,v,L,C,b,E,R,k,M,A)}_updateCell(v,L,C,b,E,R,k,M,A,H){a=(C*this._terminal.cols+L)*S,b!==u.NULL_CELL_CODE&&b!==void 0?this._atlas&&(n=M&&M.length>1?this._atlas.getRasterizedGlyphCombinedChar(M,E,R,k,!1):this._atlas.getRasterizedGlyph(b,E,R,k,!1),l=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==H&&n.offset.x>l?(c=n.offset.x-l,v[a]=-(n.offset.x-c)+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=(n.size.x-c)/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x+c/this._atlas.pages[n.texturePage].canvas.width,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x-c/this._atlas.pages[n.texturePage].canvas.width,v[a+8]=n.sizeClipSpace.y):(v[a]=-n.offset.x+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=n.size.x/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x,v[a+8]=n.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(b,A,n.size.x,this._dimensions.device.cell.width)&&(v[a+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):v.fill(0,a,a+S-1-2)}clear(){const v=this._terminal,L=v.cols*v.rows*S;this._vertices.count!==L?this._vertices.attributes=new Float32Array(L):this._vertices.attributes.fill(0);let C=0;for(;C<this._vertices.attributesBuffers.length;C++)this._vertices.count!==L?this._vertices.attributesBuffers[C]=new Float32Array(L):this._vertices.attributesBuffers[C].fill(0);this._vertices.count=L,C=0;for(let b=0;b<v.rows;b++)for(let E=0;E<v.cols;E++)this._vertices.attributes[C+9]=E/v.cols,this._vertices.attributes[C+10]=b/v.rows,C+=S}handleResize(){const v=this._gl;v.useProgram(this._program),v.viewport(0,0,v.canvas.width,v.canvas.height),v.uniform2f(this._resolutionLocation,v.canvas.width,v.canvas.height),this.clear()}render(v){if(!this._atlas)return;const L=this._gl;L.useProgram(this._program),L.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const C=this._vertices.attributesBuffers[this._activeBuffer];let b=0;for(let E=0;E<v.lineLengths.length;E++){const R=E*this._terminal.cols*S,k=this._vertices.attributes.subarray(R,R+v.lineLengths[E]*S);C.set(k,b),b+=k.length}L.bindBuffer(L.ARRAY_BUFFER,this._attributesBuffer),L.bufferData(L.ARRAY_BUFFER,C.subarray(0,b),L.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(L,this._atlas,E);L.drawElementsInstanced(L.TRIANGLE_STRIP,4,L.UNSIGNED_BYTE,0,b/S)}setAtlas(v){this._atlas=v;for(const L of this._atlasTextures)L.version=-1}_bindAtlasPageTexture(v,L,C){v.activeTexture(v.TEXTURE0+C),v.bindTexture(v.TEXTURE_2D,this._atlasTextures[C].texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,L.pages[C].canvas),v.generateMipmap(v.TEXTURE_2D),this._atlasTextures[C].version=L.pages[C].version}setDimensions(v){this._dimensions=v}}i.GlyphRenderer=m},742:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=o(374),_=o(859),u=o(310),p=o(381),w=8*Float32Array.BYTES_PER_ELEMENT;class S{constructor(){this.attributes=new Float32Array(160),this.count=0}}let h=0,n=0,a=0,l=0,c=0,m=0,x=0;class v extends _.Disposable{constructor(C,b,E,R){super(),this._terminal=C,this._gl=b,this._dimensions=E,this._themeService=R,this._vertices=new S,this._verticesCursor=new S;const k=this._gl;this._program=(0,f.throwIfFalsy)((0,p.createProgram)(k,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,_.toDisposable)(()=>k.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(k.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=k.createVertexArray(),k.bindVertexArray(this._vertexArrayObject);const M=new Float32Array([0,0,1,0,0,1,1,1]),A=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer(A))),k.bindBuffer(k.ARRAY_BUFFER,A),k.bufferData(k.ARRAY_BUFFER,M,k.STATIC_DRAW),k.enableVertexAttribArray(3),k.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const H=new Uint8Array([0,1,2,3]),$=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer($))),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,$),k.bufferData(k.ELEMENT_ARRAY_BUFFER,H,k.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(k.createBuffer()),this.register((0,_.toDisposable)(()=>k.deleteBuffer(this._attributesBuffer))),k.bindBuffer(k.ARRAY_BUFFER,this._attributesBuffer),k.enableVertexAttribArray(0),k.vertexAttribPointer(0,2,k.FLOAT,!1,w,0),k.vertexAttribDivisor(0,1),k.enableVertexAttribArray(1),k.vertexAttribPointer(1,2,k.FLOAT,!1,w,2*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(1,1),k.enableVertexAttribArray(2),k.vertexAttribPointer(2,4,k.FLOAT,!1,w,4*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(2,1),this._updateCachedColors(R.colors),this.register(this._themeService.onChangeColors(N=>{this._updateCachedColors(N),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(C){const b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,C.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,C.count)}handleResize(){this._updateViewportRectangle()}setDimensions(C){this._dimensions=C}_updateCachedColors(C){this._bgFloat=this._colorToFloat32Array(C.background),this._cursorFloat=this._colorToFloat32Array(C.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(C){const b=this._terminal,E=this._vertices;let R,k,M,A,H,$,N,B,D,T,I,F=1;for(R=0;R<b.rows;R++){for(M=-1,A=0,H=0,$=!1,k=0;k<b.cols;k++)N=(R*b.cols+k)*u.RENDER_MODEL_INDICIES_PER_CELL,B=C.cells[N+u.RENDER_MODEL_BG_OFFSET],D=C.cells[N+u.RENDER_MODEL_FG_OFFSET],T=!!(67108864&D),(B!==A||D!==H&&($||T))&&((A!==0||$&&H!==0)&&(I=8*F++,this._updateRectangle(E,I,H,A,M,k,R)),M=k,A=B,H=D,$=T);(A!==0||$&&H!==0)&&(I=8*F++,this._updateRectangle(E,I,H,A,M,b.cols,R))}E.count=F}updateCursor(C){const b=this._verticesCursor,E=C.cursor;if(!E||E.style==="block")return void(b.count=0);let R,k=0;E.style!=="bar"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),R=8*k++,this._addRectangleFloat(b.attributes,R,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=k}_updateRectangle(C,b,E,R,k,M,A){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:h=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:h=(16777215&E)<<8;break;default:h=this._themeService.colors.foreground.rgba}else switch(50331648&R){case 16777216:case 33554432:h=this._themeService.colors.ansi[255&R].rgba;break;case 50331648:h=(16777215&R)<<8;break;default:h=this._themeService.colors.background.rgba}C.attributes.length<b+4&&(C.attributes=(0,p.expandFloat32Array)(C.attributes,this._terminal.rows*this._terminal.cols*8)),n=k*this._dimensions.device.cell.width,a=A*this._dimensions.device.cell.height,l=(h>>24&255)/255,c=(h>>16&255)/255,m=(h>>8&255)/255,x=1,this._addRectangle(C.attributes,b,n,a,(M-k)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,l,c,m,x)}_addRectangle(C,b,E,R,k,M,A,H,$,N){C[b]=E/this._dimensions.device.canvas.width,C[b+1]=R/this._dimensions.device.canvas.height,C[b+2]=k/this._dimensions.device.canvas.width,C[b+3]=M/this._dimensions.device.canvas.height,C[b+4]=A,C[b+5]=H,C[b+6]=$,C[b+7]=N}_addRectangleFloat(C,b,E,R,k,M,A){C[b]=E/this._dimensions.device.canvas.width,C[b+1]=R/this._dimensions.device.canvas.height,C[b+2]=k/this._dimensions.device.canvas.width,C[b+3]=M/this._dimensions.device.canvas.height,C[b+4]=A[0],C[b+5]=A[1],C[b+6]=A[2],C[b+7]=A[3]}_colorToFloat32Array(C){return new Float32Array([(C.rgba>>24&255)/255,(C.rgba>>16&255)/255,(C.rgba>>8&255)/255,(255&C.rgba)/255])}}i.RectangleRenderer=v},310:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=o(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(_,u){const p=_*u*i.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=o(820),_=o(274),u=o(627),p=o(457),w=o(56),S=o(374),h=o(345),n=o(859),a=o(147),l=o(782),c=o(855),m=o(965),x=o(742),v=o(310),L=o(733);class C extends n.Disposable{constructor(k,M,A,H,$,N,B,D,T){super(),this._terminal=k,this._characterJoinerService=M,this._charSizeService=A,this._coreBrowserService=H,this._coreService=$,this._decorationService=N,this._optionsService=B,this._themeService=D,this._cursorBlinkStateManager=new n.MutableDisposable,this._charAtlasDisposable=this.register(new n.MutableDisposable),this._observerDisposable=this.register(new n.MutableDisposable),this._model=new v.RenderModel,this._workCell=new l.CellData,this._workCell2=new l.CellData,this._rectangleRenderer=this.register(new n.MutableDisposable),this._glyphRenderer=this.register(new n.MutableDisposable),this._onChangeTextureAtlas=this.register(new h.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new h.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new h.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new h.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new h.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new _.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new L.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,B,this._themeService)],this.dimensions=(0,S.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(B.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const I={antialias:!1,depth:!1,preserveDrawingBuffer:T};if(this._gl=this._canvas.getContext("webgl2",I),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",F=>{console.log("webglcontextlost event received"),F.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(F)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",F=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(F,z)=>this._setCanvasDevicePixelDimensions(F,z)),this.register(this._coreBrowserService.onWindowChange(F=>{this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,F,(z,U)=>this._setCanvasDevicePixelDimensions(z,U))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,n.toDisposable)(()=>{for(const F of this._renderLayers)F.dispose();this._canvas.parentElement?.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(k,M){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const A of this._renderLayers)A.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const k of this._renderLayers)k.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(const k of this._renderLayers)k.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(k,M,A){for(const H of this._renderLayers)H.handleSelectionChanged(this._terminal,k,M,A);this._model.selection.update(this._core,k,M,A),this._requestRedrawViewport()}handleCursorMove(){for(const k of this._renderLayers)k.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new x.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new m.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const k=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==k&&(this._onChangeTextureAtlas.fire(k.pages[0].canvas),this._charAtlasDisposable.value=(0,n.getDisposeArrayDisposable)([(0,h.forwardEvent)(k.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,h.forwardEvent)(k.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=k,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(k){this._model.clear(),k&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(k){return-1}deregisterCharacterJoiner(k){return!1}renderRows(k,M){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const A of this._renderLayers)A.handleGridChanged(this._terminal,k,M);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(k,M),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(k,M){const A=this._core;let H,$,N,B,D,T,I,F,z,U,Z,J,j,O,W=this._workCell;k=E(k,A.rows-1,0),M=E(M,A.rows-1,0);const K=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Q=K-A.buffer.ydisp,X=Math.min(this._terminal.buffer.active.cursorX,A.cols-1);let ae=-1;const Y=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ue=!1;for($=k;$<=M;$++)for(N=$+A.buffer.ydisp,B=A.buffer.lines.get(N),this._model.lineLengths[$]=0,D=this._characterJoinerService.getJoinedCharacters(N),j=0;j<A.cols;j++)if(H=this._cellColorResolver.result.bg,B.loadCell(j,W),j===0&&(H=this._cellColorResolver.result.bg),T=!1,I=j,D.length>0&&j===D[0][0]&&(T=!0,F=D.shift(),W=new b(W,B.translateToString(!0,F[0],F[1]),F[1]-F[0]),I=F[1]-1),z=W.getChars(),U=W.getCode(),J=($*A.cols+j)*v.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(W,j,N,this.dimensions.device.cell.width),Y&&N===K&&(j===X&&(this._model.cursor={x:X,y:Q,width:W.getWidth(),style:this._coreBrowserService.isFocused?A.options.cursorStyle||"block":A.options.cursorInactiveStyle,cursorWidth:A.options.cursorWidth,dpr:this._devicePixelRatio},ae=X+W.getWidth()-1),j>=X&&j<=ae&&(this._coreBrowserService.isFocused&&(A.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&A.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),U!==c.NULL_CELL_CODE&&(this._model.lineLengths[$]=j+1),(this._model.cells[J]!==U||this._model.cells[J+v.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[J+v.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[J+v.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ue=!0,z.length>1&&(U|=v.COMBINED_CHAR_BIT_MASK),this._model.cells[J]=U,this._model.cells[J+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[J+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[J+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,Z=W.getWidth(),this._glyphRenderer.value.updateCell(j,$,U,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,z,Z,H),T))for(W=this._workCell,j++;j<I;j++)O=($*A.cols+j)*v.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(j,$,c.NULL_CELL_CODE,0,0,0,c.NULL_CELL_CHAR,0,0),this._model.cells[O]=c.NULL_CELL_CODE,this._model.cells[O+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ue&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(k,M){this._canvas.width===k&&this._canvas.height===M||(this._canvas.width=k,this._canvas.height=M,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const k=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:k,end:k})}}i.WebglRenderer=C;class b extends a.AttributeData{constructor(k,M,A){super(),this.content=0,this.combinedData="",this.fg=k.fg,this.bg=k.bg,this.combinedData=M,this._width=A}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(k){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(R,k,M=0){return Math.max(Math.min(R,k),M)}i.JoinedCellData=b},381:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=o(374);function _(u,p,w){const S=(0,f.throwIfFalsy)(u.createShader(p));if(u.shaderSource(S,w),u.compileShader(S),u.getShaderParameter(S,u.COMPILE_STATUS))return S;console.error(u.getShaderInfoLog(S)),u.deleteShader(S)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(u,p,w){const S=(0,f.throwIfFalsy)(u.createProgram());if(u.attachShader(S,(0,f.throwIfFalsy)(_(u,u.VERTEX_SHADER,p))),u.attachShader(S,(0,f.throwIfFalsy)(_(u,u.FRAGMENT_SHADER,w))),u.linkProgram(S),u.getProgramParameter(S,u.LINK_STATUS))return S;console.error(u.getProgramInfoLog(S)),u.deleteProgram(S)},i.createShader=_,i.expandFloat32Array=function(u,p){const w=Math.min(2*u.length,p),S=new Float32Array(w);for(let h=0;h<u.length;h++)S[h]=u[h];return S},i.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(627),_=o(237),u=o(374),p=o(859);class w extends p.Disposable{constructor(h,n,a,l,c,m,x,v){super(),this._container=n,this._alpha=c,this._coreBrowserService=m,this._optionsService=x,this._themeService=v,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${a}-layer`),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(h,L),this.reset(h)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(h){}handleFocus(h){}handleCursorMove(h){}handleGridChanged(h,n,a){}handleSelectionChanged(h,n,a,l=!1){}_setTransparency(h,n){if(n===this._alpha)return;const a=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(h,this._themeService.colors),this.handleGridChanged(h,0,h.rows-1)}_refreshCharAtlas(h,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(h,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(h,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(h,this._themeService.colors)}_fillBottomLineAtCells(h,n,a=1){this._ctx.fillRect(h*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,a*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(h,n,a,l){this._alpha?this._ctx.clearRect(h*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(h*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight))}_fillCharTrueColor(h,n,a,l){this._ctx.font=this._getFont(h,!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipCell(a,l,n.getWidth()),this._ctx.fillText(n.getChars(),a*this._deviceCellWidth+this._deviceCharLeft,l*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(h,n,a){this._ctx.beginPath(),this._ctx.rect(h*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(h,n,a){return`${a?"italic":""} ${n?h.options.fontWeightBold:h.options.fontWeight} ${h.options.fontSize*this._coreBrowserService.dpr}px ${h.options.fontFamily}`}}i.BaseRenderLayer=w},733:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),u=o(592);class p extends u.BaseRenderLayer{constructor(S,h,n,a,l,c,m){super(n,S,"link",h,!0,l,c,m),this.register(a.onShowLinkUnderline(x=>this._handleShowLinkUnderline(x))),this.register(a.onHideLinkUnderline(x=>this._handleHideLinkUnderline(x)))}resize(S,h){super.resize(S,h),this._state=void 0}reset(S){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const S=this._state.y2-this._state.y1-1;S>0&&this._clearCells(0,this._state.y1+1,this._state.cols,S),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(S){if(S.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:S.fg!==void 0&&(0,f.is256Color)(S.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[S.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,S.y1===S.y2)this._fillBottomLineAtCells(S.x1,S.y1,S.x2-S.x1);else{this._fillBottomLineAtCells(S.x1,S.y1,S.cols-S.x1);for(let h=S.y1+1;h<S.y2;h++)this._fillBottomLineAtCells(0,h,S.cols);this._fillBottomLineAtCells(0,S.y2,S.x2)}this._state=S}_handleHideLinkUnderline(S){this._clearCurrentLink()}}i.LinkRenderLayer=p},820:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,u){o.addEventListener(f,_,u);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,u))}}}},274:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),u=o(374);let p,w=0,S=0,h=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(c,m,x,v,L,C){this._terminal=c,this._optionService=m,this._selectionRenderModel=x,this._decorationService=v,this._coreBrowserService=L,this._themeService=C,this.result={fg:0,bg:0,ext:0}}resolve(c,m,x,v){if(this.result.bg=c.bg,this.result.fg=c.fg,this.result.ext=268435456&c.bg?c.extended.ext:0,S=0,w=0,n=!1,h=!1,a=!1,p=this._themeService.colors,l=0,c.getCode()!==f.NULL_CELL_CODE&&c.extended.underlineStyle===4){const L=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*v%(2*Math.round(L))}if(this._decorationService.forEachDecorationAtCell(m,x,"bottom",L=>{L.backgroundColorRGB&&(S=L.backgroundColorRGB.rgba>>8&16777215,n=!0),L.foregroundColorRGB&&(w=L.foregroundColorRGB.rgba>>8&16777215,h=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,x),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,h=!0),(0,u.treatGlyphAsBackgroundColor)(c.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}h=!0}}this._decorationService.forEachDecorationAtCell(m,x,"top",L=>{L.backgroundColorRGB&&(S=L.backgroundColorRGB.rgba>>8&16777215,n=!0),L.foregroundColorRGB&&(w=L.foregroundColorRGB.rgba>>8&16777215,h=!0)}),n&&(S=a?-16777216&c.bg&-134217729|S|50331648:-16777216&c.bg|S|50331648),h&&(w=-16777216&c.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!h&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,h=!0),!n&&h&&(S=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?S:this.result.bg,this.result.fg=h?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),u=[];i.acquireTextureAtlas=function(p,w,S,h,n,a,l,c){const m=(0,_.generateConfig)(h,n,a,l,w,S,c);for(let L=0;L<u.length;L++){const C=u[L],b=C.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(C.config,m))return C.atlas;C.ownedBy.length===1?(C.atlas.dispose(),u.splice(L,1)):C.ownedBy.splice(b,1);break}}for(let L=0;L<u.length;L++){const C=u[L];if((0,_.configEquals)(C.config,m))return C.ownedBy.push(p),C.atlas}const x=p._core,v={atlas:new f.TextureAtlas(document,m,x.unicodeService),config:m,ownedBy:[p]};return u.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<u.length;w++){const S=u[w].ownedBy.indexOf(p);if(S!==-1){u[w].ownedBy.length===1?(u[w].atlas.dispose(),u.splice(w,1)):u[w].ownedBy.splice(S,1);break}}}},197:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,u,p,w,S,h,n){const a={foreground:h.foreground,background:h.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:h.ansi.slice(),contrastCache:h.contrastCache,halfContrastCache:h.halfContrastCache};return{customGlyphs:S.customGlyphs,devicePixelRatio:n,letterSpacing:S.letterSpacing,lineHeight:S.lineHeight,deviceCellWidth:_,deviceCellHeight:u,deviceCharWidth:p,deviceCharHeight:w,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,drawBoldTextInBrightColors:S.drawBoldTextInBrightColors,minimumContrastRatio:S.minimumContrastRatio,colors:a}},i.configEquals=function(_,u){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==u.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===u.devicePixelRatio&&_.customGlyphs===u.customGlyphs&&_.lineHeight===u.lineHeight&&_.letterSpacing===u.letterSpacing&&_.fontFamily===u.fontFamily&&_.fontSize===u.fontSize&&_.fontWeight===u.fontWeight&&_.fontWeightBold===u.fontWeightBold&&_.allowTransparency===u.allowTransparency&&_.deviceCharWidth===u.deviceCharWidth&&_.deviceCharHeight===u.deviceCharHeight&&_.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&_.minimumContrastRatio===u.minimumContrastRatio&&_.colors.foreground.rgba===u.colors.foreground.rgba&&_.colors.background.rgba===u.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(h,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1`},"":{1:(h,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M${.5-h},1 L${.5-h},.5 L1,.5 M${.5+h},.5 L${.5+h},1`},"":{1:(h,n)=>`M1,${.5-n} L${.5-h},${.5-n} L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1`},"":{1:(h,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(h,n)=>`M${.5+h},1 L${.5+h},.5 L0,.5 M${.5-h},.5 L${.5-h},1`},"":{1:(h,n)=>`M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M0,${.5-n} L${.5+h},${.5-n} L${.5+h},1`},"":{1:(h,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(h,n)=>`M1,.5 L${.5-h},.5 L${.5-h},0 M${.5+h},.5 L${.5+h},0`},"":{1:(h,n)=>`M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0 M1,${.5+n} L${.5-h},${.5+n} L${.5-h},0`},"":{1:(h,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(h,n)=>`M0,.5 L${.5+h},.5 L${.5+h},0 M${.5-h},.5 L${.5-h},0`},"":{1:(h,n)=>`M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0 M0,${.5+n} L${.5+h},${.5+n} L${.5+h},0`},"":{1:(h,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1 M${.5+h},.5 L1,.5`},"":{1:(h,n)=>`M${.5-h},0 L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1 M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0`},"":{1:(h,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(h,n)=>`M0,.5 L${.5-h},.5 M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1`},"":{1:(h,n)=>`M${.5+h},0 L${.5+h},1 M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0`},"":{1:(h,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(h,n)=>`M0,.5 L1,.5 M${.5-h},.5 L${.5-h},1 M${.5+h},.5 L${.5+h},1`},"":{1:(h,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1`},"":{1:(h,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M0,.5 L1,.5 M${.5-h},.5 L${.5-h},0 M${.5+h},.5 L${.5+h},0`},"":{1:(h,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0 M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0`},"":{1:(h,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M0,.5 L1,.5 M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1`},"":{1:(h,n)=>`M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1 M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0 M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(h,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(h,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(h,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(h,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(h,n,a,l,c,m,x,v){const L=i.blockElementDefinitions[n];if(L)return function(R,k,M,A,H,$){for(let N=0;N<k.length;N++){const B=k[N],D=H/8,T=$/8;R.fillRect(M+B.x*D,A+B.y*T,B.w*D,B.h*T)}}(h,L,a,l,c,m),!0;const C=_[n];if(C)return function(R,k,M,A,H,$){let N=u.get(k);N||(N=new Map,u.set(k,N));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let D=N.get(B);if(!D){const T=k[0].length,I=k.length,F=R.canvas.ownerDocument.createElement("canvas");F.width=T,F.height=I;const z=(0,f.throwIfFalsy)(F.getContext("2d")),U=new ImageData(T,I);let Z,J,j,O;if(B.startsWith("#"))Z=parseInt(B.slice(1,3),16),J=parseInt(B.slice(3,5),16),j=parseInt(B.slice(5,7),16),O=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[Z,J,j,O]=B.substring(5,B.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<I;W++)for(let K=0;K<T;K++)U.data[4*(W*T+K)]=Z,U.data[4*(W*T+K)+1]=J,U.data[4*(W*T+K)+2]=j,U.data[4*(W*T+K)+3]=k[W][K]*(255*O);z.putImageData(U,0,0),D=(0,f.throwIfFalsy)(R.createPattern(F,null)),N.set(B,D)}R.fillStyle=D,R.fillRect(M,A,H,$)}(h,C,a,l,c,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(R,k,M,A,H,$,N){R.strokeStyle=R.fillStyle;for(const[B,D]of Object.entries(k)){let T;R.beginPath(),R.lineWidth=N*Number.parseInt(B),T=typeof D=="function"?D(.15,.15/$*H):D;for(const I of T.split(" ")){const F=I[0],z=w[F];if(!z){console.error(`Could not find drawing instructions for "${F}"`);continue}const U=I.substring(1).split(",");U[0]&&U[1]&&z(R,S(U,H,$,M,A,!0,N))}R.stroke(),R.closePath()}}(h,b,a,l,c,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,M,A,H,$,N,B){const D=new Path2D;D.rect(M,A,H,$),R.clip(D),R.beginPath();const T=N/12;R.lineWidth=B*T;for(const I of k.d.split(" ")){const F=I[0],z=w[F];if(!z){console.error(`Could not find drawing instructions for "${F}"`);continue}const U=I.substring(1).split(",");U[0]&&U[1]&&z(R,S(U,H,$,M,A,!1,B,(k.leftPadding??0)*(T/2),(k.rightPadding??0)*(T/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(h,E,a,l,c,m,x,v),!0)};const u=new Map;function p(h,n,a=0){return Math.max(Math.min(h,n),a)}const w={C:(h,n)=>h.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(h,n)=>h.lineTo(n[0],n[1]),M:(h,n)=>h.moveTo(n[0],n[1])};function S(h,n,a,l,c,m,x,v=0,L=0){const C=h.map(b=>parseFloat(b)||parseInt(b));if(C.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<C.length;b+=2)C[b]*=n-v*x-L*x,m&&C[b]!==0&&(C[b]=p(Math.round(C[b]+.5)-.5,n,0)),C[b]+=l+v*x;for(let b=1;b<C.length;b+=2)C[b]*=a,m&&C[b]!==0&&(C[b]=p(Math.round(C[b]+.5)-.5,a,0)),C[b]+=c;return C}},56:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,u,p){let w=new u.ResizeObserver(S=>{const h=S.find(l=>l.target===_);if(!h)return;if(!("devicePixelContentBoxSize"in h))return w?.disconnect(),void(w=void 0);const n=h.devicePixelContentBoxSize[0].inlineSize,a=h.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(y,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,u,p,w){return u===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(u){return 9472<=u&&u<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,u,p=0){return(_-(2*Math.round(u)-p))%(2*Math.round(u))}},296:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,u,p,w=!1){if(this.selectionStart=u,this.selectionEnd=p,!u||!p||u[0]===p[0]&&u[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,h=u[1]-S,n=p[1]-S,a=Math.max(h,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=h,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=u[0],this.endCol=p[0])}isCellSelected(_,u,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&p>=this.viewportCappedStartRow&&u<this.endCol&&p<=this.viewportCappedEndRow:u<this.startCol&&p>=this.viewportCappedStartRow&&u>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),u=o(374),p=o(160),w=o(345),S=o(485),h=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let c;class m{get pages(){return this._pages}constructor(b,E,R){this._document=b,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new S.FourKeyMap,this._cacheMapCombined=new S.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=L(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,u.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new h.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(N=>2*N.canvas.width<=(m.maxTextureSize||4096)).sort((N,B)=>B.canvas.width!==N.canvas.width?B.canvas.width-N.canvas.width:B.percentageUsed-N.percentageUsed);let R=-1,k=0;for(let N=0;N<E.length;N++)if(E[N].canvas.width!==k)R=N,k=E[N].canvas.width;else if(N-R==3)break;const M=E.slice(R,R+4),A=M.map(N=>N.glyphs[0].texturePage).sort((N,B)=>N>B?1:-1),H=this.pages.length-M.length,$=this._mergePages(M,H);$.version++;for(let N=A.length-1;N>=0;N--)this._deletePage(A[N]);this.pages.push($),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)}const b=new x(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const R=2*b[0].canvas.width,k=new x(this._document,R,b);for(const[M,A]of b.entries()){const H=M*A.canvas.width%R,$=Math.floor(M/2)*A.canvas.height;k.ctx.drawImage(A.canvas,H,$);for(const B of A.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=H,B.texturePosition.y+=$,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(A.canvas);const N=this._activePages.indexOf(A);N!==-1&&this._activePages.splice(N,1)}return k}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(b,E,R,k,M){return this._getFromCacheMap(this._cacheMapCombined,b,E,R,k,M)}getRasterizedGlyph(b,E,R,k,M){return this._getFromCacheMap(this._cacheMap,b,E,R,k,M)}_getFromCacheMap(b,E,R,k,M,A=!1){return c=b.get(E,R,k,M),c||(c=this._drawToCache(E,R,k,M,A),b.set(E,R,k,M,c)),c}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let M;switch(b){case 16777216:case 33554432:M=this._getColorFromAnsiIndex(E);break;case 50331648:const A=n.AttributeData.toColorRGB(E);M=p.channels.toColor(A[0],A[1],A[2]);break;default:M=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return M}_getForegroundColor(b,E,R,k,M,A,H,$,N,B){const D=this._getMinimumContrastColor(b,E,R,k,M,A,H,N,$,B);if(D)return D;let T;switch(M){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&N&&A<8&&(A+=8),T=this._getColorFromAnsiIndex(A);break;case 50331648:const I=n.AttributeData.toColorRGB(A);T=p.channels.toColor(I[0],I[1],I[2]);break;default:T=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(T=p.color.opaque(T)),$&&(T=p.color.multiplyOpacity(T,f.DIM_OPACITY)),T}_resolveBackgroundRgba(b,E,R){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,R,k){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,R,k,M,A,H,$,N,B){if(this._config.minimumContrastRatio===1||B)return;const D=this._getContrastCache(N),T=D.getColor(b,k);if(T!==void 0)return T||void 0;const I=this._resolveBackgroundRgba(E,R,H),F=this._resolveForegroundRgba(M,A,H,$),z=p.rgba.ensureContrastRatio(I,F,this._config.minimumContrastRatio/(N?2:1));if(!z)return void D.setColor(b,k,null);const U=p.channels.toColor(z>>24&255,z>>16&255,z>>8&255);return D.setColor(b,k,U),U}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,R,k,M=!1){const A=typeof b=="number"?String.fromCharCode(b):b,H=Math.min(this._config.deviceCellWidth*Math.max(A.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const $=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<$&&(this._tmpCanvas.height=$),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return l;const N=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),D=!!this._workAttributeData.isDim(),T=!!this._workAttributeData.isItalic(),I=!!this._workAttributeData.isUnderline(),F=!!this._workAttributeData.isStrikethrough(),z=!!this._workAttributeData.isOverline();let U=this._workAttributeData.getFgColor(),Z=this._workAttributeData.getFgColorMode(),J=this._workAttributeData.getBgColor(),j=this._workAttributeData.getBgColorMode();if(B){const G=U;U=J,J=G;const se=Z;Z=j,j=se}const O=this._getBackgroundColor(j,J,B,D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const W=N?this._config.fontWeightBold:this._config.fontWeight,K=T?"italic":"";this._tmpCtx.font=`${K} ${W} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Q=A.length===1&&(0,u.isPowerlineGlyph)(A.charCodeAt(0)),X=A.length===1&&(0,u.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),ae=this._getForegroundColor(E,j,J,R,Z,U,B,D,N,(0,u.treatGlyphAsBackgroundColor)(A.charCodeAt(0)));this._tmpCtx.fillStyle=ae.css;const Y=X?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,A,Y,Y,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let me,ne=!Q;if(me=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),I){this._tmpCtx.save();const G=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=G%2==1?.5:0;if(this._tmpCtx.lineWidth=G,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ne=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ne=!1;let _e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&_e<8&&(_e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(_e).css}this._tmpCtx.beginPath();const de=Y,ce=Math.ceil(Y+this._config.deviceCharHeight)-se-(M?2*G:0),qe=ce+G,Re=ce+2*G;let Me=this._workAttributeData.getUnderlineVariantOffset();for(let _e=0;_e<me;_e++){this._tmpCtx.save();const le=de+_e*this._config.deviceCellWidth,oe=de+(_e+1)*this._config.deviceCellWidth,Bt=le+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce),this._tmpCtx.moveTo(le,Re),this._tmpCtx.lineTo(oe,Re);break;case 3:const Ot=G<=1?Re:Math.ceil(Y+this._config.deviceCharHeight-G/2)-se,Pt=G<=1?ce:Math.ceil(Y+this._config.deviceCharHeight+G/2)-se,Ci=new Path2D;Ci.rect(le,ce,this._config.deviceCellWidth,Re-ce),this._tmpCtx.clip(Ci),this._tmpCtx.moveTo(le-this._config.deviceCellWidth/2,qe),this._tmpCtx.bezierCurveTo(le-this._config.deviceCellWidth/2,Pt,le,Pt,le,qe),this._tmpCtx.bezierCurveTo(le,Ot,Bt,Ot,Bt,qe),this._tmpCtx.bezierCurveTo(Bt,Pt,oe,Pt,oe,qe),this._tmpCtx.bezierCurveTo(oe,Ot,oe+this._config.deviceCellWidth/2,Ot,oe+this._config.deviceCellWidth/2,qe);break;case 4:const It=Me===0?0:Me>=G?2*G-Me:G-Me;Me>=G||It===0?(this._tmpCtx.setLineDash([Math.round(G),Math.round(G)]),this._tmpCtx.moveTo(le+It,ce),this._tmpCtx.lineTo(oe,ce)):(this._tmpCtx.setLineDash([Math.round(G),Math.round(G)]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(le+It,ce),this._tmpCtx.moveTo(le+It+G,ce),this._tmpCtx.lineTo(oe,ce)),Me=(0,u.computeNextVariantOffset)(oe-le,G,Me);break;case 5:const io=.6,so=.3,Cr=oe-le,yi=Math.floor(io*Cr),Si=Math.floor(so*Cr),no=Cr-yi-Si;this._tmpCtx.setLineDash([yi,Si,no]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce);break;default:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const _e=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in _e&&_e.actualBoundingBoxDescent>0){this._tmpCtx.save();const le=new Path2D;le.rect(de,ce-Math.ceil(G/2),this._config.deviceCellWidth*me,Re-ce+Math.ceil(G/2)),this._tmpCtx.clip(le),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(A,Y,Y+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(z){const G=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=G%2==1?.5:0;this._tmpCtx.lineWidth=G,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Y,Y+se),this._tmpCtx.lineTo(Y+this._config.deviceCharWidth*me,Y+se),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(A,Y,Y+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let G=v(this._tmpCtx.getImageData(Y,Y,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ae,ne);if(G)for(let se=1;se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,Y,Y+this._config.deviceCharHeight-se),G=v(this._tmpCtx.getImageData(Y,Y,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ae,ne),G);se++);}if(F){const G=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=G,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Y,Y+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.lineTo(Y+this._config.deviceCharWidth*me,Y+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ke=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Tt;if(Tt=this._config.allowTransparency?function(G){for(let se=0;se<G.data.length;se+=4)if(G.data[se+3]>0)return!1;return!0}(Ke):v(Ke,O,ae,ne),Tt)return l;const ie=this._findGlyphBoundingBox(Ke,this._workBoundingBox,H,X,ue,Y);let ee,te;for(;;){if(this._activePages.length===0){const G=this._createNewPage();ee=G,te=G.currentRow,te.height=ie.size.y;break}ee=this._activePages[this._activePages.length-1],te=ee.currentRow;for(const G of this._activePages)ie.size.y<=G.currentRow.height&&(ee=G,te=G.currentRow);for(let G=this._activePages.length-1;G>=0;G--)for(const se of this._activePages[G].fixedRows)se.height<=te.height&&ie.size.y<=se.height&&(ee=this._activePages[G],te=se);if(te.y+ie.size.y>=ee.canvas.height||te.height>ie.size.y+2){let G=!1;if(ee.currentRow.y+ee.currentRow.height+ie.size.y>=ee.canvas.height){let se;for(const de of this._activePages)if(de.currentRow.y+de.currentRow.height+ie.size.y<de.canvas.height){se=de;break}if(se)ee=se;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&te.y+ie.size.y<=ee.canvas.height&&te.height>=ie.size.y&&te.x+ie.size.x<=ee.canvas.width)G=!0;else{const de=this._createNewPage();ee=de,te=de.currentRow,te.height=ie.size.y,G=!0}}G||(ee.currentRow.height>0&&ee.fixedRows.push(ee.currentRow),te={x:0,y:ee.currentRow.y+ee.currentRow.height,height:ie.size.y},ee.fixedRows.push(te),ee.currentRow={x:0,y:te.y+te.height,height:0})}if(te.x+ie.size.x<=ee.canvas.width)break;te===ee.currentRow?(te.x=0,te.y+=te.height,te.height=0):ee.fixedRows.splice(ee.fixedRows.indexOf(te),1)}return ie.texturePage=this._pages.indexOf(ee),ie.texturePosition.x=te.x,ie.texturePosition.y=te.y,ie.texturePositionClipSpace.x=te.x/ee.canvas.width,ie.texturePositionClipSpace.y=te.y/ee.canvas.height,ie.sizeClipSpace.x/=ee.canvas.width,ie.sizeClipSpace.y/=ee.canvas.height,te.height=Math.max(te.height,ie.size.y),te.x+=ie.size.x,ee.ctx.putImageData(Ke,ie.texturePosition.x-this._workBoundingBox.left,ie.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ie.size.x,ie.size.y),ee.addGlyph(ie),ee.version++,ie}_findGlyphBoundingBox(b,E,R,k,M,A){E.top=0;const H=k?this._config.deviceCellHeight:this._tmpCanvas.height,$=k?this._config.deviceCellWidth:R;let N=!1;for(let B=0;B<H;B++){for(let D=0;D<$;D++){const T=B*this._tmpCanvas.width*4+4*D+3;if(b.data[T]!==0){E.top=B,N=!0;break}}if(N)break}E.left=0,N=!1;for(let B=0;B<A+$;B++){for(let D=0;D<H;D++){const T=D*this._tmpCanvas.width*4+4*B+3;if(b.data[T]!==0){E.left=B,N=!0;break}}if(N)break}E.right=$,N=!1;for(let B=A+$-1;B>=A;B--){for(let D=0;D<H;D++){const T=D*this._tmpCanvas.width*4+4*B+3;if(b.data[T]!==0){E.right=B,N=!0;break}}if(N)break}E.bottom=H,N=!1;for(let B=H-1;B>=0;B--){for(let D=0;D<$;D++){const T=B*this._tmpCanvas.width*4+4*D+3;if(b.data[T]!==0){E.bottom=B,N=!0;break}}if(N)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+A+(k||M?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+A+(k||M?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class x{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=L(b,E,E),this.ctx=(0,u.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(C,b,E,R){const k=b.rgba>>>24,M=b.rgba>>>16&255,A=b.rgba>>>8&255,H=E.rgba>>>24,$=E.rgba>>>16&255,N=E.rgba>>>8&255,B=Math.floor((Math.abs(k-H)+Math.abs(M-$)+Math.abs(A-N))/12);let D=!0;for(let T=0;T<C.data.length;T+=4)C.data[T]===k&&C.data[T+1]===M&&C.data[T+2]===A||R&&Math.abs(C.data[T]-k)+Math.abs(C.data[T+1]-M)+Math.abs(C.data[T+2]-A)<B?C.data[T+3]=0:D=!1;return D}function L(C,b,E){const R=C.createElement("canvas");return R.width=b,R.height=E,R}},160:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,u=0;var p,w,S,h,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,x,v,L){return L!==void 0?`#${a(m)}${a(x)}${a(v)}${a(L)}`:`#${a(m)}${a(x)}${a(v)}`},c.toRgba=function(m,x,v,L=255){return(m<<24|x<<16|v<<8|L)>>>0},c.toColor=function(m,x,v,L){return{css:c.toCss(m,x,v,L),rgba:c.toRgba(m,x,v,L)}}}(p||(i.channels=p={})),function(c){function m(x,v){return u=Math.round(255*v),[o,f,_]=n.toChannels(x.rgba),{css:p.toCss(o,f,_,u),rgba:p.toRgba(o,f,_,u)}}c.blend=function(x,v){if(u=(255&v.rgba)/255,u===1)return{css:v.css,rgba:v.rgba};const L=v.rgba>>24&255,C=v.rgba>>16&255,b=v.rgba>>8&255,E=x.rgba>>24&255,R=x.rgba>>16&255,k=x.rgba>>8&255;return o=E+Math.round((L-E)*u),f=R+Math.round((C-R)*u),_=k+Math.round((b-k)*u),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(x){return(255&x.rgba)==255},c.ensureContrastRatio=function(x,v,L){const C=n.ensureContrastRatio(x.rgba,v.rgba,L);if(C)return p.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(x){const v=(255|x.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(x,v){return u=255&x.rgba,m(x,u*v/255)},c.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}}(w||(i.color=w={})),function(c){let m,x;try{const v=document.createElement("canvas");v.width=1,v.height=1;const L=v.getContext("2d",{willReadFrequently:!0});L&&(m=L,m.globalCompositeOperation="copy",x=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),u=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,u);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const L=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return o=parseInt(L[1]),f=parseInt(L[2]),_=parseInt(L[3]),u=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),p.toColor(o,f,_,u);if(!m||!x)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=x,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,u]=m.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,u),css:v}}}(S||(i.css=S={})),function(c){function m(x,v,L){const C=x/255,b=v/255,E=L/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(x){return m(x>>16&255,x>>8&255,255&x)},c.relativeLuminance2=m}(h||(i.rgb=h={})),function(c){function m(v,L,C){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=L>>24&255,M=L>>16&255,A=L>>8&255,H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));for(;H<C&&(k>0||M>0||A>0);)k-=Math.max(0,Math.ceil(.1*k)),M-=Math.max(0,Math.ceil(.1*M)),A-=Math.max(0,Math.ceil(.1*A)),H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));return(k<<24|M<<16|A<<8|255)>>>0}function x(v,L,C){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=L>>24&255,M=L>>16&255,A=L>>8&255,H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));for(;H<C&&(k<255||M<255||A<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),M=Math.min(255,M+Math.ceil(.1*(255-M))),A=Math.min(255,A+Math.ceil(.1*(255-A))),H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));return(k<<24|M<<16|A<<8|255)>>>0}c.blend=function(v,L){if(u=(255&L)/255,u===1)return L;const C=L>>24&255,b=L>>16&255,E=L>>8&255,R=v>>24&255,k=v>>16&255,M=v>>8&255;return o=R+Math.round((C-R)*u),f=k+Math.round((b-k)*u),_=M+Math.round((E-M)*u),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,L,C){const b=h.relativeLuminance(v>>8),E=h.relativeLuminance(L>>8);if(l(b,E)<C){if(E<b){const M=m(v,L,C),A=l(b,h.relativeLuminance(M>>8));if(A<C){const H=x(v,L,C);return A>l(b,h.relativeLuminance(H>>8))?M:H}return M}const R=x(v,L,C),k=l(b,h.relativeLuminance(R>>8));if(k<C){const M=m(v,L,C);return k>l(b,h.relativeLuminance(M>>8))?R:M}return R}},c.reduceLuminance=m,c.increaseLuminance=x,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let u=0;u<this._listeners.length;u++)_.push(this._listeners[u]);for(let u=0;u<_.length;u++)_[u].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(y,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,u,p){this._data[_]||(this._data[_]={}),this._data[_][u]=p}get(_,u){return this._data[_]?this._data[_][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,u,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(u,p,w)}get(f,_,u,p){return this._data.get(f,_)?.get(u,p)}clear(){this._data.clear()}}},399:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,h=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),h=Math.max(S,h),a=w.timeRemaining(),1.5*h>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class u extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){const u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),u=o(147);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const h=new p;return h.setFromCharData(S),h}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let h=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)h=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:h=!0}else h=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;h&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let u="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,u+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):u+=String.fromCharCode(w)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let u=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[u++]=1024*(this._interim-55296)+w-56320+65536:(f[u++]=this._interim,f[u++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,u;const h=o.charCodeAt(w);56320<=h&&h<=57343?f[u++]=1024*(S-55296)+h-56320+65536:(f[u++]=S,f[u++]=h)}else S!==65279&&(f[u++]=S)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let u,p,w,S,h=0,n=0,a=0;if(this.interim[0]){let m=!1,x=this.interim[0];x&=(224&x)==192?31:(240&x)==224?15:7;let v,L=0;for(;(v=63&this.interim[++L])&&L<4;)x<<=6,x|=v;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=C-L;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[L++]=v,x<<=6,x|=63&v}m||(C===2?x<128?a--:f[h++]=x:C===3?x<2048||x>=55296&&x<=57343||x===65279||(f[h++]=x):x<65536||x>1114111||(f[h++]=x)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(u=o[c])||128&(p=o[c+1])||128&(w=o[c+2])||128&(S=o[c+3]));)f[h++]=u,f[h++]=p,f[h++]=w,f[h++]=S,c+=4;if(u=o[c++],u<128)f[h++]=u;else if((224&u)==192){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&u)<<6|63&p,n<128){c--;continue}f[h++]=n}else if((240&u)==224){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,h;if(w=o[c++],(192&w)!=128){c--;continue}if(n=(15&u)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[h++]=n}else if((248&u)==240){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,h;if(w=o[c++],(192&w)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=w,h;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[h++]=n}}return h}}},776:function(y,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,x=arguments.length,v=x<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var L=n.length-1;L>=0;L--)(m=n[L])&&(v=(x<3?m(v):x>3?m(a,l,v):m(a,l))||v);return x>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const u=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,h=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=h=f([_(0,p.IOptionsService)],h),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const x=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,x),x}}},726:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const u=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(h,n,a){n[o]===n?n[f].push({id:h,index:a}):(n[f]=[{id:h,index:a}],n[o]=n)})(u,p,S)};return u.toString=()=>_,i.serviceRegistry.set(_,u),u}},97:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(y){var i=s[y];if(i!==void 0)return i.exports;var o=s[y]={exports:{}};return r[y].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var y=g;Object.defineProperty(y,"__esModule",{value:!0}),y.WebglAddon=void 0;const i=d(345),o=d(859),f=d(399),_=d(666),u=d(776);class p extends o.Disposable{constructor(S){if(f.isSafari&&(0,f.getSafariVersion)()<16){const h={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",h))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=S,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(S){const h=S._core;if(!S.element)return void this.register(h.onWillOpen(()=>this.activate(S)));this._terminal=S;const n=h.coreService,a=h.optionsService,l=h,c=l._renderService,m=l._characterJoinerService,x=l._charSizeService,v=l._coreBrowserService,L=l._decorationService,C=l._logService,b=l._themeService;(0,u.setTraceLogger)(C),this._renderer=this.register(new _.WebglRenderer(S,m,x,v,n,L,a,b,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),c.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(S.cols,S.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}y.WebglAddon=p})(),g})())})(Lf);var $m=Lf.exports,Ef={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={903:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(274),_=o(627),u=o(237),p=o(860),w=o(374),S=o(296),h=o(345),n=o(859),a=o(399),l=o(855);class c extends n.Disposable{get canvas(){return this._canvas}get cacheCanvas(){return this._charAtlas?.pages[0].canvas}constructor(v,L,C,b,E,R,k,M,A,H){super(),this._terminal=v,this._container=L,this._alpha=E,this._themeService=R,this._bufferService=k,this._optionsService=M,this._decorationService=A,this._coreBrowserService=H,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,S.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new n.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new h.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new f.CellColorResolver(this._terminal,this._optionsService,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${C}-layer`),this._canvas.style.zIndex=b.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors($=>{this._refreshCharAtlas($),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,n.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,w.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(v,L){}handleSelectionChanged(v,L,C=!1){this._selectionModel.update(this._terminal._core,v,L,C)}_setTransparency(v){if(v===this._alpha)return;const L=this._canvas;this._alpha=v,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,L),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(v){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,_.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,v,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,h.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let L=0;L<this._charAtlas.pages.length;L++)this._bitmapGenerator[L]=new m(this._charAtlas.pages[L].canvas)}}resize(v){this._deviceCellWidth=v.device.cell.width,this._deviceCellHeight=v.device.cell.height,this._deviceCharWidth=v.device.char.width,this._deviceCharHeight=v.device.char.height,this._deviceCharLeft=v.device.char.left,this._deviceCharTop=v.device.char.top,this._canvas.width=v.device.canvas.width,this._canvas.height=v.device.canvas.height,this._canvas.style.width=`${v.css.canvas.width}px`,this._canvas.style.height=`${v.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){this._charAtlas?.clearTexture()}_fillCells(v,L,C,b){this._ctx.fillRect(v*this._deviceCellWidth,L*this._deviceCellHeight,C*this._deviceCellWidth,b*this._deviceCellHeight)}_fillMiddleLineAtCells(v,L,C=1){const b=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(v*this._deviceCellWidth,(L+1)*this._deviceCellHeight-b-this._coreBrowserService.dpr,C*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(v,L,C=1,b=0){this._ctx.fillRect(v*this._deviceCellWidth,(L+1)*this._deviceCellHeight+b-this._coreBrowserService.dpr-1,C*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(v,L,C=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b;for(let E=0;E<C;E++){const R=(v+E)*this._deviceCellWidth,k=(v+E+.5)*this._deviceCellWidth,M=(v+E+1)*this._deviceCellWidth,A=(L+1)*this._deviceCellHeight-b-1,H=A-b,$=A+b;this._ctx.moveTo(R,A),this._ctx.bezierCurveTo(R,H,k,H,k,A),this._ctx.bezierCurveTo(k,$,M,$,M,A)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(v,L,C=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([2*b,b]);const E=v*this._deviceCellWidth,R=(L+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,R);for(let k=0;k<C;k++){const M=(v+C+k)*this._deviceCellWidth;this._ctx.lineTo(M,R)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(v,L,C=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([4*b,3*b]);const E=v*this._deviceCellWidth,R=(v+C)*this._deviceCellWidth,k=(L+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,k),this._ctx.lineTo(R,k),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(v,L,C){this._ctx.fillRect(v*this._deviceCellWidth,L*this._deviceCellHeight,this._coreBrowserService.dpr*C,this._deviceCellHeight)}_strokeRectAtCell(v,L,C,b){const E=this._coreBrowserService.dpr;this._ctx.lineWidth=E,this._ctx.strokeRect(v*this._deviceCellWidth+E/2,L*this._deviceCellHeight+E/2,C*this._deviceCellWidth-E,b*this._deviceCellHeight-E)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(v,L,C,b){this._alpha?this._ctx.clearRect(v*this._deviceCellWidth,L*this._deviceCellHeight,C*this._deviceCellWidth,b*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(v*this._deviceCellWidth,L*this._deviceCellHeight,C*this._deviceCellWidth,b*this._deviceCellHeight))}_fillCharTrueColor(v,L,C){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipRow(C);let b=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(b=(0,p.tryDrawCustomChar)(this._ctx,v.getChars(),L*this._deviceCellWidth,C*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),b||this._ctx.fillText(v.getChars(),L*this._deviceCellWidth+this._deviceCharLeft,C*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(v,L,C){const b=v.getChars(),E=v.getCode(),R=v.getWidth();if(this._cellColorResolver.resolve(v,L,this._bufferService.buffer.ydisp+C,this._deviceCellWidth),!this._charAtlas)return;let k;if(k=b&&b.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(b,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(v.getCode()||l.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),!k.size.x||!k.size.y)return;this._ctx.save(),this._clipRow(C),this._bitmapGenerator[k.texturePage]&&this._charAtlas.pages[k.texturePage].canvas!==this._bitmapGenerator[k.texturePage].canvas&&(this._bitmapGenerator[k.texturePage]?.bitmap?.close(),delete this._bitmapGenerator[k.texturePage]),this._charAtlas.pages[k.texturePage].version!==this._bitmapGenerator[k.texturePage]?.version&&(this._bitmapGenerator[k.texturePage]||(this._bitmapGenerator[k.texturePage]=new m(this._charAtlas.pages[k.texturePage].canvas)),this._bitmapGenerator[k.texturePage].refresh(),this._bitmapGenerator[k.texturePage].version=this._charAtlas.pages[k.texturePage].version);let M=k.size.x;this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,w.allowRescaling)(E,R,k.size.x,this._deviceCellWidth)&&(M=this._deviceCellWidth-1),this._ctx.drawImage(this._bitmapGenerator[k.texturePage]?.bitmap||this._charAtlas.pages[k.texturePage].canvas,k.texturePosition.x,k.texturePosition.y,k.size.x,k.size.y,L*this._deviceCellWidth+this._deviceCharLeft-k.offset.x,C*this._deviceCellHeight+this._deviceCharTop-k.offset.y,M,k.size.y),this._ctx.restore()}_clipRow(v){this._ctx.beginPath(),this._ctx.rect(0,v*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(v,L){return`${L?"italic":""} ${v?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}i.BaseRenderLayer=c;class m{get bitmap(){return this._bitmap}constructor(v){this.canvas=v,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){this._bitmap?.close(),this._bitmap=void 0,a.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap?.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(v=>{this._state===2?this.refresh():this._bitmap=v,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasRenderer=void 0;const f=o(627),_=o(56),u=o(374),p=o(345),w=o(859),S=o(873),h=o(43),n=o(630),a=o(744);class l extends w.Disposable{constructor(m,x,v,L,C,b,E,R,k,M,A){super(),this._terminal=m,this._screenElement=x,this._bufferService=L,this._charSizeService=C,this._optionsService=b,this._coreBrowserService=k,this._themeService=A,this._observerDisposable=this.register(new w.MutableDisposable),this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const H=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new a.TextRenderLayer(this._terminal,this._screenElement,0,H,this._bufferService,this._optionsService,E,M,this._coreBrowserService,A),new n.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,M,this._optionsService,A),new h.LinkRenderLayer(this._terminal,this._screenElement,2,v,this._bufferService,this._optionsService,M,this._coreBrowserService,A),new S.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,R,this._coreBrowserService,M,A)];for(const $ of this._renderLayers)(0,p.forwardEvent)($.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,u.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,($,N)=>this._setCanvasDevicePixelDimensions($,N)),this.register(this._coreBrowserService.onWindowChange($=>{this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,$,(N,B)=>this._setCanvasDevicePixelDimensions(N,B))})),this.register((0,w.toDisposable)(()=>{for(const $ of this._renderLayers)$.dispose();(0,f.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(m,x){this._updateDimensions();for(const v of this._renderLayers)v.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(m=>m.handleBlur())}handleFocus(){this._runOperation(m=>m.handleFocus())}handleSelectionChanged(m,x,v=!1){this._runOperation(L=>L.handleSelectionChanged(m,x,v)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(m=>m.handleCursorMove())}clear(){this._runOperation(m=>m.reset())}_runOperation(m){for(const x of this._renderLayers)m(x)}renderRows(m,x){for(const v of this._renderLayers)v.handleGridChanged(m,x)}clearTextureAtlas(){for(const m of this._renderLayers)m.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const m=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*m),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*m),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/m),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/m),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(m,x){this.dimensions.device.canvas.height=x,this.dimensions.device.canvas.width=m;for(const v of this._renderLayers)v.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}i.CanvasRenderer=l},873:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;const f=o(457),_=o(859),u=o(399),p=o(782),w=o(903);class S extends w.BaseRenderLayer{constructor(n,a,l,c,m,x,v,L,C,b){super(n,a,"cursor",l,!0,b,m,x,C,L),this._onRequestRedraw=c,this._coreService=v,this._cursorBlinkStateManager=this.register(new _.MutableDisposable),this._cell=new p.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(n){super.resize(n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){this._clearCursor(),this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){this._cursorBlinkStateManager.value?.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){this._cursorBlinkStateManager.value?.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){this._cursorBlinkStateManager.value?.restartBlinkAnimation()}handleGridChanged(n,a){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,l=a-this._bufferService.buffer.ydisp;if(l<0||l>=this._bufferService.rows)return void this._clearCursor();const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(c,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=this._optionsService.rawOptions.cursorStyle,x=this._optionsService.rawOptions.cursorInactiveStyle;return x&&x!=="none"&&this._cursorRenderers[x](c,l,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=l,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===c&&this._state.y===l&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](c,l,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=l,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(u.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,a,l.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(l,n,a),this._ctx.restore()}_renderUnderlineCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,a),this._ctx.restore()}_renderOutlineCursor(n,a,l){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,a,l.getWidth(),1),this._ctx.restore()}}i.CursorRenderLayer=S},574:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0,i.GridCache=class{constructor(){this.cache=[]}resize(o,f){for(let _=0;_<o;_++){this.cache.length<=_&&this.cache.push([]);for(let u=this.cache[_].length;u<f;u++)this.cache[_].push(void 0);this.cache[_].length=f}this.cache.length=o}clear(){for(let o=0;o<this.cache.length;o++)for(let f=0;f<this.cache[o].length;f++)this.cache[o][f]=void 0}}},43:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),u=o(903);class p extends u.BaseRenderLayer{constructor(S,h,n,a,l,c,m,x,v){super(S,h,"link",n,!0,v,l,c,m,x),this.register(a.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(a.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(S){super.resize(S),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const S=this._state.y2-this._state.y1-1;S>0&&this._clearCells(0,this._state.y1+1,this._state.cols,S),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(S){if(S.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:S.fg&&(0,f.is256Color)(S.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[S.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,S.y1===S.y2)this._fillBottomLineAtCells(S.x1,S.y1,S.x2-S.x1);else{this._fillBottomLineAtCells(S.x1,S.y1,S.cols-S.x1);for(let h=S.y1+1;h<S.y2;h++)this._fillBottomLineAtCells(0,h,S.cols);this._fillBottomLineAtCells(0,S.y2,S.x2)}this._state=S}_handleHideLinkUnderline(S){this._clearCurrentLink()}}i.LinkRenderLayer=p},630:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;const f=o(903);class _ extends f.BaseRenderLayer{constructor(p,w,S,h,n,a,l,c){super(p,w,"selection",S,!0,c,h,l,a,n),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(p){super.resize(p),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(p,w,S){super.handleSelectionChanged(p,w,S),this._redrawSelection(p,w,S)}_redrawSelection(p,w,S){if(!this._didStateChange(p,w,S,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!p||!w)return void this._clearState();const h=p[1]-this._bufferService.buffer.ydisp,n=w[1]-this._bufferService.buffer.ydisp,a=Math.max(h,0),l=Math.min(n,this._bufferService.rows-1);if(a>=this._bufferService.rows||l<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,S){const c=p[0],m=w[0]-c,x=l-a+1;this._fillCells(c,a,m,x)}else{const c=h===a?p[0]:0,m=a===n?w[0]:this._bufferService.cols;this._fillCells(c,a,m-c,1);const x=Math.max(l-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,x),a!==l){const v=n===l?w[0]:this._bufferService.cols;this._fillCells(0,l,v,1)}}this._state.start=[p[0],p[1]],this._state.end=[w[0],w[1]],this._state.columnSelectMode=S,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(p,w,S,h){return!this._areCoordinatesEqual(p,this._state.start)||!this._areCoordinatesEqual(w,this._state.end)||S!==this._state.columnSelectMode||h!==this._state.ydisp}_areCoordinatesEqual(p,w){return!(!p||!w)&&p[0]===w[0]&&p[1]===w[1]}}i.SelectionRenderLayer=_},744:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;const f=o(577),_=o(147),u=o(782),p=o(855),w=o(903),S=o(574);class h extends w.BaseRenderLayer{constructor(a,l,c,m,x,v,L,C,b,E){super(a,l,"text",c,m,E,x,v,C,b),this._characterJoinerService=L,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new u.CellData,this._state=new S.GridCache,this.register(v.onSpecificOptionChange("allowTransparency",R=>this._setTransparency(R)))}resize(a){super.resize(a);const l=this._getFont(!1,!1);this._characterWidth===a.device.char.width&&this._characterFont===l||(this._characterWidth=a.device.char.width,this._characterFont=l,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(a,l,c){for(let m=a;m<=l;m++){const x=m+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.lines.get(x),L=this._characterJoinerService.getJoinedCharacters(x);for(let C=0;C<this._bufferService.cols;C++){v.loadCell(C,this._workCell);let b=this._workCell,E=!1,R=C;if(b.getWidth()!==0){if(L.length>0&&C===L[0][0]){E=!0;const k=L.shift();b=new f.JoinedCellData(this._workCell,v.translateToString(!0,k[0],k[1]),k[1]-k[0]),R=k[1]-1}!E&&this._isOverlapping(b)&&R<v.length-1&&v.getCodePoint(R+1)===p.NULL_CELL_CODE&&(b.content&=-12582913,b.content|=8388608),c(b,C,m),C=R}}}}_drawBackground(a,l){const c=this._ctx,m=this._bufferService.cols;let x=0,v=0,L=null;c.save(),this._forEachCell(a,l,(C,b,E)=>{let R=null;C.isInverse()?R=C.isFgDefault()?this._themeService.colors.foreground.css:C.isFgRGB()?`rgb(${_.AttributeData.toColorRGB(C.getFgColor()).join(",")})`:this._themeService.colors.ansi[C.getFgColor()].css:C.isBgRGB()?R=`rgb(${_.AttributeData.toColorRGB(C.getBgColor()).join(",")})`:C.isBgPalette()&&(R=this._themeService.colors.ansi[C.getBgColor()].css);let k=!1;this._decorationService.forEachDecorationAtCell(b,this._bufferService.buffer.ydisp+E,void 0,M=>{M.options.layer!=="top"&&k||(M.backgroundColorRGB&&(R=M.backgroundColorRGB.css),k=M.options.layer==="top")}),L===null&&(x=b,v=E),E!==v?(c.fillStyle=L||"",this._fillCells(x,v,m-x,1),x=b,v=E):L!==R&&(c.fillStyle=L||"",this._fillCells(x,v,b-x,1),x=b,v=E),L=R}),L!==null&&(c.fillStyle=L,this._fillCells(x,v,m-x,1)),c.restore()}_drawForeground(a,l){this._forEachCell(a,l,(c,m,x)=>this._drawChars(c,m,x))}handleGridChanged(a,l){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,l-a+1),this._drawBackground(a,l),this._drawForeground(a,l))}_isOverlapping(a){if(a.getWidth()!==1||a.getCode()<256)return!1;const l=a.getChars();if(this._characterOverlapCache.hasOwnProperty(l))return this._characterOverlapCache[l];this._ctx.save(),this._ctx.font=this._characterFont;const c=Math.floor(this._ctx.measureText(l).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[l]=c,c}}i.TextRenderLayer=h},274:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),u=o(374);let p,w=0,S=0,h=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(c,m,x,v,L,C){this._terminal=c,this._optionService=m,this._selectionRenderModel=x,this._decorationService=v,this._coreBrowserService=L,this._themeService=C,this.result={fg:0,bg:0,ext:0}}resolve(c,m,x,v){if(this.result.bg=c.bg,this.result.fg=c.fg,this.result.ext=268435456&c.bg?c.extended.ext:0,S=0,w=0,n=!1,h=!1,a=!1,p=this._themeService.colors,l=0,c.getCode()!==f.NULL_CELL_CODE&&c.extended.underlineStyle===4){const L=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*v%(2*Math.round(L))}if(this._decorationService.forEachDecorationAtCell(m,x,"bottom",L=>{L.backgroundColorRGB&&(S=L.backgroundColorRGB.rgba>>8&16777215,n=!0),L.foregroundColorRGB&&(w=L.foregroundColorRGB.rgba>>8&16777215,h=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,x),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,h=!0),(0,u.treatGlyphAsBackgroundColor)(c.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}h=!0}}this._decorationService.forEachDecorationAtCell(m,x,"top",L=>{L.backgroundColorRGB&&(S=L.backgroundColorRGB.rgba>>8&16777215,n=!0),L.foregroundColorRGB&&(w=L.foregroundColorRGB.rgba>>8&16777215,h=!0)}),n&&(S=a?-16777216&c.bg&-134217729|S|50331648:-16777216&c.bg|S|50331648),h&&(w=-16777216&c.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!h&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,h=!0),!n&&h&&(S=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?S:this.result.bg,this.result.fg=h?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),u=[];i.acquireTextureAtlas=function(p,w,S,h,n,a,l,c){const m=(0,_.generateConfig)(h,n,a,l,w,S,c);for(let L=0;L<u.length;L++){const C=u[L],b=C.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(C.config,m))return C.atlas;C.ownedBy.length===1?(C.atlas.dispose(),u.splice(L,1)):C.ownedBy.splice(b,1);break}}for(let L=0;L<u.length;L++){const C=u[L];if((0,_.configEquals)(C.config,m))return C.ownedBy.push(p),C.atlas}const x=p._core,v={atlas:new f.TextureAtlas(document,m,x.unicodeService),config:m,ownedBy:[p]};return u.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<u.length;w++){const S=u[w].ownedBy.indexOf(p);if(S!==-1){u[w].ownedBy.length===1?(u[w].atlas.dispose(),u.splice(w,1)):u[w].ownedBy.splice(S,1);break}}}},197:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,u,p,w,S,h,n){const a={foreground:h.foreground,background:h.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:h.ansi.slice(),contrastCache:h.contrastCache,halfContrastCache:h.halfContrastCache};return{customGlyphs:S.customGlyphs,devicePixelRatio:n,letterSpacing:S.letterSpacing,lineHeight:S.lineHeight,deviceCellWidth:_,deviceCellHeight:u,deviceCharWidth:p,deviceCharHeight:w,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,drawBoldTextInBrightColors:S.drawBoldTextInBrightColors,minimumContrastRatio:S.minimumContrastRatio,colors:a}},i.configEquals=function(_,u){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==u.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===u.devicePixelRatio&&_.customGlyphs===u.customGlyphs&&_.lineHeight===u.lineHeight&&_.letterSpacing===u.letterSpacing&&_.fontFamily===u.fontFamily&&_.fontSize===u.fontSize&&_.fontWeight===u.fontWeight&&_.fontWeightBold===u.fontWeightBold&&_.allowTransparency===u.allowTransparency&&_.deviceCharWidth===u.deviceCharWidth&&_.deviceCharHeight===u.deviceCharHeight&&_.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&_.minimumContrastRatio===u.minimumContrastRatio&&_.colors.foreground.rgba===u.colors.foreground.rgba&&_.colors.background.rgba===u.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(h,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1`},"":{1:(h,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M${.5-h},1 L${.5-h},.5 L1,.5 M${.5+h},.5 L${.5+h},1`},"":{1:(h,n)=>`M1,${.5-n} L${.5-h},${.5-n} L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1`},"":{1:(h,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(h,n)=>`M${.5+h},1 L${.5+h},.5 L0,.5 M${.5-h},.5 L${.5-h},1`},"":{1:(h,n)=>`M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M0,${.5-n} L${.5+h},${.5-n} L${.5+h},1`},"":{1:(h,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(h,n)=>`M1,.5 L${.5-h},.5 L${.5-h},0 M${.5+h},.5 L${.5+h},0`},"":{1:(h,n)=>`M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0 M1,${.5+n} L${.5-h},${.5+n} L${.5-h},0`},"":{1:(h,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(h,n)=>`M0,.5 L${.5+h},.5 L${.5+h},0 M${.5-h},.5 L${.5-h},0`},"":{1:(h,n)=>`M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0 M0,${.5+n} L${.5+h},${.5+n} L${.5+h},0`},"":{1:(h,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1 M${.5+h},.5 L1,.5`},"":{1:(h,n)=>`M${.5-h},0 L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1 M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0`},"":{1:(h,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(h,n)=>`M0,.5 L${.5-h},.5 M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1`},"":{1:(h,n)=>`M${.5+h},0 L${.5+h},1 M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0`},"":{1:(h,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(h,n)=>`M0,.5 L1,.5 M${.5-h},.5 L${.5-h},1 M${.5+h},.5 L${.5+h},1`},"":{1:(h,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1`},"":{1:(h,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M0,.5 L1,.5 M${.5-h},.5 L${.5-h},0 M${.5+h},.5 L${.5+h},0`},"":{1:(h,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0 M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0`},"":{1:(h,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(h,n)=>`M0,.5 L1,.5 M${.5-h},0 L${.5-h},1 M${.5+h},0 L${.5+h},1`},"":{1:(h,n)=>`M0,${.5+n} L${.5-h},${.5+n} L${.5-h},1 M1,${.5+n} L${.5+h},${.5+n} L${.5+h},1 M0,${.5-n} L${.5-h},${.5-n} L${.5-h},0 M1,${.5-n} L${.5+h},${.5-n} L${.5+h},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(h,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(h,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(h,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(h,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(h,n,a,l,c,m,x,v){const L=i.blockElementDefinitions[n];if(L)return function(R,k,M,A,H,$){for(let N=0;N<k.length;N++){const B=k[N],D=H/8,T=$/8;R.fillRect(M+B.x*D,A+B.y*T,B.w*D,B.h*T)}}(h,L,a,l,c,m),!0;const C=_[n];if(C)return function(R,k,M,A,H,$){let N=u.get(k);N||(N=new Map,u.set(k,N));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let D=N.get(B);if(!D){const T=k[0].length,I=k.length,F=R.canvas.ownerDocument.createElement("canvas");F.width=T,F.height=I;const z=(0,f.throwIfFalsy)(F.getContext("2d")),U=new ImageData(T,I);let Z,J,j,O;if(B.startsWith("#"))Z=parseInt(B.slice(1,3),16),J=parseInt(B.slice(3,5),16),j=parseInt(B.slice(5,7),16),O=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[Z,J,j,O]=B.substring(5,B.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<I;W++)for(let K=0;K<T;K++)U.data[4*(W*T+K)]=Z,U.data[4*(W*T+K)+1]=J,U.data[4*(W*T+K)+2]=j,U.data[4*(W*T+K)+3]=k[W][K]*(255*O);z.putImageData(U,0,0),D=(0,f.throwIfFalsy)(R.createPattern(F,null)),N.set(B,D)}R.fillStyle=D,R.fillRect(M,A,H,$)}(h,C,a,l,c,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(R,k,M,A,H,$,N){R.strokeStyle=R.fillStyle;for(const[B,D]of Object.entries(k)){let T;R.beginPath(),R.lineWidth=N*Number.parseInt(B),T=typeof D=="function"?D(.15,.15/$*H):D;for(const I of T.split(" ")){const F=I[0],z=w[F];if(!z){console.error(`Could not find drawing instructions for "${F}"`);continue}const U=I.substring(1).split(",");U[0]&&U[1]&&z(R,S(U,H,$,M,A,!0,N))}R.stroke(),R.closePath()}}(h,b,a,l,c,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,M,A,H,$,N,B){const D=new Path2D;D.rect(M,A,H,$),R.clip(D),R.beginPath();const T=N/12;R.lineWidth=B*T;for(const I of k.d.split(" ")){const F=I[0],z=w[F];if(!z){console.error(`Could not find drawing instructions for "${F}"`);continue}const U=I.substring(1).split(",");U[0]&&U[1]&&z(R,S(U,H,$,M,A,!1,B,(k.leftPadding??0)*(T/2),(k.rightPadding??0)*(T/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(h,E,a,l,c,m,x,v),!0)};const u=new Map;function p(h,n,a=0){return Math.max(Math.min(h,n),a)}const w={C:(h,n)=>h.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(h,n)=>h.lineTo(n[0],n[1]),M:(h,n)=>h.moveTo(n[0],n[1])};function S(h,n,a,l,c,m,x,v=0,L=0){const C=h.map(b=>parseFloat(b)||parseInt(b));if(C.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<C.length;b+=2)C[b]*=n-v*x-L*x,m&&C[b]!==0&&(C[b]=p(Math.round(C[b]+.5)-.5,n,0)),C[b]+=l+v*x;for(let b=1;b<C.length;b+=2)C[b]*=a,m&&C[b]!==0&&(C[b]=p(Math.round(C[b]+.5)-.5,a,0)),C[b]+=c;return C}},56:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,u,p){let w=new u.ResizeObserver(S=>{const h=S.find(l=>l.target===_);if(!h)return;if(!("devicePixelContentBoxSize"in h))return w?.disconnect(),void(w=void 0);const n=h.devicePixelContentBoxSize[0].inlineSize,a=h.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(y,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,u,p,w){return u===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(u){return 9472<=u&&u<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,u,p=0){return(_-(2*Math.round(u)-p))%(2*Math.round(u))}},296:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,u,p,w=!1){if(this.selectionStart=u,this.selectionEnd=p,!u||!p||u[0]===p[0]&&u[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,h=u[1]-S,n=p[1]-S,a=Math.max(h,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=h,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=u[0],this.endCol=p[0])}isCellSelected(_,u,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&p>=this.viewportCappedStartRow&&u<this.endCol&&p<=this.viewportCappedEndRow:u<this.startCol&&p>=this.viewportCappedStartRow&&u>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),u=o(374),p=o(160),w=o(345),S=o(485),h=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let c;class m{get pages(){return this._pages}constructor(b,E,R){this._document=b,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new S.FourKeyMap,this._cacheMapCombined=new S.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=L(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,u.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new h.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(N=>2*N.canvas.width<=(m.maxTextureSize||4096)).sort((N,B)=>B.canvas.width!==N.canvas.width?B.canvas.width-N.canvas.width:B.percentageUsed-N.percentageUsed);let R=-1,k=0;for(let N=0;N<E.length;N++)if(E[N].canvas.width!==k)R=N,k=E[N].canvas.width;else if(N-R==3)break;const M=E.slice(R,R+4),A=M.map(N=>N.glyphs[0].texturePage).sort((N,B)=>N>B?1:-1),H=this.pages.length-M.length,$=this._mergePages(M,H);$.version++;for(let N=A.length-1;N>=0;N--)this._deletePage(A[N]);this.pages.push($),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)}const b=new x(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const R=2*b[0].canvas.width,k=new x(this._document,R,b);for(const[M,A]of b.entries()){const H=M*A.canvas.width%R,$=Math.floor(M/2)*A.canvas.height;k.ctx.drawImage(A.canvas,H,$);for(const B of A.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=H,B.texturePosition.y+=$,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(A.canvas);const N=this._activePages.indexOf(A);N!==-1&&this._activePages.splice(N,1)}return k}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(b,E,R,k,M){return this._getFromCacheMap(this._cacheMapCombined,b,E,R,k,M)}getRasterizedGlyph(b,E,R,k,M){return this._getFromCacheMap(this._cacheMap,b,E,R,k,M)}_getFromCacheMap(b,E,R,k,M,A=!1){return c=b.get(E,R,k,M),c||(c=this._drawToCache(E,R,k,M,A),b.set(E,R,k,M,c)),c}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let M;switch(b){case 16777216:case 33554432:M=this._getColorFromAnsiIndex(E);break;case 50331648:const A=n.AttributeData.toColorRGB(E);M=p.channels.toColor(A[0],A[1],A[2]);break;default:M=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return M}_getForegroundColor(b,E,R,k,M,A,H,$,N,B){const D=this._getMinimumContrastColor(b,E,R,k,M,A,H,N,$,B);if(D)return D;let T;switch(M){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&N&&A<8&&(A+=8),T=this._getColorFromAnsiIndex(A);break;case 50331648:const I=n.AttributeData.toColorRGB(A);T=p.channels.toColor(I[0],I[1],I[2]);break;default:T=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(T=p.color.opaque(T)),$&&(T=p.color.multiplyOpacity(T,f.DIM_OPACITY)),T}_resolveBackgroundRgba(b,E,R){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,R,k){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,R,k,M,A,H,$,N,B){if(this._config.minimumContrastRatio===1||B)return;const D=this._getContrastCache(N),T=D.getColor(b,k);if(T!==void 0)return T||void 0;const I=this._resolveBackgroundRgba(E,R,H),F=this._resolveForegroundRgba(M,A,H,$),z=p.rgba.ensureContrastRatio(I,F,this._config.minimumContrastRatio/(N?2:1));if(!z)return void D.setColor(b,k,null);const U=p.channels.toColor(z>>24&255,z>>16&255,z>>8&255);return D.setColor(b,k,U),U}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,R,k,M=!1){const A=typeof b=="number"?String.fromCharCode(b):b,H=Math.min(this._config.deviceCellWidth*Math.max(A.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const $=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<$&&(this._tmpCanvas.height=$),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return l;const N=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),D=!!this._workAttributeData.isDim(),T=!!this._workAttributeData.isItalic(),I=!!this._workAttributeData.isUnderline(),F=!!this._workAttributeData.isStrikethrough(),z=!!this._workAttributeData.isOverline();let U=this._workAttributeData.getFgColor(),Z=this._workAttributeData.getFgColorMode(),J=this._workAttributeData.getBgColor(),j=this._workAttributeData.getBgColorMode();if(B){const G=U;U=J,J=G;const se=Z;Z=j,j=se}const O=this._getBackgroundColor(j,J,B,D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const W=N?this._config.fontWeightBold:this._config.fontWeight,K=T?"italic":"";this._tmpCtx.font=`${K} ${W} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Q=A.length===1&&(0,u.isPowerlineGlyph)(A.charCodeAt(0)),X=A.length===1&&(0,u.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),ae=this._getForegroundColor(E,j,J,R,Z,U,B,D,N,(0,u.treatGlyphAsBackgroundColor)(A.charCodeAt(0)));this._tmpCtx.fillStyle=ae.css;const Y=X?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,A,Y,Y,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let me,ne=!Q;if(me=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),I){this._tmpCtx.save();const G=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=G%2==1?.5:0;if(this._tmpCtx.lineWidth=G,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ne=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ne=!1;let _e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&_e<8&&(_e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(_e).css}this._tmpCtx.beginPath();const de=Y,ce=Math.ceil(Y+this._config.deviceCharHeight)-se-(M?2*G:0),qe=ce+G,Re=ce+2*G;let Me=this._workAttributeData.getUnderlineVariantOffset();for(let _e=0;_e<me;_e++){this._tmpCtx.save();const le=de+_e*this._config.deviceCellWidth,oe=de+(_e+1)*this._config.deviceCellWidth,Bt=le+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce),this._tmpCtx.moveTo(le,Re),this._tmpCtx.lineTo(oe,Re);break;case 3:const Ot=G<=1?Re:Math.ceil(Y+this._config.deviceCharHeight-G/2)-se,Pt=G<=1?ce:Math.ceil(Y+this._config.deviceCharHeight+G/2)-se,Ci=new Path2D;Ci.rect(le,ce,this._config.deviceCellWidth,Re-ce),this._tmpCtx.clip(Ci),this._tmpCtx.moveTo(le-this._config.deviceCellWidth/2,qe),this._tmpCtx.bezierCurveTo(le-this._config.deviceCellWidth/2,Pt,le,Pt,le,qe),this._tmpCtx.bezierCurveTo(le,Ot,Bt,Ot,Bt,qe),this._tmpCtx.bezierCurveTo(Bt,Pt,oe,Pt,oe,qe),this._tmpCtx.bezierCurveTo(oe,Ot,oe+this._config.deviceCellWidth/2,Ot,oe+this._config.deviceCellWidth/2,qe);break;case 4:const It=Me===0?0:Me>=G?2*G-Me:G-Me;Me>=G||It===0?(this._tmpCtx.setLineDash([Math.round(G),Math.round(G)]),this._tmpCtx.moveTo(le+It,ce),this._tmpCtx.lineTo(oe,ce)):(this._tmpCtx.setLineDash([Math.round(G),Math.round(G)]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(le+It,ce),this._tmpCtx.moveTo(le+It+G,ce),this._tmpCtx.lineTo(oe,ce)),Me=(0,u.computeNextVariantOffset)(oe-le,G,Me);break;case 5:const io=.6,so=.3,Cr=oe-le,yi=Math.floor(io*Cr),Si=Math.floor(so*Cr),no=Cr-yi-Si;this._tmpCtx.setLineDash([yi,Si,no]),this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce);break;default:this._tmpCtx.moveTo(le,ce),this._tmpCtx.lineTo(oe,ce)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const _e=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in _e&&_e.actualBoundingBoxDescent>0){this._tmpCtx.save();const le=new Path2D;le.rect(de,ce-Math.ceil(G/2),this._config.deviceCellWidth*me,Re-ce+Math.ceil(G/2)),this._tmpCtx.clip(le),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(A,Y,Y+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(z){const G=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),se=G%2==1?.5:0;this._tmpCtx.lineWidth=G,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Y,Y+se),this._tmpCtx.lineTo(Y+this._config.deviceCharWidth*me,Y+se),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(A,Y,Y+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let G=v(this._tmpCtx.getImageData(Y,Y,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ae,ne);if(G)for(let se=1;se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,Y,Y+this._config.deviceCharHeight-se),G=v(this._tmpCtx.getImageData(Y,Y,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ae,ne),G);se++);}if(F){const G=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=G,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Y,Y+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.lineTo(Y+this._config.deviceCharWidth*me,Y+Math.floor(this._config.deviceCharHeight/2)-se),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ke=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Tt;if(Tt=this._config.allowTransparency?function(G){for(let se=0;se<G.data.length;se+=4)if(G.data[se+3]>0)return!1;return!0}(Ke):v(Ke,O,ae,ne),Tt)return l;const ie=this._findGlyphBoundingBox(Ke,this._workBoundingBox,H,X,ue,Y);let ee,te;for(;;){if(this._activePages.length===0){const G=this._createNewPage();ee=G,te=G.currentRow,te.height=ie.size.y;break}ee=this._activePages[this._activePages.length-1],te=ee.currentRow;for(const G of this._activePages)ie.size.y<=G.currentRow.height&&(ee=G,te=G.currentRow);for(let G=this._activePages.length-1;G>=0;G--)for(const se of this._activePages[G].fixedRows)se.height<=te.height&&ie.size.y<=se.height&&(ee=this._activePages[G],te=se);if(te.y+ie.size.y>=ee.canvas.height||te.height>ie.size.y+2){let G=!1;if(ee.currentRow.y+ee.currentRow.height+ie.size.y>=ee.canvas.height){let se;for(const de of this._activePages)if(de.currentRow.y+de.currentRow.height+ie.size.y<de.canvas.height){se=de;break}if(se)ee=se;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&te.y+ie.size.y<=ee.canvas.height&&te.height>=ie.size.y&&te.x+ie.size.x<=ee.canvas.width)G=!0;else{const de=this._createNewPage();ee=de,te=de.currentRow,te.height=ie.size.y,G=!0}}G||(ee.currentRow.height>0&&ee.fixedRows.push(ee.currentRow),te={x:0,y:ee.currentRow.y+ee.currentRow.height,height:ie.size.y},ee.fixedRows.push(te),ee.currentRow={x:0,y:te.y+te.height,height:0})}if(te.x+ie.size.x<=ee.canvas.width)break;te===ee.currentRow?(te.x=0,te.y+=te.height,te.height=0):ee.fixedRows.splice(ee.fixedRows.indexOf(te),1)}return ie.texturePage=this._pages.indexOf(ee),ie.texturePosition.x=te.x,ie.texturePosition.y=te.y,ie.texturePositionClipSpace.x=te.x/ee.canvas.width,ie.texturePositionClipSpace.y=te.y/ee.canvas.height,ie.sizeClipSpace.x/=ee.canvas.width,ie.sizeClipSpace.y/=ee.canvas.height,te.height=Math.max(te.height,ie.size.y),te.x+=ie.size.x,ee.ctx.putImageData(Ke,ie.texturePosition.x-this._workBoundingBox.left,ie.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ie.size.x,ie.size.y),ee.addGlyph(ie),ee.version++,ie}_findGlyphBoundingBox(b,E,R,k,M,A){E.top=0;const H=k?this._config.deviceCellHeight:this._tmpCanvas.height,$=k?this._config.deviceCellWidth:R;let N=!1;for(let B=0;B<H;B++){for(let D=0;D<$;D++){const T=B*this._tmpCanvas.width*4+4*D+3;if(b.data[T]!==0){E.top=B,N=!0;break}}if(N)break}E.left=0,N=!1;for(let B=0;B<A+$;B++){for(let D=0;D<H;D++){const T=D*this._tmpCanvas.width*4+4*B+3;if(b.data[T]!==0){E.left=B,N=!0;break}}if(N)break}E.right=$,N=!1;for(let B=A+$-1;B>=A;B--){for(let D=0;D<H;D++){const T=D*this._tmpCanvas.width*4+4*B+3;if(b.data[T]!==0){E.right=B,N=!0;break}}if(N)break}E.bottom=H,N=!1;for(let B=H-1;B>=0;B--){for(let D=0;D<$;D++){const T=B*this._tmpCanvas.width*4+4*D+3;if(b.data[T]!==0){E.bottom=B,N=!0;break}}if(N)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+A+(k||M?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+A+(k||M?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class x{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=L(b,E,E),this.ctx=(0,u.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(C,b,E,R){const k=b.rgba>>>24,M=b.rgba>>>16&255,A=b.rgba>>>8&255,H=E.rgba>>>24,$=E.rgba>>>16&255,N=E.rgba>>>8&255,B=Math.floor((Math.abs(k-H)+Math.abs(M-$)+Math.abs(A-N))/12);let D=!0;for(let T=0;T<C.data.length;T+=4)C.data[T]===k&&C.data[T+1]===M&&C.data[T+2]===A||R&&Math.abs(C.data[T]-k)+Math.abs(C.data[T+1]-M)+Math.abs(C.data[T+2]-A)<B?C.data[T+3]=0:D=!1;return D}function L(C,b,E){const R=C.createElement("canvas");return R.width=b,R.height=E,R}},577:function(y,i,o){var f=this&&this.__decorate||function(a,l,c,m){var x,v=arguments.length,L=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,l,c,m);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(L=(v<3?x(L):v>3?x(l,c,L):x(l,c))||L);return v>3&&L&&Object.defineProperty(l,c,L),L},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const u=o(147),p=o(855),w=o(782),S=o(97);class h extends u.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=h;let n=i.CharacterJoinerService=class kf{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],x=c.translateToString(!0);let v=0,L=0,C=0,b=c.getFg(0),E=c.getBg(0);for(let R=0;R<c.getTrimmedLength();R++)if(c.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(R-v>1){const k=this._getJoinedRanges(x,C,L,c,v);for(let M=0;M<k.length;M++)m.push(k[M])}v=R,C=L,b=this._workCell.fg,E=this._workCell.bg}L+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const R=this._getJoinedRanges(x,C,L,c,v);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(l,c,m,x,v){const L=l.substring(c,m);let C=[];try{C=this._characterJoiners[0].handler(L)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(L);for(let R=0;R<E.length;R++)kf._mergeRanges(C,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(C,x,v),C}_stringRangesToCellRanges(l,c,m){let x=0,v=!1,L=0,C=l[x];if(C){for(let b=m;b<this._bufferService.cols;b++){const E=c.getWidth(b),R=c.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&C[0]<=L&&(C[0]=b,v=!0),C[1]<=L){if(C[1]=b,C=l[++x],!C)break;C[0]<=L?(C[0]=b,v=!0):v=!1}L+=R}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let x=0;x<l.length;x++){const v=l[x];if(m){if(c[1]<=v[0])return l[x-1][1]=c[1],l;if(c[1]<=v[1])return l[x-1][1]=Math.max(c[1],v[1]),l.splice(x,1),l;l.splice(x,1),x--}else{if(c[1]<=v[0])return l.splice(x,0,c),l;if(c[1]<=v[1])return v[0]=Math.min(c[0],v[0]),l;c[0]<v[1]&&(v[0]=Math.min(c[0],v[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([_(0,S.IBufferService)],n)},160:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,u=0;var p,w,S,h,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,x,v,L){return L!==void 0?`#${a(m)}${a(x)}${a(v)}${a(L)}`:`#${a(m)}${a(x)}${a(v)}`},c.toRgba=function(m,x,v,L=255){return(m<<24|x<<16|v<<8|L)>>>0},c.toColor=function(m,x,v,L){return{css:c.toCss(m,x,v,L),rgba:c.toRgba(m,x,v,L)}}}(p||(i.channels=p={})),function(c){function m(x,v){return u=Math.round(255*v),[o,f,_]=n.toChannels(x.rgba),{css:p.toCss(o,f,_,u),rgba:p.toRgba(o,f,_,u)}}c.blend=function(x,v){if(u=(255&v.rgba)/255,u===1)return{css:v.css,rgba:v.rgba};const L=v.rgba>>24&255,C=v.rgba>>16&255,b=v.rgba>>8&255,E=x.rgba>>24&255,R=x.rgba>>16&255,k=x.rgba>>8&255;return o=E+Math.round((L-E)*u),f=R+Math.round((C-R)*u),_=k+Math.round((b-k)*u),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(x){return(255&x.rgba)==255},c.ensureContrastRatio=function(x,v,L){const C=n.ensureContrastRatio(x.rgba,v.rgba,L);if(C)return p.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(x){const v=(255|x.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(x,v){return u=255&x.rgba,m(x,u*v/255)},c.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}}(w||(i.color=w={})),function(c){let m,x;try{const v=document.createElement("canvas");v.width=1,v.height=1;const L=v.getContext("2d",{willReadFrequently:!0});L&&(m=L,m.globalCompositeOperation="copy",x=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),u=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,u);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const L=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return o=parseInt(L[1]),f=parseInt(L[2]),_=parseInt(L[3]),u=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),p.toColor(o,f,_,u);if(!m||!x)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=x,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,u]=m.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,u),css:v}}}(S||(i.css=S={})),function(c){function m(x,v,L){const C=x/255,b=v/255,E=L/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(x){return m(x>>16&255,x>>8&255,255&x)},c.relativeLuminance2=m}(h||(i.rgb=h={})),function(c){function m(v,L,C){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=L>>24&255,M=L>>16&255,A=L>>8&255,H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));for(;H<C&&(k>0||M>0||A>0);)k-=Math.max(0,Math.ceil(.1*k)),M-=Math.max(0,Math.ceil(.1*M)),A-=Math.max(0,Math.ceil(.1*A)),H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));return(k<<24|M<<16|A<<8|255)>>>0}function x(v,L,C){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=L>>24&255,M=L>>16&255,A=L>>8&255,H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));for(;H<C&&(k<255||M<255||A<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),M=Math.min(255,M+Math.ceil(.1*(255-M))),A=Math.min(255,A+Math.ceil(.1*(255-A))),H=l(h.relativeLuminance2(k,M,A),h.relativeLuminance2(b,E,R));return(k<<24|M<<16|A<<8|255)>>>0}c.blend=function(v,L){if(u=(255&L)/255,u===1)return L;const C=L>>24&255,b=L>>16&255,E=L>>8&255,R=v>>24&255,k=v>>16&255,M=v>>8&255;return o=R+Math.round((C-R)*u),f=k+Math.round((b-k)*u),_=M+Math.round((E-M)*u),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,L,C){const b=h.relativeLuminance(v>>8),E=h.relativeLuminance(L>>8);if(l(b,E)<C){if(E<b){const M=m(v,L,C),A=l(b,h.relativeLuminance(M>>8));if(A<C){const H=x(v,L,C);return A>l(b,h.relativeLuminance(H>>8))?M:H}return M}const R=x(v,L,C),k=l(b,h.relativeLuminance(R>>8));if(k<C){const M=m(v,L,C);return k>l(b,h.relativeLuminance(M>>8))?R:M}return R}},c.reduceLuminance=m,c.increaseLuminance=x,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let u=0;u<this._listeners.length;u++)_.push(this._listeners[u]);for(let u=0;u<_.length;u++)_[u].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(y,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,u,p){this._data[_]||(this._data[_]={}),this._data[_][u]=p}get(_,u){return this._data[_]?this._data[_][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,u,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(u,p,w)}get(f,_,u,p){return this._data.get(f,_)?.get(u,p)}clear(){this._data.clear()}}},399:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,h=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),h=Math.max(S,h),a=w.timeRemaining(),1.5*h>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class u extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){const u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),u=o(147);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const h=new p;return h.setFromCharData(S),h}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let h=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)h=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:h=!0}else h=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;h&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let u="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,u+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):u+=String.fromCharCode(w)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let u=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[u++]=1024*(this._interim-55296)+w-56320+65536:(f[u++]=this._interim,f[u++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,u;const h=o.charCodeAt(w);56320<=h&&h<=57343?f[u++]=1024*(S-55296)+h-56320+65536:(f[u++]=S,f[u++]=h)}else S!==65279&&(f[u++]=S)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let u,p,w,S,h=0,n=0,a=0;if(this.interim[0]){let m=!1,x=this.interim[0];x&=(224&x)==192?31:(240&x)==224?15:7;let v,L=0;for(;(v=63&this.interim[++L])&&L<4;)x<<=6,x|=v;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=C-L;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[L++]=v,x<<=6,x|=63&v}m||(C===2?x<128?a--:f[h++]=x:C===3?x<2048||x>=55296&&x<=57343||x===65279||(f[h++]=x):x<65536||x>1114111||(f[h++]=x)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(u=o[c])||128&(p=o[c+1])||128&(w=o[c+2])||128&(S=o[c+3]));)f[h++]=u,f[h++]=p,f[h++]=w,f[h++]=S,c+=4;if(u=o[c++],u<128)f[h++]=u;else if((224&u)==192){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&u)<<6|63&p,n<128){c--;continue}f[h++]=n}else if((240&u)==224){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,h;if(w=o[c++],(192&w)!=128){c--;continue}if(n=(15&u)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[h++]=n}else if((248&u)==240){if(c>=_)return this.interim[0]=u,h;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,h;if(w=o[c++],(192&w)!=128){c--;continue}if(c>=_)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=w,h;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[h++]=n}}return h}}},776:function(y,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,x=arguments.length,v=x<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var L=n.length-1;L>=0;L--)(m=n[L])&&(v=(x<3?m(v):x>3?m(a,l,v):m(a,l))||v);return x>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const u=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,h=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=h=f([_(0,p.IOptionsService)],h),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const x=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,x),x}}},726:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const u=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(h,n,a){n[o]===n?n[f].push({id:h,index:a}):(n[f]=[{id:h,index:a}],n[o]=n)})(u,p,S)};return u.toString=()=>_,i.serviceRegistry.set(_,u),u}},97:(y,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(y){var i=s[y];if(i!==void 0)return i.exports;var o=s[y]={exports:{}};return r[y].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var y=g;Object.defineProperty(y,"__esModule",{value:!0}),y.CanvasAddon=void 0;const i=d(345),o=d(859),f=d(776),_=d(949);class u extends o.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){return this._renderer?.textureAtlas}activate(w){const S=w._core;if(!w.element)return void this.register(S.onWillOpen(()=>this.activate(w)));this._terminal=w;const h=S.coreService,n=S.optionsService,a=S.screenElement,l=S.linkifier,c=S,m=c._bufferService,x=c._renderService,v=c._characterJoinerService,L=c._charSizeService,C=c._coreBrowserService,b=c._decorationService,E=c._logService,R=c._themeService;(0,f.setTraceLogger)(E),this._renderer=new _.CanvasRenderer(w,a,l,m,L,n,v,h,C,b,R),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),x.setRenderer(this._renderer),x.handleResize(m.cols,m.rows),this.register((0,o.toDisposable)(()=>{x.setRenderer(this._terminal._core._createRenderer()),x.handleResize(w.cols,w.rows),this._renderer?.dispose(),this._renderer=void 0}))}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}y.CanvasAddon=u})(),g})())})(Ef);var Bh=Ef.exports;const jm="\x1B[2m",Wm="\x1B[22m";function zm(e){const t=e.charCodeAt(0);return t>=32&&t<=126}class Um{term;predicted=[];_enabled=!1;constructor(t){this.term=t}get enabled(){return this._enabled}set enabled(t){this._enabled=t,t||this.reset()}handleInput(t){if(this._enabled)for(const r of t){if(r==="\r"||r===`
`){this.reset();return}if(r===""||r==="\b"){this.predicted.length>0&&(this.predicted.pop(),this.term.write("\b \b"));return}if(!zm(r)){this.reset();return}this.predicted.push(r),this.term.write(`${jm}${r}${Wm}`)}}handleOutput(t){if(!this._enabled||this.predicted.length===0)return;const r=new TextDecoder().decode(t);let s=0;for(let d=0;d<r.length&&s<this.predicted.length&&r[d]===this.predicted[s];d++)s++;if(s>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted.splice(0,s)}else if(this.predicted.length>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted=[]}}isActive(){return this.predicted.length>0}reset(){if(this.predicted.length>0){const t="\b \b".repeat(this.predicted.length);this.term.write(t),this.predicted=[]}}}const Vm=8,Gm=24,Oh=12,Km=()=>{const e=V.useRef(null),t=V.useRef(null),r=V.useRef(null),{subscribeOutput:s,sendInput:d,sendControl:g,resize:y}=vr(),[i,o]=V.useState(()=>{const l=localStorage.getItem("terminal_font_size");return l?parseInt(l,10):Oh}),f=V.useRef({initialDistance:0,initialFontSize:Oh}),_=V.useRef(null),u=V.useRef(null),p=V.useCallback(()=>{if(r.current&&t.current){r.current.fit();const{cols:l,rows:c}=t.current;y(l,c)}},[y]),w=V.useCallback(()=>{_.current&&clearTimeout(_.current),_.current=window.setTimeout(p,150)},[p]),S=V.useCallback(l=>{const c=Math.max(Vm,Math.min(Gm,Math.round(l)));t.current&&c!==t.current.options.fontSize&&(t.current.options.fontSize=c,o(c),localStorage.setItem("terminal_font_size",String(c)),p())},[p]),h=l=>{if(l.length<2)return 0;const c=l[0].clientX-l[1].clientX,m=l[0].clientY-l[1].clientY;return Math.sqrt(c*c+m*m)},n=V.useCallback(l=>{l.touches.length===2&&(f.current={initialDistance:h(l.touches),initialFontSize:i})},[i]),a=V.useCallback(l=>{if(l.touches.length===2){const c=h(l.touches),{initialDistance:m,initialFontSize:x}=f.current;if(m>0){const v=c/m,L=x*v;S(L)}}},[S]);return V.useEffect(()=>{if(!e.current)return;const l=new Nm.Terminal({fontSize:i,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0d1117",foreground:"#e6edf3",cursor:"#58a6ff",cursorAccent:"#0d1117",selectionBackground:"rgba(163, 113, 247, 0.3)",black:"#484f58",red:"#f85149",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#a371f7",cyan:"#39c5cf",white:"#b1bac4",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#e3b341",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#56d4dd",brightWhite:"#f0f6fc"},scrollback:1e3,cursorBlink:!0,allowProposedApi:!0});t.current=l;const c=new Um(l);c.enabled=localStorage.getItem("terminal_predictive_echo")==="on",u.current=c;const m=new Hm.FitAddon;r.current=m,l.loadAddon(m);let x="dom";try{const A=new $m.WebglAddon;A.onContextLoss(()=>{console.warn("[Terminal] WebGL context lost, falling back to canvas"),A.dispose();try{l.loadAddon(new Bh.CanvasAddon)}catch{}}),l.loadAddon(A),x="webgl"}catch{try{l.loadAddon(new Bh.CanvasAddon),x="canvas"}catch{x="dom"}}console.log(`[Terminal] Using ${x} renderer`),l.open(e.current),setTimeout(()=>{m.fit();const{cols:A,rows:H}=l;y(A,H)},0);const v=l.onData(A=>{c.handleInput(A),d(A)}),L=5;let C=0,b=!1;const E=s(A=>{A instanceof Uint8Array&&c.handleOutput(A),C++,C>=L&&!b&&(b=!0,g(50)),l.write((A instanceof Uint8Array,A),()=>{C--,C===0&&b&&(b=!1,g(51))})}),R=A=>{c.enabled=A.detail};window.addEventListener("predictive-echo-changed",R),window.addEventListener("resize",w);const k=window.visualViewport;k?.addEventListener("resize",w);const M=e.current;return M.addEventListener("touchstart",n,{passive:!0}),M.addEventListener("touchmove",a,{passive:!0}),()=>{E(),v.dispose(),window.removeEventListener("predictive-echo-changed",R),window.removeEventListener("resize",w),k?.removeEventListener("resize",w),_.current&&clearTimeout(_.current),M.removeEventListener("touchstart",n),M.removeEventListener("touchmove",a),l.dispose()}},[s,d,g,y,p,w,n,a]),P.jsx("div",{ref:e,className:"w-full h-full bg-bg-primary overflow-hidden",style:{padding:"4px"}})};function qm(){return V.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),P.jsx(ng,{children:P.jsx(ag,{children:P.jsx(Fm,{children:P.jsx(Km,{})})})})}Fo.createRoot(document.getElementById("root")).render(P.jsx(zf.StrictMode,{children:P.jsx(qm,{})}));</script>
    <style rel="stylesheet" crossorigin>/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */.xterm{cursor:text;position:relative;-moz-user-select:none;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::-moz-selection{color:transparent}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;-moz-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}html,body,#root{height:100dvh;width:100%;overflow:hidden;margin:0;padding:0}body{background-color:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.left-0{left:0}.top-0{top:0}.top-full{top:100%}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-3{margin-top:.75rem}.block{display:block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-1\.5{height:.375rem}.h-12{height:3rem}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[40px\]{height:40px}.h-\[50vh\]{height:50vh}.h-\[90vh\]{height:90vh}.h-full{height:100%}.max-h-\[200px\]{max-height:200px}.max-h-\[300px\]{max-height:300px}.max-h-\[400px\]{max-height:400px}.max-h-\[70vh\]{max-height:70vh}.max-h-\[80vh\]{max-height:80vh}.min-h-0{min-height:0px}.min-h-\[36px\]{min-height:36px}.w-1\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-2{width:.5rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-\[160px\]{min-width:160px}.min-w-\[32px\]{min-width:32px}.min-w-\[36px\]{min-width:36px}.max-w-\[120px\]{max-width:120px}.max-w-\[200px\]{max-width:200px}.max-w-lg{max-width:32rem}.max-w-sm{max-width:24rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-border-subtle>:not([hidden])~:not([hidden]){border-color:var(--border-subtle)}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.border-accent-blue{border-color:var(--accent-blue)}.border-accent-purple{border-color:var(--accent-purple)}.border-border-subtle{border-color:var(--border-subtle)}.border-t-transparent{border-top-color:transparent}.bg-accent-blue{background-color:var(--accent-blue)}.bg-accent-green{background-color:var(--accent-green)}.bg-accent-purple{background-color:var(--accent-purple)}.bg-accent-red{background-color:var(--accent-red)}.bg-bg-primary{background-color:var(--bg-primary)}.bg-bg-secondary{background-color:var(--bg-secondary)}.bg-bg-tertiary{background-color:var(--bg-tertiary)}.bg-black\/50{background-color:#00000080}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-border-subtle{background-color:var(--border-subtle)}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-text-muted{background-color:var(--text-muted)}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-\[env\(safe-area-inset-bottom\)\]{padding-bottom:env(safe-area-inset-bottom)}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-wider{letter-spacing:.05em}.text-accent-blue{color:var(--accent-blue)}.text-accent-green{color:var(--accent-green)}.text-accent-purple{color:var(--accent-purple)}.text-accent-red{color:var(--accent-red)}.text-border-subtle{color:var(--border-subtle)}.text-text-muted{color:var(--text-muted)}.text-text-primary{color:var(--text-primary)}.text-text-secondary{color:var(--text-secondary)}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.mask-gradient-right{mask-image:linear-gradient(to right,black 90%,transparent 100%);-webkit-mask-image:linear-gradient(to right,black 90%,transparent 100%)}.animate-in.fade-in{animation:fadeIn .2s ease-out forwards}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #21262d;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-red: #f85149;--accent-purple: #a371f7;--accent-orange: #d29922;--text-primary: #e6edf3;--text-secondary: #8b949e;--text-muted: #6e7681;--border-subtle: #30363d;--glow-ai: rgba(163, 113, 247, .15)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--bg-secondary)}::-webkit-scrollbar-thumb{background:var(--bg-tertiary);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--border-subtle)}::-moz-selection{background-color:var(--accent-purple);color:#fff}::selection{background-color:var(--accent-purple);color:#fff}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.placeholder\:text-text-muted::-moz-placeholder{color:var(--text-muted)}.placeholder\:text-text-muted::placeholder{color:var(--text-muted)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:start-\[2px\]:after{content:var(--tw-content);inset-inline-start:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:border:after{content:var(--tw-content);border-width:1px}.after\:border-gray-300:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.hover\:bg-bg-tertiary:hover{background-color:var(--bg-tertiary)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:text-accent-red:hover{color:var(--accent-red)}.hover\:text-text-primary:hover{color:var(--text-primary)}.focus\:border-accent-blue:focus{border-color:var(--accent-blue)}.focus\:border-accent-purple:focus{border-color:var(--accent-purple)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:bg-bg-tertiary:active{background-color:var(--bg-tertiary)}.active\:opacity-70:active{opacity:.7}.active\:opacity-80:active{opacity:.8}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-30:disabled{opacity:.3}.disabled\:opacity-50:disabled{opacity:.5}.peer:checked~.peer-checked\:bg-accent-green{background-color:var(--accent-green)}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:checked~.rtl\:peer-checked\:after\:-translate-x-full:where([dir=rtl],[dir=rtl] *):after{content:var(--tw-content);--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
